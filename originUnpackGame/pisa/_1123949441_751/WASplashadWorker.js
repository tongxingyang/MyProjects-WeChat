;(function(global){var __wxConfig = global.WXConfig;!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=179)}([function(e,t,n){n.r(t),n.d(t,"publish",(function(){return a.publish})),n.d(t,"subscribe",(function(){return r.subscribe})),n.d(t,"getSurroundedCallbacks",(function(){return i.getSurroundedCallbacks})),n.d(t,"callbackInvoke",(function(){return i.callbackInvoke})),n.d(t,"mainInvokeMethod",(function(){return i.mainInvokeMethod})),n.d(t,"invokeMethod",(function(){return i.invokeMethod})),n.d(t,"invokeMethodAsync",(function(){return i.invokeMethodAsync})),n.d(t,"invokeMethodWithPlugin",(function(){return i.invokeMethodWithPlugin})),n.d(t,"_invokeMethod",(function(){return i._invokeMethod})),n.d(t,"onMethod",(function(){return o.onMethod})),n.d(t,"beforeInvoke",(function(){return u})),n.d(t,"beforeInvokePromise",(function(){return l})),n.d(t,"beforeInvokeFail",(function(){return d})),n.d(t,"beforeInvokeComplete",(function(){return f})),n.d(t,"beforeInvokeCallback",(function(){return p})),n.d(t,"invoke",(function(){return h.invoke})),n.d(t,"on",(function(){return v.on})),n.d(t,"baseOperateWXData",(function(){return A}));var a=n(131),r=n(133),i=n(118),o=n(135),s=n(38),c=n(12);function u(e,t,n){var a=Object(c.paramCheck)(t,n);return!a||(d(e,t,"parameter error: "+a),!1)}function l(e,t){var n=Object(c.paramCheck)(e,t);if(n)throw new Error("parameter error: "+n)}function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3?arguments[3]:void 0;p({name:e,args:t,errMsg:n,errCode:a,success:!1})}function f(e){var t=e.name,n=e.args,a=void 0===n?{}:n,r=e.errMsg,i=void 0===r?"":r,o=e.res,c=void 0===o?{}:o;a=a||{};var u=t+":"+i,l=__errorTracer__.surroundThirdByTryCatch(a.complete||s.noop,"at api "+t+" complete callback function");c.errMsg=u,l(c)}function p(e){var t=e.name,n=e.args,a=void 0===n?{}:n,r=e.success,i=void 0===r||r,o=e.errMsg,u=void 0===o?"":o,l=e.errCode,d=e.res,f=void 0===d?{}:d;a=a||{};var p=i?t+":ok":t+":fail "+u,h=__errorTracer__.surroundThirdByTryCatch((i?a.success:a.fail)||s.noop,"at api "+t+" "+(i?"success":"fail")+" callback function"),v=__errorTracer__.surroundThirdByTryCatch(a.complete||s.noop,"at api "+t+" complete callback function");f.errMsg=p,Object(c.isNumber)(l)&&(f.errCode=l),h(f),v(f)}var h=n(85),v=n(136),g=(n(132),n(134),n(18)),y=n(1),m=n(6),b="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",_="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";function O(e){return function(t){return Object(c.isString)(t)&&t.length>e?t.substr(0,e):t}}function I(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(c.getDataType)(e);switch(n){case"Number":case"Boolean":return e;case"String":return O(512)(e).replace(/\|/g,"||").replace(/,/g,"|.");case"Error":return"[Error:"+I(e.message)+"|"+I(e.stack)+"]";case"Object":return t?Object.keys(e).map((function(t){return I(t)+"="+I(e[t],!1)})).sort((function(e,t){return e.length-t.length})).join("&")||"{}":"["+n+"]";default:return"["+n+"]"}}function S(e){var t=e.WXDataApiName,n=e.argument,a=e.isSuccess,r=e.invokeTime,i=e.costTime,o=e.result,s=e.errMsg,c=e.isConfirm,u=e.queueLength,l=e.wxdataQueueTimestamp,d=e.wxdataDequeueTimestamp,f=e.beginCGITimestamp,p=e.CGICallbackTimestamp,h=e.beginCGITimestampAfterConfirm,v=e.CGICallbackTimestampAfterConfirm,g=e.wxlibCallbackTimestamp,S=e.requestInQueue,E=e.requestingCount,w=e.cost1,C=e.cost2,k=e.cost3,T=e.cost4,A=e.cost5,P=e.cost6;Math.random()<.05&&setTimeout((function(){var e=m.default.currentNetworkType,D=y.default.appType+1e3,x=y.default.appLaunchInfo&&void 0!==y.default.appLaunchInfo.scene?y.default.appLaunchInfo.scene:0,R=[t,I(JSON.stringify(n)),a?1:0,r,i,e,I(o),D,x,b,_,s&&I(s)||"",c?1:0,u,w,C,k,T,A,P,0,S?1:0,E,r,l,d,f,p,h,v,g].map(O(1024)).join(",");Reporter.reportKeyValue({key:"WeAppOperateWXData",value:R})}),0)}Object(c.isString)(b)&&(b=b.replace(" ","")),Object(c.isString)(_)&&(_=_.replace(" ","-"));var E=0,w=wxNativeConsole.createLogger("baseOperateWXData"),C=["webapi_getuserinfo","webapi_getwerunstep_history","subscribemsg"],k=["webapi_getuserinfo","webapi_getuserallappauth","webapi_getadvert","webapi_getshareinfo"],T=["qbase_commapi","webapi_botdemo"];function A(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Object.assign({},e);n._isFromBaseOperateWXData=!0;var a=t.beforeAll,r=t.beforeSuccess,o=t.beforeFail,s=n.data&&n.data.api_name;C.includes(s)?n.requestInQueue=!0:n.requestInQueue=!1,k.includes(s)?n.isImportant=!0:n.isImportant=!1,T.includes(n.data&&n.data.api_name)&&(n.keepAlive=!0);var c={WXDataApiName:s,argument:n,invokeTime:Date.now(),requestInQueue:n.requestInQueue,requestingCount:++E};w.info(n.data.api_name+" _options.requestInQueue",n.requestInQueue);for(var u=arguments.length,l=new Array(u>2?u-2:0),d=2;d<u;d++)l[d-2]=arguments[d];i.invokeMethod.apply(void 0,["operateWXData",n,{beforeAll:function(e){var n=Date.now();E--,c.costTime=n-c.invokeTime;try{if(e&&e.data&&e.data.data?c.result=JSON.stringify(e.data):c.result=e.data,e.clientInfo&&"object"===Object(g.default)(e.clientInfo)){var r=e.clientInfo;Object.keys(r).forEach((function(e){c[e]=r[e]})),c.cost1=r.wxdataQueueTimestamp-c.invokeTime,c.cost2=r.wxdataDequeueTimestamp-r.wxdataQueueTimestamp,c.cost3=r.beginCGITimestamp-r.wxdataDequeueTimestamp,c.cost4=r.CGICallbackTimestamp-r.beginCGITimestamp,c.cost5=r.wxlibCallbackTimestamp-r.CGICallbackTimestamp,c.cost6=n-r.wxlibCallbackTimestamp}}catch(e){w.error(e)}"function"==typeof a&&a.call(t,e)},beforeSuccess:function(e){c.isSuccess=!0,n.data.data&&n.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=c),"function"==typeof r&&r.call(t,e),S(c)},beforeFail:function(e){c.isSuccess=!1,c.errMsg=e.errMsg,n.data.data&&n.data.data.__wxdataUseProfile__&&(e.__wxdataProfileInfo=c),"function"==typeof o&&o.call(t,e),S(c)}}].concat(l))}},function(e,t,n){n.r(t);var a=__wxConfig;t.default=a},function(e,t,n){n.r(t),n.d(t,"PLATFORM",(function(){return r})),n.d(t,"IS_DEVTOOLS",(function(){return i})),n.d(t,"IS_ANDROID",(function(){return o})),n.d(t,"IS_IOS",(function(){return s})),n.d(t,"IS_WINDOWS",(function(){return c})),n.d(t,"IS_MAC",(function(){return u})),n.d(t,"IS_MINA",(function(){return l})),n.d(t,"IS_PC",(function(){return d})),n.d(t,"debugEnabled",(function(){return f})),n.d(t,"HOST",(function(){return p})),n.d(t,"IS_HOST_SDK",(function(){return h})),n.d(t,"IS_HOST_WMPF",(function(){return v})),n.d(t,"IS_HOST_WECHAT",(function(){return g})),n.d(t,"IS_USE_NATIVE_MAP",(function(){return y}));var a=n(1),r=a.default.platform,i="devtools"===a.default.platform,o="android"===a.default.platform,s="ios"===a.default.platform,c="windows"===a.default.platform,u="mac"===a.default.platform,l="mina"===a.default.platform,d=c||u;function f(){if(a.default&&"debug"in a.default&&void 0!==a.default.debug)return!!a.default.debug}var p=a.default.host||{},h="SDK"===p.env,v="WMPF"===p.env,g="WeChat"===p.env,y=p.forceUseNativeMap||!1},function(e,t,n){n.r(t),n.d(t,"deviceInfo",(function(){return p})),n.d(t,"appRouteInfo",(function(){return h})),n.d(t,"getIndentityInfo",(function(){return v})),n.d(t,"getDeviceOrientation",(function(){return g})),n.d(t,"proxyReady",(function(){return m})),n.d(t,"deviceInfoLoaded",(function(){return _})),n.d(t,"loadDeviceInfoByManual",(function(){return O}));var a=n(2),r=n(42),i=n(113),o=n(91),s=n(15),c=n(63),u=n(41),l=n(1),d=n(23),f=n(65),p={startTime:new Date,gameAppId:"",deviceOrientation:"",screenWidth:0,screenHeight:0,systemVersion:"",wechatVersion:"",SDKVersion:"",SDKVersionTime:"",envVersion:"",brand:"",model:"",platform:a.PLATFORM,isWaGame:!0,isApp:!1,isIOS:a.IS_IOS,isAndroid:a.IS_ANDROID,isIPad:null,oaid:"",imei:"",idfa:"",common_device_id:"{}",adNetworkType:""},h={enterForegroundTime:new Date,gameDuration:0,currentScene:1011,weappPath:"index.html",lastWebviewId:0,currentWebviewId:0,currentOpenType:""},v=function(){return Object(d.pick)(p,["oaid","imei","idfa","common_device_id"])},g=function(){if(!p.isWaGame){var e=Object(r.getSystemInfoSync)();p.screenWidth=e.screenWidth,p.screenHeight=e.screenHeight,p.deviceOrientation=p.screenWidth>p.screenHeight?"landscape":"portrait"}return p.deviceOrientation},y=function(){},m=function(){return y()},b=function(){return new Promise((function(e){y=e}))},_=new Promise((function(e){l.default.onReady((function(){var t;p.startTime=new Date,p.deviceOrientation=Object(d.getInitDeviceOrientation)()||"",p.envVersion=l.default.envVersion;var n=Object(r.getStableSystemInfo)(),c=Object(r.getInitScreenSize)();p.screenWidth=c.screenWidth||0,p.screenHeight=c.screenHeight||0,p.systemVersion=n.system,p.wechatVersion=n.version,p.SDKVersion=n.SDKVersion,p.brand=n.brand,p.model=n.model,p.isIPad=null===(t=n.model)||void 0===t?void 0:t.includes("iPad"),p.isWaGame=Object(s.isGame)(),p.isApp=Object(s.isApp)();try{p.gameAppId=l.default.accountInfo.appId,p.SDKVersionTime=__libVersionInfo__.updateTime}catch(e){}Promise.all([new Promise((function(e){Object(i.getOAID)((function(t){p.oaid=t,e()}))})),new Promise((function(e){Object(i.getDeviceInfo)().then((function(t){var n=t.imei,r=t.oaid,i=t.commonid;a.IS_IOS?p.idfa=n:a.IS_ANDROID&&(p.oaid=r,p.imei=n),p.common_device_id=i||"{}",e(),b().then((function(){Object(o.reportAdMonitorData)(f.IDKEY.GET_DEVICEINFO_SUCCESS)}))})).catch((function(t){e(),b().then((function(){Object(o.reportAdMonitorData)(f.IDKEY.GET_DEVICEINFO_ERROR,t)}))}))}))]).then((function(){return e(p)}))}))})),O=function(e){for(var t=0,n=Object.keys(e);t<n.length;t++){var a=n[t];p[a]=e[a]}};try{Object(u.onAppRoute)((function(e){var t=e.webviewId,n=e.openType,a=e.path;p.isWaGame||(h.lastWebviewId=h.currentWebviewId,h.currentWebviewId=t||0,h.currentOpenType=n,h.weappPath=a)}))}catch(e){}Object(c._onShow)((function(e){var t=e.scene;h.enterForegroundTime=new Date,h.currentScene=t})),Object(c._onHide)((function(){h.gameDuration+=Date.now()-h.enterForegroundTime.getTime()}))},function(e,t,n){function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t);var a=n(69);t.default={lastRoute:"",lastOpenType:"",query:{},runningStatus:"active",navigatorLock:!1,openUrlLock:!1,possessingBackgroundAudioPlayer:!1,webviewEventCallback:null,hanged:!1,appStatus:a.AppStatus.FORE_GROUND,navigationBarTitleMap:{},currentNetworkType:""}},function(e,t,n){var a;n.r(t),n.d(t,"ACTIONS",(function(){return a})),n.d(t,"COMMON_EVENT",(function(){return v.COMMON_EVENT})),n.d(t,"ROOT_EVENT",(function(){return v.ROOT_EVENT})),n.d(t,"BUTTON_EVENT",(function(){return v.BUTTON_EVENT})),n.d(t,"TEXT_EVENT",(function(){return v.TEXT_EVENT})),n.d(t,"VIDEO_EVENT",(function(){return v.VIDEO_EVENT})),n.d(t,"FEEDBACK_EVENT",(function(){return v.FEEDBACK_EVENT})),n.d(t,"ENDPAGE_EVENT",(function(){return v.ENDPAGE_EVENT})),n.d(t,"CAROUSEL_EVENT",(function(){return v.CAROUSEL_EVENT})),n.d(t,"REWARDEDVIDEO_EVENT",(function(){return v.REWARDEDVIDEO_EVENT})),n.d(t,"CUSTOM_EVENT",(function(){return g.CUSTOM_EVENT})),n.d(t,"ROOT_TYPES",(function(){return r})),n.d(t,"LAYOUT_TYPES",(function(){return i})),n.d(t,"IMAGE_TYPES",(function(){return o})),n.d(t,"TEXT_TYPES",(function(){return s})),n.d(t,"BUTTON_TYPES",(function(){return c})),n.d(t,"VIDEO_TYPES",(function(){return u})),n.d(t,"FEEDBACK_TYPES",(function(){return l})),n.d(t,"COUNTDOWN_TYPES",(function(){return d})),n.d(t,"ENDPAGE_TYPES",(function(){return f})),n.d(t,"FOR_TYPES",(function(){return p})),n.d(t,"CAROUSEL_TYPES",(function(){return h})),n.d(t,"IDKEY",(function(){return b.CUSTOMAD_IDKEY})),n.d(t,"ERROR_CODE",(function(){return y})),n.d(t,"DOWNLOAD_STATE",(function(){return m})),n.d(t,"AD_TYPE_IMAGE",(function(){return _})),n.d(t,"AD_TYPE_VIDEO",(function(){return O})),n.d(t,"scalableStyles",(function(){return I})),function(e){e.HIDEAD="hideAd",e.SETSTYLE="setStyle",e.REPORTIDKEY="reportIdKey",e.TRIGGEREVENT="triggerEvent",e.SETEXPRVARS="setExprVar",e.VIDEOTOGGLEMUTED="videoToggleMuted",e.VIDEOPLAY="videoPlay",e.VIDEOPAUSE="videoPause",e.VIDEOSTOP="videoStop",e.BUTTONSETTEXT="buttonSetText",e.RELOADAD="reloadAd",e.REPORTMMDATA="reportMMData",e.ENDPAGEHIDE="endPageHide",e.IMAGESETSRC="imageSetSrc",e.TEXTSETTEXT="textSetText",e.ANIMATE="animate",e.TRIGGERBTNCLICK="triggerBtnClick",e.CHANGEMULTISHOW="changeMultiShow",e.LANDAD="landAd",e.SPLASHSKIPAD="splashSkipAd",e.ADDCHILDREN="addChildren",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(a||(a={}));var r,i,o,s,c,u,l,d,f,p,h,v=n(108),g=n(70);!function(e){e[e.COMMON=1]="COMMON",e[e.FULLSCREEN=2]="FULLSCREEN"}(r||(r={})),function(e){e[e.COMMON=1]="COMMON",e[e.ROW=2]="ROW",e[e.COLUMN=3]="COLUMN",e[e.PROPORTION=4]="PROPORTION"}(i||(i={})),function(e){e[e.COMMON=1]="COMMON",e[e.ICON=2]="ICON",e[e.AD=3]="AD"}(o||(o={})),function(e){e[e.COMMON=1]="COMMON",e[e.NICKNAME=2]="NICKNAME",e[e.DESC=3]="DESC",e[e.RELATION=4]="RELATION"}(s||(s={})),function(e){e[e.COMMON=1]="COMMON",e[e.LOGICCOMMON=2]="LOGICCOMMON"}(c||(c={})),function(e){e[e.COMMON=1]="COMMON",e[e.AD=2]="AD"}(u||(u={})),function(e){e[e.COMMON=1]="COMMON",e[e.SIMPLE=2]="SIMPLE"}(l||(l={})),function(e){e[e.COMMON=1]="COMMON"}(d||(d={})),function(e){e[e.COMMON=1]="COMMON"}(f||(f={})),function(e){e[e.NONE=0]="NONE",e[e.COMMON=1]="COMMON",e[e.ADS=2]="ADS"}(p||(p={})),function(e){e[e.NONE=0]="NONE",e[e.ROWLOOP=1]="ROWLOOP",e[e.COLUMNLOOP=2]="COLUMNLOOP"}(h||(h={}));var y,m,b=n(130);!function(e){e[e.ERR_RENDER=2001]="ERR_RENDER",e[e.ERR_TPL_NONE=2002]="ERR_TPL_NONE",e[e.ERR_TPL_PARSE=2003]="ERR_TPL_PARSE",e[e.ERR_SHOW_FAILED1=2004]="ERR_SHOW_FAILED1",e[e.ERR_SHOW_FAILED2=2005]="ERR_SHOW_FAILED2"}(y||(y={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ING=1]="ING",e[e.PAUSE=2]="PAUSE",e[e.SUCCESS=3]="SUCCESS",e[e.INSTALLED=4]="INSTALLED"}(m||(m={}));var _="image",O="video",I=["left","top","right","bottom","width","height","maxWidth","maxHeight","minWidth","minHeight","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","borderWidth","fontSize","lineHeight","borderRadius"]},function(e,t,n){function a(e){return(a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){function a(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){n.r(t),n.d(t,"surroundByTryCatchFactory",(function(){return b})),n.d(t,"paramCheck",(function(){return p.paramCheck})),n.d(t,"getDataType",(function(){return p.getDataType})),n.d(t,"isObject",(function(){return p.isObject})),n.d(t,"getRealRoute",(function(){return _})),n.d(t,"convertProtocolPath",(function(){return O})),n.d(t,"getRealRouteWithProtocol",(function(){return I})),n.d(t,"getRouteDomain",(function(){return S})),n.d(t,"routesHaveSameDomain",(function(){return E})),n.d(t,"urlEncodeFormData",(function(){return w})),n.d(t,"getQueryString",(function(){return C})),n.d(t,"addQueryStringToUrl",(function(){return k})),n.d(t,"validateUrl",(function(){return T})),n.d(t,"assign",(function(){return A})),n.d(t,"encodeUrlQuery",(function(){return P})),n.d(t,"transWxmlToHtml",(function(){return D})),n.d(t,"removeHtmlSuffixFromUrl",(function(){return x})),n.d(t,"AppServiceSdkKnownError",(function(){return R})),n.d(t,"ThirdScriptError",(function(){return j})),n.d(t,"extend",(function(){return M})),n.d(t,"arrayBufferToBase64",(function(){return F})),n.d(t,"base64ToArrayBuffer",(function(){return W})),n.d(t,"blobToArrayBuffer",(function(){return V})),n.d(t,"convertObjectValueToString",(function(){return U})),n.d(t,"guid",(function(){return G})),n.d(t,"checkClientVersion",(function(){return Y})),n.d(t,"renameProperty",(function(){return q})),n.d(t,"compareVersion",(function(){return z})),n.d(t,"successCallback",(function(){return K})),n.d(t,"successWithMessage",(function(){return X})),n.d(t,"failWithMessage",(function(){return Z}));var a=n(5),r=n(4),i=n(14),o=n(17),s=n(8),c=n(104);var u=n(88);function l(e){var t="function"==typeof Map?new Map:void 0;return(l=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,a)}function a(){return Object(u.default)(e,arguments,Object(s.default)(this).constructor)}return a.prototype=Object.create(e.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),Object(c.default)(a,e)})(e)}var d=n(18),f=n(1),p=n(12),h=n(2),v=n(58);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.default)(e);if(t){var r=Object(s.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.default)(this,n)}}var y=/^[-+a-zA-Z0-9]+:\/\//,m=/^__[-+a-zA-Z0-9]+__\//;function b(e,t){return __errorTracer__.wrapSystemFunction("appServiceSDKScriptError",t,e)}function _(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(n&&(t=D(t)),0===t.indexOf("/"))return t.substr(1);if(0===t.indexOf("./"))return _(e,t.substr(2),!1);var a,r,i=t.split("/");for(a=0,r=i.length;a<r&&".."===i[a];a++);i.splice(0,a);var o=e.length>0?e.split("/"):[];o.splice(o.length-a-1,a+1);var s=o.concat(i),c=s.join("/");return c}function O(e){var t=e.match(y);if(!t)return e;var n=t[0];if("plugin://"===n){var a=n.length,r=e.indexOf("/",a);if(r>=0){var i=e.slice(a,r),o=f.default.plugins&&f.default.plugins[i]?f.default.plugins[i].provider:i;e=e.slice(0,a)+o+e.slice(r)}var s=e.indexOf("?");s<0&&(s=e.length);var c=e.slice(0,s),u=exparser.Component._list[c];if(!u)throw new R('Page "'+c+'" is not found');e=u.is+e.slice(s)}else if("plugin-private://"===n){var l=e.indexOf("?");l<0&&(l=e.length);var d=e.slice(0,l);e="/"+__appServiceEngine__.convertComponentAliasToRoute(d)+e.slice(l)}else{if("wx://"!==n)throw new R('Unknown URL protocol "'+n+'"');e="/__wx__/"+e.slice(5)}return e}function I(e,t){for(var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];y.test(t);)t=O(t);return _(e,t,n)}function S(e){var t=e.match(y),n=e.match(m),a="";if(t){var r=t[0];if("plugin://"===r){var i=r.length,o=e.indexOf("/",i);if(o>=0){var s=e.slice(i,o);a=f.default.plugins&&f.default.plugins[s]?f.default.plugins[s].provider:s}}else if("plugin-private://"===r){var c=r.length,u=e.indexOf("/",c);if(u>=0)a=e.slice(c,u)}else"wx://"===r&&(a="//")}if(n){var l=n[0];if("__plugin__/"===l){var d=l.length,p=e.indexOf("/",d);if(p>=0)a=e.slice(d,p)}else"__wx__/"===l&&(a="//")}return a}function E(e,t){var n=S(t);return!n||S(__virtualDOM__.convertRouteToComponentAlias(e))===n}function w(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("object"!==Object(d.default)(e))return e;var n=[];for(var a in e)if(Object(v.hasOwnProperty)(e,a))if(t)try{n.push(encodeURIComponent(a)+"="+encodeURIComponent(e[a]))}catch(t){n.push(a+"="+e[a])}else n.push(a+"="+e[a]);return n.join("&")}function C(e){var t={};if(e.indexOf("?")>-1){var n=e.indexOf("?")+1,a=e.substring(n);if(a.indexOf("#")>-1&&(a=a.substring(0,a.indexOf("#"))),!a)return t;for(var r=a.split("&"),i=0;i<r.length;i++){var o=r[i].split("=");t[o[0]]=o[1]}}return t}function k(e,t){if("string"==typeof e&&"object"===Object(d.default)(t)&&null!==t&&Object.keys(t).length>0){var n=e.split("?");return n[0]+"?"+w(A((n[1]||"").split("&").reduce((function(e,t){if("string"==typeof t&&t.length>0){var n=t.split("="),a=n[0],r=n[1];e[a]=r}return e}),{}),Object.keys(t).reduce((function(e,n){return"object"===Object(d.default)(t[n])?e[encodeURIComponent(n)]=encodeURIComponent(JSON.stringify(t[n])):e[encodeURIComponent(n)]=encodeURIComponent(t[n]),e}),{})))}return e}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"http";return"http"===t?/^(http|https):\/\/.*/i.test(e):"websocket"===t?/^(ws|wss):\/\/.*/i.test(e):void 0}function A(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((function(e,t){for(var n in t)e[n]=t[n];return e}),{})}function P(e){if("string"==typeof e){var t=e.split("?"),n=t[0],a=(t[1]||"").split("&").reduce((function(e,t){if("string"==typeof t&&t.length>0){var n=t.split("="),a=n[0],r=n[1];e[a]=r}return e}),{}),r=[];for(var i in a)Object(v.hasOwnProperty)(a,i)&&r.push(i+"="+encodeURIComponent(a[i]));return r.length>0?n+"?"+r.join("&"):e}return e}function D(e){if("string"!=typeof e)return e;var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t}function x(e){return"string"==typeof e?-1!==e.indexOf("?")?e.replace(/\.html\?/,"?"):e.replace(/\.html$/,""):e}var R=function(e){Object(i.default)(n,e);var t=g(n);function n(e){var a;return Object(r.default)(this,n),(a=t.call(this,"APP-SERVICE-SDK:"+e)).type="AppServiceSdkKnownError",a}return Object(a.default)(n)}(l(Error)),j=function(e){Object(i.default)(n,e);var t=g(n);function n(e){var a;return Object(r.default)(this,n),(a=t.call(this,""+e)).type="ThirdScriptError",a}return Object(a.default)(n)}(l(Error));function M(e,t){for(var n in t)e[n]=t[n];return e}var N="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",L=L||function(e){for(var t,n,a=String(e),r="",i=0,o=N;a.charAt(0|i)||(o="=",i%1);r+=o.charAt(63&t>>8-i%1*8)){if((n=a.charCodeAt(i+=3/4))>255)throw new Error('"btoa" failed');t=t<<8|n}return r},B=B||function(e){var t=String(e).replace(/=+$/,""),n="";if(t.length%4==1)throw new Error('"atob" failed');for(var a,r,i=0,o=0;r=t.charAt(o++);~r&&(a=i%4?64*a+r:r,i++%4)?n+=String.fromCharCode(255&a>>(-2*i&6)):0)r=N.indexOf(r);return n};function F(e){for(var t="",n=new Uint8Array(e),a=n.byteLength,r=0;r<a;r++)t+=String.fromCharCode(n[r]);return L(t)}function W(e){for(var t=B(e),n=t.length,a=new Uint8Array(n),r=0;r<n;r++)a[r]=t.charCodeAt(r);return a.buffer}function V(e,t){var n=new FileReader;n.onload=function(){t(this.result)},n.readAsArrayBuffer(e)}function U(e){return Object.keys(e).reduce((function(t,n){return"string"==typeof e[n]?t[n]=e[n]:"number"==typeof e[n]?t[n]=e[n]+"":t[n]=Object.prototype.toString.apply(e[n]),t}),{})}function G(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}var H=f.default.clientVersion||1;function Y(e,t){switch(h.PLATFORM){case"devtools":return!0;case"ios":return H>e;case"android":return H>t;default:return!1}}function q(e,t,n){!1!==Object(p.isObject)(e)&&t!==n&&Object(v.hasOwnProperty)(e,t)&&(e[n]=e[t],delete e[t])}function z(e,t){e=e.split("."),t=t.split(".");for(var n=Math.max(e.length,t.length);e.length<n;)e.push("0");for(;t.length<n;)t.push("0");for(var a=0;a<n;a++){var r=parseInt(e[a],10),i=parseInt(t[a],10);if(r>i)return 1;if(r<i)return-1}return 0}function K(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;"function"==typeof e.success&&e.success(t),"function"==typeof e.complete&&e.complete(t)}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?{errMsg:t}:void 0;"function"==typeof e.success&&e.success(n),"function"==typeof e.complete&&e.complete(n)}function Z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=t?{errMsg:t}:void 0;"function"==typeof e.fail&&e.fail(n),"function"==typeof e.complete&&e.complete(n)}},function(e,t,n){n.r(t),n.d(t,"CRT_SIZE",(function(){return r})),n.d(t,"POS_ID_MAP",(function(){return i})),n.d(t,"POS_TYPE_MAP",(function(){return o})),n.d(t,"EXPOSURE_TYPE_MAP",(function(){return s})),n.d(t,"ANALYSE_INFO_DEBUG_TYPE",(function(){return c})),n.d(t,"FLOW_EXP_MAP",(function(){return u})),n.d(t,"PRODUCT_TYPE",(function(){return l})),n.d(t,"WX_AD_PATH",(function(){return d})),n.d(t,"SPLASHAD_FETCH_LOG",(function(){return f})),n.d(t,"ID_KEY_MAP",(function(){return p})),n.d(t,"SPLASHAD_IDKEY",(function(){return h})),n.d(t,"AD_TYPE_MAP",(function(){return v})),n.d(t,"REPORT_TYPE_MAP",(function(){return g})),n.d(t,"REPORT_EXPOSURE_TYPE_MAP",(function(){return y})),n.d(t,"NET_TYPE_MAP",(function(){return m})),n.d(t,"SPLASHAD_ERROR_CODE",(function(){return b})),n.d(t,"BIG_PIC_TITLE_MAP",(function(){return _}));var a=n(7);n.d(t,"CUSTOMAD_IDKEY",(function(){return a.IDKEY})),n.d(t,"CUSTOMAD_ERROR_CODE",(function(){return a.ERROR_CODE}));var r={CRT_SIZE_REWARD_VEDIO169:559,CRT_SIZE_REWARD_VEDIO916:560,CRT_SIZE_REWARD_LANDINGPAGE:910,CRT_SIZE_SPLASH_AD:1003,CRT_SIZE_IN_TEXT_DESC_CARD:841,CRT_SIZE_MULTI_POS_NEW_PIC:927,CRT_SIZE_MULTI_POS_VIDEO:929,CRT_SIZE_GRID:972,CRT_SIZE_BIG_PIC:998,CRT_SIZE_VERTICAL_VIDEO_NEW_916:721},i={banner:"8040321819858439","incentive-video":"1030436212907001",interstitialAd:"3030046789020061",grid:"7070083760581921",splashAd:"5060180989186180",wxAppVideo:"5010365819466098",wxAppPreVideoAd:"7090665964306299",customAd:"4071202390577885"},o={banner:3,"incentive-video":1,interstitialAd:4,grid:7,splashAd:8,customAd:9},s={banner:"showed","incentive-video":"viewable",interstitialAd:"viewable",grid:"viewable",splashAd:"viewable",customAd:"viewable"},c={"incentive-video":3,banner:4,interstitialAd:5,grid:6,customAd:7},u={94794:"widget_gray_batchload_app",94801:"widget_gray_vb_check",94804:"widget_gray_time_limit",94805:"widget_gray_video_download_v2",95489:"widget_gray_unlimit_fetch_tag",95767:"widget_gray_rewardedpage_exposure",100036:"widget_gray_report_install_follow",100332:"widget_gray_rewardedpage_exposure_v2",101246:"widget_gray_reward_new_endpage",104502:"widget_gray_reward_use_gauss_blur",104504:"widget_gray_reward_use_expand_style",105786:"widget_gray_banner_limit_click",105818:"widget_gray_splash_data_channel_parallel",107048:"widget_gray_splash_click_area_switch"},l={WECHAT:23,OPEN_PLATFORM_APP_MOB:12,APPLE_APP_STORE:19,MINI_GAME:46,JD_URL:25,WE_CHAT_SHOP:30,WE_CHAT_ARTICLE:29,GDT_WE_CHAT_ARTICLE:31},d="wxfile://ad",f=d+"/adinfos.txt",p={splashAd:1288,customAd:1390},h={dataLoadSuccess:0,dataLoadFail:1,dataPreloadSuccess:2,dataPreloadFail:3,handleDataFail:4,launchAcceptShouldShow:5,menuAcceptShouldShow:6,readFileFail:7,launchShowSplashAdSuccess:8,menuShowSplashAdSuccess:9,showSplashAdFail:10,firstRenderFail:11,firstInsertFail:12,secondRenderFail:13,secondInsertFail:14,iosThirdInsertFail:15,checkAdStateFail:16,adOfflineClose:17,readFileDataFail:18,firstShowSuccess:19,showSplashAdMenuSuccess:20,showSplashAdMenuFail:21,secondShowSuccess:22,removeFileDataFail:23,landingPageFail:24,frequencyControlFail:25,frequencyControlReturn:26,bulkCopyFileFail:27,getAdInfosFail:28,getAidFail:29,setExposureTagFail:30,NO_ADINFOS:31,NO_AID:32,MATERIAL_NOT_READY:33,CHECK_AD_STATUS_ERROR:34,CRT_ORIENTATION_NOT_SURE:35,EXPOSURE_TIMES_LIMIT:36,START_CHECK_AD_STATUS:37,CHECK_AD_STATUS_SUCCESS:38,OTHER_ADS_EMIT_FETCH:39,WRITE_ADINFOS_SUCCESS:40,WRITE_ADINFOS_FAIL:41,SHOW_SPLASH_FAIL:10},v={banner:5,"incentive-video":6,interstitialAd:8,customAd:9,grid:13,splashAd:14},g={click:1,exposure:0},y={showed:0,viewable:1,incentiveVideoCard:2},m={wifi:1,"2g":2,"3g":3,"4g":4,"5g":5},b={NO_ADINFOS:2001,NO_AID:2002,MATERIAL_NOT_READY:2003,CHECK_AD_STATUS_ERROR:2004,CRT_ORIENTATION_NOT_SURE:2005,EXPOSURE_TIMES_LIMIT:2006,SHOW_SPLASH_FAIL:2007},_={12:"应用",19:"应用",23:"公众号",25:"商品",29:"活动",30:"商品",31:"活动",36:"优惠",39:"店铺",43:"活动",46:"小游戏",47:"优惠"}},function(e,t,n){n.r(t),function(e){n.d(t,"getDataType",(function(){return r})),n.d(t,"safeInstanceOf",(function(){return i})),n.d(t,"isString",(function(){return o})),n.d(t,"isNumber",(function(){return s})),n.d(t,"isBoolean",(function(){return c})),n.d(t,"isUndefined",(function(){return u})),n.d(t,"isNull",(function(){return l})),n.d(t,"isNaN",(function(){return d})),n.d(t,"isFinite",(function(){return f})),n.d(t,"isInfinity",(function(){return p})),n.d(t,"isInteger",(function(){return h})),n.d(t,"isObject",(function(){return v})),n.d(t,"isNonNullObject",(function(){return g})),n.d(t,"isJustObject",(function(){return y})),n.d(t,"isArray",(function(){return m})),n.d(t,"isFunction",(function(){return b})),n.d(t,"isDate",(function(){return _})),n.d(t,"isRegExp",(function(){return O})),n.d(t,"isError",(function(){return I})),n.d(t,"isSymbol",(function(){return S})),n.d(t,"isMap",(function(){return E})),n.d(t,"isWeakMap",(function(){return w})),n.d(t,"isSet",(function(){return C})),n.d(t,"isWeakSet",(function(){return k})),n.d(t,"isPromise",(function(){return T})),n.d(t,"isEmptyObject",(function(){return A})),n.d(t,"isArrayBuffer",(function(){return P})),n.d(t,"isDataView",(function(){return D})),n.d(t,"isTypedArray",(function(){return x})),n.d(t,"isVirtualNode",(function(){return R})),n.d(t,"isVirtualText",(function(){return j})),n.d(t,"paramCheck",(function(){return M})),n.d(t,"safelyToString",(function(){return N}));var a=Object.prototype.toString;function r(e){return a.call(e).slice(8,-1)}function i(e,t){return null!=e&&(e instanceof t||null!=e.constructor&&e.constructor.name===t.name)}var o=function(e){return"String"===r(e)},s=function(e){return"Number"===r(e)},c=function(e){return!0===e||!1===e||"Boolean"===r(e)},u=function(e){return void 0===e},l=function(e){return null===e},d=Number.isNaN||function(e){return e!=e},f=Number.isFinite||function(t){return s(t)&&e.isFinite(t)},p=function(e){return s(e)&&Math.abs(e)===1/0},h=function(e){return f(e)&&Math.floor(e)===e},v=function(e){return"Object"===r(e)},g=function(e){return v(e)&&!l(e)},y=function(e){return"Object"===r(e)},m=Array.isArray||function(e){return"Array"===r(e)},b=function(e){return"function"==typeof e},_=function(e){return"Date"===r(e)},O=function(e){return"RegExp"===r(e)},I=function(e){return"Error"===r(e)},S=function(e){return"Symbol"===r(e)},E=function(e){return"Map"===r(e)},w=function(e){return"WeakMap"===r(e)},C=function(e){return"Set"===r(e)},k=function(e){return"WeakSet"===r(e)},T=function(e){return"Promise"===r(e)},A=function(e){for(var t in e)return!1;return!0},P=function(e){return"ArrayBuffer"===r(e)},D=function(e){return"DataView"===r(e)},x=function(e){return ArrayBuffer.isView(e)&&!D(e)},R=function(e){return e&&"WxVirtualNode"===e.type},j=function(e){return e&&"WxVirtualText"===e.type};function M(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"parameter",a=r(t),i=r(e);if(i!==a)return n+" should be "+a+" instead of "+i+";";var o="";switch(a){case"Object":Object.keys(t).forEach((function(a){o+=M(e[a],t[a],n+"."+a)}));break;case"Array":if(e.length<t.length)return n+" should have at least "+t.length+" item;";for(var s=0;s<t.length;++s)o+=M(e[s],t[s],n+"["+s+"]")}return o}function N(e){try{return JSON.stringify(e)}catch(e){return e.message,""}}}.call(this,n(64))},function(e,t,n){e.exports=n(164)},function(e,t,n){n.r(t),n.d(t,"default",(function(){return r}));var a=n(104);function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Object(a.default)(e,t)}},function(e,t,n){n.r(t),n.d(t,"surroundByTryCatchFactory",(function(){return d})),n.d(t,"surroundWXByTryCatch",(function(){return p})),n.d(t,"timeout",(function(){return h})),n.d(t,"deepFreeze",(function(){return v})),n.d(t,"EventEmitter",(function(){return g})),n.d(t,"getDataLength",(function(){return y})),n.d(t,"checkAPIAvailable",(function(){return m})),n.d(t,"isGame",(function(){return b})),n.d(t,"isApp",(function(){return _})),n.d(t,"promisify",(function(){return O})),n.d(t,"transformToCamelCaseVar",(function(){return I})),n.d(t,"transformToUnderScoreCaseVar",(function(){return S})),n.d(t,"capitalizeFirstLetter",(function(){return E})),n.d(t,"skipURLCheck",(function(){return w})),n.d(t,"versionCompare",(function(){return C})),n.d(t,"executeOnlyOnce",(function(){return k})),n.d(t,"filterObject",(function(){return T})),n.d(t,"hideInnerRequest",(function(){return A})),n.d(t,"isSinglePageMode",(function(){return P})),n.d(t,"isIn3rdApp",(function(){return D})),n.d(t,"isIsolateContext",(function(){return x})),n.d(t,"compareClientVersion",(function(){return R}));var a=n(4),r=n(5),i=n(18),o=n(34),s=n(1),c=n(29),u=n(2),l=n(12);function d(e,t,n){return function(){try{return e.apply(e,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:n,error:e,extend:t})}}}}function f(e,t,n,a){Object.defineProperty(e,n,{get:function(){var e=this;return"function"==typeof t[n]?d((function(){return Object(c.checkWxInterfaceSupported)(n),Object(c.wrappedByCheckPermissionInTap)(n,t[n]).apply(e,arguments)}),"wx."+n,a):t[n]},enumerable:!0,configurable:!0})}var p=function(e,t){var n={};for(var a in e)f(n,e,a,t);return n},h=function(e,t){var n=t.timeout;if("number"==typeof n){var a=!1,r=setTimeout((function(){var e={errMsg:"request timeout"};a=!0,"function"==typeof t.fail&&t.fail(e),"function"==typeof t.complete&&t.complete(e)}),n),i=["success","fail","complete"].reduce((function(e,n){return e[n]=function(e){a||(clearTimeout(r),"function"==typeof t[n]&&t[n](e))},e}),{});e(Object.assign({},t,i))}else e(t)};function v(e){return Object.freeze(e),Object.getOwnPropertyNames(e).forEach((function(t){var n;try{n=e[t]}catch(e){}"object"!==Object(i.default)(n)&&"function"!=typeof n||Object.isFrozen(n)||v(n)})),e}var g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{maxListeners:2e3};Object(a.default)(this,e),this.emitter=new o.default(t),this.callbackMap="undefined"!=typeof WeakMap?new WeakMap:{},this.originalCallbackMap=new WeakMap}return Object(r.default)(e,[{key:"emit",value:function(e,t){this.emitter.emit(e,t)}},{key:"on",value:function(e,t){if(t&&"function"==typeof t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at "+e+" callback function");this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}},{key:"off",value:function(e,t){var n=this;if(t&&"function"==typeof t){var a=this.callbackMap.get(t);this.emitter.off(e,a),this.callbackMap.delete(t),this.originalCallbackMap.delete(a)}else this.emitter.listeners(e).forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}},{key:"listeners",value:function(e){return this.emitter.listeners(e)}}]),e}();function y(e){return"string"==typeof e?e.length:"object"===Object(i.default)(e)&&null!==e&&"number"==typeof e.byteLength?e.byteLength:0}function m(e){var t="unknown";if(s.default.appContactInfo&&s.default.appContactInfo.operationInfo&&s.default.appContactInfo.operationInfo.jsonInfo&&s.default.appContactInfo.operationInfo.jsonInfo.apiAvailable){var n=s.default.appContactInfo.operationInfo.jsonInfo.apiAvailable;"number"==typeof n[e]&&(t=1===n[e])}return t}function b(){return 4===s.default.appType}function _(){return 0===s.default.appType}function O(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,a){e(Object.assign(t,{success:n,fail:a}))}))}}function I(e){return e.replace(/_+(\w)/g,(function(){return arguments[2]?arguments[1].toUpperCase():arguments[0]}))}function S(e){return e.split(/(?=[A-Z])/).join("_").toLowerCase()}function E(e){return e.charAt(0).toUpperCase()+e.slice(1)}function w(){return u.IS_DEVTOOLS?!s.default.urlCheck:!0===s.default.debug}function C(e,t){var n,a=String(e).split(".").map((function(e){return parseInt(e,10)})),r=String(t).split(".").map((function(e){return parseInt(e,10)})),i=Math.max(a.length,r.length);if(null!=e&&null!=t){if(0===e.length&&0===t.length)return 0;if(0===e.length)return-1;if(0===t.length)return 1;for(var o=0;o<i&&0===(n=s(a[o],r[o]));o++);return n}function s(e,t){return"number"!=typeof e&&(e=0),"number"!=typeof t&&(t=0),e>t?1:e<t?-1:0}console.error("versionCompare()参数格式错误")}function k(e){var t=!1;return function(){if(!t)return t=!0,e.apply(void 0,arguments)}}function T(e,t){return t.reduce((function(t,n){return Object(l.isUndefined)(e[n])||(t[n]=e[n]),t}),{})}function A(e){if(!u.IS_DEVTOOLS||"string"!=typeof e)return e;if(/^https?:\/\//.test(e)){var t=e.split("?"),n=t[1]||"",a=n.length>0?"&":"";e=t[0]+"?"+n+a+"devtools_ignore=true"}return e}function P(){return s.default.appLaunchInfo&&"singlePage"===s.default.appLaunchInfo.mode}function D(){var e=s.default.host;return e&&"WeChat"!==e.env&&"WMPF"!==e.env}var x=function(){return s.default.isIsolateContext};function R(e,t){var n=function(e){if("string"==typeof e){for(var t=e.split(".").map((function(e){return parseInt(e,10)}));t.length<4;)t.push(0);return function(e){for(var t=e.length,n=0,a=0;a<t;++a)n=n<<8|e[a];return n}(t.slice(0,4))}return"number"==typeof e?268435455&e:e};return(e=n(e))>(t=n(t))?1:e<t?-1:0}},function(e,t,n){function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){n.r(t),n.d(t,"default",(function(){return i}));var a=n(18),r=n(9);function i(e,t){return!t||"object"!==Object(a.default)(t)&&"function"!=typeof t?Object(r.default)(e):t}},function(e,t,n){function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){n.r(t);var a="undefined"!=typeof NativeGlobal?NativeGlobal:{};t.default=a},function(e,t,n){n.r(t),n.d(t,"ImageData",(function(){return u})),n.d(t,"concatId",(function(){return l})),n.d(t,"subscribeOnce",(function(){return d})),n.d(t,"uint8ClampedArrayToBase64",(function(){return f})),n.d(t,"base64ToUint8ClampedArray",(function(){return g})),n.d(t,"getImageRealPath",(function(){return y})),n.d(t,"getImageRealPathForDevtools",(function(){return m})),n.d(t,"wrapImageObject",(function(){return b})),n.d(t,"normalizeTouch",(function(){return _})),n.d(t,"injectExtraTouchInfo",(function(){return O})),n.d(t,"pipe",(function(){return I})),n.d(t,"shouldUseOldCanvas",(function(){return E}));var a=n(0),r=n(10),i=n(6),o=n(1),s=n(2),c=n(15),u=void 0!==u?u:function(e,t,n){"[object Uint8ClampedArray]"===Object.prototype.toString.call(e)?(Object.defineProperty(this,"data",{value:e,enumerable:!0}),Object.defineProperty(this,"width",{value:t,enumerable:!0}),Object.defineProperty(this,"height",{value:n,enumerable:!0}),this.constructor.prototype.constructor=function(){},this.__proto__&&"undefined"!=typeof Symbol&&(this.__proto__[Symbol.toStringTag]="ImageData")):console.error("parameter 1 is not of type 'Uint8ClampedArray'")};function l(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r="canvas_"+e+"_"+t+"_"+n+"_";return a&&a!==__virtualDOM__.getRootNodeId(e)&&(r+=a),r}function d(e){var t=[],n=1;return Object(a.subscribe)(e,(function(e){for(var n=-1,a=0;a<t.length;a++){var r=t[a],i=r[0],o=r[1];if(i.cid===e.cid&&i.canvasId===e.canvasId){n=a,o(e);break}}n>=0&&t.splice(n,1)})),function(e,a){e.cid=n++,t.push([e,a])}}function f(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return(window.__global||window).btoa(t)}var p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",h=/^(?:[A-Za-z\d+/]{4})*?(?:[A-Za-z\d+/]{2}(?:==)?|[A-Za-z\d+/]{3}=?)?$/,v="undefined"!=typeof window&&window.atob||function(e){if(e=String(e).replace(/[\t\n\f\r ]+/g,""),!h.test(e))throw new TypeError("Failed to execute 'atob' on 'Window': The string to be decoded is not correctly encoded.");var t;e+="==".slice(2-(3&e.length));for(var n,a,r="",i=0;i<e.length;)t=p.indexOf(e.charAt(i++))<<18|p.indexOf(e.charAt(i++))<<12|(n=p.indexOf(e.charAt(i++)))<<6|(a=p.indexOf(e.charAt(i++))),r+=64===n?String.fromCharCode(t>>16&255):64===a?String.fromCharCode(t>>16&255,t>>8&255):String.fromCharCode(t>>16&255,t>>8&255,255&t);return r};function g(e){for(var t=v(e),n=t.length,a=new Uint8ClampedArray(n),r=0;r<n;r++)a[r]=t.charCodeAt(r);return a}function y(e,t,n,a){if(/^(http|https):\/\//.test(e)||/^\s*data:image\//.test(e)||""===e)return e;if(!/wxfile:\/\//.test(e))if(n||t){n=n.split("/")[0];var o=__virtualDOM__.getNodeById(t,a),s=o&&o.is||"";e=n?0===e.indexOf("/")?__virtualDOM__.getPluginRoutePrefix(n)+Object(r.getRealRoute)(s,e,!1).replace(/\.html$/,""):Object(r.getRealRoute)(__virtualDOM__.convertComponentAliasToRoute(s),e,!1).replace(/\.html$/,""):Object(r.getRealRoute)(s,e,!1).replace(/\.html$/,"")}else e=Object(r.getRealRoute)(i.default.lastRoute,e,!1).replace(/.html$/,"");return e}function m(e,t,n,a){return/^(http|https):\/\//.test(e)||/^\s*data:image\//.test(e)||""===e?e:"/__pageframe__/"+y(e,t,n,a)}function b(e,t){var n=e.setSrc.bind(e),a=e.getSrc.bind(e),r=e.getReferrerPolicy?e.getReferrerPolicy.bind(e):function(){},i=e.setReferrerPolicy?e.setReferrerPolicy.bind(e):function(){};return delete e.getSrc,delete e.setSrc,delete e.getReferrerPolicy,delete e.setReferrerPolicy,Object.defineProperty(e,"src",{enumerable:!0,set:function(e){var a=y(e,t.nodeId,t.pluginId,t.webviewId);n(a)},get:function(){return a()}}),Object.defineProperty(e,"referrerPolicy",{enumerable:!0,set:function(e){i(e)},get:function(){return r()}}),e}function _(e){return e&&e.length>0&&e.forEach((function(e){e.x=e.clientX||e.pageX,e.y=e.clientY||e.pageY,delete e.target})),e}function O(e){return e&&e.length>0&&e.forEach((function(e){e.clientX=e.x,e.clientY=e.y,e.pageX=e.x,e.pageY=e.y})),e}function I(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];for(var i=0;i<t.length;++i){var o=t[i];"function"==typeof o&&(e=0===i?o.apply(null,a):o.call(null,e))}return e}}var S=!1;function E(){if(s.IS_IOS&&Object(c.isIn3rdApp)()){var e=255&Number(o.default.host.version);if(e>=16&&e<=31)return!0}return o.default.clientVersion>=385881088&&o.default.clientVersion<=385881343&&S}o.default.onReady((function(){Object(a.invokeMethod)("getPermissionBytes",{indexes:[977],success:function(e){e.permissionBytes&&1===e.permissionBytes[0]&&(S=!0)}})}))},function(e,t,n){n.r(t),n.d(t,"getEventManager",(function(){return c}));var a=n(18),r=n(34),i=new r.default({maxListeners:20,newListener:!1}),o=new r.default({maxListeners:20,newListener:!1});var s={};function c(e){if(e=e[0].toUpperCase()+e.slice(1),!s[e]){var t=new WeakMap;s[e]={getGlobalListeners:function(){return i.listeners(e)},getInternalListeners:function(){return o.listeners(e)},emit:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];o.emit.apply(o,[e].concat(n)),i.emit.apply(i,[e].concat(n))},emitGlobal:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];i.emit.apply(i,[e].concat(n))},emitInternal:function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];o.emit.apply(o,[e].concat(n))},internalOnMethod:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};"function"==typeof t&&(n.prepend?n.once?o.prependOnceListener(e,t):o.prependListener(e,t):n.once?o.once(e,t):o.on(e,t))},internalOffMethod:function(t){"function"==typeof t&&o.off(e,t)},onMethod:function(n){var r=function(e,t){return"function"!=typeof t?(console.error("on"+e+" should accept a function instead of "+Object(a.default)(t)),null):__errorTracer__.surroundThirdByTryCatch(t,"at api on"+e+" callback function")}(e,n);r&&(t.set(n,r),i.on(e,r))},offMethod:function(n){if(function(e,t){return!t||"function"==typeof t||(console.error("off"+e+" should accept a function instead of "+Object(a.default)(t)),!1)}(e,n))if(n){if(t.has(n)){var r=t.get(n);t.delete(n),i.off(e,r)}}else t=new WeakMap,i.removeAllListeners(e)}}}return s[e]}},function(e,t,n){n.r(t),n.d(t,"Component",(function(){return d})),n.d(t,"getPrivateThis",(function(){return c})),n.d(t,"removePrivateThis",(function(){return l})),n.d(t,"init",(function(){return f})),n.d(t,"create",(function(){return u}));var a=n(5),r=n(4),i=n(33),o=n(24),s=new WeakMap,c=function(e){return s.get(e)},u=function e(t){var n=this,a=c(this),r={view:i.View,text:i.Text,image:i.Image,video:i.Video,"image-previewer":i.ImagePreviewer}[t.name],s="";t.attributes.id?s=Object(o.splitLineToCamelCase)(t.attributes.id):wxNativeConsole.error(t.name+" 缺少id");var u=Object.keys(t.attributes).reduce((function(e,n){var r=t.attributes[n],i=Object(o.splitLineToCamelCase)(n);return"id"===n?(e.style=Object.assign(e.style||{},a.style[s]),e):"class"===n?(e.style=r.split(/\s+/).reduce((function(e,t){return Object.assign(e,a.style[t])}),e.style||{}),e):(/\{\{.+\}\}/.test(r)||(e[i]=""===r||"true"===r||"false"!==r&&r),e)}),{});u.name=s;var l=new r(u);return a[s]=l,t.children.forEach((function(t){var a=e.call(n,t);l.add(a)})),l},l=function(e){s.delete(e)},d=Object(a.default)((function e(){Object(r.default)(this,e);s.set(this,{})})),f=function(e,t,n){var a=c(this);a.xom=e,a.style=t,a.state=n,u.call(this,e)}},function(e,t,n){n.r(t),n.d(t,"pick",(function(){return a.pick})),n.d(t,"omit",(function(){return a.omit})),n.d(t,"isObject",(function(){return a.isObject})),n.d(t,"mergeDeep",(function(){return a.mergeDeep})),n.d(t,"getMembers",(function(){return a.getMembers})),n.d(t,"get",(function(){return a.get})),n.d(t,"flatten",(function(){return a.flatten})),n.d(t,"cloneDeep",(function(){return a.cloneDeep})),n.d(t,"isRootElement",(function(){return s})),n.d(t,"getChildren",(function(){return c})),n.d(t,"getVisibleChildren",(function(){return u})),n.d(t,"traverseElement",(function(){return l})),n.d(t,"getDataFromPaths",(function(){return d})),n.d(t,"urlEncode",(function(){return y})),n.d(t,"urlDecode",(function(){return m})),n.d(t,"getQueryString",(function(){return b})),n.d(t,"addUrlParam",(function(){return _})),n.d(t,"allSettled",(function(){return O})),n.d(t,"getInitDeviceOrientation",(function(){return E})),n.d(t,"isVideoMode",(function(){return C})),n.d(t,"isLiveMode",(function(){return k})),n.d(t,"isLiveRoomMode",(function(){return T})),n.d(t,"isLiveNoticeMode",(function(){return A}));var a=n(99),r=n(62);function i(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var s=function(e){var t;return e.parent===r.Layout||!(null===(t=e.parent)||void 0===t?void 0:t.referComponent)},c=function(e){return Object.keys(e.children).map((function(t){return e.children[t]}))},u=function(e){return c(e).filter((function(e){return!0!==(null==e?void 0:e.style.hidden)}))},l=function e(t,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"downward";"downward"===a&&n(t);var r,o=i(c(t));try{for(o.s();!(r=o.n()).done;){var s=r.value;e(s,n,a)}}catch(e){o.e(e)}finally{o.f()}"upward"===a&&n(t)},d=function(e,t){var n,r=i(t);try{for(r.s();!(n=r.n()).done;){var o=n.value,s=o.path,c=o.value,u=o.condition;if(void 0===u||u){var l=c||(s?Object(a.get)(e,s):"");if(l)return l}}}catch(e){r.e(e)}finally{r.f()}return null},f=n(36);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var v=63,g=function(e){var t=e.toString(16).toUpperCase();return t.length<2?"%0"+t:"%"+t},y=function(e){if(!e)return"";var t,n=[],a=/[ \r\n!*"'();:@&=+$,/?%#[\]<>{}|`^\\\u0080-\uffff]/,r=p(String(e));try{for(r.s();!(t=r.n()).done;){var i=t.value;if(i.match(a)){var o=i.codePointAt?i.codePointAt(0):i.charCodeAt(0);o<128?n.push(g(o)):o<2048?n.push([g(192+(o>>6)),g(128+(o&v))].join("")):o<65536?n.push([g(224+(o>>12)),g(128+(o>>6&v)),g(128+(o&v))].join("")):o<2097152&&n.push([g(240+(o>>18)),g(128+(o>>12&v)),g(128+(o>>6&v)),g(128+(o&v))].join(""))}else n.push(i)}}catch(e){r.e(e)}finally{r.f()}return n.join("")},m=function(e){if(!e)return"";for(var t=function(e){if(!e)throw new Error("invalid text")},n=function(e){return String.fromCodePoint?String.fromCodePoint(e):String.fromCharCode(e)},a=e.replace(/%[a-fA-F0-9]{2}/gi,(function(e){return String.fromCharCode(parseInt(e.replace("%",""),16))})),r=0,i="";r<a.length;){var o=a.charCodeAt(r);if(o<128)i+=n(o),r+=1;else if(o>=192&&o<224){t(r+1<a.length),i+=n((31&o)<<6|a.charCodeAt(r+1)&v),r+=2}else if(o<240){t(r+2<a.length);var s=a.charCodeAt(r+1),c=a.charCodeAt(r+2);i+=n((15&o)<<12|(s&v)<<6|c&v),r+=3}else{t(r+3<a.length);var u=a.charCodeAt(r+1),l=a.charCodeAt(r+2),d=a.charCodeAt(r+3);i+=n([(7&o)<<18,(u&v)<<12,(l&v)<<6,d&v].reduce((function(e,t){return e|t}),0)),r+=4}}return i},b=function(e){var t={};if(e.indexOf("?")>-1){var n=e.indexOf("?")+1,a=e.substring(n);a.indexOf("#")>-1&&(a=a.substring(0,a.indexOf("#")));var r,i=p(a.split("&"));try{for(i.s();!(r=i.n()).done;){var o=r.value.split("="),s=Object(f.default)(o,2),c=s[0],u=s[1];t[c]=m(u)}}catch(e){i.e(e)}finally{i.f()}}return t},_=function(e,t){if(!e)return"";if(!t)return e;var n=e.split("#"),a=n[0].indexOf("?")>-1?"&":"?",r="",i=Object.keys(t);if(i.length>0){var o,s=p(i);try{for(s.s();!(o=s.n()).done;){var c=o.value;r=r.concat(c+"="+y(t[c])+"&")}}catch(e){s.e(e)}finally{s.f()}return r.length>0&&(r=r.substring(0,r.length-1)),n[0]+a+r+(n[1]?"#"+n[1]:"")}return e},O=function(e){return Promise.all(e.map((function(e){return e.then((function(e){return{status:"fulfilled",value:e}})).catch((function(e){return{status:"rejected",reason:e}}))})))},I=n(42),S=n(1),E=function(){var e=Object(I.getInitScreenSize)();return e.screenWidth&&e.screenHeight?e.screenWidth>e.screenHeight?"landscape":"portrait":S.default.deviceOrientation&&/^landscape/.test(S.default.deviceOrientation)?"landscape":S.default.deviceOrientation||"portrait"},w=n(65),C=function(e){return e===w.LiveVideoMode.VIDEO},k=function(e){return e===w.LiveVideoMode.LIVE},T=function(e,t){return k(e)&&t===w.LiveVideoSubMode.ROOM},A=function(e,t){return k(e)&&t===w.LiveVideoSubMode.RESERVATION}},function(e,t,n){n.r(t),n.d(t,"contain",(function(){return r})),n.d(t,"timeout",(function(){return i})),n.d(t,"logReport",(function(){return o})),n.d(t,"log",(function(){return s})),n.d(t,"truncate",(function(){return c})),n.d(t,"splitLineToCamelCase",(function(){return u})),n.d(t,"filterUndefined",(function(){return d})),n.d(t,"hex",(function(){return f})),n.d(t,"promisify",(function(){return l})),n.d(t,"throttle",(function(){return p}));var a=n(18),r=function(e){var t,n,a,r=e.outer,i=void 0===r?{width:0,height:0}:r,o=e.inner,s=void 0===o?{width:0,height:0}:o,c=e.maxScale,u=void 0===c?1e3:c,l=e.minScale,d=void 0===l?0:l,f=e.side,p=i.width/i.height,h=s.width/s.height,v=i.width/s.width,g=i.height/s.height,y=p>h?g:v;return"width"===f?y=v:"height"===f&&(y=g),t=y,n=d,a=u,y=Math.min(Math.max(n,t),a),s.width*=y,s.height*=y,i.width=Math.max(i.width,s.width),i.height=Math.max(i.height,s.height),{scale:y,outer:i,inner:s}},i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new Promise((function(t){setTimeout(t,e)}))},o=function(){},s=function(){},c=function(e,t){for(var n="",a=0,r=0;r<e.length;r++){if((a+=/[\u4e00-\u9fa5]/.test(e[r])?2:1)>t){n+="...";break}n+=e[r]}return n},u=function(e){return e.split("-").map((function(e,t){return 0===t?e:e[0].toUpperCase()+e.slice(1)})).join("")},l=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(n,a){e(Object.assign(t,{success:n,fail:a}))}))}},d=function e(t){return Object.keys(t).reduce((function(n,r){var i=t[r],o=Object(a.default)(i);return"object"===o&&null!==i?n[r]=e(i):"undefined"!==o&&(n[r]=t[r]),n}),{})},f=function(e){var t=null;return!/^#/.test(e)||7!==e.length&&9!==e.length?null!==(t=/^(rgb|rgba)\((.+)\)/.exec(e))?"#"+t[2].split(",").map((function(e,t){return e=e.trim(),1===(e=(e=3===t?Math.floor(255*parseFloat(e)):parseInt(e,10)).toString(16)).length&&(e="0"+e),e})).join(""):"#00000000":e},p=function(e,t,n){var a,r,i,o=null,s=0;n||(n={});var c=function(){s=!1===n.leading?0:Date.now(),o=null,i=e.apply(a,r),o||(a=r=null)};return function(){var u=Date.now();s||!1!==n.leading||(s=u);var l=t-(u-s);return a=this,r=arguments,l<=0||l>t?(clearTimeout(o),o=null,s=u,i=e.apply(a,r),o||(a=r=null)):o||!1===n.trailing||(o=setTimeout(c,l)),i}}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return i}));var a=n(0),r=n(2);function i(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:function(){},s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:function(){};return function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n=o(c),Object(a.baseOperateWXData)(Object.assign({},c,{data:Object.assign({api_name:t},i,n?{data:n}:void 0),requestInQueue:!c.hasOwnProperty("requestInQueue")||Boolean(c.requestInQueue)}),{beforeAll:function(t){t.errMsg=t.errMsg.replace("operateWXData",e)},beforeSuccess:function(e){if(r.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data.data){e.rawData=e.data.data;var t=JSON.parse(e.data.data);e=Object.assign(e,t)}e.data.signature&&(e.signature=e.data.signature),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data,e=s(e)}})}}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));var a=n(119);var r=n(144),i=n(103);function o(e){return function(e){if(Array.isArray(e))return Object(a.default)(e)}(e)||Object(r.default)(e)||Object(i.default)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},function(e,t,n){n.r(t),n.d(t,"openUrl",(function(){return l})),n.d(t,"openADCanvas",(function(){return d})),n.d(t,"navigateToMiniProgram",(function(){return f})),n.d(t,"operateWXData",(function(){return h})),n.d(t,"adOperateWXData",(function(){return p})),n.d(t,"showSplashAd",(function(){return v})),n.d(t,"closeSplashAd",(function(){return g})),n.d(t,"showSplashAdMenu",(function(){return y})),n.d(t,"splashAdFirstStepViewLayoutStateChange",(function(){return m})),n.d(t,"splashAdAllViewLayoutStateChange",(function(){return b})),n.d(t,"fs",(function(){return u._fs}));var a=n(0),r=n(24),i=n(40),o=n(10),s=n(37),c=n(2),u=n(84),l=Object(r.promisify)((function(e){var t=e.url,n=e.adInfo,r=e.adUxInfo,i={url:t,adInfo:n,success:e.success,fail:e.fail,complete:e.complete};r&&(i.adUxInfo=r),Object(a.invokeMethod)("private_openUrl",i)})),d=Object(r.promisify)((function(e){var t=e.canvasInfo,n=e.posType,r=e.success,o=e.fail,s=e.complete;Object(a.invokeMethod)("openADCanvas",{canvasId:t.canvas_id,preLoad:0,noStore:0,extraData:JSON.stringify({pos_type:n}),adInfoXml:Object(i.htmlDecode)(t.ad_info_xml),openFirstSightVoice:1,success:r,fail:o,complete:s})})),f=Object(r.promisify)((function(e){var t=e.appId,n=e.path,r=e.traceid,i=e.aid,s=e.adInfo,c=e.adUxInfo,u=e.success,l=e.fail,d=e.complete,f=r+":"+i,p={appId:t,path:Object(o.transWxmlToHtml)(n).trim(),scene:1095,sourcetype:1,sceneNote:f,adInfo:s,success:u,fail:l,complete:d};c&&(p.adUxInfo=c),Object(a.invokeMethod)("navigateToMiniProgram",p)})),p=Object(r.promisify)(function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.beforeInvoke)("adOperateWXData",r,{apiName:""})){var i={api_name:r.apiName,data:r.reqData||{},operate_directly:e},o={data:i,isImportant:!0===n,requestInQueue:!r.hasOwnProperty("requestInQueue")||Boolean(r.requestInQueue)};Object(a.invokeMethod)("adOperateWXData",Object.assign({},o,r),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("adOperateWXData",t))},beforeSuccess:function(e){c.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.respData=e.data,delete e.data}})}}}(!1,"adOperateWXDataForAd")),h=Object(r.promisify)(Object(s.constructOperateWXData)(!1,"operateWXDataForAd"));function v(e){Object(a._invokeMethod)("showSplashAd",e)}function g(e){Object(a._invokeMethod)("closeSplashAd",e)}function y(e){Object(a._invokeMethod)("showSplashAdMenu",e)}function m(e){Object(a._invokeMethod)("splashAdFirstStepViewLayoutStateChange",e)}function b(e){Object(a._invokeMethod)("splashAdAllViewLayoutStateChange",e)}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return r}));var a=n(8);function r(e,t,n){return(r="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(a.default)(e)););return e}(e,t);if(r){var i=Object.getOwnPropertyDescriptor(r,t);return i.get?i.get.call(n):i.value}})(e,t,n||e)}},function(e,t,n){n.r(t),n.d(t,"publish",(function(){return d.publish})),n.d(t,"subscribe",(function(){return d.subscribe})),n.d(t,"getSurroundedCallbacks",(function(){return d.getSurroundedCallbacks})),n.d(t,"callbackInvoke",(function(){return d.callbackInvoke})),n.d(t,"mainInvokeMethod",(function(){return d.mainInvokeMethod})),n.d(t,"invokeMethod",(function(){return d.invokeMethod})),n.d(t,"invokeMethodAsync",(function(){return d.invokeMethodAsync})),n.d(t,"invokeMethodWithPlugin",(function(){return d.invokeMethodWithPlugin})),n.d(t,"_invokeMethod",(function(){return d._invokeMethod})),n.d(t,"onMethod",(function(){return d.onMethod})),n.d(t,"beforeInvoke",(function(){return d.beforeInvoke})),n.d(t,"beforeInvokePromise",(function(){return d.beforeInvokePromise})),n.d(t,"beforeInvokeFail",(function(){return d.beforeInvokeFail})),n.d(t,"beforeInvokeComplete",(function(){return d.beforeInvokeComplete})),n.d(t,"beforeInvokeCallback",(function(){return d.beforeInvokeCallback})),n.d(t,"invoke",(function(){return d.invoke})),n.d(t,"on",(function(){return d.on})),n.d(t,"baseOperateWXData",(function(){return d.baseOperateWXData})),n.d(t,"operateWXDataFactory",(function(){return f.default})),n.d(t,"noop",(function(){return p})),n.d(t,"checkUrlInConfig",(function(){return h})),n.d(t,"setWxInterfaceDisabled",(function(){return g})),n.d(t,"checkWxInterfacePermission",(function(){return y})),n.d(t,"checkWxInterfaceSupported",(function(){return m})),n.d(t,"setWxInterfaceIsInvokeInTap",(function(){return _})),n.d(t,"unsetWxInterfaceIsInvokeInTap",(function(){return O})),n.d(t,"wrappedByCheckPermissionInTap",(function(){return E}));var a=n(18),r=n(10),i=n(2),o=n(105),s={sample:{invokeWebviewMethod:null,drawCanvas:null,createContext:null,createCanvasContext:null,canvasToTempFilePath:null,canvasGetImageData:null,canvasPutImageData:null,getShareInfo:null,pageScrollTo:null,chooseInvoiceTitle:null,ShareInfoStorage:null,arrayBufferToBase64:null,base64ToArrayBuffer:null,openSetting:null,getExtConfig:null,chooseMedia:null,chooseWeChatContact:null,uploadEncryptedFileToCDN:null,onUploadEncryptedFileToCDNProgress:null,getExtConfigSync:null,showShareMenu:null,hideShareMenu:null,updateShareMenu:null,openUrl:null,setNavigationBarColor:null,setNavigationBarAlpha:null,_getRealRoute:null,vibrateShort:null,vibrateLong:null,getSetting:null,checkIsSupportFacialRecognition:null,startFacialRecognitionVerify:null,startFacialRecognitionVerifyAndUploadVideo:null,sendBizRedPacket:null,sendGoldenRedPacket:null,openGoldenRedPacketDetail:null,showRedPackage:null,addPhoneContact:null,setScreenBrightness:null,getScreenBrightness:null,shareToWeRun:null,getWeRunData:null,uploadWeRunData:null,canIUse:null,setPageStyle:null,triggerGettingWidgetData:null,navigateToMiniProgram:null,navigateToDevMiniProgram:null,navigateBackMiniProgram:null,exitMiniProgram:null,setNavigationBarRightButton:null,onTapNavigationBarRightButton:null,setTopBarText:null,setTabBarBadge:null,removeTabBarBadge:null,showTabBarRedDot:null,hideTabBarRedDot:null,showTabBar:null,hideTabBar:null,setTabBarStyle:null,setTabBarItem:null,setEnableDebug:null,captureScreen:null,onUserCaptureScreen:null,setKeepScreenOn:null,checkIsSupportSoterAuthentication:null,startSoterAuthentication:null,checkIsSoterEnrolledInDevice:null,openDeliveryList:null,reportIDKey:null,reportKeyValue:null,setNavigationBarTitle:null,showNavigationBarLoading:null,hideNavigationBarLoading:null,startPullDownRefresh:null,stopPullDownRefresh:null,operateWXData:null,getOpenDeviceId:null,makeBluetoothPair:null,openBluetoothAdapter:null,closeBluetoothAdapter:null,getBluetoothAdapterState:null,startBluetoothDevicesDiscovery:null,stopBluetoothDevicesDiscovery:null,getBluetoothDevices:null,getConnectedBluetoothDevices:null,createBLEConnection:null,setBLEMTU:null,closeBLEConnection:null,getBLEDeviceServices:null,getBLEDeviceCharacteristics:null,notifyBLECharacteristicValueChanged:null,notifyBLECharacteristicValueChange:null,readBLECharacteristicValue:null,writeBLECharacteristicValue:null,onBluetoothDeviceFound:null,onBLEConnectionStateChanged:null,onBLEConnectionStateChange:null,onBLECharacteristicValueChange:null,onBluetoothAdapterStateChange:null,offBluetoothAdapterStateChange:null,offBluetoothDeviceFound:null,offBLEConnectionStateChanged:null,offBLEConnectionStateChange:null,offBLECharacteristicValueChange:null,createBLEPeripheralServer:null,onBLEPeripheralConnectionStateChanged:null,offBLEPeripheralConnectionStateChanged:null,startBeaconDiscovery:null,stopBeaconDiscovery:null,getBeacons:null,onBeaconUpdate:null,onBeaconServiceChange:null,startWifi:null,stopWifi:null,getWifiList:null,getConnectedWifi:null,connectWifi:null,presetWifiList:null,setWifiList:null,onGetWifiList:null,onWifiConnected:null,offGetWifiList:null,offWifiConnected:null,onEvaluateWifi:null,getHCEState:null,startHCE:null,stopHCE:null,sendHCEMessage:null,onHCEMessage:null,startLocalServiceDiscovery:null,stopLocalServiceDiscovery:null,onLocalServiceFound:null,offLocalServiceFound:null,onLocalServiceLost:null,offLocalServiceLost:null,onLocalServiceDiscoveryStop:null,offLocalServiceDiscoveryStop:null,onLocalServiceResolveFail:null,offLocalServiceResolveFail:null,redirectTo:null,reLaunch:null,navigateTo:null,switchTab:null,navigateBack:null,_triggerBeforeUnloadPage:null,_triggerBeforeShareAppMessage:null,navigateBackApplication:null,navigateBackNative:null,launchApplication:null,getStorage:null,getStorageSync:null,setStorage:null,setStorageSync:null,removeStorage:null,removeStorageSync:null,clearStorage:null,clearStorageSync:null,getStorageInfo:null,getStorageInfoSync:null,getBackgroundFetchData:null,onBackgroundFetchData:null,request:null,connectSocket:null,closeSocket:null,sendSocketMessage:null,onSocketOpen:null,onSocketClose:null,onSocketMessage:null,onSocketError:null,uploadFile:null,downloadFile:null,addNativeDownloadTask:null,chooseImage:null,previewImage:null,previewMedia:null,getImageInfo:null,saveImageToPhotosAlbum:null,startRecord:null,stopRecord:null,playVoice:null,pauseVoice:null,stopVoice:null,onVoicePlayEnd:null,chooseVideo:null,saveVideoToPhotosAlbum:null,getVideoInfo:null,compressVideo:null,getLocation:null,openLocation:null,chooseLocation:null,choosePoi:null,onLocationChange:null,offLocationChange:null,onLocationChangeError:null,offLocationChangeError:null,startLocationUpdateBackground:null,startLocationUpdate:null,stopLocationUpdate:null,getNetworkType:null,onNetworkStatusChange:null,getSystemInfo:null,getSystemInfoSync:null,getBatteryInfo:null,getBatteryInfoSync:null,startAccelerometer:null,stopAccelerometer:null,onAccelerometerChange:null,startCompass:null,stopCompass:null,onCompassChange:null,reportAction:null,getBackgroundAudioManager:null,getRecorderManager:null,getBackgroundAudioPlayerState:null,playBackgroundAudio:null,pauseBackgroundAudio:null,seekBackgroundAudio:null,stopBackgroundAudio:null,onBackgroundAudioPlay:null,onBackgroundAudioPause:null,onBackgroundAudioStop:null,join1v1Chat:null,setEnable1v1Chat:null,joinVoIPChat:null,exitVoIPChat:null,updateVoIPChatMuteConfig:null,onVoIPChatMembersChanged:null,onVoIPChatSpeakersChanged:null,onVoIPChatInterrupted:null,offVoIPChatMembersChanged:null,offVoIPChatSpeakersChanged:null,offVoIPChatInterrupted:null,onVoIPVideoMembersChanged:null,offVoIPVideoMembersChanged:null,onVoIPChatStateChanged:null,offVoIPChatStateChanged:null,subscribeVoIPVideoMembers:null,login:null,checkSession:null,authorize:null,getUserInfo:null,getUserProfile:null,requestFacetoFacePayment:null,requestPayment:null,requestPersonalPay:null,requestJointPayment:null,getWCPayOverseaPrepayRequest:null,requestH5Transaction:null,openWCPayOverseaPaymentReceive:null,handleWCPayOverseaWalletBuffer:null,requestVerifyUserIdentity:null,verifyPaymentPassword:null,bindPaymentCard:null,requestPaymentToBank:null,requestVirtualPayment:null,openOfflinePayView:null,openWCPayCardList:null,requestMallPayment:null,requestOrderPayment:null,addCard:null,openCard:null,scanCode:null,openQRCode:null,scanItem:null,chooseAddress:null,saveFile:null,openDocument:null,getSavedFileList:null,getSavedFileInfo:null,getFileInfo:null,removeSavedFile:null,getFileSystemManager:null,chooseContact:null,removeUserCloudStorage:null,setUserCloudStorage:null,makePhoneCall:null,makeVoIPCall:null,onAppRoute:null,onAppRouteDone:null,onAppEnterBackground:null,onAppEnterForeground:null,onAppUnhang:null,onPageReload:null,onPageNotFound:null,offPageNotFound:null,onThemeChange:null,offThemeChange:null,onAppShow:null,offAppShow:null,onAppHide:null,offAppHide:null,onError:null,offError:null,onUnhandledRejection:null,offUnhandledRejection:null,getLaunchOptionsSync:null,getEnterOptionsSync:null,createAnimation:null,createInnerAudioContext:null,createAudioContext:null,createVideoContext:null,createMapContext:null,createCameraContext:null,createLivePlayerContext:null,createLivePusherContext:null,onWebviewEvent:null,onNativeEvent:null,hideKeyboard:null,onKeyboardHeightChange:null,offKeyboardHeightChange:null,getPublicLibVersion:null,showModal:null,showToast:null,hideToast:null,showLoading:null,hideLoading:null,showActionSheet:null,reportAnalytics:null,getClipboardData:null,setClipboardData:null,createSelectorQuery:null,createIntersectionObserver:null,updatePerfData:null,traceEvent:null,onMemoryWarning:null,offMemoryWarning:null,getUpdateManager:null,createWorker:null,voiceSplitJoint:null,uploadSilkVoice:null,downloadSilkVoice:null,getResPath:null,setResPath:null,env:null,appStatus:null,hanged:null,getLogManager:null,getRealtimeLogManager:null,onWindowResize:null,offWindowResize:null,setPageOrientation:null,loadFontFace:null,setInnerAudioOption:null,addWeRunData:null,setBackgroundColor:null,setBackgroundTextStyle:null,getMenuButtonBoundingClientRect:null,calRqt:null,getAvailableAudioSources:null,reportMonitor:null,faceVerifyForPay:null,chooseInvoice:null,startDeviceMotionListening:null,stopDeviceMotionListening:null,onDeviceMotionChange:null,startGyroscope:null,stopGyroscope:null,onGyroscopeChange:null,secureTunnel:null,startCustomFacialRecognitionVerify:null,startCustomFacialRecognitionVerifyAndUploadVideo:null,getAccountInfoSync:null,setCookies:null,getCookies:null,nextTick:null,chooseMultiMedia:null,chooseMessageFile:null,getLabInfo:null,setLabInfo:null,compressImage:null,shareAppMessageForFakeNative:null,downloadApp:null,installDownloadApp:null,getAppInstallState:null,queryDownloadAppTask:null,cancelDownloadAppTask:null,resumeDownloadAppTask:null,pauseDownloadAppTask:null,onDownloadAppStateChange:null,downloadAppForIOS:null,offGyroscopeChange:null,offDeviceMotionChange:null,offCompassChange:null,offAccelerometerChange:null,offUserCaptureScreen:null,offNetworkStatusChange:null,offHCEMessage:null,offBeaconUpdate:null,offBeaconServiceChange:null,requestSubscribeMessage:null,hideHomeButton:null,getBLEDeviceRSSI:null,checkIsOpenAccessibility:null,addPhoneCalendar:null,addPhoneRepeatCalendar:null,updateWeChatApp:null,getRandomValues:null,shareFileMessage:null,shareVideoMessage:null,addFileToFavorites:null,addVideoToFavorites:null,showShareImageMenu:null,searchContacts:null},ui:{invokeWebviewMethod:0,drawCanvas:20,createContext:20,createCanvasContext:20,canvasToTempFilePath:20,canvasGetImageData:20,canvasPutImageData:20,getShareInfo:30,pageScrollTo:30,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:20,openSettingForPlugin:30,getExtConfig:0,chooseMedia:20,chooseWeChatContact:20,uploadEncryptedFileToCDN:10,onUploadEncryptedFileToCDNProgress:10,getExtConfigSync:0,showShareMenu:30,hideShareMenu:30,updateShareMenu:30,openUrl:20,setNavigationBarColor:30,setNavigationBarAlpha:30,hideHomeButton:30,_getRealRoute:20,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:10,startFacialRecognitionVerify:20,startFacialRecognitionVerifyAndUploadVideo:20,sendBizRedPacket:10,sendGoldenRedPacket:10,openGoldenRedPacketDetail:10,showRedPackage:10,addPhoneContact:10,setScreenBrightness:20,getScreenBrightness:20,shareToWeRun:20,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:0,setPageStyle:30,triggerGettingWidgetData:10,navigateToMiniProgram:30,navigateToDevMiniProgram:30,navigateBackMiniProgram:30,exitMiniProgram:30,setNavigationBarRightButton:20,onTapNavigationBarRightButton:20,setTopBarText:30,setTabBarBadge:30,removeTabBarBadge:30,showTabBarRedDot:30,hideTabBarRedDot:30,showTabBar:30,hideTabBar:30,setTabBarStyle:30,setTabBarItem:30,setEnableDebug:30,captureScreen:30,onUserCaptureScreen:30,offUserCaptureScreen:30,setKeepScreenOn:10,checkIsSupportSoterAuthentication:10,startSoterAuthentication:10,checkIsSoterEnrolledInDevice:10,openDeliveryList:20,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:30,showNavigationBarLoading:30,hideNavigationBarLoading:30,startPullDownRefresh:30,stopPullDownRefresh:30,operateWXData:10,getOpenDeviceId:10,makeBluetoothPair:10,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceRSSI:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:30,reLaunch:30,navigateTo:30,switchTab:30,navigateBack:30,_triggerBeforeUnloadPage:30,_triggerBeforeShareAppMessage:30,navigateBackApplication:30,navigateBackNative:0,launchApplication:30,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:10,chooseImage:20,previewImage:20,previewMedia:20,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:20,stopRecord:20,playVoice:20,pauseVoice:20,stopVoice:20,onVoicePlayEnd:20,chooseVideo:20,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:20,openLocation:20,chooseLocation:20,choosePoi:20,onLocationChange:20,offLocationChange:20,onLocationChangeError:20,offLocationChangeError:20,startLocationUpdateBackground:20,startLocationUpdate:20,stopLocationUpdate:20,getNetworkType:0,onAppRoute:30,onAppRouteDone:30,onAppEnterBackground:30,onAppEnterForeground:30,onAppUnhang:30,onPageReload:30,onPageNotFound:30,offPageNotFound:30,onThemeChange:10,offThemeChange:10,onAppShow:30,offAppShow:30,onAppHide:30,offAppHide:30,onError:30,offError:30,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:20,createAudioContext:20,createVideoContext:20,createMapContext:20,createCameraContext:20,createLivePlayerContext:20,createLivePusherContext:20,onWebviewEvent:20,onNativeEvent:20,hideKeyboard:20,onKeyboardHeightChange:20,offKeyboardHeightChange:20,getPublicLibVersion:0,showModal:20,showToast:20,hideToast:20,showLoading:20,hideLoading:20,showActionSheet:20,reportAnalytics:10,getClipboardData:20,setClipboardData:20,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:10,uploadSilkVoice:10,downloadSilkVoice:10,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:20,offWindowResize:20,setPageOrientation:30,loadFontFace:20,setInnerAudioOption:0,setBackgroundColor:30,setBackgroundTextStyle:30,getMenuButtonBoundingClientRect:20,calRqt:10,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,join1v1Chat:10,setEnable1v1Chat:10,joinVoIPChat:10,exitVoIPChat:10,updateVoIPChatMuteConfig:10,onVoIPChatMembersChanged:10,onVoIPChatSpeakersChanged:10,onVoIPChatInterrupted:10,offVoIPChatMembersChanged:10,offVoIPChatSpeakersChanged:10,offVoIPChatInterrupted:10,onVoIPVideoMembersChanged:10,offVoIPVideoMembersChanged:10,onVoIPChatStateChanged:10,offVoIPChatStateChanged:10,subscribeVoIPVideoMembers:10,login:10,checkSession:10,authorize:20,getUserInfo:20,getUserProfile:20,requestFacetoFacePayment:20,requestPayment:20,verifyPaymentPassword:20,bindPaymentCard:20,requestPersonalPay:20,requestPaymentToBank:20,requestJointPayment:20,getWCPayOverseaPrepayRequest:20,requestH5Transaction:20,openWCPayOverseaPaymentReceive:20,handleWCPayOverseaWalletBuffer:20,requestVerifyUserIdentity:20,requestVirtualPayment:20,openOfflinePayView:20,openWCPayCardList:20,requestMallPayment:20,requestOrderPayment:20,addCard:20,openCard:20,scanCode:20,openQRCode:20,scanItem:20,chooseAddress:20,saveFile:10,openDocument:20,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:20,removeUserCloudStorage:10,setUserCloudStorage:10,makePhoneCall:20,makeVoIPCall:20,getAvailableAudioSources:10,reportMonitor:10,faceVerifyForPay:30,chooseInvoice:20,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:10,startCustomFacialRecognitionVerify:10,startCustomFacialRecognitionVerifyAndUploadVideo:10,getAccountInfoSync:0,setCookies:10,getCookies:10,nextTick:0,chooseMultiMedia:20,chooseMessageFile:20,getLabInfo:10,setLabInfo:10,compressImage:0,enterContact:20,shareAppMessageForFakeNative:20,checkIsOpenAccessibility:10,addPhoneCalendar:20,addPhoneRepeatCalendar:20,updateWeChatApp:10,getRandomValues:0,shareFileMessage:20,shareVideoMessage:20,addFileToFavorites:20,addVideoToFavorites:20,showShareImageMenu:20,searchContacts:10},log:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:2,canvasToTempFilePath:2,canvasGetImageData:2,canvasPutImageData:2,getShareInfo:1,pageScrollTo:1,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,requestSubscribeMessage:1,getExtConfig:1,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:2,showShareMenu:1,hideShareMenu:1,updateShareMenu:1,openUrl:0,setNavigationBarColor:1,setNavigationBarAlpha:0,hideHomeButton:1,_getRealRoute:0,vibrateShort:1,vibrateLong:1,getSetting:1,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:1,addPhoneContact:1,setScreenBrightness:1,getScreenBrightness:1,shareToWeRun:1,getWeRunData:1,canIUse:1,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:1,setTabBarBadge:1,removeTabBarBadge:1,showTabBarRedDot:1,hideTabBarRedDot:1,showTabBar:1,hideTabBar:1,setTabBarStyle:1,setTabBarItem:1,setEnableDebug:1,captureScreen:0,onUserCaptureScreen:3,setKeepScreenOn:1,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:1,showNavigationBarLoading:1,hideNavigationBarLoading:1,startPullDownRefresh:1,stopPullDownRefresh:1,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:1,openBluetoothAdapter:1,closeBluetoothAdapter:1,getBluetoothAdapterState:1,startBluetoothDevicesDiscovery:1,stopBluetoothDevicesDiscovery:1,getBluetoothDevices:1,getConnectedBluetoothDevices:1,createBLEConnection:1,setBLEMTU:1,closeBLEConnection:1,getBLEDeviceServices:1,getBLEDeviceRSSI:1,getBLEDeviceCharacteristics:1,notifyBLECharacteristicValueChanged:1,notifyBLECharacteristicValueChange:1,readBLECharacteristicValue:1,writeBLECharacteristicValue:1,onBluetoothAdapterStateChange:3,onBluetoothDeviceFound:3,onBLEConnectionStateChanged:3,onBLEConnectionStateChange:3,onBLECharacteristicValueChange:3,offBluetoothAdapterStateChange:3,offBluetoothDeviceFound:3,offBLEConnectionStateChanged:3,offBLEConnectionStateChange:3,offBLECharacteristicValueChange:3,createBLEPeripheralServer:2,onBLEPeripheralConnectionStateChanged:3,offBLEPeripheralConnectionStateChanged:3,startBeaconDiscovery:1,stopBeaconDiscovery:1,getBeacons:1,onBeaconUpdate:1,onBeaconServiceChange:1,startWifi:1,stopWifi:1,getWifiList:1,getConnectedWifi:1,connectWifi:1,presetWifiList:1,setWifiList:1,onGetWifiList:3,onWifiConnected:3,offGetWifiList:3,offWifiConnected:3,onEvaluateWifi:3,getHCEState:1,startHCE:1,stopHCE:1,sendHCEMessage:1,onHCEMessage:3,startLocalServiceDiscovery:1,stopLocalServiceDiscovery:1,onLocalServiceFound:3,offLocalServiceFound:3,onLocalServiceLost:3,offLocalServiceLost:3,onLocalServiceDiscoveryStop:3,offLocalServiceDiscoveryStop:3,onLocalServiceResolveFail:3,offLocalServiceResolveFail:3,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,navigateBackNative:0,launchApplication:0,getStorage:1,getStorageSync:2,setStorage:1,setStorageSync:2,removeStorage:1,removeStorageSync:2,clearStorage:1,clearStorageSync:2,getStorageInfo:1,getStorageInfoSync:2,getBackgroundFetchData:1,onBackgroundFetchData:3,request:1,connectSocket:1,closeSocket:1,sendSocketMessage:1,onSocketOpen:3,onSocketClose:3,onSocketMessage:3,onSocketError:3,uploadFile:1,downloadFile:1,addNativeDownloadTask:0,chooseImage:1,previewImage:1,previewMedia:1,getImageInfo:1,saveImageToPhotosAlbum:1,startRecord:1,stopRecord:1,playVoice:1,pauseVoice:1,stopVoice:1,onVoicePlayEnd:1,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:1,compressVideo:1,getLocation:1,openLocation:1,chooseLocation:1,choosePoi:1,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:1,onNetworkStatusChange:3,getSystemInfo:1,getSystemInfoSync:2,getBatteryInfo:1,getBatteryInfoSync:2,startAccelerometer:1,stopAccelerometer:1,onAccelerometerChange:3,startCompass:1,stopCompass:1,onCompassChange:3,reportAction:0,getBackgroundAudioManager:2,getRecorderManager:2,getBackgroundAudioPlayerState:1,playBackgroundAudio:1,pauseBackgroundAudio:1,seekBackgroundAudio:1,stopBackgroundAudio:1,onBackgroundAudioPlay:3,onBackgroundAudioPause:3,onBackgroundAudioStop:3,join1v1Chat:1,setEnable1v1Chat:1,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:3,onVoIPChatSpeakersChanged:3,onVoIPChatInterrupted:3,offVoIPChatMembersChanged:3,offVoIPChatSpeakersChanged:3,offVoIPChatInterrupted:3,onVoIPVideoMembersChanged:3,offVoIPVideoMembersChanged:3,onVoIPChatStateChanged:3,offVoIPChatStateChanged:3,subscribeVoIPVideoMembers:1,login:1,checkSession:1,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:1,requestPersonalPay:1,requestFacetoFacePayment:1,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:1,addCard:1,openCard:1,scanCode:1,openQRCode:1,scanItem:1,chooseAddress:1,saveFile:1,openDocument:1,getSavedFileList:1,getSavedFileInfo:1,getFileInfo:1,removeSavedFile:1,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,onThemeChange:1,offThemeChange:1,createAnimation:2,createInnerAudioContext:2,createAudioContext:0,createVideoContext:2,createMapContext:2,createCameraContext:2,createLivePlayerContext:2,createLivePusherContext:2,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:1,showToast:1,hideToast:1,showLoading:1,hideLoading:1,showActionSheet:1,reportAnalytics:0,getClipboardData:1,setClipboardData:1,createSelectorQuery:1,createIntersectionObserver:1,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:2,createWorker:2,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:3,offWindowResize:3,setPageOrientation:1,loadFontFace:1,uploadWeRunData:0,addWeRunData:0,setBackgroundColor:1,setBackgroundTextStyle:1,getMenuButtonBoundingClientRect:1,onAppShow:3,offAppShow:3,onAppHide:3,offAppHide:3,onError:3,offError:3,onUnhandledRejection:3,offUnhandledRejection:3,getLaunchOptionsSync:2,getEnterOptionsSync:2,calRqt:0,offPageNotFound:0,getAvailableAudioSources:1,reportMonitor:1,faceVerifyForPay:1,chooseInvoice:1,startDeviceMotionLisstening:1,stopDeviceMotionListening:1,onDeviceMotionChange:3,startGyroscope:1,stopGyroscope:1,onGyroscopeChange:3,setInnerAudioOption:1,secureTunnel:1,startCustomFacialRecognitionVerify:1,startCustomFacialRecognitionVerifyAndUploadVideo:1,getAccountInfoSync:0,setCookies:1,getCookies:1,nextTick:0,chooseMultiMedia:1,chooseMessageFile:1,getLabInfo:1,setLabInfo:1,compressImage:1,enterContact:1,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:3,downloadAppForIOS:0,offGyroscopeChange:3,offDeviceMotionChange:3,offCompassChange:3,offAccelerometerChange:3,offUserCaptureScreen:3,offNetworkStatusChange:3,offHCEMessage:3,offBeaconUpdate:3,offBeaconServiceChange:3,checkIsOpenAccessibility:1,addPhoneCalendar:1,addPhoneRepeatCalendar:1,updateWeChatApp:1,getRandomValues:1,shareFileMessage:1,shareVideoMessage:1,addFileToFavorites:1,addVideoToFavorites:1,showShareImageMenu:1,searchContacts:1},tap:{invokeWebviewMethod:0,drawCanvas:0,createContext:0,createCanvasContext:0,canvasToTempFilePath:0,canvasGetImageData:0,canvasPutImageData:0,getShareInfo:0,pageScrollTo:0,chooseInvoiceTitle:0,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:10,openSettingForPlugin:10,getExtConfig:0,chooseMedia:0,chooseWeChatContact:0,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:0,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,_getRealRoute:0,vibrateShort:0,vibrateLong:0,getSetting:20,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:0,setScreenBrightness:0,getScreenBrightness:0,shareToWeRun:0,getWeRunData:0,uploadWeRunData:0,canIUse:0,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:0,navigateToDevMiniProgram:0,navigateBackMiniProgram:0,navigateBackNative:0,exitMiniProgram:0,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:0,captureScreen:0,onUserCaptureScreen:0,setKeepScreenOn:0,checkIsSupportSoterAuthentication:0,startSoterAuthentication:0,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:0,stopPullDownRefresh:0,operateWXData:0,getOpenDeviceId:0,makeBluetoothPair:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceRSSI:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,onBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,redirectTo:0,reLaunch:0,navigateTo:0,switchTab:0,navigateBack:0,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:0,launchApplication:0,getStorage:0,getStorageSync:0,setStorage:0,setStorageSync:0,removeStorage:0,removeStorageSync:0,clearStorage:0,clearStorageSync:0,getStorageInfo:0,getStorageInfoSync:0,request:20,connectSocket:0,closeSocket:0,sendSocketMessage:0,onSocketOpen:0,onSocketClose:0,onSocketMessage:0,onSocketError:0,uploadFile:0,downloadFile:20,addNativeDownloadTask:0,chooseImage:0,previewImage:0,previewMedia:0,getImageInfo:0,saveImageToPhotosAlbum:0,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:0,saveVideoToPhotosAlbum:0,getVideoInfo:0,compressVideo:0,getLocation:0,openLocation:0,chooseLocation:0,choosePoi:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:0,onNetworkStatusChange:0,getSystemInfo:0,getSystemInfoSync:0,getBatteryInfo:0,getBatteryInfoSync:0,startAccelerometer:0,stopAccelerometer:0,onAccelerometerChange:0,startCompass:0,stopCompass:0,onCompassChange:0,reportAction:0,getBackgroundAudioManager:0,getRecorderManager:0,getBackgroundAudioPlayerState:0,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,login:0,checkSession:0,authorize:0,getUserInfo:0,requestFacetoFacePayment:0,requestPayment:30,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:30,addCard:0,openCard:0,scanCode:0,openQRCode:0,scanItem:0,chooseAddress:0,saveFile:0,openDocument:0,getSavedFileList:0,getSavedFileInfo:0,getFileInfo:0,removeSavedFile:0,getFileSystemManager:0,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:0,makeVoIPCall:0,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:0,offPageNotFound:0,onThemeChange:0,offThemeChange:0,onAppShow:0,offAppShow:0,onAppHide:0,offAppHide:0,onError:0,offError:0,onUnhandledRejection:0,offUnhandledRejection:0,getLaunchOptionsSync:0,getEnterOptionsSync:0,createAnimation:0,createInnerAudioContext:0,createAudioContext:0,createVideoContext:0,createMapContext:0,createCameraContext:0,createLivePlayerContext:0,createLivePusherContext:0,onWebviewEvent:0,onNativeEvent:0,hideKeyboard:0,onKeyboardHeightChange:0,offKeyboardHeightChange:0,getPublicLibVersion:0,showModal:30,showToast:0,hideToast:0,showLoading:0,hideLoading:0,showActionSheet:30,reportAnalytics:0,getClipboardData:0,setClipboardData:0,createSelectorQuery:0,createIntersectionObserver:0,updatePerfData:0,traceEvent:0,onMemoryWarning:0,offMemoryWarning:0,getUpdateManager:0,createWorker:0,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:0,appStatus:0,hanged:0,getLogManager:0,getRealtimeLogManager:0,onWindowResize:0,offWindowResize:0,setPageOrientation:0,loadFontFace:0,setInnerAudioOption:0,addWeRunData:0,setBackgroundColor:0,setBackgroundTextStyle:0,getMenuButtonBoundingClientRect:0,calRqt:0,getAvailableAudioSources:0,reportMonitor:0,faceVerifyForPay:0,chooseInvoice:0,startDeviceMotionListening:0,stopDeviceMotionListening:0,onDeviceMotionChange:0,startGyroscope:0,stopGyroscope:0,onGyroscopeChange:0,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,getAccountInfo:0,nextTick:0,setCookies:0,getCookies:0,getAccountInfoSync:0,chooseMultiMedia:0,join1v1Chat:0,setEnable1v1Chat:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,onVoIPVideoMembersChanged:0,offVoIPVideoMembersChanged:0,onVoIPChatStateChanged:0,offVoIPChatStateChanged:0,subscribeVoIPVideoMembers:0,getBackgroundFetchData:0,onBackgroundFetchData:0,chooseMessageFile:0,getLabInfo:0,setLabInfo:0,compressImage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,offGyroscopeChange:0,offDeviceMotionChange:0,offCompassChange:0,offAccelerometerChange:0,offUserCaptureScreen:0,offNetworkStatusChange:0,offHCEMessage:0,offBeaconUpdate:0,offBeaconServiceChange:0,requestSubscribeMessage:40,hideHomeButton:0,checkIsOpenAccessibility:0,updateWeChatApp:0,openChannelsLive:40,openChannelsActivity:40,openChannelsUserProfile:40,addPhoneCalendar:40,addPhoneRepeatCalendar:40,getRandomValues:0,showShareImageMenu:0,shareFileMessage:40,shareVideoMessage:40,addFileToFavorites:40,addVideoToFavorites:40,getUserProfile:40,searchContacts:40},singlePage:{invokeWebviewMethod:0,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:0,pageScrollTo:10,chooseInvoiceTitle:1,ShareInfoStorage:0,arrayBufferToBase64:0,base64ToArrayBuffer:0,openSetting:1,openSettingForPlugin:1,getExtConfig:10,chooseMedia:1,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:0,hideShareMenu:0,updateShareMenu:0,openUrl:0,setNavigationBarColor:0,setNavigationBarAlpha:0,hideHomeButton:0,_getRealRoute:0,vibrateShort:10,vibrateLong:10,getSetting:0,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:1,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:0,uploadWeRunData:0,addWeRunData:0,canIUse:10,setPageStyle:0,triggerGettingWidgetData:0,navigateToMiniProgram:1,navigateToDevMiniProgram:0,navigateBackMiniProgram:1,exitMiniProgram:1,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:0,removeTabBarBadge:0,showTabBarRedDot:0,hideTabBarRedDot:0,showTabBar:0,hideTabBar:0,setTabBarStyle:0,setTabBarItem:0,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:0,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:0,openDeliveryList:0,reportIDKey:0,reportKeyValue:0,setNavigationBarTitle:0,showNavigationBarLoading:0,hideNavigationBarLoading:0,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:0,closeBluetoothAdapter:0,getBluetoothAdapterState:0,startBluetoothDevicesDiscovery:0,stopBluetoothDevicesDiscovery:0,getBluetoothDevices:0,getConnectedBluetoothDevices:0,createBLEConnection:0,setBLEMTU:0,closeBLEConnection:0,getBLEDeviceServices:0,getBLEDeviceCharacteristics:0,notifyBLECharacteristicValueChanged:0,notifyBLECharacteristicValueChange:0,readBLECharacteristicValue:0,writeBLECharacteristicValue:0,onBluetoothAdapterStateChange:0,onBluetoothDeviceFound:0,onBLEConnectionStateChanged:0,onBLEConnectionStateChange:0,onBLECharacteristicValueChange:0,offBluetoothAdapterStateChange:0,offBluetoothDeviceFound:0,offBLEConnectionStateChanged:0,offBLEConnectionStateChange:0,offBLECharacteristicValueChange:0,createBLEPeripheralServer:0,onBLEPeripheralConnectionStateChanged:0,offBLEPeripheralConnectionStateChanged:0,startBeaconDiscovery:0,stopBeaconDiscovery:0,getBeacons:0,onBeaconUpdate:0,offBeaconUpdate:0,onBeaconServiceChange:0,offBeaconServiceChange:0,startWifi:0,stopWifi:0,getWifiList:0,getConnectedWifi:0,connectWifi:0,presetWifiList:0,setWifiList:0,onGetWifiList:0,onWifiConnected:0,offGetWifiList:0,offWifiConnected:0,onEvaluateWifi:0,getHCEState:0,startHCE:0,stopHCE:0,sendHCEMessage:0,onHCEMessage:0,offHCEMessage:0,startLocalServiceDiscovery:0,stopLocalServiceDiscovery:0,onLocalServiceFound:0,offLocalServiceFound:0,onLocalServiceLost:0,offLocalServiceLost:0,onLocalServiceDiscoveryStop:0,offLocalServiceDiscoveryStop:0,onLocalServiceResolveFail:0,offLocalServiceResolveFail:0,redirectTo:1,reLaunch:1,navigateTo:1,switchTab:1,navigateBack:1,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:0,onBackgroundFetchData:0,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:1,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:1,startRecord:0,stopRecord:0,playVoice:0,pauseVoice:0,stopVoice:0,onVoicePlayEnd:0,chooseVideo:1,saveVideoToPhotosAlbum:1,getVideoInfo:0,compressVideo:0,getLocation:10,openLocation:1,chooseLocation:1,choosePoi:1,enableLocationUpdateBackground:0,enableLocationUpdate:0,disableLocationUpdate:0,onLocationChange:0,offLocationChange:0,onLocationChangeError:0,offLocationChangeError:0,startLocationUpdateBackground:0,startLocationUpdate:0,stopLocationUpdate:0,getNetworkType:10,onAppRoute:0,onAppRouteDone:0,onAppEnterBackground:0,onAppEnterForeground:0,onAppUnhang:0,onPageReload:0,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:0,createVideoContext:10,createMapContext:10,createCameraContext:0,createLivePlayerContext:10,createLivePusherContext:0,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:0,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:0,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:0,setClipboardData:0,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:0,traceEvent:0,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:0,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:0,hanged:0,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:0,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:0,pauseBackgroundAudio:0,seekBackgroundAudio:0,stopBackgroundAudio:0,onBackgroundAudioPlay:0,onBackgroundAudioPause:0,onBackgroundAudioStop:0,joinVoIPChat:0,exitVoIPChat:0,updateVoIPChatMuteConfig:0,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:0,checkSession:0,authorize:1,getUserInfo:1,getUserProfile:1,requestPayment:0,requestPersonalPay:0,verifyPaymentPassword:0,bindPaymentCard:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestMidasPayment:0,requestOrderPayment:0,addCard:1,openCard:1,scanCode:1,openQRCode:0,scanItem:1,chooseAddress:1,saveFile:10,openDocument:1,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:1,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:1,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:0,getABTestConfig:0,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:0,chooseMultiMedia:0,getLabInfo:0,setLabInfo:0,enterContact:0,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:0,createRewardedVideoAd:0,error:10,serviceMarket:10,getNativeUserInfo:10,getPerformance:10,reportPerformance:10,createUDPSocket:0,createBufferURL:10,revokeBufferURL:10},thirdApp:{invokeWebviewMethod:10,drawCanvas:10,createContext:10,createCanvasContext:10,canvasToTempFilePath:10,canvasGetImageData:10,canvasPutImageData:10,getShareInfo:10,pageScrollTo:10,chooseInvoiceTitle:10,ShareInfoStorage:10,arrayBufferToBase64:10,base64ToArrayBuffer:10,openSetting:10,openSettingForPlugin:10,getExtConfig:10,chooseMedia:10,chooseWeChatContact:1,uploadEncryptedFileToCDN:0,onUploadEncryptedFileToCDNProgress:0,getExtConfigSync:10,showShareMenu:10,hideShareMenu:10,updateShareMenu:10,openUrl:0,setNavigationBarColor:10,setNavigationBarAlpha:10,hideHomeButton:10,_getRealRoute:10,vibrateShort:10,vibrateLong:10,getSetting:10,checkIsSupportFacialRecognition:0,startFacialRecognitionVerify:0,startFacialRecognitionVerifyAndUploadVideo:0,sendBizRedPacket:0,sendGoldenRedPacket:0,openGoldenRedPacketDetail:0,showRedPackage:0,addPhoneContact:10,setScreenBrightness:10,getScreenBrightness:10,getWeRunData:10,uploadWeRunData:10,addWeRunData:10,canIUse:10,setPageStyle:10,triggerGettingWidgetData:0,navigateToMiniProgram:10,navigateToDevMiniProgram:10,navigateBackMiniProgram:10,exitMiniProgram:10,setNavigationBarRightButton:0,onTapNavigationBarRightButton:0,setTopBarText:0,setTabBarBadge:10,removeTabBarBadge:10,showTabBarRedDot:10,hideTabBarRedDot:10,showTabBar:10,hideTabBar:10,setTabBarStyle:10,setTabBarItem:10,setEnableDebug:10,captureScreen:0,onUserCaptureScreen:10,offUserCaptureScreen:10,setKeepScreenOn:10,checkIsSupportSoterAuthentication:1,startSoterAuthentication:1,checkIsSoterEnrolledInDevice:1,openDeliveryList:0,reportIDKey:10,reportKeyValue:10,setNavigationBarTitle:10,showNavigationBarLoading:10,hideNavigationBarLoading:10,startPullDownRefresh:10,stopPullDownRefresh:10,operateWXData:10,getOpenDeviceId:0,openBluetoothAdapter:10,closeBluetoothAdapter:10,getBluetoothAdapterState:10,startBluetoothDevicesDiscovery:10,stopBluetoothDevicesDiscovery:10,getBluetoothDevices:10,getConnectedBluetoothDevices:10,createBLEConnection:10,setBLEMTU:10,closeBLEConnection:10,getBLEDeviceServices:10,getBLEDeviceCharacteristics:10,notifyBLECharacteristicValueChanged:10,notifyBLECharacteristicValueChange:10,readBLECharacteristicValue:10,writeBLECharacteristicValue:10,onBluetoothAdapterStateChange:10,onBluetoothDeviceFound:10,onBLEConnectionStateChanged:10,onBLEConnectionStateChange:10,onBLECharacteristicValueChange:10,offBluetoothAdapterStateChange:10,offBluetoothDeviceFound:10,offBLEConnectionStateChanged:10,offBLEConnectionStateChange:10,offBLECharacteristicValueChange:10,createBLEPeripheralServer:10,onBLEPeripheralConnectionStateChanged:10,offBLEPeripheralConnectionStateChanged:10,startBeaconDiscovery:10,stopBeaconDiscovery:10,getBeacons:10,onBeaconUpdate:10,offBeaconUpdate:10,onBeaconServiceChange:10,offBeaconServiceChange:10,startWifi:10,stopWifi:10,getWifiList:10,getConnectedWifi:10,connectWifi:10,presetWifiList:10,setWifiList:10,onGetWifiList:10,onWifiConnected:10,offGetWifiList:10,offWifiConnected:10,onEvaluateWifi:10,getHCEState:10,startHCE:10,stopHCE:10,sendHCEMessage:10,onHCEMessage:10,offHCEMessage:10,startLocalServiceDiscovery:10,stopLocalServiceDiscovery:10,onLocalServiceFound:10,offLocalServiceFound:10,onLocalServiceLost:10,offLocalServiceLost:10,onLocalServiceDiscoveryStop:10,offLocalServiceDiscoveryStop:10,onLocalServiceResolveFail:10,offLocalServiceResolveFail:10,redirectTo:10,reLaunch:10,navigateTo:10,switchTab:10,navigateBack:10,_triggerBeforeUnloadPage:0,_triggerBeforeShareAppMessage:0,navigateBackApplication:1,navigateBackNative:1,launchApplication:1,getStorage:10,getStorageSync:10,setStorage:10,setStorageSync:10,removeStorage:10,removeStorageSync:10,clearStorage:10,clearStorageSync:10,getStorageInfo:10,getStorageInfoSync:10,getBackgroundFetchData:10,onBackgroundFetchData:10,request:10,connectSocket:10,closeSocket:10,sendSocketMessage:10,onSocketOpen:10,onSocketClose:10,onSocketMessage:10,onSocketError:10,uploadFile:10,downloadFile:10,addNativeDownloadTask:0,chooseImage:10,previewImage:10,getImageInfo:10,saveImageToPhotosAlbum:10,startRecord:10,stopRecord:10,playVoice:10,pauseVoice:10,stopVoice:10,onVoicePlayEnd:10,chooseVideo:10,saveVideoToPhotosAlbum:10,getVideoInfo:10,compressVideo:10,getLocation:10,openLocation:10,chooseLocation:10,choosePoi:10,enableLocationUpdateBackground:10,enableLocationUpdate:10,disableLocationUpdate:10,onLocationChange:10,offLocationChange:10,onLocationChangeError:10,offLocationChangeError:10,startLocationUpdateBackground:10,startLocationUpdate:10,stopLocationUpdate:10,getNetworkType:10,onAppRoute:10,onAppRouteDone:10,onAppEnterBackground:10,onAppEnterForeground:10,onAppUnhang:10,onPageReload:10,onPageNotFound:10,offPageNotFound:10,onAudioInterruptionBegin:10,offAudioInterruptionBegin:10,onAudioInterruptionEnd:10,offAudioInterruptionEnd:10,onThemeChange:10,offThemeChange:10,onAppShow:10,offAppShow:10,onAppHide:10,offAppHide:10,onError:10,offError:10,onUnhandledRejection:10,offUnhandledRejection:10,getLaunchOptionsSync:10,getEnterOptionsSync:10,createAnimation:10,createInnerAudioContext:10,createAudioContext:10,createVideoContext:10,createMapContext:10,createCameraContext:10,createLivePlayerContext:10,createLivePusherContext:10,onWebviewEvent:10,onNativeEvent:10,hideKeyboard:10,onKeyboardHeightChange:10,offKeyboardHeightChange:10,getPublicLibVersion:10,showModal:10,showToast:10,hideToast:10,showLoading:10,hideLoading:10,showActionSheet:10,reportAnalytics:10,getClipboardData:10,setClipboardData:10,createSelectorQuery:10,createIntersectionObserver:10,updatePerfData:10,traceEvent:10,onMemoryWarning:10,offMemoryWarning:10,getUpdateManager:10,createWorker:10,voiceSplitJoint:0,uploadSilkVoice:0,downloadSilkVoice:0,getResPath:0,setResPath:0,env:10,appStatus:10,hanged:10,getLogManager:10,getRealtimeLogManager:10,onWindowResize:10,offWindowResize:10,loadFontFace:10,setInnerAudioOption:10,setBackgroundColor:10,setBackgroundTextStyle:10,getMenuButtonBoundingClientRect:10,calRqt:0,onNetworkStatusChange:10,offNetworkStatusChange:10,getSystemInfo:10,getSystemInfoSync:10,getBatteryInfo:10,getBatteryInfoSync:10,startAccelerometer:10,stopAccelerometer:10,onAccelerometerChange:10,offAccelerometerChange:10,startCompass:10,stopCompass:10,onCompassChange:10,offCompassChange:10,reportAction:10,getBackgroundAudioManager:10,getRecorderManager:10,getBackgroundAudioPlayerState:10,playBackgroundAudio:10,pauseBackgroundAudio:10,seekBackgroundAudio:10,stopBackgroundAudio:10,onBackgroundAudioPlay:10,onBackgroundAudioPause:10,onBackgroundAudioStop:10,joinVoIPChat:1,exitVoIPChat:1,updateVoIPChatMuteConfig:1,onVoIPChatMembersChanged:0,onVoIPChatSpeakersChanged:0,onVoIPChatInterrupted:0,offVoIPChatMembersChanged:0,offVoIPChatSpeakersChanged:0,offVoIPChatInterrupted:0,login:10,checkSession:10,authorize:10,getUserInfo:10,getUserProfile:10,requestPayment:10,verifyPaymentPassword:0,bindPaymentCard:0,requestPersonalPay:0,requestPaymentToBank:0,requestJointPayment:0,getWCPayOverseaPrepayRequest:0,requestH5Transaction:0,openWCPayOverseaPaymentReceive:0,handleWCPayOverseaWalletBuffer:0,requestVerifyUserIdentity:0,requestVirtualPayment:0,openOfflinePayView:0,openWCPayCardList:0,requestMallPayment:0,requestOrderPayment:10,addCard:10,openCard:10,scanCode:10,openQRCode:0,chooseAddress:10,saveFile:10,openDocument:10,getSavedFileList:10,getSavedFileInfo:10,getFileInfo:10,removeSavedFile:10,getFileSystemManager:10,chooseContact:0,removeUserCloudStorage:0,setUserCloudStorage:0,makePhoneCall:10,makeVoIPCall:0,getAvailableAudioSources:10,reportMonitor:10,getAccountInfoSync:10,faceVerifyForPay:0,chooseInvoice:10,startDeviceMotionListening:10,stopDeviceMotionListening:10,onDeviceMotionChange:10,offDeviceMotionChange:10,startGyroscope:10,stopGyroscope:10,onGyroscopeChange:10,offGyroscopeChange:10,secureTunnel:0,startCustomFacialRecognitionVerify:0,startCustomFacialRecognitionVerifyAndUploadVideo:0,loadSubpackage:10,getABTestConfig:10,openChattingUI:0,delRemindMsg:0,searchContacts:0,invoke:0,on:0,chooseMessageFile:1,nextTick:10,setCookies:0,getCookies:0,compressImage:10,chooseMultiMedia:10,getLabInfo:0,setLabInfo:0,enterContact:10,shareAppMessageForFakeNative:0,downloadApp:0,installDownloadApp:0,getAppInstallState:0,queryDownloadAppTask:0,cancelDownloadAppTask:0,resumeDownloadAppTask:0,pauseDownloadAppTask:0,onDownloadAppStateChange:0,downloadAppForIOS:0,getDownloadWidgetTaskInfos:0,jumpDownloaderWidget:0,createOffscreenCanvas:10,getSelectedTextRange:10,version:10,cloud:10,createInterstitialAd:10,createRewardedVideoAd:10,error:10,serviceMarket:10,openBusinessView:10,requestMidasPayment:10,modifyFriendInteractiveStorage:0,getUserInteractiveStorage:0,getUserCloudStorage:0,getPotentialFriendList:0,getGroupInfo:0,getGroupCloudStorage:0,getFriendCloudStorage:0,createGridAd:10,createBannerAd:10}},c=function(e,t){return s[t][e]},u=n(1),l=n(15),d=n(0),f=n(25);function p(){}function h(e,t,n){var a=t.replace(/\.html\?.*|\.html$/,"");return!!__appServiceEngine__.hasPageRoute(a)||(Object(d.beforeInvokeFail)(e,n,'page "'+Object(r.removeHtmlSuffixFromUrl)(t)+'" is not found'),!1)}var v=!1;function g(e){v=!!e.state,e.success&&e.success({state:v})}function y(e,t){m(e);var n=c(e,"ui");if(n>0&&v)return!1;if(n>=20)if("undefined"==typeof __appServiceEngine__){if(t)return!1}else{var a=__appServiceEngine__.getCurrentRoute()||"";if(/^\/?__wx__\//.test(a))return!1;var r=a.match(/(?:^|\/)__plugin__\/(.*?)\//);if((r?r[1]:"")!==t&&n>=30)return!1}var i=c(e,"singlePage");return!((!i||1===i)&&Object(l.isSinglePageMode)())||(1===i&&S()&&Object(d.invokeMethod)("showToast",{icon:"",title:"请前往小程序使用完整服务",duration:2500}),!1)}function m(e){var t=c(e,"thirdApp");return 0!==t&&1!==t||!Object(l.isIn3rdApp)()||1===t&&S()&&Object(d.invokeMethod)("showToast",{icon:"",title:"暂不支持当前功能",duration:2500}),!0}var b=!1;function _(e){b="tap"===e}function O(){setTimeout((function(){b=!1}),0)}function I(e){var t=this;return function(){for(var n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];if(4===u.default.appType)return _("tap"),e.apply(t,a),void O();__virtualDOM__.wrapTapMark((function(){e.apply(t,a)}))}}function S(){return 4===u.default.appType?b:b||__virtualDOM__.checkTapMark()}function E(e,t){return function(n){var r=this,s=c(e,"tap"),f=S(),p=n;if(10!==s||f||(Object(o.reportRecycledAPI)({name:e,scene:0,strategy:1}),!i.IS_DEVTOOLS&&Object(l.checkAPIAvailable)(e))){if((20===s&&f||30===s)&&("function"==typeof n?p=I.call(this,n):"object"===Object(a.default)(n)&&(p=Object.assign({},n),["success","fail","complete"].forEach((function(e){"function"==typeof p[e]&&(p[e]=I.call(r,p[e]))})))),40!==s||4===u.default.appType||f){for(var h=arguments.length,v=new Array(h>1?h-1:0),g=1;g<h;g++)v[g-1]=arguments[g];var y=t.apply(this,[p].concat(v));return 4===u.default.appType&&[10,30,40].includes(s)&&O(),y}n&&(n.fail||n.complete)&&setTimeout((function(){Object(d.beforeInvokeFail)(e,n,"can only be invoked by user TAP gesture.")}),0)}else n&&(n.fail||n.complete)&&setTimeout((function(){Object(d.beforeInvokeFail)(e,n,"can only be invoked by user TAP gesture.")}),0)}}},function(e,t,n){function a(e,t,n,a,r,i,o){try{var s=e[i](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,r)}function r(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var o=e.apply(t,n);function s(e){a(o,r,i,s,c,"next",e)}function c(e){a(o,r,i,s,c,"throw",e)}s(void 0)}))}}n.r(t),n.d(t,"default",(function(){return r}))},function(e,t,n){n.r(t),n.d(t,"onNativeEvent",(function(){return o})),n.d(t,"offNativeEvent",(function(){return s}));var a=n(135),r=n(21),i={},o=function(e,t){var n=Object(r.getEventManager)("WeixinJSBridge-"+e);i[e]||(Object(a.onMethod)(e,(function(){n.emit.apply(n,arguments)})),i[e]=!0),n.internalOnMethod(t)},s=function(e,t){Object(r.getEventManager)("WeixinJSBridge-"+e).internalOffMethod(t)}},function(e,t,n){n.r(t),n.d(t,"checkPermissionSync",(function(){return c}));var a=n(0),r=n(12),i=n(1),o={requestVirtualPayment:285,setCookies:502,getCookies:503,UDP:606,launchApplicationDirectly:620,screenCanvasReadPixels:631,navigateToMiniProgramDirectly:632,openDataContextExtension:638,batchGetContactDirectly:676,launchApp:692,sendBizRedPacketForOpen:694,openWxappLimit5:720,shareCallback:740,WeAppWorker:775,listenFrameChangeInWorker:776,requestSubscribeWhatsNew:782,getGroupToolbarInfo:803,requestMidasFriendPayment:804,createWebView:805,authShareRelationship:852,uploadToCommonCDN:878,quicklyAddBrandContact:879,engineOpenData:894,preloadMiniProgramEnvDirectly:900,predownloadMiniProgramPackageDirectly:901,addPhoneCalendar:912,addPhoneRepeatCalendar:913,privateScanItem:917,shareDataToWeRun:926,handoff:931,bindingDownload:972,bindingReadFile:973,bindingWebSocket:974,openH5GameClub:975,showShareImageMenu:978,plugin_launchApplicationDirectly_operateDirectly:1009,privateSearchContacts:1024,private_setNavigateBackInterception:1020,private_stopNavigateBackInterception:1021},s={};i.default.onReady((function(){var e=Object.keys(o).map((function(e){return o[e]}));Object(a.invokeMethod)("getPermissionBytes",{indexes:e,success:function(t){if(t.permissionBytes)for(var n=0;n<t.permissionBytes.length;n++){var a=e[n];s[a]=1===t.permissionBytes[n]}},fail:function(e){}})}));var c=function(e){var t=o[e];if("number"!=typeof t)return!1;if(!Object(r.isUndefined)(s[t]))return s[t];var n=!1;return Object(a.invokeMethod)("getPermissionBytes",{indexes:[t],success:function(e){e.permissionBytes&&(n=1===e.permissionBytes[0],s[t]=n)}}),n}},function(e,t,n){n.r(t),n.d(t,"View",(function(){return p})),n.d(t,"Text",(function(){return v})),n.d(t,"Image",(function(){return C})),n.d(t,"Video",(function(){return V})),n.d(t,"Camera",(function(){return fe})),n.d(t,"LivePlayer",(function(){return ye})),n.d(t,"LivePusher",(function(){return Ee})),n.d(t,"WebView",(function(){return Ce.WebView})),n.d(t,"getWebViewIdList",(function(){return Ce.getWebViewIdList})),n.d(t,"ImagePreviewer",(function(){return Ae})),n.d(t,"webviewLayout",(function(){return I})),n.d(t,"nativeviewLayout",(function(){return S}));var a=n(4),r=n(5),i=n(28),o=n(14),s=n(17),c=n(8),u=n(0),l=n(54),d=n(24);function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var p=function(e){Object(o.default)(n,e);var t=f(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.id,o=r.parentId,s=r.style,c=r.props,u=void 0===c?{}:c,l=r.type,d=void 0===l?"text":l,f=r.name,p=void 0===f?"":f,h=r.autoInsert,v=void 0!==h&&h,g=r.eventType,y=void 0===g?"touch":g,m=r.clickState,b=void 0!==m&&m,_=r.bubbleEvent,O=void 0!==_&&_;Object(a.default)(this,n),(e=t.call(this,{id:i,style:s,props:Object.assign(u,{fullscreen:!1}),name:p,parentId:o})).type="text"===d?"TextView":"ImageView",e.eventType=y,e.autoInsert=v,e.bubbleEvent=O,"touch"===e.eventType&&b&&e.ready().then((function(){e.mask=new n({style:{backgroundColor:"rgba(0, 0, 0, 0.1)",hidden:!0,position:"absolute",left:0,top:0},eventType:"click"}),e.mask.name="mask",e.add(e.mask)})).catch((function(){}));var I=Date.now(),S={x:0,y:0};e.on("touchstart",(function(t){b&&e.mask&&(e.mask.style.hidden=!1),I=Date.now(),S=t}));var E=function(t){b&&e.mask&&(e.mask.style.hidden=!0);var n={x:0,y:0};try{n=e.getAbsolutePosition()}catch(e){}var a={x:0,y:0};Array.isArray(t)?a=t.pop():t.x&&t.y&&(a=t);var r={absoluteX:n.left+S.x,absoluteY:n.top+S.y,relativeX:S.x,relativeY:S.y,absoluteEndX:n.left+a.x,absoluteEndY:n.top+a.y,relativeEndX:a.x,relativeEndY:a.y,pressInterval:Date.now()-I};e.emit("click",r)};return e.on("touchend",E),e.on("touchcancel",E),e.autoInsert&&e.insert(),e}return Object(r.default)(n,[{key:"toNativeData",value:function(){var e=this,t=["borderRadius","borderWidth","borderColor","opacity","overflow","fixed","rotate"];"ImageView"===this.type&&t.push("objectFit");var n=t.reduce((function(t,n){return t[n]=e.computedStyle[n],"borderColor"===n&&(t[n]=Object(d.hex)(e.computedStyle[n])),t}),{});n.bgColor=Object(d.hex)(this.computedStyle.backgroundColor),n.scaleX=this.computedStyle.scaleWidth,n.scaleY=this.computedStyle.scaleHeight;var a={left:this.computedStyle.left,top:this.computedStyle.top,width:this.computedStyle.width,height:this.computedStyle.height};return this.layoutBox&&(a={left:this.layoutBox.left,top:this.layoutBox.top,width:this.layoutBox.width,height:this.layoutBox.height}),this.computedStyle.hidden&&(a.width=0,a.height=0),this.mask&&(this.mask.style.width=a.width,this.mask.style.height=a.height),n.padding=[0,0,0,0],void 0!==n.borderRadius&&n.borderRadius||(n.borderRadius=0),{parentId:this.parentId,dest:this.dest,viewId:this.id,position:a,hide:this.computedStyle.hidden,style:n,notCoverRect:!0,fullscreen:this.fullscreen,zIndex:this.style.zIndex,fixed:n.fixed}}},{key:"insert",value:function(){var e=this,t=Object.assign(this.toNativeData(),{clickable:"click"===this.eventType,gesture:"touch"===this.eventType,transEvt:!1,sendTo:"appservice",data:JSON.stringify({id:this.id})});return this.isInserted=!0,new Promise((function(n,a){Object(u.invokeMethod)("insert"+e.type,Object.assign(t,{success:function(t){Object(d.log)(e.name,e.id,"ready"),e.emit("ready"),n(t)},fail:a}))}))}},{key:"update",value:function(){var e=this;this.shouldUpdate=!1;var t=this.toNativeData();return new Promise((function(n,a){Object(u.invokeMethod)("update"+e.type,Object.assign(t,{success:n,fail:a}))}))}},{key:"destroy",value:function(){var e=this;Object(i.default)(Object(c.default)(n.prototype),"destroy",this).call(this);var t={dest:this.dest,viewId:this.id};return new Promise((function(n,a){Object(u.invokeMethod)("remove"+e.type,Object.assign(t,{success:n,fail:a}))}))}},{key:"animate",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.left,a=t.top,r=t.opacity,i=t.scaleWidth,o=t.scaleHeight,s=t.rotate,c=void 0===s?0:s,l=t.duration,d=void 0===l?500:l,f={dest:this.dest,viewId:this.id,easing:"ease-in",duration:d,finalStyle:{left:n,top:a,opacity:r,rotate:c,scaleX:i,scaleY:o}};return new Promise((function(e,t){Object(u.invokeMethod)("animateCoverView",Object.assign(f,{success:e,fail:t}))})).then((function(t){return void 0!==n&&(e.style.left=n),void 0!==a&&(e.style.top=a),void 0!==i&&(e.style.scaleWidth=i),void 0!==o&&(e.style.scaleHeight=o),void 0!==r&&(e.style.opacity=r),void 0!==c&&(e.style.rotate=c),t}))}}]),n}(l.Element);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var v=function(e){Object(o.default)(n,e);var t=h(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id,i=e.style,o=e.value,s=void 0===o?"":o,c=e.name,u=void 0===c?"":c,l=e.autoInsert,d=void 0!==l&&l,f=e.eventType,p=e.bubbleEvent,h=e.clickState;return Object(a.default)(this,n),t.call(this,{id:r,style:i,props:{value:s},type:"text",name:u,autoInsert:d,eventType:f,bubbleEvent:p,clickState:h})}return Object(r.default)(n,[{key:"toNativeData",value:function(){var e=this,t=["color","fontSize","textAlign","fontWeight","lineHeight","lineBreak"].reduce((function(t,n){return t[n]=e.computedStyle[n],t}),{});return Object.assign(Object(i.default)(Object(c.default)(n.prototype),"toNativeData",this).call(this),{label:Object.assign(t,{content:this.value})})}}]),n}(p),g=function(){var e,t="inherit",n="row",a="row-reverse",r="column",i="column-reverse",o="flex-start",s="center",c="flex-start",u="center",l="flex-end",d="stretch",f="relative",p="absolute",h={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},v={row:"right","row-reverse":"left",column:"bottom","column-reverse":"top"},g={row:"left","row-reverse":"right",column:"top","column-reverse":"bottom"},y={row:"width","row-reverse":"width",column:"height","column-reverse":"height"};function m(e){return void 0===e}function b(e){return e===n||e===a}function _(e,t){if(void 0!==e.style.marginStart&&b(t))return e.style.marginStart;var n=null;switch(t){case"row":n=e.style.marginLeft;break;case"row-reverse":n=e.style.marginRight;break;case"column":n=e.style.marginTop;break;case"column-reverse":n=e.style.marginBottom}return void 0!==n?n:void 0!==e.style.margin?e.style.margin:0}function O(e,t){if(void 0!==e.style.marginEnd&&b(t))return e.style.marginEnd;var n=null;switch(t){case"row":n=e.style.marginRight;break;case"row-reverse":n=e.style.marginLeft;break;case"column":n=e.style.marginBottom;break;case"column-reverse":n=e.style.marginTop}return null!=n?n:void 0!==e.style.margin?e.style.margin:0}function I(e,t){if(void 0!==e.style.borderStartWidth&&e.style.borderStartWidth>=0&&b(t))return e.style.borderStartWidth;var n=null;switch(t){case"row":n=e.style.borderLeftWidth;break;case"row-reverse":n=e.style.borderRightWidth;break;case"column":n=e.style.borderTopWidth;break;case"column-reverse":n=e.style.borderBottomWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function S(e,t){if(void 0!==e.style.borderEndWidth&&e.style.borderEndWidth>=0&&b(t))return e.style.borderEndWidth;var n=null;switch(t){case"row":n=e.style.borderRightWidth;break;case"row-reverse":n=e.style.borderLeftWidth;break;case"column":n=e.style.borderBottomWidth;break;case"column-reverse":n=e.style.borderTopWidth}return null!=n&&n>=0?n:void 0!==e.style.borderWidth&&e.style.borderWidth>=0?e.style.borderWidth:0}function E(e,t){return function(e,t){if(void 0!==e.style.paddingStart&&e.style.paddingStart>=0&&b(t))return e.style.paddingStart;var n=null;switch(t){case"row":n=e.style.paddingLeft;break;case"row-reverse":n=e.style.paddingRight;break;case"column":n=e.style.paddingTop;break;case"column-reverse":n=e.style.paddingBottom}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+I(e,t)}function w(e,t){return function(e,t){if(void 0!==e.style.paddingEnd&&e.style.paddingEnd>=0&&b(t))return e.style.paddingEnd;var n=null;switch(t){case"row":n=e.style.paddingRight;break;case"row-reverse":n=e.style.paddingLeft;break;case"column":n=e.style.paddingBottom;break;case"column-reverse":n=e.style.paddingTop}return null!=n&&n>=0?n:void 0!==e.style.padding&&e.style.padding>=0?e.style.padding:0}(e,t)+S(e,t)}function C(e,t){return I(e,t)+S(e,t)}function k(e,t){return _(e,t)+O(e,t)}function T(e,t){return E(e,t)+w(e,t)}function A(e,t){return t.style.alignSelf?t.style.alignSelf:e.style.alignItems?e.style.alignItems:"stretch"}function P(e,t){if("rtl"===t){if(e===n)return a;if(e===a)return n}return e}function D(e,t){return function(e){return e===r||e===i}(e)?P(n,t):r}function x(e){return e.style.position?e.style.position:"relative"}function R(e){return x(e)===f&&e.style.flex>0}function j(e,t){return e.layout[y[t]]+k(e,t)}function M(e,t){return void 0!==e.style[y[t]]&&e.style[y[t]]>=0}function N(e,t){return void 0!==e.style[t]}function L(e,t){return void 0!==e.style[t]?e.style[t]:0}function B(e,t,n){var a={row:e.style.minWidth,"row-reverse":e.style.minWidth,column:e.style.minHeight,"column-reverse":e.style.minHeight}[t],r={row:e.style.maxWidth,"row-reverse":e.style.maxWidth,column:e.style.maxHeight,"column-reverse":e.style.maxHeight}[t],i=n;return void 0!==r&&r>=0&&i>r&&(i=r),void 0!==a&&a>=0&&i<a&&(i=a),i}function F(e,t){return e>t?e:t}function W(e,t){void 0===e.layout[y[t]]&&M(e,t)&&(e.layout[y[t]]=F(B(e,t,e.style[y[t]]),T(e,t)))}function V(e,t,n){t.layout[v[n]]=e.layout[y[n]]-t.layout[y[n]]-t.layout[g[n]]}function U(e,t){return void 0!==e.style[h[t]]?L(e,h[t]):-L(e,v[t])}function G(S,G,Y){var q=function(e,n){var a;return(a=e.style.direction?e.style.direction:t)===t&&(a=void 0===n?"ltr":n),a}(S,Y),z=P(function(e){return e.style.flexDirection?e.style.flexDirection:r}(S),q),K=D(z,q),X=P(n,q);W(S,z),W(S,K),S.layout.direction=q,S.layout[h[z]]+=_(S,z)+U(S,z),S.layout[v[z]]+=O(S,z)+U(S,z),S.layout[h[K]]+=_(S,K)+U(S,K),S.layout[v[K]]+=O(S,K)+U(S,K);var Z=S.children.length,J=T(S,X);if(function(e){return void 0!==e.style.measure}(S)){var Q=!m(S.layout[y[X]]),$=e;$=M(S,X)?S.style.width:Q?S.layout[y[X]]:G-k(S,X),$-=J;var ee=!M(S,X)&&!Q,te=!M(S,r)&&m(S.layout[y.column]);if(ee||te){var ne=S.style.measure($);ee&&(S.layout.width=ne.width+J),te&&(S.layout.height=ne.height+T(S,r))}if(0===Z)return}var ae,re,ie,oe,se=function(e){return"wrap"===e.style.flexWrap}(S),ce=function(e){return e.style.justifyContent?e.style.justifyContent:"flex-start"}(S),ue=E(S,z),le=E(S,K),de=T(S,z),fe=T(S,K),pe=!m(S.layout[y[z]]),he=!m(S.layout[y[K]]),ve=b(z),ge=null,ye=null,me=e;pe&&(me=S.layout[y[z]]-de);for(var be=0,_e=0,Oe=0,Ie=0,Se=0,Ee=0;_e<Z;){var we,Ce=0,ke=0,Te=0,Ae=0,Pe=pe&&ce===o||!pe&&ce!==s,De=Pe?Z:be,xe=!0,Re=Z,je=null,Me=null,Ne=ue,Le=0;for(ae=be;ae<Z;++ae){if((ie=S.children[ae]).lineIndex=Ee,ie.nextAbsoluteChild=null,ie.nextFlexChild=null,(qe=A(S,ie))===d&&x(ie)===f&&he&&!M(ie,K))ie.layout[y[K]]=F(B(ie,K,S.layout[y[K]]-fe-k(ie,K)),T(ie,K));else if(x(ie)===p)for(null===ge&&(ge=ie),null!==ye&&(ye.nextAbsoluteChild=ie),ye=ie,re=0;re<2;re++)oe=0!==re?n:r,!m(S.layout[y[oe]])&&!M(ie,oe)&&N(ie,h[oe])&&N(ie,v[oe])&&(ie.layout[y[oe]]=F(B(ie,oe,S.layout[y[oe]]-T(S,oe)-k(ie,oe)-L(ie,h[oe])-L(ie,v[oe])),T(ie,oe)));var Be=0;if(pe&&R(ie)?(ke++,Te+=ie.style.flex,null===je&&(je=ie),null!==Me&&(Me.nextFlexChild=ie),Me=ie,Be=T(ie,z)+k(ie,z)):(we=e,ve||(we=M(S,X)?S.layout[y[X]]-J:G-k(S,X)-J),0===Oe&&H(ie,we,q),x(ie)===f&&(Ae++,Be=j(ie,z))),se&&pe&&Ce+Be>me&&ae!==be){Ae--,Oe=1;break}Pe&&(x(ie)!==f||R(ie))&&(Pe=!1,De=ae),xe&&(x(ie)!==f||qe!==d&&qe!==c||m(ie.layout[y[K]]))&&(xe=!1,Re=ae),Pe&&(ie.layout[g[z]]+=Ne,pe&&V(S,ie,z),Ne+=j(ie,z),Le=F(Le,B(ie,K,j(ie,K)))),xe&&(ie.layout[g[K]]+=Ie+le,he&&V(S,ie,K)),Oe=0,Ce+=Be,_e=ae+1}var Fe=0,We=0,Ve=0;if(Ve=pe?me-Ce:F(Ce,0)-Ce,0!==ke){var Ue,Ge,He=Ve/Te;for(Me=je;null!==Me;)(Ue=He*Me.style.flex+T(Me,z))!==(Ge=B(Me,z,Ue))&&(Ve-=Ge,Te-=Me.style.flex),Me=Me.nextFlexChild;for((He=Ve/Te)<0&&(He=0),Me=je;null!==Me;)Me.layout[y[z]]=B(Me,z,He*Me.style.flex+T(Me,z)),we=e,M(S,X)?we=S.layout[y[X]]-J:ve||(we=G-k(S,X)-J),H(Me,we,q),ie=Me,Me=Me.nextFlexChild,ie.nextFlexChild=null}else ce!==o&&(ce===s?Fe=Ve/2:"flex-end"===ce?Fe=Ve:"space-between"===ce?(Ve=F(Ve,0),We=ke+Ae-1!=0?Ve/(ke+Ae-1):0):"space-around"===ce&&(Fe=(We=Ve/(ke+Ae))/2));for(Ne+=Fe,ae=De;ae<_e;++ae)x(ie=S.children[ae])===p&&N(ie,h[z])?ie.layout[g[z]]=L(ie,h[z])+I(S,z)+_(ie,z):(ie.layout[g[z]]+=Ne,pe&&V(S,ie,z),x(ie)===f&&(Ne+=We+j(ie,z),Le=F(Le,B(ie,K,j(ie,K)))));var Ye=S.layout[y[K]];for(he||(Ye=F(B(S,K,Le+fe),fe)),ae=Re;ae<_e;++ae)if(x(ie=S.children[ae])===p&&N(ie,h[K]))ie.layout[g[K]]=L(ie,h[K])+I(S,K)+_(ie,K);else{var qe,ze=le;if(x(ie)===f)if((qe=A(S,ie))===d)m(ie.layout[y[K]])&&(ie.layout[y[K]]=F(B(ie,K,Ye-fe-k(ie,K)),T(ie,K)));else if(qe!==c){var Ke=Ye-fe-j(ie,K);ze+=qe===u?Ke/2:Ke}ie.layout[g[K]]+=Ie+ze,he&&V(S,ie,K)}Ie+=Le,Se=F(Se,Ne),Ee+=1,be=_e}if(Ee>1&&he){var Xe=S.layout[y[K]]-fe,Ze=Xe-Ie,Je=0,Qe=le,$e=function(e){return e.style.alignContent?e.style.alignContent:"flex-start"}(S);$e===l?Qe+=Ze:$e===u?Qe+=Ze/2:$e===d&&Xe>Ie&&(Je=Ze/Ee);var et=0;for(ae=0;ae<Ee;++ae){var tt=et,nt=0;for(re=tt;re<Z;++re)if(x(ie=S.children[re])===f){if(ie.lineIndex!==ae)break;m(ie.layout[y[K]])||(nt=F(nt,ie.layout[y[K]]+k(ie,K)))}for(et=re,nt+=Je,re=tt;re<et;++re)if(x(ie=S.children[re])===f){var at=A(S,ie);if(at===c)ie.layout[g[K]]=Qe+_(ie,K);else if(at===l)ie.layout[g[K]]=Qe+nt-O(ie,K)-ie.layout[y[K]];else if(at===u){var rt=ie.layout[y[K]];ie.layout[g[K]]=Qe+(nt-rt)/2}else at===d&&(ie.layout[g[K]]=Qe+_(ie,K))}Qe+=nt}}var it=!1,ot=!1;if(pe||(S.layout[y[z]]=F(B(S,z,Se+w(S,z)),de),z!==a&&z!==i||(it=!0)),he||(S.layout[y[K]]=F(B(S,K,Ie+fe),fe),K!==a&&K!==i||(ot=!0)),it||ot)for(ae=0;ae<Z;++ae)ie=S.children[ae],it&&V(S,ie,z),ot&&V(S,ie,K);for(ye=ge;null!==ye;){for(re=0;re<2;re++)oe=0!==re?n:r,!m(S.layout[y[oe]])&&!M(ye,oe)&&N(ye,h[oe])&&N(ye,v[oe])&&(ye.layout[y[oe]]=F(B(ye,oe,S.layout[y[oe]]-C(S,oe)-k(ye,oe)-L(ye,h[oe])-L(ye,v[oe])),T(ye,oe))),N(ye,v[oe])&&!N(ye,h[oe])&&(ye.layout[h[oe]]=S.layout[y[oe]]-ye.layout[y[oe]]-L(ye,v[oe]));ie=ye,ye=ye.nextAbsoluteChild,ie.nextAbsoluteChild=null}}function H(e,t,n){e.shouldUpdate=!0;var a=e.style.direction||"ltr";!e.isDirty&&e.lastLayout&&e.lastLayout.requestedHeight===e.layout.height&&e.lastLayout.requestedWidth===e.layout.width&&e.lastLayout.parentMaxWidth===t&&e.lastLayout.direction===a?(e.layout.width=e.lastLayout.width,e.layout.height=e.lastLayout.height,e.layout.top=e.lastLayout.top,e.layout.left=e.lastLayout.left):(e.lastLayout||(e.lastLayout={}),e.lastLayout.requestedWidth=e.layout.width,e.lastLayout.requestedHeight=e.layout.height,e.lastLayout.parentMaxWidth=t,e.lastLayout.direction=a,e.children.forEach((function(e){e.layout.width=void 0,e.layout.height=void 0,e.layout.top=0,e.layout.left=0})),G(e,t,n),e.lastLayout.width=e.layout.width,e.lastLayout.height=e.layout.height,e.lastLayout.top=e.layout.top,e.lastLayout.left=e.layout.left)}return{layoutNodeImpl:G,computeLayout:H,fillNodes:function e(t){return t.layout&&!t.isDirty||(t.layout={width:void 0,height:void 0,top:0,left:0,right:0,bottom:0}),t.style||(t.style={}),t.children||(t.children=[]),t.children.forEach(e),t}}}();function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var m=function e(t,n){var a=!1;n.layoutBox=n.layoutBox||{},["left","top","width","height"].forEach((function(e){a=a||n.layoutBox[e]!==t.layout[e],n.layoutBox[e]=t.layout[e]})),n.shouldUpdate=n.shouldUpdate||a,t.children.forEach((function(t){var a=n.children[t.id];a&&e(t,a)}))},b=function e(t){var n=Promise.resolve();return t.isInserted?t.shouldUpdate&&(n=t.update()):n=t.insert(),n.then((function(){return Promise.all(Object.keys(t.children).map((function(n){var a=t.children[n];return e(a)})))}))},_=function e(t){t.isInserted?t.shouldUpdate&&t.update():t.insert(),Object.keys(t.children).map((function(n){var a=t.children[n];return e(a)}))},O=function(e){Object(o.default)(n,e);var t=y(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.style,o=r.name,s=r.auto,c=void 0===s||s;Object(a.default)(this,n),e=t.call(this,{style:i,id:0,name:o});var u=null;return e.auto=c,e.on("layout",(function(){e.auto&&(clearTimeout(u),u=setTimeout((function(){return e.layout()}),0))})),e.onebyone=!0,e}return Object(r.default)(n,[{key:"layout",value:function(){var e,t=this,n={id:this.id,style:{width:this.style.width,height:this.style.height,flexDirection:"row"},children:this.getChildren()};return e=n,g.fillNodes(e),g.computeLayout(e),m(n,this),this.onebyone?b(this).then((function(){return t.emit("update-done")})):(_(this),Promise.resolve().then((function(){return t.emit("update-done")})))}}]),n}(l.Element),I=new O({name:"webview-layout"});I.dest=0;var S=new O({name:"nativeview-layout",auto:!1});S.onebyone=!1,S.dest=1;var E=n(15);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var C=function(e){Object(o.default)(n,e);var t=w(n);function n(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.id,i=e.style,o=e.src,s=void 0===o?"":o,c=e.name,u=void 0===c?"":c,l=e.autoInsert,d=void 0!==l&&l,f=e.eventType,p=e.bubbleEvent,h=e.clickState;return Object(a.default)(this,n),t.call(this,{id:r,style:i,props:{src:s},type:"image",name:u,autoInsert:d,eventType:f,bubbleEvent:p,clickState:h})}return Object(r.default)(n,[{key:"toNativeData",value:function(){return Object.assign(Object(i.default)(Object(c.default)(n.prototype),"toNativeData",this).call(this),{iconPath:Object(E.hideInnerRequest)(this.src)})}}]),n}(p),k=n(9),T=n(106),A=n(31),P=n(2),D=n(1),x=n(47),R={video:1,"live-player":2,"live-pusher":3,image:4,audio:5},j=0,M={};D.default.onReady((function(){j=D.default.appType+1e3,M=D.default.appLaunchInfo}));var N={onLoad:1,onWaiting:2,onError:3,onPlay:4,onPause:5,onFullScreenChange:6,onEnd:7,onTimeUpdate:8,onSrcSet:9,onImageLoad:91,onImageError:92};function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var B={},F=["onVideoWaiting","onVideoPlay","onVideoPause","onVideoEnded","onVideoTimeUpdate","onVideoError","onVideoProgress"];P.IS_ANDROID&&F.push("onVideoFullScreenChange");var W=function(e,t,n){"ad"!==e.scene&&function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.component,n=e.eventName,a=e.eventData,r=e.src,i=void 0===r?"":r,o=Object(x._getCurrentNetworkType)(),s=wx&&wx.version&&wx.version.version||"",c=Object.keys(M.query||{}).map((function(e){return e+"="+M.query[e]})).join(",");c=encodeURIComponent(c);var u="";switch(n){case"onLoad":u=[a.duration,a.controls?2:1].join(";");break;case"onWaiting":u=[a.position,a.buffered].join(";");break;case"onError":u=a.errMsg.replace(","," ");break;case"onFullScreenChange":u=a.fullScreen?2:1;break;case"onTimeUpdate":u=[a.position,a.buffered].join(";");break;case"onImageLoad":u=[a.isLazyLoad?2:1,a.size,a.loadTime,a.width,a.height,a.originalWidth,a.originalHeight].join(";");break;case"onImageError":u=[a.isLazyLoad?2:1].join(";")}var l=[Math.round(Date.now()/1e3),M.scene,"",M.sessionid||M.sessionId,M.path,c,o,s,R[t],N[n],u,encodeURIComponent(i.substring(0,1024)).substring(0,1024),j].join(",");Reporter.reportKeyValue({key:"MediaCompStatus",value:l})}({component:"video",eventName:t,eventData:n,src:e.src})},V=function(e){Object(o.default)(n,e);var t=L(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.style,o=void 0===i?{}:i,s=r.name,c=r.x,u=void 0===c?0:c,l=r.y,d=void 0===l?0:l,f=r.width,p=void 0===f?300:f,h=r.height,v=void 0===h?200:h,g=r.hide,y=void 0!==g&&g,m=r.src,b=r.poster,_=r.referrerPolicy,O=void 0===_?"no-referrer":_,I=r.initialTime,S=void 0===I?0:I,E=r.playbackRate,w=void 0===E?1:E,C=r.live,A=void 0!==C&&C,P=r.objectFit,D=void 0===P?"contain":P,x=r.controls,R=void 0===x||x,j=r.showProgress,M=void 0===j||j,N=r.showProgressInControlMode,L=void 0===N?M:N,W=r.autoplay,V=void 0!==W&&W,U=r.muted,G=void 0!==U&&U,H=r.loop,Y=void 0!==H&&H,q=r.enableProgressGesture,z=void 0===q||q,K=r.enablePlayGesture,X=void 0!==K&&K,Z=r.showCenterPlayBtn,J=void 0===Z||Z,Q=r.autoInsert,$=void 0===Q||Q,ee=r.scene,te=void 0===ee?"default":ee,ne=r.preLoad,ae=void 0!==ne&&ne,re=r.obeyMuteSwitch,ie=void 0!==re&&re,oe=r.underGameView,se=void 0!==oe&&oe,ce=r.backgroundColor,ue=void 0===ce?"#000000":ce,le=r.zIndex;Object(a.default)(this,n),(e=t.call(this,{style:o,name:s})).isSrcChanged=!1,e.autoInsert=$,e.scene=te,e.preLoad=ae,e.underGameView=se,e.zIndex=le,B[e.id]=Object(k.default)(e);var de=null;e.emitter=new T.default,e.deferred=[],e._buffered=0,e._position=0;var fe={x:u,y:d,width:p,height:v,hide:y,src:m,poster:b,initialTime:S,playbackRate:w,live:A,objectFit:D,controls:R,showProgress:M,showProgressInControlMode:L,backgroundColor:ue,autoplay:V,muted:G,loop:Y,enableProgressGesture:z,enablePlayGesture:X,showCenterPlayBtn:J,obeyMuteSwitch:ie,referrerPolicy:O};return Object.keys(fe).forEach((function(t){Object.defineProperty(Object(k.default)(e),t,{configurable:!0,enumerable:!0,get:function(){return fe[t]},set:function(n){"src"!==t&&fe[t]===n||(fe[t]=n,e.isInserted?("src"===t&&(e.isSrcChanged=!0),"poster"===t&&(e.isPosterChanged=!0),"playbackRate"===t?e.operate("playbackRate",[n]):(clearTimeout(de),de=setTimeout((function(){return e.update()}),0))):e.deferred.push({type:"property",property:t,value:n}))}})})),F.forEach((function(t){var n=t.toLowerCase().replace("video","");e[n]=function(){},e.emitter.on(t,(function(t){e[n](t)}))})),e.autoInsert&&e.insert().then((function(){e.playbackRate&&1!==e.playbackRate&&e.operate("playbackRate",[e.playbackRate])})).then((function(){e.deferred.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)}))})),e}return Object(r.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return this.isInserted=!0,W(this,"onSrcSet",{}),new Promise((function(t,n){Object(u.invokeMethod)("insertVideoPlayer",Object.assign(e.toNativeData(),{data:JSON.stringify({id:e.id}),filePath:Object(E.hideInnerRequest)(e.src),scene:e.scene,preLoad:e.preLoad,underGameView:e.underGameView,referrerPolicy:e.referrerPolicy,zIndex:e.zIndex,success:function(n){e.emit("ready"),t(n)},fail:n}))}))}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){P.IS_IOS?setTimeout((function(){Object(u.invokeMethod)("removeVideoPlayer",{videoPlayerId:e.id,success:t,fail:n})}),0):Object(u.invokeMethod)("removeVideoPlayer",{videoPlayerId:e.id,success:t,fail:n}),F.forEach((function(t){var n=t.replace("Video","").replace("on","off");"function"==typeof e[n]&&e[n]()})),delete B[e.id]}))}},{key:"toNativeData",value:function(){this.layoutBox;var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={videoPlayerId:this.id,position:e,hide:this.hide,zIndex:Number.isInteger(+this.zIndex)?+this.zIndex:0,initialTime:this.initialTime,live:this.live,objectFit:this.objectFit,needEvent:!0,showBasicControls:this.controls,showProgress:this.showProgress,showProgressInControlMode:this.showProgressInControlMode,backgroundColor:this.backgroundColor,backgroudColor:this.backgroundColor,autoplay:this.autoplay,muted:this.muted,loop:this.loop,customCache:!1,enableProgressGesture:this.enableProgressGesture,enablePlayGesture:this.enablePlayGesture,showCenterPlayBtn:this.showCenterPlayBtn,obeyMuteSwitch:this.obeyMuteSwitch,referrerPolicy:this.referrerPolicy};return this.isSrcChanged&&(t.filePath=Object(E.hideInnerRequest)(this.src),this.isSrcChanged=!1),this.isPosterChanged&&(t.poster=Object(E.hideInnerRequest)(this.poster),this.isPosterChanged=!1),this.autoInsert||(t.parentId=this.parentId),t}},{key:"update",value:function(){this.shouldUpdate=!1;var e=this.toNativeData();return e.filePath&&W(this,"onSrcSet",{}),new Promise((function(t,n){Object(u.invokeMethod)("updateVideoPlayer",Object.assign({},e,{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(this.isInserted)return this.hide&&"playbackRate"!==e?Promise.reject(new Error(e+" can't be invoked when video is hidden")):new Promise((function(a,r){Object(u.invokeMethod)("operateVideoPlayer",{videoPlayerId:t.id,type:e,data:n,success:a,fail:r})}));this.deferred.push({type:"method",method:e,args:n})}},{key:"play",value:function(){return this.operate("play")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"seek",value:function(e){return this.operate("seek",[e])}},{key:"requestFullScreen",value:function(e){return this.operate("requestFullScreen",[e])}},{key:"exitFullScreen",value:function(){return this.operate("exitFullScreen")}}]),n}(l.Element);F.forEach((function(e){var t=e.replace("Video","");V.prototype[t]=function(t){this.emitter.on(e,t)};var n=t.replace("on","off");V.prototype[n]=function(t){this.emitter.off(e,t)}})),F.forEach((function(e){Object(A.onNativeEvent)(e,(function(t){var n=t.videoPlayerId||JSON.parse(t.data).id,a=B[n];if(a)if(a.emitter.emit(e,t),"onVideoProgress"!==e){var r=t;"onVideoTimeUpdate"===e?(a._position=t.position,r={position:t.position,buffered:a._buffered}):"onVideoWaiting"===e&&(r={position:a._position,buffered:a._buffered}),W(a,e.replace("Video",""),r)}else a._buffered=t.buffered}))}));var U=n(34),G=n(51),H=n(32),Y=n(26),q=[],z={add:function(e){e&&q.indexOf(e)<0&&q.push(e)},remove:function(e){var t=q.indexOf(e);t>=0&&q.splice(t,1)},get size(){return q.length}},K=n(157),X=n(84),Z=new WeakMap,J=new WeakMap,Q=new WeakMap,$={},ee={},te={},ne=new WeakMap,ae=new WeakMap,re=0,ie={};function oe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:++re;return te[e]?(ie[e]||(ie[e]=[]),ie[e].push({id:n,callback:t})):(te[e]=n,t()),n}function se(e,t){if(te[e]===t&&(delete te[e],ie[e]&&ie[e].length)){var n=ie[e].shift(),a=n.id;oe(e,n.callback,a)}}if(!K.wxSAB.new){var ce=0;Object.assign(K.wxSAB,{new:function(e){var t=++ce;return ee[t]=e,Object.keys($).forEach((function(n){var a=Z.get($[n]);__safeway__.worker.postMsgToWorker(a,{__cmd__:"setSharedBuffer",__buffer__:e,__id__:t},!1)})),t},get:function(e){return ee[e]},destroy:function(e){delete ee[e]},Lock:oe,Unlock:se})}__safeway__.worker.onWorkerMsg((function(e,t){var n=$[e],a=J.get(n),r=ae.get(n);if(t.__log__&&t.logs)(i=t).__isNativeConsole__?(o=wxNativeConsole)[i.level].apply(o,Object(Y.default)(i.logs)):(s=console)[i.level].apply(s,Object(Y.default)(i.logs));else{var i,o,s;if("setSharedBuffer"===t.__cmd__)return ee[t.__id__]=t.__buffer__,void Object.keys($).forEach((function(n){var a=Z.get($[n]);a!==e&&__safeway__.worker.postMsgToWorker(a,t,!1)}));if("lockSharedBuffer"!==t.__cmd__)if("unlockSharedBuffer"!==t.__cmd__){if(n&&"function"==typeof a)if(r&&r.useWKWorker){if("requireScriptSuccess"===t.__cmd__){var c=ne.get(n);return void(c&&c.evaluateWorkerScriptPromiseResolve&&c.evaluateWorkerScriptPromiseResolve())}if("readFile"===t.__cmd__)return void X._fs.readFile({filePath:t.filePath,success:function(n){var a=n.data;return __safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,result:String.fromCharCode.apply(String,Object(Y.default)(new Uint16Array(a)))})},fail:function(n){var a=n.errMsg;return __safeway__.worker.postMsgToWorker(e,{__cmd__:"callback",originalMsg:t,errMsg:a})}});a(t.data)}else a(Object(K.unpackSharedArrayBuffer)(t))}else se(t.__sid__,t.__lid__);else oe(t.__sid__,(function(){return n.postMessage(t)}),t.__lid__)}}));Object(u.onMethod)("onWorkerWebViewTerminate",(function(){Object.keys($).forEach((function(e){var t=$[e],n=ae.get(t);if(n&&n.useWKWorker){var a=Q.get(t);z.remove(t),Z.delete(t),J.delete(t),ne.delete(t),Q.delete(t),ae.delete(t),delete $[e],"function"==typeof a&&__errorTracer__.surroundThirdByTryCatch(a,"at Worker.onProcessKilled callback function")(),Reporter.reportIDKey({key:"onWorkerWebViewTerminate"})}}))}));function ue(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var le=new U.default,de={},fe=function(e){Object(o.default)(n,e);var t=ue(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.style,o=r.name,s=r.x,c=void 0===s?0:s,l=r.y,d=void 0===l?0:l,f=r.width,p=void 0===f?300:f,h=r.height,v=void 0===h?200:h,g=r.devicePosition,y=void 0===g?"back":g,m=r.flash,b=void 0===m?"auto":m,_=r.size,O=void 0===_?"small":_,I=r.autoInsert,S=void 0===I||I,E=r.success,w=r.fail,C=r.complete;Object(a.default)(this,n),(e=t.call(this,{style:i,name:o})).size=O,de[e.id]=Object(k.default)(e);var T=null;e.deferred=[];var A={x:c,y:d,width:p,height:v,devicePosition:y,flash:b};Object.keys(A).forEach((function(t){Object.defineProperty(Object(k.default)(e),t,{configurable:!0,enumerable:!0,get:function(){return A[t]},set:function(n){if(A[t]!==n){if(A[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(T),T=setTimeout((function(){return e.update()}),0)}}})})),le.on("onInit",(function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)}))}));var P={success:E,fail:w,complete:C};return S&&e.insert().then((function(t){e.frameWidth=t.width,e.frameHeight=t.height,Object(u.beforeInvokeCallback)({name:"createCamera",args:P})})).catch((function(){Object(u.beforeInvokeFail)("createCamera",P)})),e}return Object(r.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){Object(u.invokeMethod)("insertCamera",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){Object(u.invokeMethod)("updateCamera",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isInserted?new Promise((function(a,r){Object(u.invokeMethod)("operateCamera",Object.assign(n,{cameraId:t.id,type:e,fail:r,success:function(n){if(a(n),"listenFrameChange"===e){if(!G.default)throw new Error("device not supported");n.data=G.default.get(n.bufferId),n.data.__proto__=ArrayBuffer.prototype,t._frame=n}}}))})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={cameraId:this.id,position:e,devicePosition:this.devicePosition,flash:this.flash,size:this.size};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"takePhoto",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"normal";return this.operate("takePhoto",{quality:e})}},{key:"startRecord",value:function(){return this.operate("startRecord")}},{key:"stopRecord",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.operate("stopRecord",{compressed:e})}},{key:"onAuthCancel",value:function(e){le.on("onAuthCancel",e)}},{key:"onStop",value:function(e){le.on("onStop",e)}},{key:"onCameraFrame",value:function(e){var t=this;"function"==typeof e&&le.on("onCameraFrame",(function(){t._frame&&e({data:t._frame.data,width:t._frame.width,height:t._frame.height})}))}},{key:"listenFrameChange",value:function(e){var t=e?function(e){if(e._id>=0&&$[e._id])return e._id}(e):void 0,n={size:this.size};return void 0!==t&&Object(H.checkPermissionSync)("listenFrameChangeInWorker")?(n.workerId=t,this.operate("listenFrameChange",n)):this.operate("listenFrameChange",n)}},{key:"closeFrameChange",value:function(){return this._frame=null,this.operate("closeFrameChange")}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete de[e.id],le.removeAllListeners("onInit"),le.removeAllListeners("onAuthCancel"),le.removeAllListeners("onStop"),le.removeAllListeners("onCameraFrame"),Object(u.invokeMethod)("removeCamera",{cameraId:e.id,success:t,fail:n})}))}}]),n}(l.Element);Object(A.onNativeEvent)("onCameraInitDone",(function(){return le.emit("onInit")})),Object(A.onNativeEvent)("onCameraNeedAuthCancel",(function(){return le.emit("onAuthCancel")})),Object(A.onNativeEvent)("onCameraStop",(function(){return le.emit("onStop")})),Object(A.onNativeEvent)("onCameraFrame",(function(){return le.emit("onCameraFrame")}));var pe=n(56);function he(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var ve={},ge=new pe.Emitter("LivePlayer",!0),ye=function(e){Object(o.default)(n,e);var t=he(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.style,o=r.name,s=r.x,c=void 0===s?0:s,l=r.y,d=void 0===l?0:l,f=r.width,p=void 0===f?300:f,h=r.height,v=void 0===h?200:h,g=r.src,y=r.mode,m=void 0===y?"live":y,b=r.autoplay,_=void 0!==b&&b,O=r.muted,I=void 0!==O&&O,S=r.orientation,E=void 0===S?"vertical":S,w=r.objectFit,C=void 0===w?"contain":w,T=r.minCache,A=void 0===T?1:T,P=r.maxCache,D=void 0===P?3:P,x=r.soundMode,R=void 0===x?"speaker":x,j=r.autoPauseIfOpenNative,M=void 0===j||j,N=r.autoInsert,L=void 0===N||N,B=r.success,F=r.fail,W=r.complete;Object(a.default)(this,n),e=t.call(this,{style:i,name:o}),ve[e.id]=Object(k.default)(e);var V=null;e.deferred=[];var U={x:c,y:d,width:p,height:v,src:g,mode:m,autoplay:_,muted:I,orientation:E,objectFit:C,minCache:A,maxCache:D,soundMode:R,autoPauseIfOpenNative:M};Object.keys(U).forEach((function(t){Object.defineProperty(Object(k.default)(e),t,{enumerable:!0,get:function(){return U[t]},set:function(n){if(U[t]!==n){if(U[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(V),V=setTimeout((function(){return e.update()}),0)}}})}));var G={success:B,fail:F,complete:W};return L&&e.insert().then((function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)})),Object(u.beforeInvokeCallback)({name:"createLivePlayer",args:G})})).catch((function(e){var t=(e.errMsg||"").replace(/^\w+:fail\s*/,"");Object(u.beforeInvokeFail)("createLivePlayer",G,t)})),e}return Object(r.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){Object(u.invokeMethod)("insertLivePlayer",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){Object(u.invokeMethod)("updateLivePlayer",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return this.isInserted?new Promise((function(a,r){Object(u.invokeMethod)("operateLivePlayer",{livePlayerId:t.id,type:e,data:n,quality:n.quality,fail:r,success:a})})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePlayerId:this.id,position:e,playUrl:this.src,mode:"live"===this.mode?1:2,autoplay:this.autoplay,muted:this.muted,orientation:this.orientation,objectFit:this.objectFit,minCache:this.minCache,maxCache:this.maxCache,soundMode:this.soundMode,autoPauseIfOpenNative:this.autoPauseIfOpenNative,needEvent:!0,needNetStatus:!0,needAudioVolume:!0};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"play",value:function(){return this.operate("play")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"resume",value:function(){return this.operate("resume")}},{key:"mute",value:function(){return this.operate("mute")}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.operate("requestFullScreen",[e])}},{key:"exitFullScreen",value:function(){return this.operate("exitFullScreen")}},{key:"snapshot",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"raw";return this.operate("snapshot",{quality:e})}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete ve[e.id],ge.off("state-"+e.id),ge.off("fs-"+e.id),ge.off("net-"+e.id),ge.off("audio-"+e.id),Object(u.invokeMethod)("removeLivePlayer",{livePlayerId:e.id,success:t,fail:n})}))}},{key:"onStateChange",value:function(e){ge.on("state-"+this.id,e)}},{key:"offStateChange",value:function(e){ge.off("state-"+this.id,e)}},{key:"onFullScreenChange",value:function(e){ge.on("fs-"+this.id,e)}},{key:"offFullScreenChange",value:function(e){ge.off("fs-"+this.id,e)}},{key:"onNetStatus",value:function(e){ge.on("net-"+this.id,e)}},{key:"offNetStatus",value:function(e){ge.off("net-"+this.id,e)}},{key:"onAudioVolumeNotify",value:function(e){ge.on("audio-"+this.id,e)}},{key:"offAudioVolumeNotify",value:function(e){ge.off("audio-"+this.id,e)}}]),n}(l.Element),me=function(e,t){return Object(A.onNativeEvent)(e,(function(e){return t(e||{})}))};function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}me("onLivePlayerEvent",(function(e){var t=e.livePlayerId,n=e.errCode,a=e.errMsg;ge.emit("state-"+t,{code:n,message:a})})),me("onLivePlayerFullScreenChange",(function(e){var t=e.livePlayerId,n=e.fullScreen,a=e.direction;ge.emit("fs-"+t,{fullScreen:n,direction:a})})),me("onLivePlayerNetStatus",(function(e){var t=e.livePlayerId,n=e.info;n&&ge.emit("net-"+t,{videoBitrate:n.VIDEO_BITRATE,audioBitrate:n.AUDIO_BITRATE,videoFPS:n.VIDEO_FPS,videoGOP:n.VIDEO_GOP,netSpeed:n.NET_SPEED,netQualityLevel:n.NET_QUALITY_LEVEL,netJitter:n.NET_JITTER,videoWidth:n.VIDEO_WIDTH,videoHeight:n.VIDEO_HEIGHT})})),me("onLivePlayerAudioVolume",(function(e){var t=e.livePlayerId,n=e.volume;ge.emit("audio-"+t,{volume:n})}));var _e={},Oe=new pe.Emitter("LivePusher",!0);function Ie(e){switch(e){case"SD":return 1;case"HD":return 2;case"FHD":return 3;default:return 6}}function Se(e){switch(e){case"3:14":return 1;default:return 2}}var Ee=function(e){Object(o.default)(n,e);var t=be(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.style,o=r.name,s=r.x,c=void 0===s?0:s,l=r.y,d=void 0===l?0:l,f=r.width,p=void 0===f?300:f,h=r.height,v=void 0===h?200:h,g=r.url,y=r.mode,m=void 0===y?"RTC":y,b=r.autopush,_=void 0!==b&&b,O=r.muted,I=void 0!==O&&O,S=r.enableCamera,E=void 0===S||S,w=r.autoFocus,C=void 0===w||w,T=r.orientation,A=void 0===T?"vertical":T,P=r.beauty,D=void 0===P?0:P,x=r.whiteness,R=void 0===x?0:x,j=r.aspect,M=void 0===j?"9:16":j,N=r.minBitrate,L=void 0===N?200:N,B=r.maxBitrate,F=void 0===B?1e3:B,W=r.audioQuality,V=void 0===W?"high":W,U=r.waitingImage,G=r.waitingImageHash,H=r.zoom,Y=void 0!==H&&H,q=r.devicePosition,z=void 0===q?"front":q,K=r.remoteMirror,X=void 0!==K&&K,Z=r.localMirror,J=void 0===Z?"auto":Z,Q=r.audioReverbType,$=void 0===Q?0:Q,ee=r.enableMic,te=void 0===ee||ee,ne=r.enableAgc,ae=void 0!==ne&&ne,re=r.enableAns,ie=void 0!==re&&re,oe=r.audioVolumeType,se=void 0===oe?"voicecall":oe,ce=r.videoWidth,ue=void 0===ce?360:ce,le=r.videoHeight,de=void 0===le?640:le,fe=r.autoInsert,pe=void 0===fe||fe,he=r.success,ve=r.fail,ge=r.complete;Object(a.default)(this,n),e=t.call(this,{style:i,name:o}),_e[e.id]=Object(k.default)(e);var ye=null;e.deferred=[];var me={x:c,y:d,width:p,height:v,url:g,mode:m,autopush:_,muted:I,enableCamera:E,autoFocus:C,orientation:A,beauty:D,whiteness:R,aspect:M,minBitrate:L,maxBitrate:F,audioQuality:V,waitingImage:U,waitingImageHash:G,zoom:Y,devicePosition:z,remoteMirror:X,localMirror:J,audioReverbType:$,enableMic:te,enableAgc:ae,enableAns:ie,audioVolumeType:se,videoWidth:ue,videoHeight:de};Object.keys(me).forEach((function(t){Object.defineProperty(Object(k.default)(e),t,{enumerable:!0,get:function(){return me[t]},set:function(n){if(me[t]!==n){if(me[t]=n,!e.isInserted)return e.deferred.push({type:"property",property:t,value:n}),n;clearTimeout(ye),ye=setTimeout((function(){return e.update()}),0)}}})}));var be={success:he,fail:ve,complete:ge};return pe&&e.insert().then((function(){var t=e.deferred;e.isInserted=!0,e.deferred=[],t.forEach((function(t){"property"===t.type?e[t.property]=t.value:e.operate(t.method,t.args)})),Object(u.beforeInvokeCallback)({name:"createLivePusher",args:be})})).catch((function(e){var t=(e.errMsg||"").replace(/^\w+:fail\s*/,"");Object(u.beforeInvokeFail)("createLivePusher",be,t)})),e}return Object(r.default)(n,[{key:"insert",value:function(){var e=this;if(!this.isInserted)return new Promise((function(t,n){Object(u.invokeMethod)("insertLivePusher",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){Object(u.invokeMethod)("updateLivePusher",Object.assign(e.toNativeData(),{success:t,fail:n}))}))}},{key:"operate",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.isInserted?new Promise((function(a,r){Object(u.invokeMethod)("operateLivePusher",{livePusherId:t.id,type:e,url:n.url,volume:n.volume,quality:n.quality,fail:r,success:a})})):(this.deferred.push({type:"method",method:e,args:n}),Promise.resolve({}))}},{key:"toNativeData",value:function(){var e=this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},t={livePusherId:this.id,position:e,pushUrl:this.url,mode:Ie(this.mode),autopush:this.autopush,muted:this.muted,enableCamera:this.enableCamera,focusMode:this.autoFocus?0:1,orientation:this.orientation,beauty:this.beauty,whiteness:this.whiteness,aspect:Se(this.aspect),minBitrate:this.minBitrate,maxBitrate:this.maxBitrate,backgroundImage:this.waitingImage,backgroundMD5:this.waitingImageHash,zoom:this.zoom,devicePosition:this.devicePosition,remoteMirror:this.remoteMirror,localMirror:this.localMirror,enableMic:this.enableMic,enableAGC:this.enableAgc,enableANS:this.enableAns,audioVolumeType:this.audioVolumeType,audioReverbType:this.audioReverbType,videoWidth:this.videoWidth,videoHeight:this.videoHeight,needEvent:!0,needNetStatus:!0};return this.autoInsert||(t.parentId=this.parentId),t}},{key:"start",value:function(){return this.operate("start")}},{key:"stop",value:function(){return this.operate("stop")}},{key:"pause",value:function(){return this.operate("pause")}},{key:"resume",value:function(){return this.operate("resume")}},{key:"playBGM",value:function(e){return this.operate("playBGM",{url:e})}},{key:"stopBGM",value:function(){return this.operate("stopBGM")}},{key:"pauseBGM",value:function(){return this.operate("pauseBGM")}},{key:"resumeBGM",value:function(){return this.operate("resumeBGM")}},{key:"setBGMVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.operate("setBGMVolume",{volume:e})}},{key:"setMICVolume",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return this.operate("setMICVolume",{volume:e})}},{key:"startPreview",value:function(){return this.operate("startPreview")}},{key:"stopPreview",value:function(){return this.operate("stopPreview")}},{key:"snapshot",value:function(e){return this.operate("snapshot",{quality:e})}},{key:"switchCamera",value:function(){return this.operate("switchCamera")}},{key:"toggleTorch",value:function(){return this.operate("toggleTorch")}},{key:"destroy",value:function(){var e=this;return new Promise((function(t,n){delete _e[e.id],Oe.off("state-"+e.id),Oe.off("net-"+e.id),Oe.off("start-"+e.id),Oe.off("progress-"+e.id),Oe.off("complete-"+e.id),Oe.off("error-"+e.id),Object(u.invokeMethod)("removeLivePusher",{livePusherId:e.id,success:t,fail:n})}))}},{key:"onStateChange",value:function(e){Oe.on("state-"+this.id,e)}},{key:"offStateChange",value:function(e){Oe.off("state-"+this.id,e)}},{key:"onNetStatus",value:function(e){Oe.on("net-"+this.id,e)}},{key:"offNetStatus",value:function(e){Oe.off("net-"+this.id,e)}},{key:"onBGMStart",value:function(e){Oe.on("start-"+this.id,e)}},{key:"offBGMStart",value:function(e){Oe.off("start-"+this.id,e)}},{key:"onBGMProgress",value:function(e){Oe.on("progress-"+this.id,e)}},{key:"offBGMProgress",value:function(e){Oe.off("progress-"+this.id,e)}},{key:"onBGMComplete",value:function(e){Oe.on("complete-"+this.id,e)}},{key:"offBGMComplete",value:function(e){Oe.off("complete-"+this.id,e)}},{key:"onError",value:function(e){Oe.on("error-"+this.id,e)}},{key:"offError",value:function(e){Oe.off("error-"+this.id,e)}}]),n}(l.Element),we=function(e,t){return Object(A.onNativeEvent)(e,(function(e){return t(e||{})}))};we("onLivePusherEvent",(function(e){var t=e.livePusherId,n=e.errCode,a=e.errMsg;Oe.emit("state-"+t,{code:n,message:a})})),we("onLivePusherNetStatus",(function(e){var t=e.livePusherId,n=e.info;n&&Oe.emit("net-"+t,{videoBitrate:n.VIDEO_BITRATE,audioBitrate:n.AUDIO_BITRATE,videoFPS:n.VIDEO_FPS,videoGOP:n.VIDEO_GOP,netSpeed:n.NET_SPEED,netQualityLevel:n.NET_QUALITY_LEVEL,netJitter:n.NET_JITTER,videoWidth:n.VIDEO_WIDTH,videoHeight:n.VIDEO_HEIGHT})})),we("onLivePusherBGMStart",(function(e){var t=e.livePusherId;Oe.emit("start-"+t)})),we("onLivePusherBGMProgress",(function(e){var t=e.livePusherId,n=e.progress,a=e.duration;Oe.emit("progress-"+t,{progress:n,duration:a})})),we("onLivePusherBGMComplete",(function(e){var t=e.livePusherId,n=e.errCode;Oe.emit("complete-"+t,{errCode:n})})),we("onLivePusherError",(function(e){var t=e.livePusherId,n=e.errCode,a=e.errMsg,r=e.data;Oe.emit("error-"+t,{errCode:n,errMsg:a,data:r})}));var Ce=n(95);function ke(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var Te={},Ae=function(e){Object(o.default)(n,e);var t=ke(n);function n(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r.style,o=void 0===i?{}:i,s=r.name,c=r.x,u=void 0===c?0:c,l=r.y,d=void 0===l?0:l,f=r.width,p=void 0===f?300:f,h=r.height,v=void 0===h?200:h,g=r.url,y=void 0===g?"":g,m=r.urls,b=void 0===m?[]:m,_=r.scale,O=void 0===_?1:_,I=r.autoInsert,S=void 0===I||I,E=r.hide,w=void 0!==E&&E,C=r.zIndex,T=void 0===C?0:C;if(Object(a.default)(this,n),(e=t.call(this,{style:o,name:s})).x=u,e.y=d,e.width=p,e.height=v,e.scale=+O,e.hide=w,e.autoInsert=S,e.url=y,e.zIndex=T,e.emitter=new pe.Emitter("ImagePreviewer",!0),Te[e.id]=Object(k.default)(e),"string"==typeof b)try{e.urls=JSON.parse(b)}catch(t){e.urls=[]}else e.urls=b;return e._insertPromise=new Promise((function(t,n){e._insertPromiseResolve=t,e._insertPromiseReject=n})),e}return Object(r.default)(n,[{key:"insert",value:function(){var e=this;return this.toNativeData(),Object(u.invokeMethod)("insertImagePreviewer",Object.assign(this.toNativeData(),{success:function(t){e._insertPromiseResolve(t)},fail:function(t){e._insertPromiseReject(t)}})),this._insertPromise}},{key:"update",value:function(){var e=this;return new Promise((function(t,n){e._insertPromise.then((function(){e.toNativeData(),Object(u.invokeMethod)("updateImagePreviewer",Object.assign(e.toNativeData(),{success:function(e){t(e)},fail:function(e){n(e)}}))})).catch(n)}))}},{key:"destroy",value:function(){var e=this;return this.id,new Promise((function(t,n){setTimeout((function(){Object(u.invokeMethod)("removeImagePreviewer",{viewId:e.id,success:t,fail:n}),e.offImageLoadFail(),delete Te[e.id]}),0)}))}},{key:"toNativeData",value:function(){this.layoutBox;var e={position:this.layoutBox||{left:this.x,top:this.y,width:this.width,height:this.height},urls:this.urls.length>0?this.urls:[this.url],scale:this.scale,hide:this.hide,viewId:this.id,zIndex:this.zIndex,parentId:this.parentId};return this.parentId,e}},{key:"onImageLoadFail",value:function(e){this.emitter.on("onImageLoadFail",e)}},{key:"offImageLoadFail",value:function(e){this.emitter.off("onImageLoadFail",e)}}]),n}(l.Element);Object(A.onNativeEvent)("onImagePreviewerLoadFail",(function(e){Te[e.viewId].emitter.emit("onImageLoadFail",e)}))},function(e,t,n){n.r(t),n.d(t,"EventEmitter2",(function(){return c}));var a=n(18),r=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(){this._events={},this._conf&&o.call(this,this._conf)}function o(e){e?(this._conf=e,e.delimiter&&(this.delimiter=e.delimiter),this._maxListeners=void 0!==e.maxListeners?e.maxListeners:20,e.newListener&&(this._newListener=e.newListener),e.removeListener&&(this._removeListener=e.removeListener)):this._maxListeners=20}function s(e,t){console.warn("[Event] "+e+" listeners of event "+t+" have been added, possibly causing memory leak.")}function c(e){this._events={},this._newListener=!1,this._removeListener=!1,o.call(this,e)}c.prototype.delimiter=".",c.prototype.setMaxListeners=function(e){void 0!==e&&(this._maxListeners=e,this._conf||(this._conf={}),this._conf.maxListeners=e)},c.prototype.event="",c.prototype.once=function(e,t){return this._once(e,t,!1)},c.prototype.prependOnceListener=function(e,t){return this._once(e,t,!0)},c.prototype._once=function(e,t,n){return this._many(e,1,t,n),this},c.prototype.many=function(e,t,n){return this._many(e,t,n,!1)},c.prototype.prependMany=function(e,t,n){return this._many(e,t,n,!0)},c.prototype._many=function(e,t,n,a){var r=this;if("function"!=typeof n)throw new Error("many only accepts instances of Function");function i(){return 0==--t&&r.off(e,i),n.apply(this,arguments)}return i._origin=n,this._on(e,i,a),r},c.prototype.emit=function(){this._events||i.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return!1;var t,n,a,r,o,s=arguments.length;if(this._all&&this._all.length){if(o=this._all.slice(),s>3)for(t=new Array(s),r=0;r<s;r++)t[r]=arguments[r];for(a=0,n=o.length;a<n;a++)switch(this.event=e,s){case 1:o[a].call(this,e);break;case 2:o[a].call(this,e,arguments[1]);break;case 3:o[a].call(this,e,arguments[1],arguments[2]);break;default:o[a].apply(this,t)}}if("function"==typeof(o=this._events[e])){switch(this.event=e,s){case 1:o.call(this);break;case 2:o.call(this,arguments[1]);break;case 3:o.call(this,arguments[1],arguments[2]);break;default:for(t=new Array(s-1),r=1;r<s;r++)t[r-1]=arguments[r];o.apply(this,t)}return!0}if(o&&(o=o.slice()),o&&o.length){if(s>3)for(t=new Array(s-1),r=1;r<s;r++)t[r-1]=arguments[r];for(a=0,n=o.length;a<n;a++)switch(this.event=e,s){case 1:o[a].call(this);break;case 2:o[a].call(this,arguments[1]);break;case 3:o[a].call(this,arguments[1],arguments[2]);break;default:o[a].apply(this,t)}return!0}if(!this._all&&"error"===e)throw arguments[1]instanceof Error?arguments[1]:new Error("Uncaught, unspecified 'error' event.");return!!this._all},c.prototype.emitAsync=function(){this._events||i.call(this);var e=arguments[0];if("newListener"===e&&!this._newListener&&!this._events.newListener)return Promise.resolve([!1]);var t,n,a,r,o,s=[],c=arguments.length;if(this._all){if(c>3)for(t=new Array(c),r=1;r<c;r++)t[r]=arguments[r];for(a=0,n=this._all.length;a<n;a++)switch(this.event=e,c){case 1:s.push(this._all[a].call(this,e));break;case 2:s.push(this._all[a].call(this,e,arguments[1]));break;case 3:s.push(this._all[a].call(this,e,arguments[1],arguments[2]));break;default:s.push(this._all[a].apply(this,t))}}if("function"==typeof(o=this._events[e]))switch(this.event=e,c){case 1:s.push(o.call(this));break;case 2:s.push(o.call(this,arguments[1]));break;case 3:s.push(o.call(this,arguments[1],arguments[2]));break;default:for(t=new Array(c-1),r=1;r<c;r++)t[r-1]=arguments[r];s.push(o.apply(this,t))}else if(o&&o.length){if(o=o.slice(),c>3)for(t=new Array(c-1),r=1;r<c;r++)t[r-1]=arguments[r];for(a=0,n=o.length;a<n;a++)switch(this.event=e,c){case 1:s.push(o[a].call(this));break;case 2:s.push(o[a].call(this,arguments[1]));break;case 3:s.push(o[a].call(this,arguments[1],arguments[2]));break;default:s.push(o[a].apply(this,t))}}else if(!this._all&&"error"===e)return arguments[1]instanceof Error?Promise.reject(arguments[1]):Promise.reject("Uncaught, unspecified 'error' event.");return Promise.all(s)},c.prototype.on=function(e,t){return this._on(e,t,!1)},c.prototype.prependListener=function(e,t){return this._on(e,t,!0)},c.prototype.onAny=function(e){return this._onAny(e,!1)},c.prototype.prependAny=function(e){return this._onAny(e,!0)},c.prototype.addListener=c.prototype.on,c.prototype._onAny=function(e,t){if("function"!=typeof e)throw new Error("onAny only accepts instances of Function");return this._all||(this._all=[]),t?this._all.unshift(e):this._all.push(e),this},c.prototype._on=function(e,t,n){if("function"==typeof e)return this._onAny(e,t),this;if("function"!=typeof t)throw new Error("on only accepts instances of Function");return this._events||i.call(this),this._newListener&&this.emit("newListener",e,t),this._events[e]?("function"==typeof this._events[e]&&(this._events[e]=[this._events[e]]),n?this._events[e].unshift(t):this._events[e].push(t),!this._events[e].warned&&this._maxListeners>0&&this._events[e].length>this._maxListeners&&(this._events[e].warned=!0,s.call(this,this._events[e].length,e))):this._events[e]=t,this},c.prototype.off=function(e,t){if("function"!=typeof t)throw new Error("removeListener only takes instances of Function");var n,i=[];if(!this._events[e])return this;n=this._events[e],i.push({_listeners:n});for(var o=0;o<i.length;o++){if(n=i[o]._listeners,r(n)){for(var s=-1,c=0,u=n.length;c<u;c++)if(n[c]===t||n[c].listener&&n[c].listener===t||n[c]._origin&&n[c]._origin===t){s=c;break}if(s<0)continue;return this._events[e].splice(s,1),0===n.length&&delete this._events[e],this._removeListener&&this.emit("removeListener",e,t),this}(n===t||n.listener&&n.listener===t||n._origin&&n._origin===t)&&(delete this._events[e],this._removeListener&&this.emit("removeListener",e,t))}return function e(t){if(void 0!==t){var n=Object.keys(t);for(var r in n){var i=n[r],o=t[i];o instanceof Function||"object"!==Object(a.default)(o)||null===o||(Object.keys(o).length>0&&e(t[i]),0===Object.keys(o).length&&delete t[i])}}}(this.listenerTree),this},c.prototype.offAny=function(e){var t,n=0,a=0;if(e&&this._all&&this._all.length>0){for(n=0,a=(t=this._all).length;n<a;n++)if(e===t[n])return t.splice(n,1),this._removeListener&&this.emit("removeListenerAny",e),this}else{if(t=this._all,this._removeListener)for(n=0,a=t.length;n<a;n++)this.emit("removeListenerAny",t[n]);this._all=[]}return this},c.prototype.removeListener=c.prototype.off,c.prototype.removeAllListeners=function(e){return void 0===e?(!this._events||i.call(this),this):(this._events&&(this._events[e]=null),this)},c.prototype.listeners=function(e){return this._events||i.call(this),this._events[e]||(this._events[e]=[]),r(this._events[e])||(this._events[e]=[this._events[e]]),this._events[e]},c.prototype.eventNames=function(){return Object.keys(this._events)},c.prototype.listenerCount=function(e){return this.listeners(e).length},c.prototype.listenersAny=function(){return this._all?this._all:[]},t.default=c},function(e,t,n){n.r(t),n.d(t,"skiaCanvasMappings",(function(){return b})),n.d(t,"canvasMap",(function(){return _})),n.d(t,"skiaCanvasInfo",(function(){return O})),n.d(t,"canvasRefMapById",(function(){return I})),n.d(t,"skiaCanvasInsert",(function(){return E})),n.d(t,"skiaCanvasRemove",(function(){return w})),n.d(t,"getSkiaCanvasById",(function(){return C})),n.d(t,"CanvasFontManager",(function(){return k})),n.d(t,"SkiaCanvas",(function(){return T}));var a=n(9),r=n(14),i=n(17),o=n(8),s=n(26),c=n(4),u=n(5),l=n(21),d=n(20),f=n(109),p=n(43),h=n(137);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(o.default)(e);if(t){var r=Object(o.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(i.default)(this,n)}}function g(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var m={},b={},_=new WeakMap,O={},I={},S=Object(l.getEventManager)("skiaCanvasLoadFontFace");function E(e,t){var n=Object(d.concatId)(t,e.canvasNumber);b[n]={top:e.position.top,left:e.position.left,width:e.position.width,height:e.position.height,canvasNumber:e.canvasNumber,nodeId:e.nodeId,pluginId:e.pluginId,webviewId:t},O[e.canvasNumber]={lastTouches:[],data:e.data,compPath:e.compPath};var a=m[n];"function"==typeof a&&(a.call(),delete m[n]),Object(p.onBeforeUnloadPage)(t,(function(){w(e,t)}))}function w(e,t){var n=Object(d.concatId)(t,e.canvasNumber);delete m[n],delete b[n],delete I[n],delete O[e.canvasNumber]}function C(e,t){var n=Object(d.concatId)(e,t),a=I[n];return a||null}var k=function(){function e(){Object(c.default)(this,e),this._fontAssets=[],this.loadFontFace(h.nativeFontAssets),this.subscribeFontLoadEvent()}return Object(u.default)(e,[{key:"loadFontFace",value:function(e){var t;(t=this._fontAssets).push.apply(t,Object(s.default)(e))}},{key:"subscribeFontLoadEvent",value:function(){var e=this;S.internalOnMethod((function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.nativeFontAssets,r=[],i=g(a);try{var o=function(){var n=t.value;e._fontAssets.find((function(e){return e.src===n.src||e.originalSrc===n.originalSrc}))||r.push(n)};for(i.s();!(t=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}r.length>0&&e.loadFontFace(r)}))}}],[{key:"initialize",value:function(e){this.fontManagerInstance||(this.fontManagerInstance=new e)}}]),e}();k.fontManagerInstance=null;var T=function(e){Object(r.default)(n,e);var t=v(n);function n(e,r,i,o){var s;return Object(c.default)(this,n),(s=t.call(this))._webviewId=e,s._canvasId=Object(d.concatId)(e,r),s._nodeId=o,s._nodeCanvasId=i,I[s._canvasId]=Object(a.default)(s),s}return Object(u.default)(n,[{key:"_init",value:function(){var e=b[this._canvasId];if(this.id=e.canvasNumber,this._top=e.top,this._left=e.left,this._width=e.width,this._height=e.height,this.id){var t=this._initCanvasInstance();t.width=300,t.height=150,_.set(this,t)}else console.error("Canvas node cannot be found")}},{key:"_onReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=function(){_.get(e)||e._init(),t()};b[this._canvasId]?n():m[this._canvasId]=n}},{key:"getContext",value:function(e,t){if("2d"===e){var n=_.get(this);if(!n)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;var a=n.getContext("2d",t);return Object.defineProperty(this,"_ctx",{enumerable:!1,configurable:!1,writable:!1,value:a}),a}"webgl"===e?console.error("Canvas: current node only supports 2d context"):console.error("Invalid context type ["+e+"] for Canvas#getContext")}},{key:"width",get:function(){var e=_.get(this);return e&&e.width},set:function(e){var t=_.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=_.get(this);return e&&e.height},set:function(e){var t=_.get(this);t&&(t.height=e)}},{key:"createImageData",value:function(){}},{key:"createPath2D",value:function(e){}},{key:"requestAnimationFrame",value:function(e){}},{key:"cancelAnimationFrame",value:function(){}},{key:"toDataURL",value:function(e,t){var n=_.get(this);return n?n.toDataURL(e,t):""}}]),n}(f.CanvasInterface)},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));var a=n(145);var r=n(103),i=n(146);function o(e,t){return Object(a.default)(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],a=!0,r=!1,i=void 0;try{for(var o,s=e[Symbol.iterator]();!(a=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,i=e}finally{try{a||null==s.return||s.return()}finally{if(r)throw i}}return n}}(e,t)||Object(r.default)(e,t)||Object(i.default)()}},function(e,t,n){n.r(t),n.d(t,"operateWXData",(function(){return o})),n.d(t,"_operateWXData",(function(){return s})),n.d(t,"constructOperateWXData",(function(){return i})),n.d(t,"_pluginOperateWXData",(function(){return c}));var a=n(0),r=n(2),i=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.beforeInvoke)("operateWXData",o,{apiName:""})){if("operateWXData"===t);var s={api_name:o.apiName,data:o.reqData||{},operate_directly:e};n&&(s.plugin_appid=o.pluginId);var c={data:s,isImportant:!0===i,requestInQueue:!o.hasOwnProperty("requestInQueue")||Boolean(o.requestInQueue)};Object(a.baseOperateWXData)(Object.assign({},c,o),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess:function(e){r.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})}}},o=i(!0),s=i(!1),c=i(!0,void 0,!0)},function(e,t,n){n.r(t),n.d(t,"guid",(function(){return f})),n.d(t,"surroundByTryCatchFactory",(function(){return p})),n.d(t,"noop",(function(){return h})),n.d(t,"anyTypeToString",(function(){return v})),n.d(t,"stringToAnyType",(function(){return g})),n.d(t,"surroundByPromiseFactory",(function(){return y})),n.d(t,"promised",(function(){return m})),n.d(t,"asyncPromised",(function(){return b})),n.d(t,"invoke2Async",(function(){return O})),n.d(t,"async2Invoke",(function(){return I})),n.d(t,"async2InvokeWithPromise",(function(){return S}));var a=n(116),r=n(16),i=n(12),o=n(0),s=["errMsg"],c=["errMsg"],u=["success","fail","complete"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=16*Math.random()|0;return("x"===e?t:3&t|8).toString(16)}))}function p(e,t){return function(){try{return e.apply(void 0,arguments)}catch(e){if("[object Error]"===Object.prototype.toString.apply(e)){if("AppServiceSdkKnownError"===e.type)throw e;"ThirdScriptError"===e.type?Reporter.thirdErrorReport({error:e,extend:t}):Reporter.errorReport({key:"appServiceSDKScriptError",error:e,extend:t})}}}}function h(){}var v=p((function(e){var t=Object(i.getDataType)(e);if("Array"===t||"Object"===t)try{e=JSON.stringify(e)}catch(e){throw e.type="AppServiceSdkKnownError",e}else e="String"===t||"Number"===t||"Boolean"===t?e.toString():"Date"===t?e.getTime().toString():"Undefined"===t?"undefined":"Null"===t?"null":"";return{data:e,dataType:t}}),"anyTypeToString");var g=p((function(e,t){return"String"===t?e:e="Array"===t||"Object"===t?JSON.parse(e):"Number"===t?parseFloat(e):"Boolean"===t?"true"===e:"Date"===t?new Date(parseInt(e,10)):"Undefined"===t?void 0:"Null"===t?null:""}),"stringToAnyType");function y(e){return function(){for(var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length,r=new Array(a>1?a-1:0),i=1;i<a;i++)r[i-1]=arguments[i];var o=n=n||{},s=o.success,c=o.fail,u=o.complete;return s||c||u?e.apply(this,[n].concat(r)):new Promise((function(a,i){var o=Object.assign({success:a,fail:i},n);e.apply(t,[o].concat(r))}))}}function m(e,t,n){var a=y(n.value);return n.value=function(){return a.apply(this,arguments)},n}function b(e,t,n){var a=n.value,r=y(I(t,a));return n.value=function(){return r.apply(this,arguments)},n}var _=Symbol("ErrorInfosSymbol"),O=function(e){return function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new Promise((function(n,i){return e.apply(void 0,[d(d({},t),{},{success:n,fail:function(e){var t=e.errMsg,n=Object(a.default)(e,s),r=new Error(t.replace(/^\w+:fail ?/,""));Object.assign(r,n),r[_]=n,i(r)},complete:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.errMsg,n=Object(a.default)(e,c);if(t&&!/^\w+:(ok|fail)/.test(t)){var r=new Error(e.errMsg.replace(/^\w+:/,""));Object.assign(r,n),r[_]=n,r._complete_hook=!0,i(r)}}})].concat(r))}))}},I=function(e,t){return function(){for(var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.success,i=n.fail,s=n.complete,c=Object(a.default)(n,u),l={success:r,fail:i,complete:s},d=arguments.length,f=new Array(d>1?d-1:0),p=1;p<d;p++)f[p-1]=arguments[p];t.apply(void 0,[c].concat(f)).then((function(t){return Object(o.beforeInvokeCallback)({name:e,args:l,success:!0,res:t})}),(function(t){t._complete_hook?Object(o.beforeInvokeComplete)({name:e,args:l,errMsg:t.message,res:t[_]||{}}):Object(o.beforeInvokeCallback)({name:e,args:l,success:!1,errMsg:t.message,res:t[_]||{}})}))}},S=function(e,t){return y(I(e,t))}},function(e,t,n){n.r(t),n.d(t,"showToast",(function(){return b})),n.d(t,"hideToast",(function(){return _})),n.d(t,"showLoading",(function(){return I})),n.d(t,"hideLoading",(function(){return S})),n.d(t,"_showModal",(function(){return p})),n.d(t,"showModal",(function(){return h})),n.d(t,"showActionSheet",(function(){return E})),n.d(t,"showShareActionSheet",(function(){return w})),n.d(t,"_checkIsInteracting",(function(){return C}));var a=n(0),r=n(10),i=n(6),o=n(79),s=n(2),c=n(15),u=n(52),l=n(41),d=n(140),f=!1,p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:"",content:"",confirmText:"确定",cancelText:"取消",showCancel:!0,confirmColor:s.IS_MINA?"#fff":"#576B95",confirmColorDark:void 0!==__wxConfig.theme&&e.confirmColor?e.confirmColor:"#7D90A9",cancelColor:s.IS_MINA?"#07C160":"#000000",cancelColorDark:void 0!==__wxConfig.theme&&e.cancelColor?e.cancelColor:"#AAAAAA",editable:!1,placeholderText:""};t=Object(r.extend)(t,e),Object(a.beforeInvoke)("showModal",t,{title:"",content:"",confirmText:"",cancelText:"",confirmColor:"",cancelColor:"",editable:!1,placeholderText:""})&&(t.confirmText.replace(/[^\x00-\xff]/g,"##").length>8?Object(a.beforeInvokeFail)("showModal",e,"confirmText length should not larger than 4 Chinese characters"):t.cancelText.replace(/[^\x00-\xff]/g,"##").length>8?Object(a.beforeInvokeFail)("showModal",e,"cancelText length should not larger than 4 Chinese characters"):Object(a.invokeMethod)("showModal",t,{beforeSuccess:function(e){e.confirm=Boolean(e.confirm),s.IS_IOS||s.IS_MAC?e.cancel=!e.confirm:e.cancel=!e.confirm&&Boolean(e.cancel),Object(o._setWxIsInvokeInTapForNavToMiniProgram)()},beforeAll:function(){f=!0},afterAll:function(){f=!1}}))},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(e),Object(c.isGame)()&&Object(u.reportCanvasData)(u.ReportCanvasDataEventType.EVENT_CANVAS_AFTER_MODAL)},v={},g={};Object(l.onAppRoute)((function(e){g[e.webviewId]=[]})),Object(d.onDomReady)((function(e){setTimeout((function(){var t=e.webviewId,n=g[t]||[];v[t]=!0,n.length>0&&(m=!1,O=!1,n.forEach((function(e){var t=e.res,n=e.args,r=/hideLoading/.test(t.errMsg)?{beforeAll:function(e){e.errMsg=e.errMsg.replace("hideToast","hideLoading")}}:{};Object(a.invokeMethod)("hideToast",n,r)}))),delete g[t]}),100)}));var y=1,m=!1,b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={duration:1500,title:"",icon:"success",mask:!1};if(t=Object(r.extend)(t,e),e.image&&(t.image=Object(r.getRealRoute)(i.default.lastRoute,e.image,!1)),["success","loading","none","error"].indexOf(t.icon)<0&&(t.icon="success"),"none"===t.icon&&(t.icon=""),Object(a.beforeInvoke)("showToast",t,{duration:1,title:"",icon:""})){var n=g[i.default.currentWebviewId]||[];n.length>0&&(m=!1,O=!1,n.forEach((function(e){var t=e.res,n=e.args;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete g[i.default.currentWebviewId]),m=y++,setTimeout((function(){m=!1}),t.duration),t.maskAll=!1,Object(a.invokeMethod)("showToast",t)}},_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.IS_DEVTOOLS&&O&&(!m||m<O))return m=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideToast:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideToast:ok"})})),void console.warn("请注意 showToast 与 hideToast 必须配对使用");i.default.currentWebviewId;m=!1,Object(a.invokeMethod)("hideToast",e)},O=!1,I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:"",icon:"loading",mask:!1,duration:1e8};if((t=Object(r.extend)(t,e)).icon="loading",delete t.image,Object(a.beforeInvoke)("showLoading",t,{duration:1,title:""})){var n=g[i.default.currentWebviewId]||[];n.length>0&&(m=!1,O=!1,n.forEach((function(e){var t=e.res,n=e.args;"function"==typeof n.success&&n.success(t),"function"==typeof n.complete&&n.complete(t)})),delete g[i.default.currentWebviewId]),O=y++,t.maskAll=!1,Object(a.invokeMethod)("showToast",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("showToast","showLoading")}})}},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(s.IS_DEVTOOLS&&m&&(!O||O<m))return O=!1,"function"==typeof e.success&&setTimeout((function(){e.success({errMsg:"hideLoading:ok"})})),"function"==typeof e.complete&&setTimeout((function(){e.complete({errMsg:"hideLoading:ok"})})),void console.warn("请注意 showLoading 与 hideLoading 必须配对使用");i.default.currentWebviewId;O=!1,Object(a.invokeMethod)("hideToast",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("hideToast","hideLoading")}})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={itemList:[],itemColor:"#000000",itemColorDark:void 0!==__wxConfig.theme&&e.itemColor?e.itemColor:"#FFFFFFCC"};delete(t=Object(r.extend)(t,e)).cancelText,delete t.cancelColor,Object(a.beforeInvoke)("showActionSheet",t,{itemList:["1"],itemColor:""})&&(e.itemList.length>6?Object(a.beforeInvokeFail)("showActionSheet",e,"parameter error: itemList should not be large than 6"):Object(a.invokeMethod)("showActionSheet",t,{beforeAll:function(e){(e.errMsg.indexOf(":ok")>-1||e.errMsg.indexOf(":cancel")>-1)&&Object(o._setWxIsInvokeInTapForNavToMiniProgram)(),f=!0},afterAll:function(){f=!1}}))},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.invokeMethod)("showShareActionSheet",e)},C=function(){return f}},function(e,t,n){n.r(t),n.d(t,"htmlDecode",(function(){return s})),n.d(t,"getQueryString",(function(){return c})),n.d(t,"addUrlParam",(function(){return u})),n.d(t,"getFollowPageUrl",(function(){return l})),n.d(t,"isObject",(function(){return d})),n.d(t,"mergeDeep",(function(){return f})),n.d(t,"getTodayFormat",(function(){return p})),n.d(t,"convertTenThousand",(function(){return g})),n.d(t,"getAdDataViewId",(function(){return h})),n.d(t,"truncate",(function(){return v})),n.d(t,"pick",(function(){return y})),n.d(t,"get",(function(){return m})),n.d(t,"measureText",(function(){return b}));var a=n(16),r=n(18),i=n(0),o=n(24);n.d(t,"timeout",(function(){return o.timeout}));var s=function(e){return 0===(e=e||"").length?"":e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&nbsp;/g,"    ").replace(/&#039;|&#39;/g,"'").replace(/&#047;|&#47;/g,"/").replace(/&#092;|&#92;/g,"\\").replace(/&quot;/g,'"').replace(/&amp;/g,"&").replace(/<br>/g,"\n").replace(/<br\/>/g,"\n").replace(/<br \/>/g,"\n")},c=function(e){var t={};if(e.indexOf("?")>-1){var n=e.indexOf("?")+1,a=e.substring(n);a.indexOf("#")>-1&&(a=a.substring(0,a.indexOf("#")));for(var r=a.split("&"),i=0;i<r.length;i++){var o=r[i].split("=");t[o[0]]=o[1]}}return t},u=function(e,t){if(!e)return"";if(!t)return e;var n=e.split("#"),a=n[0].indexOf("?")>-1?"&":"?",r="",i=Object.keys(t);if(i.length>0){for(var o=0;o<i.length;o++)r=r.concat(i[o]+"="+t[i[o]]+"&");return r.length>0&&(r=r.substring(0,r.length-1)),n[0]+a+r+(n[1]?"#"+n[1]:"")}return e},l=function(e,t){var n={source:4,tid:e.traceid,pt:e.pt,aid:e.aid,ad_engine:e.is_cpm?1:0,pos_type:e.pos_type};return u(t,n)},d=function(e){return e&&"object"===Object(r.default)(e)&&!Array.isArray(e)},f=function e(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];if(!r.length)return t;var o=r.shift();if(d(t)&&d(o))for(var s in o)d(o[s])?(t[s]||Object.assign(t,Object(a.default)({},s,{})),e(t[s],o[s])):Object.assign(t,Object(a.default)({},s,o[s]));return e.apply(void 0,[t].concat(r))},p=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate();return[e.getFullYear(),(t>9?"":"0")+t,(n>9?"":"0")+n].join("")},h=function(e){if(e)return e.wx_game_video&&e.wx_game_video.short_video?e.wx_game_video.short_video.viewid:void 0},v=function(e,t){for(var n=0,a=0,r=0;r<e.length;r++)(n+=/[\u4e00-\u9fa5]/.test(e[r])?2:1)<t-1&&(a=r);return n>t?e.substring(0,a+1)+"...":e},g=function(e){return e<1e4?e.toString():(e/1e4).toFixed(1)+"万"},y=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},m=function(e,t,n){"string"==typeof t&&(t=t.split("."));for(var a=e,r=0;a&&r<t.length;)a=a[t[r]],r+=1;return a||n},b=function(e){var t=0,n=Object.assign({},{fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},e);try{Object(i.invokeMethod)("measureText",Object.assign({},n,{complete:function(e){t=e.width||0}}))}catch(e){}return t}},function(e,t,n){n.r(t),n.d(t,"onAppRoute",(function(){return v})),n.d(t,"offAppRoute",(function(){return g}));var a=n(0),r=n(31),i=n(93),o=n(60),s=n(10),c=n(21),u=n(153),l=n(1),d=n(48),f=n(6),p=n(76),h=Object(c.getEventManager)("AppRoute"),v=h.internalOnMethod,g=h.internalOffMethod;Object(r.onNativeEvent)("onAppRoute",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;d.nativeConsole.log("received onAppRoute, res=",JSON.stringify(e)),p.webviewAnimation.appRoute=!0,p.webviewAnimation.appRouteDone=!1;var n=Object(u.handleRewriteRoute)(e,t);if(!n){if(e.path=Object(s.removeHtmlSuffixFromUrl)(e.path),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==e.openType&&(f.default.lastRoute=e.path||"",f.default.lastRawQuery=JSON.parse(JSON.stringify(e.query||{}))),f.default.lastOpenType=e.openType,"appLaunch"!==e.openType&&"autoReLaunch"!==e.openType)for(var r in e.query)try{e.query[r]=decodeURIComponent(e.query[r])}catch(e){}if("dismissPip"!==e.openType&&(f.default.query=e.query,f.default.currentWebviewId=e.webviewId),"undefined"!=typeof __libVersionInfo__&&__libVersionInfo__.features&&__libVersionInfo__.features.pruneWxConfigByPage){var c=e.preloadRule||l.default._preloadRule&&l.default._preloadRule[e.path],v=e.page||l.default._page&&l.default._page[e.path+".html"];if(c&&(l.default.updatePreloadRule(e.path,c),e.preloadRule,l.default.preloadRule),v){var g=l.default.global&&l.default.global.window||{};v.window=Object.assign({},g,v.window),l.default.updatePage(e.path,v),e.page,l.default.page}}Object(a.publish)("onAppRoute",e,[]),Object(i.checkNeedAppEnterForegroundPatch)()&&o.default.emitter.emit("onAppRoute"),h.emit(e)}}))},function(e,t,n){n.r(t),n.d(t,"getSystemInfo",(function(){return h})),n.d(t,"getSystemInfoSync",(function(){return v})),n.d(t,"getSystemInfoAsync",(function(){return g})),n.d(t,"getStaticSystemInfoSync",(function(){return y})),n.d(t,"getStableSystemInfo",(function(){return S})),n.d(t,"getInitScreenSize",(function(){return E})),n.d(t,"private_getUserAgent",(function(){return A}));var a=n(0),r=n(31),i=n(89),o=n(1),s=n(2),c=n(15),u=n(45),l=wxNativeConsole.createLogger("systemInfo"),d=null,f=function(e){l.info("[before process]",e);var t=s.PLATFORM;s.IS_IOS&&(e.brand="iPhone"),s.IS_DEVTOOLS&&"devtools"!==e.brand&&(t="iPhone"===e.brand?"ios":"android"),e.platform=t,e.SDKVersion=i.SDKVersion,e.enableDebug=Boolean(o.default.debug),o.default.devicePixelRatio&&(e.devicePixelRatio=o.default.devicePixelRatio),o.default.theme&&(e.theme=o.default.theme),o.default.host&&(e.host=o.default.host),s.IS_ANDROID&&/^\d+\.\d+$/.test(e.version)&&(e.version+=".0"),delete(d=Object.assign({},e)).errMsg,Object(c.isSinglePageMode)()&&4!==o.default.appType&&(e.safeArea=Object.assign({},e.safeArea),e.safeArea.top=0,e.safeArea.bottom=e.screenHeight,e.safeArea.height=e.safeArea.bottom-e.safeArea.top),l.info("[after process]",e)},p=function(){o.default.isReady||(new Error).stack},h=function(e){p();Object(a.invokeMethod)("getSystemInfo",e,{beforeSuccess:f})},v=function(){var e={};return h({success:function(t){delete t.errMsg,e=t,d=Object.assign({},e)}}),e},g=function(e){o.default.supportAsyncGetSystemInfo||(console.info('Current Wechat version do not support asynchronous getSystemInfo. "wx.getSystemInfoAsync" will be finished by synchronous implementation.'),p());var t=o.default.supportAsyncGetSystemInfo?"getSystemInfoAsync":"getSystemInfo";Object(a.invokeMethod)(t,e,{beforeSuccess:f})},y=function(){return d||v()},m=null,b=0,_=0,O=["brand","model","pixelRatio","language","version","system","platform","SDKVersion"];o.default.onReady((function(){m={};for(var e=0;e<O.length;e++){if(!(O[e]in o.default)){m=y();break}m[O[e]]=o.default[O[e]]}if(o.default.screenHeight&&o.default.screenWidth)b=o.default.screenWidth,_=o.default.screenHeight;else{var t=y();b=t.screenWidth,_=t.screenHeight}}));var I,S=function(){return o.default.isReady?Object.assign({},m):((new Error).stack,{})},E=function(){return o.default.isReady?{screenWidth:b,screenHeight:_,deviceOrientation:b>_?"landscape":"portrait"}:((new Error).stack,{})},w=!1,C=new Set;Object(r.onNativeEvent)("onAppRouteDone",(function(){w=!0,C.forEach((function(e){return e()})),C.clear()}));var k=new Set,T=function(){Object(u.invokeWebviewMethod)("getUserAgent",{},void 0,(function(e){I=e,k.forEach((function(t){try{t(e)}catch(e){}})),k.clear()}))},A=function(e){I?e(I):w?(k.add(e),T()):(C.has(T)||C.add(T),k.add(e))}},function(e,t,n){n.r(t),n.d(t,"onPageReload",(function(){return s})),n.d(t,"triggerBeforeUnloadPage",(function(){return c})),n.d(t,"onBeforeUnloadPage",(function(){return u})),n.d(t,"triggerBeforeShareAppMessage",(function(){return l})),n.d(t,"onBeforeShareAppMessage",(function(){return d}));var a=n(34),r=n(0),i=n(10),o=new a.default;Object(r.onMethod)("onPageReload",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;e.webviewId=t,o.emit("onPageReload",e)}));var s=function(e){o.on("onPageReload",(function(t){t.path&&(t.path=Object(i.removeHtmlSuffixFromUrl)(t.path)),"function"==typeof e&&e(t)}))},c=function(e){o.emit("onBeforeUnloadPage_"+e,e),o.removeAllListeners("onBeforeShareAppMessage_"+e)},u=function(e,t){o.once("onBeforeUnloadPage_"+e,(function(e){"function"==typeof t&&t(e)}))},l=function(e){o.emit("onBeforeShareAppMessage_"+e,e)},d=function(e,t){o.on("onBeforeShareAppMessage_"+e,(function(e){"function"==typeof t&&t(e)}))}},function(e,t,n){n.r(t),n.d(t,"NavigationBackTypes",(function(){return p})),n.d(t,"_setNavigateBackInterception",(function(){return b})),n.d(t,"_stopNavigateBackInterception",(function(){return O})),n.d(t,"_onNavigateBackIntercept",(function(){return I})),n.d(t,"_offNavigateBackIntercept",(function(){return S})),n.d(t,"setNavigateBackInterception",(function(){return E})),n.d(t,"stopNavigateBackInterception",(function(){return w}));var a=n(30),r=n(16),i=n(13),o=n.n(i),s=n(38),c=n(0),u=n(21);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=Object(u.getEventManager)("navigateBackIntercept"),p={SlideBack:1,BottomBackButton:2,NavigationBarBack:3,NavigateBackCall:4},h=[p.SlideBack,p.BottomBackButton,p.NavigationBarBack,p.NavigateBackCall],v=[],g=0;Object(c.onMethod)("onNavigateBackIntercept",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=v[v.length-1]||{},n=t.id;f.emit(d(d({},e),{},{id:n})),Object(c.publish)("onNavigateBackIntercept",d(d({},e),{},{id:n}))}));var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.scopes,n=new Set(t||[]),a={scopes:h.map((function(e){return{type:e,interception:n.has(e)}}))};return Object(c.invokeMethodAsync)("setNavigateBackInterception",a)},m=function(){var e=Object(a.default)(o.a.mark((function e(){var t,n,a,r=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=d(d({},n=r.length>0&&void 0!==r[0]?r[0]:{}),{},{scopes:null!==(t=n.scopes)&&void 0!==t?t:h}),e.next=4,y(n);case 4:return a=++g,v.push({id:a,options:n}),e.abrupt("return",{id:a});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),b=Object(s.async2Invoke)("setNavigateBackInterception",m),_=function(){var e=Object(a.default)(o.a.mark((function e(){var t,n,a,r,i=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=i.length>0&&void 0!==i[0]?i[0]:{},n=t.id,!((a=v.findIndex((function(e){return e.id===n})))<0)){e.next=4;break}return e.abrupt("return");case 4:if(a!==v.length-1){e.next=8;break}return r=v.length>1?v[v.length-2].options:{scope:[]},e.next=8,y(r);case 8:v.splice(a,1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),O=Object(s.async2Invoke)("stopNavigateBackInterception",_),I=f.internalOnMethod,S=f.internalOffMethod,E=function(){var e=Object(a.default)(o.a.mark((function e(t){var n,a,r,i,s=arguments;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=s.length>1&&void 0!==s[1]?s[1]:h,e.next=3,m({scopes:n});case 3:return a=e.sent,r=a.id,I(i=function(e){e.id===r&&t(e)}),e.abrupt("return",{id:r,handler:i});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w=function(){var e=Object(a.default)(o.a.mark((function e(t){var n,a,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t;case 2:if(e.t0=e.sent,e.t0){e.next=5;break}e.t0={};case 5:return n=e.t0,a=n.id,r=n.handler,e.next=10,_({id:a});case 10:S(r);case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},function(e,t,n){n.r(t),n.d(t,"invokeWebviewMethod",(function(){return c})),n.d(t,"advancedInvokeWebviewMethod",(function(){return u}));var a=n(0),r=n(12),i=n(6),o=0,s=[],c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,c=o++;s[c]=r,Object(a.publish)("invokeWebviewMethod",{name:e,args:t,callbackId:c},void 0===n?[i.default.currentWebviewId]:n)};Object(a.subscribe)("callbackWebviewMethod",(function(e){var t=e.res,n=e.callbackId,a=s[n];delete s[n],a&&a(t)}));var u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(r.isObject)(t)||(t={}),t=Object.assign({},t);var i=Object(a.getSurroundedCallbacks)(t,e);c(e,t,void 0,(function(t){Object(a.callbackInvoke)(t,e,i,n)}))}},function(e,t,n){n.r(t),n.d(t,"GlobalEmitter",(function(){return i})),n.d(t,"FakeTempFilePathMap",(function(){return o}));var a=n(34),r=n(38),i=new a.default,o={map:{},set:function(e){var t=Object(r.guid)();return this.map[t]=e,t},get:function(e){var t=this;return e?this.map[e]:Object.keys(this.map).map((function(e){return t.map[e]}))}}},function(e,t,n){n.r(t),n.d(t,"getNetworkType",(function(){return u})),n.d(t,"onNetworkStatusChange",(function(){return l})),n.d(t,"offNetworkStatusChange",(function(){return d})),n.d(t,"_getCurrentNetworkType",(function(){return f}));var a=n(0),r=n(21),i=n(1),o=n(6),s="",c=Object(r.getEventManager)("networkstatusChange"),u=function(e){Object(a.invokeMethod)("getNetworkType",e)},l=c.onMethod,d=c.offMethod,f=function(){return s};Object(a.onMethod)("onNetworkStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s=e.networkType,o.default.currentNetworkType=s,c.emit(e),Object(a.publish)("onNetworkStatusChange",e)})),i.default.onReady((function(){u({success:function(e){s=e.networkType,o.default.currentNetworkType=s}})}))},function(e,t,n){n.r(t),n.d(t,"nativeConsole",(function(){return c}));var a=n(0),r=__wxConfig.platform,i=[],o=function(e){var t=("0"+(e.getMonth()+1)).slice(-2),n=("0"+e.getDate()).slice(-2),a=("0"+e.getHours()).slice(-2),i=("0"+e.getMinutes()).slice(-2),o=("0"+e.getSeconds()).slice(-2),s=("00"+e.getMilliseconds()).slice(-3),c=e.getFullYear()+"-"+t+"-"+n,u=a+":"+i+":"+o+"."+s;return"ios"===r?c+" "+u+"000"+(e.getTimezoneOffset()/6e3*-1).toFixed(4).replace(/^0\./,"+").replace(/-0\./,"-"):c+" "+(e.getTimezoneOffset()/60*-1).toFixed(1).replace(/^(\d)/,"+$1")+" "+u},s=function(e){return function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=n.map((function(e){switch(e){case null:return"null";case void 0:return"undefined";default:return e.toString()}})).join(" ");i.push({date:new Date,type:e,content:r})}};__wxConfig.onReady((function(){setTimeout((function e(){var t;(setTimeout(e,2e3),0!==i.length)&&(t=i.slice(),"ios"===r&&"function"==typeof systemLog?systemLog({dataArray:t.map((function(e){return"\n"+o(e.date)+" ["+e.type[0].toUpperCase()+"][weapplib] "+e.content}))}):"ios"===r||"windows"===r?Object(a.invokeMethod)("systemLog",{dataArray:t.map((function(e){return{message:"\n"+o(e.date)+" ["+e.type[0].toUpperCase()+"][weapplib] "+e.content}}))}):"android"===r&&Object(a.invokeMethod)("systemLog",{message:["\n"].concat(t.map((function(e){return"["+e.type[0].toUpperCase()+"]["+o(e.date)+"][weapplib] "+e.content}))).join("\n")}),i=[])}),2e3)}));var c={log:s("log"),debug:s("debug"),info:s("info"),warn:s("warn"),error:s("error")}},function(e,t,n){n.r(t),n.d(t,"PREFIX",(function(){return a})),n.d(t,"PAGE_TYPE",(function(){return r})),n.d(t,"VALID_SCENE",(function(){return i}));var a="__wx__/functional-page",r={PLAY_PAGE_IMAGE:"play_page_image",PLAY_PAGE_VIDEO:"play_page_video"},i=[1154,1007,1008,1074,1088,1044,1045,1046,1010,1096]},function(e,t,n){n.r(t),function(e){n.d(t,"SkiaImageProxy",(function(){return s})),n.d(t,"decorateContextForImageProxy",(function(){return d}));var a=n(4),r=n(5),i=n(158),o=n(2),s=function(){function e(t){Object(a.default)(this,e),Object.defineProperty(this,"_ptr",{value:t,writable:!1,configurable:!1,enumerable:!1})}return Object(r.default)(e,[{key:"src",get:function(){return this._ptr.src},set:function(e){var t=this;/^(http|https):\/\//.test(e)&&(e=encodeURI(e));var n=function(e){return function(){setTimeout((function(){e()}),0)}};this._ptr.onload=n((function(){"function"==typeof t.__onload&&t.__onload.apply(t)})),this._ptr.onerror=n((function(){"function"==typeof t.__onerror&&t.__onerror.apply(t)})),this._ptr.src=e}},{key:"referrerPolicy",get:function(){return this._ptr.referrerPolicy},set:function(e){"string"==typeof e&&(this._ptr.referrerPolicy=e)}},{key:"onload",get:function(){return this._ptr.onload},set:function(e){Object.defineProperty(this,"__onload",{value:e,writable:!1,configurable:!1,enumerable:!1})}},{key:"onerror",get:function(){return this.__onload},set:function(e){Object.defineProperty(this,"__onerror",{value:e,writable:!1,configurable:!1,enumerable:!1})}},{key:"complete",get:function(){return this._ptr.complete}},{key:"width",get:function(){return this._ptr.width}},{key:"height",get:function(){return this._ptr.height}}]),e}(),c=new WeakMap,u=e.SkiaCanvasExternalTexture;function l(e,t){return o.IS_DEVTOOLS?Object(i.getVideoElementByContext)(e):new u(t,e._videoId,"video")}function d(e,t){if(!e)return e;var n=e.drawImage.bind(e),a=e.createPattern.bind(e);return e.drawImage=function(e){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];if(e instanceof s)return n.apply(void 0,[e._ptr].concat(r));if(e instanceof i.VideoContext){var u=e,d=u._videoId;if("number"!=typeof d)throw new Error("Failed to execute 'drawImage' on 'CanvasRenderingContext2D': The provided video context is invalid, make sure that comes from 'createSelectQuery.context'.");var f=c.get(u)||{};f[t]?e=f[t]:(e=l(u,t),f[t]=e,c.set(u,f))}return n.apply(void 0,[e].concat(r))},e.createPattern=function(e,t){return a(e instanceof s?e._ptr:e,t)},e}delete e.SkiaCanvasExternalTexture}.call(this,n(64))},function(e,t,n){n.r(t),function(e){var n=e.WeixinArrayBuffer;delete e.WeixinArrayBuffer,t.default=n}.call(this,n(64))},function(e,t,n){n.r(t),n.d(t,"ReportCanvasDataEventType",(function(){return o})),n.d(t,"initReportCanvasData",(function(){return u})),n.d(t,"reportCanvasData",(function(){return l}));var a=n(0),r=n(12),i=n(95),o={EVENT_CANVAS_BEFORE_SHARE:1,EVENT_CANVAS_AFTER_SHARE_SUCCESS:2,EVENT_CANVAS_AFTER_SHARE_CANCEL:3,EVENT_CANVAS_BEFORE_ADS:4,EVENT_CANVAS_ADS_FIN:5,EVENT_CANVAS_ADS_CANCEL:6,EVENT_CANVAS_BEFORE_JUMP_TO_APP:7,EVENT_CANVAS_BEFORE_PAY:8,EVENT_CANVAS_BEFORE_JUMP_TO_CUSTOMER_SERVICE:9,EVENT_CANVAS_BEFORE_CLOSE_CUSTOMER_SERVICE:10,EVENT_CANVAS_BEFORE_QR_CODE:11,EVENT_CANVAS_BEFORE_MORE:12,EVENT_CANVAS_BEFORE_GAME_ClUB:13,EVENT_CANVAS_AFTER_MODAL:14,EVENT_CANVAS_BEFORE_NORMAL_EXIT:15,EVENT_CANVAS_SAMPLE_BY_TIME:16,EVENT_CANVAS_WEBVIEW_TIMING:17,EVENT_CANVAS_WEBVIEW_BEFORE_JUMP:18},s={sampleEventList:[]},c=new Map;function u(){Object(a.onMethod)("onCanvasReportEventSampleConfigReceived",(function(e){var t=JSON.parse(e.keyEventSampleConfig);Array.isArray(t.sample_event_list)&&(s.sampleEventList=t.sample_event_list,s.sampleEventList.forEach((function(e){c.set(e,0)})),function(){var e=s.sampleEventList.find((function(e){return e.event===o.EVENT_CANVAS_SAMPLE_BY_TIME}));if(e){var t=6e3,n=6,a=0;Object(r.isNumber)(e.sample_interval_seconds)&&(t=1e3*e.sample_interval_seconds),Object(r.isNumber)(e.sample_cnt)&&(n=e.sample_cnt),setTimeout((function(){l(o.EVENT_CANVAS_SAMPLE_BY_TIME),a++}),1e3);var i=setInterval((function(){a>n?clearInterval(i):setTimeout((function(){l(o.EVENT_CANVAS_SAMPLE_BY_TIME),a++}),500)}),t)}}(),function(){var e=s.sampleEventList.find((function(e){return e.event===o.EVENT_CANVAS_WEBVIEW_TIMING}));if(e){var t=6e3,n=6,a=0;Object(r.isNumber)(e.sample_interval_seconds)&&(t=1e3*e.sample_interval_seconds),Object(r.isNumber)(e.sample_cnt)&&(n=e.sample_cnt),setTimeout((function(){Object(i.getWebViewIdList)().forEach((function(e){l(o.EVENT_CANVAS_WEBVIEW_TIMING,e)})),a++}),1e3);var c=setInterval((function(){a>n?clearInterval(c):setTimeout((function(){Object(i.getWebViewIdList)().forEach((function(e){l(o.EVENT_CANVAS_WEBVIEW_TIMING,e)})),a++}),500)}),t)}}())})),Object(a.onMethod)("onStartReportCanvasData",(function(e){var t=e.event;t===o.EVENT_CANVAS_WEBVIEW_BEFORE_JUMP?Object(i.getWebViewIdList)().forEach((function(e){l(t,e)})):l(t)}))}function l(e,t){var n=function(e){return s.sampleEventList.find((function(t){return e===t.event}))}(e);if(n){var r=Date.now(),i=c.get(n);if(n.sample_interval_seconds,(r-i)/1e3<n.sample_interval_seconds)return;Object(a.invokeMethod)("reportCanvasData",{eventInfo:JSON.stringify(n),viewId:t>0?t:0,success:function(){c.set(n,r)},fail:function(e){e.errMsg}})}}},function(e,t,n){n.r(t),n.d(t,"onAppEnterForeground",(function(){return h}));var a=n(0),r=n(60),i=n(93),o=n(71),s=n(67),c=n(21),u=n(31),l=n(15),d=n(6),f=n(1);f.default.onReady((function(){d.default.scene=f.default.appLaunchInfo.scene}));var p=Object(c.getEventManager)("AppEnterForeground"),h=p.internalOnMethod;function v(e){if(!Object(l.isGame)()){e=Object(o.filterInfo)(e,!1),Object(s.setInnerEnterOptions)(e);var t=Object(o.filterPublicInfo)(e);e.__public=Object(o.isolateInfo)(t,""),Object(s.setEnterOptions)(t),p.emit(e),d.default.scene=e.scene}}Object(u.onNativeEvent)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.debugLaunchInfo||{};Object.assign(e,t),delete e.debugLaunchInfo,!Object(i.checkNeedAppEnterForegroundPatch)()||1!==e.reLaunch&&!0!==e.reLaunch?v(e):r.default.emitter.once("onAppRoute",(function(){v(e)})),Object(a.publish)("onAppEnterForeground",e)}))},function(e,t,n){n.r(t),n.d(t,"Element",(function(){return y}));var a=n(4),r=n(5),i=n(34),o=n(42),s=["left","top","right","bottom","width","height","margin","marginLeft","marginRight","marginTop","marginBottom","padding","paddingLeft","paddingRight","paddingTop","paddingBottom","fontSize","lineHeight","borderRadius"],c=["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","width","height"],u=n(24),l=n(1),d=n(31),f=new i.default({maxListeners:2e5}),p=32768,h="portrait",v="";l.default.onReady((function(){h=l.default.deviceOrientation||h,v=Object(o.getStableSystemInfo)().model||""}));var g=function(e,t){return-1!==["click","touchstart","touchmove","touchend","touchcancel","ready","prop-change"].indexOf(e)?"element-"+t+"-"+e:-1!==["layout"].indexOf(e)?e:void 0},y=function(){function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.parentId,i=void 0===r?0:r,o=n.id,d=void 0===o?p++:o,f=n.style,g=void 0===f?{}:f,y=n.props,m=void 0===y?{}:y,b=n.name,_=void 0===b?"":b;Object(a.default)(this,e);var O=l.default.platform;this.parentId=i,this.dest=0,this.id=d,this.name=_,this.children={},this.parent=null,this.isInserted=!1,this.shouldUpdate=!1,this.readyResult=new Promise((function(e){t.on("ready",e)})),g=Object.assign({left:void 0,top:void 0,right:void 0,bottom:void 0,width:void 0,height:void 0,maxWidth:void 0,maxHeight:void 0,minWidth:void 0,minHeight:void 0,margin:void 0,marginLeft:void 0,marginRight:void 0,marginTop:void 0,marginBottom:void 0,padding:void 0,paddingLeft:void 0,paddingRight:void 0,paddingTop:void 0,paddingBottom:void 0,borderWidth:void 0,flexDirection:void 0,justifyContent:void 0,alignItems:void 0,alignSelf:void 0,flex:void 0,flexWrap:void 0,position:void 0,hidden:!1,scale:1,scaleWidth:1,scaleHeight:1,color:void 0,fontSize:void 0,textAlign:void 0,fontWeight:void 0,lineHeight:void 0,lineBreak:void 0,backgroundColor:void 0,backgroundColorOpacity:1,borderRadius:void 0,borderColor:void 0,borderColorOpacity:1,opacity:void 0,overflow:void 0,zIndex:1,fixed:!1,rotate:0},g),Object.assign(g,g[h]);var I=/iphone x/.test(v.toLowerCase())?"iphone x":O;Object.assign(g,g[I]),Object.assign(g,g[I+"-"+h]),this.style={},this.computedStyle=Object.assign({},g),this.lastComputedStyle=Object.assign({},g),this.layoutBox=null,Object.keys(g).forEach((function(e){Object.defineProperty(t.style,e,{configurable:!0,enumerable:!0,get:function(){return g[e]},set:function(n){if(n!==g[e]&&void 0!==n){if(g[e]=n,t.computedStyle[e]=n,t.lastComputedStyle[e]=n,-1!==s.indexOf(e)&&t.style.scale){var a=n*t.style.scale;t.computedStyle[e]=a,t.lastComputedStyle[e]=a}"scale"===e&&s.forEach((function(e){g[e]&&(t.computedStyle[e]=g[e]*n,t.lastComputedStyle[e]=g[e]*n)})),t.shouldUpdate=!0,"hidden"===e&&(n?(Object(u.log)(t.id,t.name,"隐藏, 保存宽高",t.computedStyle.width,t.computedStyle.height),c.forEach((function(e){t.computedStyle[e]=0}))):(Object(u.log)(t.id,t.name,"显示, 设置回来",t.lastComputedStyle.width,t.lastComputedStyle.height),c.forEach((function(e){t.computedStyle[e]=t.lastComputedStyle[e]})))),t.requestLayout()}}})})),s.forEach((function(e){if(t.style[e]&&t.style.scale){var n=t.style[e]*t.style.scale;t.computedStyle[e]=n,t.lastComputedStyle[e]=n}})),g.hidden&&c.forEach((function(e){t.computedStyle[e]=0})),Object.keys(m).forEach((function(e){Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){return m[e]},set:function(n){n!==m[e]&&(m[e]=n,t.shouldUpdate=!0,t.requestLayout())}})})),["touchstart","touchmove","touchend","touchcancel"].forEach((function(e){t.on(e,(function(n){if(t.bubbleEvent&&t.parent){var a=0,r=0;try{a=t.layoutBox.left,r=t.layoutBox.top}catch(e){}if("touchstart"===e||"touchend"===e){var i=Object.assign({},n);i.x+=a,i.y+=r,t.parent.emit(e,i)}else{var o=n.map((function(e){return{x:e.x+a,y:e.y+r}}));t.parent.emit(e,o)}}}))}))}return Object(r.default)(e,[{key:"getChildren",value:function(){var e=this;return Object.keys(this.children).map((function(t){var n=e.children[t];return n.dest=e.dest,{id:n.id,name:n.name,style:n.computedStyle,children:n.getChildren()}}))}},{key:"getAbsolutePosition",value:function(e){if(!e)return this.getAbsolutePosition(this);if(!e.parent)return{left:0,top:0};var t=this.getAbsolutePosition(e.parent),n=t.left,a=t.top;return{left:n+e.layoutBox.left,top:a+e.layoutBox.top}}},{key:"add",value:function(e){e.parent=this,e.parentId=this.id,e.dest=this.dest,this.children[e.id]=e,this.requestLayout()}},{key:"remove",value:function(e){var t=this;e?this.children[e.id]&&(e.remove(),delete this.children[e.id]):(Object.keys(this.children).forEach((function(e){t.children[e].remove(),delete t.children[e]})),this.destroy(),this.parent&&delete this.parent.children[this.id]),this.requestLayout()}},{key:"emit",value:function(e,t){f.emit(g(e,this.id),t)}},{key:"on",value:function(e,t){f.on(g(e,this.id),t)}},{key:"once",value:function(e,t){f.once(g(e,this.id),t)}},{key:"off",value:function(e,t){f.off(g(e,this.id),t)}},{key:"nextLayout",value:function(e){var t=this;if(!e||"function"!=typeof e)return new Promise((function(e){return t.nextLayout(e)}));setTimeout(e,250)}},{key:"nextUpdate",value:function(e){var t=this;if(!e||"function"!=typeof e)return new Promise((function(e){return t.nextUpdate(e)}));this.once("update-done",e)}},{key:"ready",value:function(){var e=this,t=Object.keys(this.children).map((function(t){return e.children[t].ready()}));return Promise.all(t.concat(this.readyResult))}},{key:"requestLayout",value:function(){this.emit("layout")}},{key:"forceUpdate",value:function(){var e=this,t=this.isInserted?this.update():this.insert(),n=Object.keys(this.children).map((function(t){return e.children[t].forceUpdate()}));return t.then((function(){return Promise.all(n)}))}},{key:"insert",value:function(){return Promise.resolve()}},{key:"update",value:function(){return Promise.resolve()}},{key:"destroy",value:function(){var e=this;["click","ready","touchstart","touchmove","touchend","touchcancel"].forEach((function(t){var n=g(t,e.id);f.removeAllListeners(n)}))}}]),e}(),m=function(e){var t=JSON.parse(e.data).id;f.emit(g("click",t))};Object(d.onNativeEvent)("onTextViewClick",m),Object(d.onNativeEvent)("onImageViewClick",m),["onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"].forEach((function(e){var t=e.replace(/^on/,"").toLowerCase();Object(d.onNativeEvent)(e,(function(e){try{var n=JSON.parse(e.data).id;f.emit(g(t,n),e.touch||e.touches)}catch(e){}}))}))},function(e,t,n){n.r(t),n.d(t,"error",(function(){return r})),n.d(t,"isSystemError",(function(){return i})),n.d(t,"isSDKError",(function(){return o})),n.d(t,"isThirdError",(function(){return s}));var a={0:"OK","10 01 2":"Global_APINoPermission","10 02 2":"Global_APINoAuthorization","10 03 1":"Global_FileStorageNotEnough","13 01 3":"Render_CanvasIllegalInvocation","13 02 3":"Render_FontFileInvalid","13 03 3":"Render_ImageLoadFailed","14 01 2":"Network_RequestTimeout","15 01 3":"Storage_NotFound","16 01 3":"File_NotExist","22 00 2":"GameRecorder_UnknownError","22 01 2":"GameRecorder_InternalFailed","22 02 2":"GameRecorder_NotSupported","22 10 3":"GameRecorder_StartDurationInvalid","22 11 3":"GameRecorder_StartBitRateInvalid","22 12 3":"GameRecorder_StartFPSInvalid","22 13 3":"GameRecorder_StartGOPInvalid","22 14 3":"GameRecorder_StartWhileAlreadyStartRecording","22 15 3":"GameRecorder_StartWhilePaused","22 20 3":"GameRecorder_PauseWhileNotStartRecording","22 21 3":"GameRecorder_PauseWhileAlreadyPaused","22 30 3":"GameRecorder_ResumeWhileNotStartRecording","22 31 3":"GameRecorder_ResumeWhileRecording","22 40 3":"GameRecorder_AbortWhileNotStartRecording","22 50 3":"GameRecorder_StopWhileNotStartRecording","22 60 3":"GameRecorder_NoVideo","22 61 3":"GameRecorder_BGMNotFound","22 62 3":"GameRecorder_TimeRangeInvalid","22 63 3":"GameRecorder_EditDurationOutOfLimit","22 64 3":"GameRecorder_TimeRangeTooShort","23 00 2":"MediaRecorder_UnknownError","23 01 2":"MediaRecorder_InternalFailed","23 02 2":"MediaRecorder_NotSupported","23 10 3":"MediaRecorder_StartDurationInvalid","23 11 3":"MediaRecorder_StartBitRateInvalid","23 12 3":"MediaRecorder_StartFPSInvalid","23 13 3":"MediaRecorder_StartGOPInvalid","23 14 3":"MediaRecorder_StartWhileAlreadyStartRecording","23 15 3":"MediaRecorder_StartWhilePaused","23 20 3":"MediaRecorder_PauseWhileNotStartRecording","23 21 3":"MediaRecorder_PauseWhileAlreadyPaused","23 30 3":"MediaRecorder_ResumeWhileNotStartRecording","23 31 3":"MediaRecorder_ResumeWhileRecording","23 40 3":"MediaRecorder_AbortWhileNotStartRecording","23 50 3":"MediaRecorder_StopWhileNotStartRecording","23 60 3":"MediaRecorder_NoVideo","23 61 3":"MediaRecorder_BGMNotFound","23 62 3":"MediaRecorder_TimeRangeInvalid","23 63 3":"MediaRecorder_EditDurationOutOfLimit","23 64 3":"MediaRecorder_TimeRangeTooShort"},r=Object.keys(a).reduce((function(e,t){var n=parseInt(t.replace(/\s/g,""),10);return e[a[t]]=n,e}),{}),i=function(e){return e.toString().endsWith(1)},o=function(e){return e.toString().endsWith(2)},s=function(e){return e.toString().endsWith(3)}},function(e,t,n){n.r(t),n.d(t,"Emitter",(function(){return o}));var a=n(4),r=n(5),i=n(12),o=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];Object(a.default)(this,e),this.type="",this.surround=!1,this.eventMap=new Map,this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap,this.type=t,this.surround=n}return Object(r.default)(e,[{key:"on",value:function(e,t){if(Object(i.isFunction)(t)){var n,a,r=t;this.surround&&(n=t,a="at "+this.type+e+" callback function",r="undefined"!=typeof __errorTracer__?__errorTracer__.surroundThirdByTryCatch(n,a):"undefined"!=typeof __subContextEngine__?__subContextEngine__.surroundThirdByTryCatch(n,a):function(){try{return n.apply(void 0,arguments)}catch(e){return void console.error("thirdScriptError\n"+e.message+";"+a+"\n",e)}},this.callbackMap.set(t,r),this.originalCallbackMap.set(r,t)),this.eventMap.has(e)?this.eventMap.get(e).add(r):this.eventMap.set(e,new Set([r]))}else console.error("emitter.on fail: callback must be a function")}},{key:"off",value:function(e,t){var n=this,a=this.eventMap.get(e);if(a)if("function"!=typeof t)a.forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),a.clear();else if(this.surround){var r=this.callbackMap.get(t);a.delete(r),this.callbackMap.delete(t),this.originalCallbackMap.delete(r)}else a.delete(t)}},{key:"emit",value:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(this.eventMap.has(e)){var r=new Set(this.eventMap.get(e));r.forEach((function(e){return e.apply(void 0,n)}))}}},{key:"removeAllListeners",value:function(e){this.off(e)}},{key:"getListenersLength",value:function(e){var t=this.eventMap.get(e);return t?t.size:0}}]),e}()},function(e,t,n){n.r(t),n.d(t,"SKIA_CANVAS_ENABLED",(function(){return y})),n.d(t,"canvas",(function(){return O})),n.d(t,"canvasInfo",(function(){return b})),n.d(t,"onCanvasMethodCallbackOnce",(function(){return k})),n.d(t,"createContext",(function(){return Z})),n.d(t,"drawCanvasImpl",(function(){return B})),n.d(t,"drawCanvas",(function(){return F})),n.d(t,"canvasToTempFilePath",(function(){return q})),n.d(t,"createCanvasContext",(function(){return Q})),n.d(t,"drawCanvas4Plugin",(function(){return W})),n.d(t,"canvasToTempFilePath4Plugin",(function(){return z})),n.d(t,"createCanvasContext4Plugin",(function(){return $})),n.d(t,"canvasGetImageData4Plugin",(function(){return R})),n.d(t,"canvasPutImageData4Plugin",(function(){return N})),n.d(t,"canvasToDataURL",(function(){return X})),n.d(t,"canvasGetImageData",(function(){return x})),n.d(t,"canvasPutImageData",(function(){return M}));var a=n(1),r=n(0),i=n(43),o=n(58),s=n(129),c=n(10),u=n(6),l=n(20),d=n(42),f=n(2),p=n(80),h=f.IS_ANDROID&&a.default.useXWebCanvas,v=f.IS_IOS&&a.default.useSkiaCanvas,g=f.IS_ANDROID&&a.default.useNewXWebCanvasToTFP,y=h||v,m=function(){},b={},_={},O={},I={},S=0,E=0,w=4500,C=Date.now,k=Object(l.subscribeOnce)("onCanvasMethodCallback"),T=Object(l.subscribeOnce)("onDrawCanvas");function A(e){var t=e.canvasId,n=e.pluginId,a=e.nodeId,r=e.viewId,i=e.webviewId,o=Object(l.concatId)(i,t,n,a);O[o]&&delete O[o],y&&Object(p.skiaCanvasRemove)({webviewId:i,canvasId:t,pluginId:n,nodeId:a,viewId:r})}function P(e,t,n){var a={errMsg:e+": "+(n||"fail canvas is empty")},r=__errorTracer__.surroundThirdByTryCatch(t.fail||m,"at api "+e+" fail callback function"),i=__errorTracer__.surroundThirdByTryCatch(t.complete||m,"at api "+e+" complete callback function");r(a),i(a)}function D(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=Object(l.concatId)(u.default.currentWebviewId,e.canvasId,n,t),i=Object(c.assign)({},e);if("number"==typeof O[a]||y){if(i.canvasId=O[a],i.jsInvokedAt=Date.now(),i.x=Number(i.x)||0,i.y=Number(i.y)||0,i.width=Number(i.width)||0,i.height=Number(i.height)||0,0===i.width)return void P("canvasGetImageData",e,"the source width is 0");if(0===i.height)return void P("canvasGetImageData",e,"the source height is 0");if(y){var o=Object(p.getOrCreateCanvas)(a);return void o.getImageData(i)}if(f.IS_DEVTOOLS||f.IS_WINDOWS||f.IS_MAC||f.IS_MINA)i.method="getImageData",k(i,(function(t){var n={width:t.width,height:t.height,data:Object(l.base64ToUint8ClampedArray)(t.data)};"function"==typeof e.success&&e.success(n),"function"==typeof e.complete&&e.complete(n)})),Object(r.publish)("invokeCanvasMethod",i);else{var s=i.success,d=i.fail;i.success=function(e){"[object ArrayBuffer]"===Object.prototype.toString.call(e.data)?(e.width=i.width,e.height=i.height,e.data=new Uint8ClampedArray(e.data),"function"==typeof s&&s(e)):(delete e.data,e.errMsg="canvasGetImageData: fail","function"==typeof d&&d(e))},Object(r.invokeMethod)("canvasGetImageData",i)}}else P("canvasGetImageData",e)}function x(e,t){D(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.default.currentWebviewId)?t.__wxExparserNodeId__:"")}function R(e,t,n){D(e,n,t)}function j(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=Object(l.concatId)(u.default.currentWebviewId,e.canvasId,n,t),i=Object(c.assign)({},e);if("number"==typeof i.width)if(i.data&&"[object Uint8ClampedArray]"===Object.prototype.toString.call(i.data))if("number"==typeof O[a]||y){if(i.canvasId=O[a],i.jsInvokedAt=Date.now(),i.x=Number(i.x)||0,i.y=Number(i.y)||0,i.height="number"==typeof i.height?i.height:i.data.length/i.width/4|0,i.width*i.height*4!==i.data.length)return void P("canvasPutImageData",e,"invalid data format");if(f.IS_DEVTOOLS||f.IS_WINDOWS||f.IS_MAC||f.IS_MINA)i.data=f.IS_WINDOWS||f.IS_MINA?WeixinNativeBuffer.new(i.data.buffer).id:Object(l.uint8ClampedArrayToBase64)(i.data),i.method="putImageData",Object(r.publish)("invokeCanvasMethod",i),"function"==typeof e.success&&e.success({errMsg:"canvasPutImageData:ok"}),"function"==typeof e.complete&&e.complete({errMsg:"canvasPutImageData:ok"});else{if(i.data=i.data.buffer,y){i.data=e.data;var o=Object(p.getOrCreateCanvas)(a);return void o.putImageData(i)}Object(r.invokeMethod)("canvasPutImageData",i)}}else P("canvasPutImageData",e);else P("canvasPutImageData",e,"data argument must be an Uint8ClampedArray");else P("canvasPutImageData",e,"invalid width argument")}function M(e,t){j(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.default.currentWebviewId)?t.__wxExparserNodeId__:"")}function N(e,t,n){j(e,n,t)}function L(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,s=arguments.length>6?arguments[6]:void 0;if(f.IS_DEVTOOLS||f.IS_WINDOWS||f.IS_MAC||f.IS_MINA){var c={actions:t,reserve:n,canvasId:e};T(c,(function(e){"function"==typeof s&&s({errMsg:e.errMsg})})),Object(r.publish)("canvasActionsChanged",c)}else Object(r.invokeMethod)("drawCanvas",{canvasId:e,reserve:n,useHardwareAccelerate:a,actions:t,success:i,fail:o,complete:s})}function B(e){var t=e.isWidgetCanvas,n=e.canvasId,a=e.actions,i=e.reserve,o=e.useHardwareAccelerate,s=e.success,c=e.fail,d=e.complete,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:u.default.currentWebviewId,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",v=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",g=C();if(Array.isArray(a)){if(t){if(g-S<w){var m={errMsg:"drawCanvas:fail 调用 draw 过于频繁。"};return(E+=1)>500&&(E=0,console.warn(m.errMsg)),void("function"==typeof c&&c(m))}return S=g,void Object(r.invokeMethod)("drawCanvas",{canvasId:void 0,reserve:i,actions:a,success:s,fail:c,complete:d})}var b=Object(l.concatId)(f,n,h,v);if(y){var _=Object(p.getOrCreateCanvas)(b);_.draw(a,i,d,f,v,h)}else if("number"==typeof O[b]){var k=O[b];L(k,a,i,o,s,c,d)}else I[b]=I[b]||[],I[b]=I[b].concat({actions:a,reserve:i,useHardwareAccelerate:o,success:s,fail:c,complete:d})}}function F(e){B(e)}function W(e,t,n){B(e,u.default.currentWebviewId,t,n)}"undefined"!=typeof __widgetConfig__&&(w="number"==typeof __widgetConfig__.drawMinInterval?__widgetConfig__.drawMinInterval:25),Object(r.subscribe)("canvasInsert",(function(e,t){var n=e.canvasId,a=e.viewId,r=e.canvasNumber,o=e.pluginId,s=e.data,c=e.position,u=e.nodeId,d=e.compPath;y&&Object(p.skiaCanvasInsert)({canvasId:n,viewId:a,canvasNumber:r,pluginId:o,position:c,nodeId:u},t);var f=Object(l.concatId)(t,n,o,u);b[r]={lastTouches:[],data:s,compPath:d},O[f]=r,_[r]=c,Array.isArray(I[f])&&(I[f].forEach((function(e){L(r,e.actions,e.reserve,e.useHardwareAccelerate,e.success,e.fail,e.complete)})),delete I[f]),Object(i.onBeforeUnloadPage)(t,(function(){A({canvasId:n,pluginId:o,nodeId:u,viewId:a,webviewId:t})}))})),Object(r.subscribe)("canvasUpdate",(function(e){var t=e.canvasNumber,n=e.position;Object(o.hasOwnProperty)(_,t)&&(_[t]=n)})),Object(r.subscribe)("canvasRemove",(function(e,t){A({canvasId:e.canvasId,pluginId:e.pluginId,nodeId:e.nodeId,viewId:e.viewId,webviewId:t})}));var V=null,U=function(e,t,n,a){e.x=e.x?e.x:0,e.y=e.y?e.y:0,(e.x<0||e.x>n)&&(e.x=0),(e.y<0||e.y>a)&&(e.y=0),e.width=e.width?Math.min(n-e.x,e.width):n-e.x,e.height=e.height?Math.min(a-e.y,e.height):a-e.y,e.destWidth=e.destWidth?e.destWidth:e.width*t,e.destHeight=e.destHeight?e.destHeight:e.height*t},G=function(e,t){var n=Object(c.assign)({},t);n.success=t.success,n.fail=t.fail,n.complete=t.complete;var a=300,i=150;Object(o.hasOwnProperty)(_,t.canvasId)&&(a=_[t.canvasId].width,i=_[t.canvasId].height),!f.IS_IOS||"6.5.10"!==e.version&&"6.5.11"!==e.version&&"6.5.12"!==e.version?U(n,e.pixelRatio,a,i):function(e,t,n,a){n*=t,a*=t,e.x=e.x?e.x*t:0,e.y=e.y?e.y*t:0,(e.x<0||e.x>n)&&(e.x=0),(e.y<0||e.y>a)&&(e.y=0),e.width=e.width?Math.min(n-e.x,e.width*t):n-e.x,e.height=e.height?Math.min(a-e.y,e.height*t):a-e.y,e.destWidth=e.destWidth?e.destWidth/t:e.width/t,e.destHeight=e.destHeight?e.destHeight/t:e.height/t}(n,e.pixelRatio,a,i),Object(r.invokeMethod)("canvasToTempFilePath",n)};function H(e,t){if(e.fileType=["jpg","png"].indexOf(e.fileType)>-1?e.fileType:"png",e.quality="jpg"===e.fileType?e.quality<0||e.quality>1?1:e.quality:1,e.jpgQuality=e.quality,e.canvas){var n=e.canvas;delete e.canvas;var a=n._width?n.width/n._width:V.pixelRatio;if(e.x=Number(e.x)||0,e.y=Number(e.y)||0,f.IS_ANDROID){if(e.width*=a,e.height*=a,e.x=e.x?e.x*a:0,e.y=e.y?e.y*a:0,e.width=Number(e.width)||n.width-e.x,e.height=Number(e.height)||n.height-e.y,e.destWidth=e.destWidth||e.width,e.destHeight=e.destHeight||e.height,e.x+e.width>n.width&&(e.width=n.width-e.x),e.y+e.height>n.height&&(e.height=n.height-e.y),0===e.width)return void Object(c.failWithMessage)(e,"width is 0");if(0===e.height)return void Object(c.failWithMessage)(e,"height is 0");var i=n._ctx.getImageData(e.x,e.y,e.width,e.height);return void(g?(e.viewId=n.id,Object(r.invokeMethod)("xwebCanvasToTempFilePath",e)):(e.data=i.data.buffer,Object(r.invokeMethod)("canvasToTempFilePath",e)))}if(f.IS_IOS)return e.canvasId=n.id,U(e,a,n.width/a,n.height/a),void setTimeout((function(){Object(r.invokeMethod)("canvasToTempFilePath",e)}),100);if(f.IS_DEVTOOLS){e.width*=a,e.height*=a,e.x=e.x?e.x*a:0,e.y=e.y?e.y*a:0,e.width=Number(e.width)||n.width-e.x,e.height=Number(e.height)||n.height-e.y,e.destWidth=e.destWidth||e.width,e.destHeight=e.destHeight||e.height,e.x+e.width>n.width&&(e.width=n.width-e.x),e.y+e.height>n.height&&(e.height=n.height-e.y);var o=document.createElement("canvas"),s=o.getContext("2d");o.width=e.destWidth,o.height=e.destHeight,s.drawImage(n._canvasRef,e.x,e.y,e.width,e.height,0,0,e.destWidth,e.destHeight);var u=o.toDataURL(e.fileType,e.quality);return u=u.replace(/^data:image\/(jpg|png|jpeg);base64,/,""),void Object(r.invokeMethod)("base64ToTempFilePath",Object(c.assign)({base64Data:u},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("base64ToTempFilePath","canvasToTempFilePath")}})}}if(f.IS_DEVTOOLS||f.IS_WINDOWS||f.IS_MAC||f.IS_MINA)e.method="toDataURL",k(e,(function(t){var n=t.dataUrl;Object(r.invokeMethod)("base64ToTempFilePath",Object(c.assign)({base64Data:n},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("base64ToTempFilePath","canvasToTempFilePath")}})})),Object(r.publish)("invokeCanvasMethod",e);else if(y&&f.IS_ANDROID){var l=Object(p.getOrCreateCanvas)(t);l._contextPromise.then((function(){e.x=Number(e.x)||0,e.y=Number(e.y)||0,e.width=Number(e.width)||l.width-e.x,e.height=Number(e.height)||l.height-e.y,0!==e.width?0!==e.height?l.getImageData({x:e.x,y:e.y,width:e.width,height:e.height,success:function(t){e.data=t.data.buffer,Object(r.invokeMethod)("canvasToTempFilePath",e)},fail:function(){Object(c.failWithMessage)(e,"fail")}}):Object(c.failWithMessage)(e,"height is 0"):Object(c.failWithMessage)(e,"width is 0")}))}else V||(V=Object(d.getStaticSystemInfoSync)()),G(V,e)}function Y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e.canvasId||e.canvas){if(e.canvas)return V||(V=Object(d.getStaticSystemInfoSync)()),void H(e,a);var a=Object(l.concatId)(u.default.currentWebviewId,e.canvasId,n,t);"number"==typeof O[a]?(e.canvasId=O[a],H(e)):P("canvasToTempFilePath",e)}}function q(e,t){Y(e,t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.default.currentWebviewId)?t.__wxExparserNodeId__:"")}function z(e,t,n){Y(e,n,t)}function K(e){f.IS_DEVTOOLS||f.IS_WINDOWS||f.IS_MAC||f.IS_MINA?(e.method="toDataURL",k(e,(function(t){var n=t.dataUrl;e.success({data:n})})),Object(r.publish)("invokeCanvasMethod",e)):Object(r.invokeMethod)("canvasToData",e)}function X(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(l.concatId)(u.default.currentWebviewId,e.canvasId),n=Object.assign({},e),a=n.success,r=n.complete;n.success=function(e){var t="data:image/"+(n.fileType||"png")+";base64,"+e.data;"function"==typeof a&&a({dataURL:t}),"function"==typeof r&&r({dataURL:t})},n.complete=m,"number"==typeof O[t]?(n.canvasId=O[t],K(n)):P("canvasToDataURL",e)}var Z=function(){return new s.Context},J=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";return new s.Context(e,t,n,a)},Q=function(e,t){var n=t&&t.__wxExparserNodeId__&&t.__wxExparserNodeId__!==__virtualDOM__.getRootNodeId(u.default.currentWebviewId)?t.__wxExparserNodeId__:"";return J(u.default.currentWebviewId,e,n)},$=function(e,t,n){return J(u.default.currentWebviewId,e,n,t)}},function(e,t,n){function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}n.r(t),n.d(t,"hasOwnProperty",(function(){return a}))},function(e,t,n){n.r(t),n.d(t,"reportDeprecatedAPI",(function(){return a}));var a=function(e){Reporter.reportKeyValue({key:"DeprecatedAPI",value:e})}},function(e,t,n){n.r(t);var a=n(34),r=n(81),i=new a.default,o={appLaunchInfo:null,appLaunchShareInfo:null,sceneHistory:[],appId:"",ShareInfoStorage:r.default,emitter:i};t.default=o},function(e,t,n){n.r(t),n.d(t,"getCloudFileUrl",(function(){return s})),n.d(t,"getCloudFileInfo",(function(){return u}));var a,r,i=n(25),o=(a="getCloudFileUrl",r="qbase_commapi",Object(i.default)(a,r,{},{},(function(e){var t=e.data;return{qbase_api_name:"tcbapi_component_gettempfileurl",qbase_req:JSON.stringify({fileid_list:t.fileid_list.slice(),type:t.type}),cli_req_id:+new Date+"_"+Math.random()}}),(function(e){return e})));var s=function(e,t,n){u({fileIds:e,type:t,success:n})},c=new Map,u=function(e){var t=e.fileIds,n=e.type,a=e.success,r=new Map,i=[],s=!1;if(t.forEach((function(e){var t=c.get(e);if(t){if(Date.now()<t.expireTime)return void(r.has(e)||(r.set(e,t.data),s||(s=!0)));c.delete(e)}/^(cloud):\/\//.test(e)&&i.push(e)})),0!==i.length){var u=0,d=function(e,t){for(var n=[],a=Math.ceil(e.length/t),r=0;r<a;r++)n.push(e.slice(r*t,(r+1)*t));return n}(t,50);Promise.all(d.map((function(e){return new Promise((function(t){o({data:{fileid_list:e,type:n},requestInQueue:!1,success:function(n){var a=JSON.parse(n.rawData);if(a.baseresponse&&0===a.baseresponse.errcode?a.download_list.forEach((function(e){r.set(e.fileid,e),!c.has(e.fileid)&&e.max_age&&c.set(e.fileid,{data:e,expireTime:Date.now()+1e3*e.max_age})})):a.baseresponse?e.forEach((function(e){r.set(e,{download_url:e,service_errcode:a.baseresponse.errcode,errmsg:"system error baseresponse.errcode "+a.baseresponse.errcode}),c.has(e)&&c.delete(e)})):e.forEach((function(e){r.set(e,{download_url:e,service_errcode:-1,errmsg:"system error baseresponse empty"}),c.has(e)&&c.delete(e)})),a.baseresponse&&a.baseresponse.stat&&a.baseresponse.stat.qbase_cost_time){var i=a.baseresponse.stat.qbase_cost_time;i>u&&(u=i)}t()},fail:function(){t()},complete:function(e){}})}))}))).then((function(){l(t,r,u,a)})).catch((function(e){"function"==typeof a&&a({data:t.map((function(t){return{url:t,service_errcode:-1,errmsg:e+""}}))})}))}else s?l(t,r,0,a):"function"==typeof a&&a({data:t.map((function(e){return{url:e}}))})};function l(e,t,n,a){var r=[];e.forEach((function(e){if(/^(cloud):\/\//.test(e)){var n=t.get(e);n?0===n.service_errcode?r.push({url:n.download_url}):r.push({url:e,code:n.service_errcode,msg:n.errmsg}):r.push({url:e,code:-1,msg:"NO_RESULT"})}else r.push({url:e})})),"function"==typeof a&&a({data:r,cost:n})}},function(e,t,n){n.r(t),n.d(t,"render",(function(){return z})),n.d(t,"updateRender",(function(){return K})),n.d(t,"unmount",(function(){return X})),n.d(t,"emitComponentProperty",(function(){return Z})),n.d(t,"percentProperties",(function(){return be})),n.d(t,"convertStyle",(function(){return ke})),n.d(t,"mergeStyles",(function(){return Te})),n.d(t,"convertComputableStyle",(function(){return Pe})),n.d(t,"calculateDynamicStyle",(function(){return ve})),n.d(t,"VideoEventType",(function(){return b})),n.d(t,"Component",(function(){return m})),n.d(t,"innerUsage",(function(){return _})),n.d(t,"Layout",(function(){return De}));var a=n(33),r=n(16),i=n(26),o=n(114),s=n(68),c=n.n(s),u=n(24),l=n(4),d=n(5),f=n(13),p=n.n(f);function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var g=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))},y=function(e){for(var t=Array.isArray(e)?e[0]:e;t.parent&&t.parent!==De&&t.parent.referComponent;)t=t.parent;return t},m=function(){function e(t){Object(l.default)(this,e),this.state={},this.style={},this.isComponent=!0,this._hasUnmount=!1,this._eventHandler={},this._stateQueue={},this._setStateTimer=null,this._setStyleTimer=null,this._manualStyle={},this._subComponents=[],this._elementMap={},this.parent=null,this.props=t}return Object(d.default)(e,[{key:"setState",value:function(e,t){var n=this;this._stateQueue=this._stateQueue||{};for(var a=!1,r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];e[o]!==this.state[o]&&(a=!0)}a?(Object.assign(this._stateQueue,e),this._setStateTimer&&clearTimeout(this._setStateTimer),this._setStateTimer=setTimeout((function(){return g(n,void 0,void 0,p.a.mark((function e(){var n,a,r,i,o;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(this._setStateTimer=null,n=!1,a=0,r=Object.keys(this._stateQueue);a<r.length;a++)i=r[a],o=this._stateQueue[i],this.state[i]!==o&&(n=!0);if(n){e.next=5;break}return e.abrupt("return");case 5:return Z(this,"updateState",Object.assign(Object.assign({},this.state),this._stateQueue)),Object.assign(this.state,this._stateQueue),K(this),ve(y(this._rootElement)),e.next=11,De.nextLayout();case 11:null==t||t(this.state,this.props);case 12:case"end":return e.stop()}}),e,this)})))}),0)):null==t||t(this.state,this.props)}},{key:"ready",value:function(e){}},{key:"updatedProps",value:function(){}},{key:"render",value:function(){return""}},{key:"_unmountComponent",value:function(){if(!this._hasUnmount){if(this._hasUnmount=!0,Array.isArray(this._subComponents)){var e,t=h(this._subComponents);try{for(t.s();!(e=t.n()).done;){e.value._unmountComponent()}}catch(e){t.e(e)}finally{t.f()}}Z(this,"destroy")}}},{key:"getRootElement",value:function(){if(!Array.isArray(this._rootElement))return this._rootElement;throw new Error("You should'nt try getRootElement() in component with virtual root")}},{key:"getRootElements",value:function(){return this._rootElement}},{key:"getRootComponent",value:function(){for(var e=this;e.parent;)e=e.parent;return e}},{key:"getSubComponents",value:function(){return this._subComponents}},{key:"getElementById",value:function(e){return this._elementMap[e]?this._elementMap[e]:null}},{key:"getEventHandler",value:function(e){return this._eventHandler[e]}},{key:"setStyle",value:function(e,t){return g(this,void 0,void 0,p.a.mark((function n(){var a,r,i;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a=this.getElementById(e),r=this._manualStyle,e&&t&&(a&&Object.assign(a.style,t),r[e]=r[e]||{},Object.assign(r[e],t)),n.next=5,Promise.resolve();case 5:return i=this.getRootComponent(),n.next=8,i.requestLayout();case 8:case"end":return n.stop()}}),n,this)})))}},{key:"requestLayout",value:function(){var e=this,t=Array.isArray(this._rootElement)?this._rootElement[0]:this._rootElement;return new Promise((function(n){e._setStyleTimer&&clearTimeout(e._setStyleTimer),e._setStyleTimer=setTimeout((function(){e._setStyleTimer=null,ve(y(e._rootElement)),Promise.race([null==t?void 0:t.nextUpdate(),Object(u.timeout)(200)].filter((function(e){return e}))).then((function(){return n()}))}),0)}))}},{key:"_bindEvent",value:function(e,t,n){return this._eventHandler[e]=this._eventHandler[e]||{},this._eventHandler[e][t]=this._eventHandler[e][t]||new Set,this._eventHandler[e][t].add(n),n}},{key:"_unbindEvent",value:function(e,t,n){var a,r;return!!(null===(r=null===(a=this._eventHandler[e])||void 0===a?void 0:a[t])||void 0===r?void 0:r.has(n))&&(this._eventHandler[e][t].delete(n),0===this._eventHandler[e][t].size&&delete this._eventHandler[e][t],0===Object.keys(this._eventHandler[e]).length&&delete this._eventHandler[e],!0)}},{key:"onClick",value:function(e,t){return this._bindEvent(e,"click",t)}},{key:"offClick",value:function(e,t){return this._unbindEvent(e,"click",t)}},{key:"onReady",value:function(e,t){return this._bindEvent(e,"ready",t)}},{key:"offReady",value:function(e,t){return this._unbindEvent(e,"ready",t)}},{key:"onTouchstart",value:function(e,t){return this._bindEvent(e,"touchstart",t)}},{key:"offTouchstart",value:function(e,t){return this._unbindEvent(e,"touchstart",t)}},{key:"onTouchmove",value:function(e,t){return this._bindEvent(e,"touchmove",t)}},{key:"offTouchmove",value:function(e,t){return this._unbindEvent(e,"touchmove",t)}},{key:"onTouchend",value:function(e,t){return this._bindEvent(e,"touchend",t)}},{key:"offTouchend",value:function(e,t){return this._unbindEvent(e,"touchend",t)}},{key:"onTouchcancel",value:function(e,t){return this._bindEvent(e,"touchcancel",t)}},{key:"offTouchcancel",value:function(e,t){return this._unbindEvent(e,"touchcancel",t)}},{key:"onWaiting",value:function(e,t){return this._bindEvent(e,"waiting",t)}},{key:"offWaiting",value:function(e,t){return this._unbindEvent(e,"waiting",t)}},{key:"onPlay",value:function(e,t){return this._bindEvent(e,"play",t)}},{key:"offPlay",value:function(e,t){return this._unbindEvent(e,"play",t)}},{key:"onPause",value:function(e,t){return this._bindEvent(e,"pause",t)}},{key:"offPause",value:function(e,t){return this._unbindEvent(e,"pause",t)}},{key:"onEnded",value:function(e,t){return this._bindEvent(e,"ended",t)}},{key:"offEnded",value:function(e,t){return this._unbindEvent(e,"ended",t)}},{key:"onTimeUpdate",value:function(e,t){return this._bindEvent(e,"timeUpdate",t)}},{key:"offTimeUpdate",value:function(e,t){return this._unbindEvent(e,"timeUpdate",t)}},{key:"onError",value:function(e,t){return this._bindEvent(e,"error",t)}},{key:"offError",value:function(e,t){return this._unbindEvent(e,"error",t)}},{key:"onProgress",value:function(e,t){return this._bindEvent(e,"progress",t)}},{key:"offProgress",value:function(e,t){return this._unbindEvent(e,"progress",t)}},{key:"onFullScreenChange",value:function(e,t){return this._bindEvent(e,"fullScreenChange",t)}},{key:"offFullScreenChange",value:function(e,t){return this._unbindEvent(e,"fullScreenChange",t)}}]),e}();m.isComponent=!0,m.subComponents={};var b,_=function(e){return e},O=n(99);!function(e){e.waiting="waiting",e.play="play",e.pause="pause",e.ended="ended",e.timeUpdate="timeUpdate",e.error="error",e.progress="progress",e.fullScreenChange="fullScreenChange",e.loadedMetaData="loadedMetaData"}(b||(b={}));var I=n(14),S=n(17),E=n(8);function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(E.default)(e);if(t){var r=Object(E.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(S.default)(this,n)}}var C=function(e){Object(I.default)(n,e);var t=w(n);function n(){return Object(l.default)(this,n),t.apply(this,arguments)}return Object(d.default)(n,[{key:"render",value:function(){return this.props.children}}]),n}(m);function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}C.isFragment=!0;var A="Fragment",P={view:a.View,text:a.Text,image:a.Image,video:a.Video},D=function(e){return e.name[0]>="A"&&e.name[0]<="Z"},x=new WeakMap,R=function(e,t){var n=t.referComponent,a={children:t.children},r="getSubComponentProps",s=[];if(e.getProps){var c=e.getProps.split(":"),u=Object(o.default)(c);r=u[0],s=u.slice(1)}Object.assign(a,Z.apply(void 0,[n,r,t.name].concat(Object(i.default)(s)))||{});for(var l=0,d=Object.keys(e);l<d.length;l++){var f=d[l],p=e[f];["getProps","children"].includes(f)||(a[f]=p)}return a.children=t.children,a},j=function(e,t,n){if(!n.isComponent)throw new Error("class "+e.name+" is not a component, please ensure extend BaseComponent");return z(n,R(t,e),!1,e.referComponent)},M=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:N(e),n=e.referComponent,a=t.id,r=(("string"==typeof t.class?t.class:"")||"").split(/\s+/).filter(Boolean),i=Object.assign({},t);a&&(i.name=a),delete i.id,i.style=Te({classList:r,name:a,referComponent:n});var o=null!=i.bubbleEvent,s=P[e.name],c=new s(i);if(c.isBubbleEventSet=o,Object.assign(c,{classList:r,referComponent:n,key:t.key||null}),a&&n&&n.getEventHandler(a))for(var u=0,l=Object.keys(n.getEventHandler(a));u<l.length;u++){var d=l[u],f=n.getEventHandler(a)[d];if(d in b){if("video"===e.name){var p,h=k(f);try{for(h.s();!(p=h.n()).done;){var v=p.value,g="on"+d[0].toUpperCase()+d.slice(1),y=c[g];null==y||y.call(c,v)}}catch(e){h.e(e)}finally{h.f()}}}else{var m,O=k(f);try{for(O.s();!(m=O.n()).done;){var I=m.value;c.on(d,I)}}catch(e){O.e(e)}finally{O.f()}}}return null!=a&&(_(n)._elementMap[a]=c),c},N=function(e){for(var t={},n=0,a=Object.keys(e.attributes);n<a.length;n++){var r=a[n],i=e.attributes[r],o=Object(u.splitLineToCamelCase)(r);t[o]=i,/\{\{.+\}\}/.test(i)||("true"===i?t[o]=!0:"false"===i?t[o]=!1:"id"===o?t.id=Object(u.splitLineToCamelCase)(i):t[o]=i)}return t},L=function(e){var t=e.constructor.subComponents||[],n="function"==typeof t?t():t;return Object.assign(Object.assign({},n),Object(r.default)({},A,C))},B=function e(t){if(Array.isArray(t)){var n,a={element:null,subComponents:[]},r=k(t.map((function(t){return e(t)})));try{for(r.s();!(n=r.n()).done;){var o,s=n.value,c=s.element,u=s.subComponents;if(c)if(null===a.element&&(a.element=[]),Array.isArray(c))(o=a.element).push.apply(o,Object(i.default)(Object(O.flatten)(c)));else a.element.push(c);var l,d=k(u);try{for(d.s();!(l=d.n()).done;){var f=l.value;a.subComponents.includes(f)||a.subComponents.push(f)}}catch(e){d.e(e)}finally{d.f()}}}catch(e){r.e(e)}finally{r.f()}return a}if(!t)return{element:null,subComponents:[]};var p,h=L(t.referComponent),v=[],g=N(t);if(D(t)){if(!h[t.name])throw new Error("component name "+t.name+" does not exists");var y=j(t,g,h[t.name]);if(!(p=y.getRootElements()))return{element:null,subComponents:[]};v.push(y)}else{var m=M(t,g);t.children.forEach((function(t){var n=e(t),a=n.element,r=n.subComponents;if(a)if(v.push.apply(v,Object(i.default)(r)),Array.isArray(a)){var o,s=k(a);try{for(s.s();!(o=s.n()).done;){var c=o.value;m.add(c)}}catch(e){s.e(e)}finally{s.f()}}else m.add(a)})),p=m}return{element:p,subComponents:v}},F=function(e,t){for(var n=["autoInsert","autoplay","bubbleEvent","clickState","controls","enablePlayGesture","enableProgressGesture","eventType","height","hide","initialTime","live","loop","muted","obeyMuteSwitch","objectFit","parentId","playbackRate","poster","preLoad","scene","showCenterPlayBtn","src","underGameView","width","x","y","value"],a=!1,r=0,i=n;r<i.length;r++){var o=i[r];void 0===t[o]&&(t[o]=void 0)}for(var s=0,c=Object.keys(t);s<c.length;s++){var u=c[s],l=t[u];n.includes(u)&&e[u]!==l&&(e[u]=l,a=!0)}return a},W=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=n;if(e!==t){if(!a){if(!e||!e.parent)throw new Error("can not find element tree without parent");a=e.parent}if(e&&a.remove(e),t)if(Array.isArray(t)){var r,i=k(t);try{for(i.s();!(r=i.n()).done;){var o=r.value;a.add(o)}}catch(e){i.e(e)}finally{i.f()}}else a.add(t)}},V=function(e,t){return P[t.name]&&e?e.constructor===P[t.name]:!(!(null==e?void 0:e.isRootElementOfComponent)||!e.referComponent)&&e.referComponent.constructor.name===t.name},U=function(e,t){var n=N(t),a=t.referComponent,r=L(a),o=e&&V(e,t);if(!D(t)){var s;if(!t.children||0===t.children.length)return e&&o?(F(e,n),e):M(t,n);if(e&&o)return F(e,n),H(function(e){return Object.keys(e.children).map((function(t){return e.children[t]}))}(e),t.children),e;var c=B(t),u=c.element,l=c.subComponents;return(s=a.getSubComponents()).push.apply(s,Object(i.default)(l)),u}var d=null==e?void 0:e.referComponent,f=null==d?void 0:d.constructor;if(d&&f===r[t.name])return Object.assign(_(d).props,R(n,t)),K(d);var p=a.getSubComponents().indexOf(d);return p>-1&&a.getSubComponents().splice(p,1),d&&Z(d,"destroy"),null==e||e.remove(),j(t,n,r[t.name]).getRootElements()},G=function e(t){return t.reduce((function(t,n){return n.name===A?t.push.apply(t,Object(i.default)(e(n.children))):t.push(n),t}),[])},H=function(e,t){var n,a=[],r={},o=k(e);try{for(o.s();!(n=o.n()).done;){var s=n.value;s.key?r[s.key]=s:a.push(s)}}catch(e){o.e(e)}finally{o.f()}var c,u=k(G(t));try{for(u.s();!(c=u.n()).done;){var l=c.value,d=l.key,f=null;if(d)r[d]&&(f=r[d],delete r[d]);else for(var p=0,h=Object.keys(a);p<h.length;p++){var v=h[p],g=a[+v];if(g&&V(g,l)){f=g,a.splice(Number(v),1);break}}f||(f=a.shift()||null),e.length&&e[0].parent&&W(f,U(f,l),e[0].parent)}}catch(e){u.e(e)}finally{u.f()}for(var y=Object.keys(r).reduce((function(e,t){return e.push(r[t]),e}),[]),m=0,b=[].concat(a,Object(i.default)(y));m<b.length;m++){var _=b[m];null==_||_.remove()}},Y=function e(t,n){Array.isArray(t)?t.forEach((function(t){return e(t,n)})):(n(t),t.children.forEach((function(t){return e(t,n)})))},q=function(e,t){Y(e,(function(e){e.referComponent||(e.referComponent=t)}))},z=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=new e(t);r.parent=a;var i=r.render(),o="string"==typeof i?c()(i).root:i;q(o,r);var s=B(o),u=s.element,l=s.subComponents;return _(r)._subComponents=l,u&&(_(r)._rootElement=u,Array.isArray(u)?u.forEach((function(e){e.isRootElementOfComponent=!0})):u.isRootElementOfComponent=!0),Z(r,"ready",u,l),n&&(u&&(Array.isArray(u)?u.forEach((function(e){De.add(e),ve(e)})):(De.add(u),ve(u))),x.set(e,r)),r},K=function(e,t){t&&Object.assign(_(e).props,t);var n=e.getRootElements(),a=e.render(),r="string"==typeof a?c()(a).root:a;return q(r,e),Array.isArray(n)&&Array.isArray(r)?H(n,r):Array.isArray(n)&&!Array.isArray(r)?H(n,[r]):!Array.isArray(n)&&Array.isArray(r)?H([n],r):Array.isArray(n)||Array.isArray(r)||W(n,U(n,r)),Z(e,"updatedProps"),n},X=function(e){if(!_(e).isComponent)throw new Error("variable is not a component instance");var t=e.getRootElements();Array.isArray(t)?t.forEach((function(e){return De.remove(e)})):De.remove(t),_(e)._unmountComponent(),x.delete(e.constructor)},Z=function(e,t){if("function"==typeof e[t]){for(var n=arguments.length,a=new Array(n>2?n-2:0),r=2;r<n;r++)a[r-2]=arguments[r];return e[t].apply(e,a)}return null},J=n(36),Q=n(121),$=n(23),ee=n(78);function te(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ae=["width","height"],re=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"column",t=arguments.length>1?arguments[1]:void 0;return["row","column"].indexOf(e)===["width","height"].indexOf(t)},ie=function(e,t){return Math.max(e,t)},oe=function(e,t){return e+t},se=function(e){return{width:(e.style.marginLeft||0)+(e.style.marginRight||0),height:(e.style.marginTop||0)+(e.style.marginBottom||0)}},ce=function(e){return{width:(e.style.paddingLeft||0)+(e.style.paddingRight||0),height:(e.style.paddingTop||0)+(e.style.paddingBottom||0)}},ue=function(e,t,n){return e&&"px"===e.slice(-2)?parseFloat(e.slice(0,-2))+n:parseFloat(e.slice(0,-1))/100*t+n},le=function(e,t,n,a,r,i){var o,s=e.parent,c=a[n],u=ce(e)[n],l=t,d=null,f=!1;if(!r&&i>0&&(null==l||i>l)&&(l=i),a.position&&"absolute"===a.position[1]&&null!=l&&(l+=i),c||null==l)c&&"percent"===c[0]&&null!=l?(d=l*c[1]-u,f=!0):c&&"digit"===c[0]&&(d=c[1]-u,f=!0);else if("auto"!==e.style[n])if("absolute"===(null===(o=a.position)||void 0===o?void 0:o[1])){for(var p=0,h=!1,v=0,g="width"===n?["left","right"]:["top","bottom"];v<g.length;v++){var y=g[v];null!=a[y]?"digit"===a[y][0]?p+=Number(a[y][1])||0:"percent"===a[y][0]&&(p+=(Number(a[y][1])||0)*l):h=!0}d=h?null:l-p}else r&&re(s.style.flexDirection,n)&&e.style.flex>0?d=null:(function(e){return Object($.getVisibleChildren)(e).some((function(e){return null!=e.style.flex&&e.style.flex>0}))}(e)&&(f=!0),d=l-u);return null!=d&&(e.autoFitSize[n].size=d),f},de=function e(t){var n=Object($.isRootElement)(t),r=ce(t);t.autoFitSize={width:{size:null,margin:0,padding:r.width},height:{size:null,margin:0,padding:r.height}};var i,o=t.parent,s=Pe(Te(t)),c={width:!1,height:!1},u={width:null,height:null},l=te(ae);try{for(l.s();!(i=l.n()).done;){var d=i.value,f=s[d],p=n?"width"===d?Q.deviceInfo.screenWidth:Q.deviceInfo.screenHeight:o.autoFitSize[d].size,h=n?0:o.autoFitSize[d].padding;!f&&n&&"height"===d&&(p=null),c[d]=le(t,p,d,s,!0,h)}}catch(e){l.e(e)}finally{l.f()}pe(t,s);var v,g=ce(t),y="wrap"===t.style.flexWrap,m=[],b=te(Object($.getVisibleChildren)(t));try{for(b.s();!(v=b.n()).done;){var _=v.value;e(_);var O=se(_);if("absolute"!==_.style.position){var I,S=te(ae);try{for(S.s();!(I=S.n()).done;){var E=I.value,w=re(t.style.flexDirection,E);if(y){if(w){var C="width"===E?"height":"width";m.push([(_.autoFitSize[E].size||0)+_.autoFitSize[E].padding+O[E],(_.autoFitSize[C].size||0)+_.autoFitSize[C].padding+O[C]])}}else{var k=w?oe:ie;null==_.autoFitSize[E].size&&_.autoFitSize[E].padding<=0&&k===oe&&(c[E]=!0),u[E]=k((_.autoFitSize[E].size||0)+_.autoFitSize[E].padding+O[E],u[E]||0)}}}catch(e){S.e(e)}finally{S.f()}}}}catch(e){b.e(e)}finally{b.f()}if(y){var T=0,A=0,P=0,D=0,x=re(t.style.flexDirection,"width")?"width":"height",R="width"===x?"height":"width";D=c[x]&&null!=t.style[x]?t.style[x]:m.reduce((function(e,t){return e+Object(J.default)(t,1)[0]}),0);var j,M=te(m);try{for(M.s();!(j=M.n()).done;){var N=Object(J.default)(j.value,2),L=N[0],B=N[1];P=Math.max(P,B),L+T>D?(A+=P,P=B,T=L):T+=L}}catch(e){M.e(e)}finally{M.f()}A+=P,u[x]=T,u[R]=A}t instanceof a.Text&&(null!=t.autoFitSize.height.size&&c.height||Object.assign(t.autoFitSize.height,{size:t.style.lineHeight||t.style.fontSize||0,padding:g.height}),null!=t.autoFitSize.width.size&&c.width||Object.assign(t.autoFitSize.width,{size:ee.default.getTextWidth(t.value,t.style.fontSize||14)+3,padding:g.width}));var F,W=te(ae);try{for(W.s();!(F=W.n()).done;){var V=F.value;c[V]||null===u[V]?g[V]>0&&(t.autoFitSize[V].padding=g[V]):Object.assign(t.autoFitSize[V],{size:null!=u[V]?u[V]:null,padding:g[V]})}}catch(e){W.e(e)}finally{W.f()}},fe=function e(t){var n,r,i=Object($.getVisibleChildren)(t),o=te(ae);try{for(o.s();!(r=o.n()).done;){var s=r.value,c=re(t.style.flexDirection,s),u=t.autoFitSize[s].size,l=t.autoFitSize[s].padding;if(null!=u||l){u=u||0;var d,f=0,p=0,h=te(i);try{for(h.s();!(d=h.n()).done;){var v=d.value,g=v.autoFitSize[s],y=g.size,m=g.margin,b=g.padding;"absolute"!==v.style.position&&(null!=y?f+=y+b+m:v.style.flex&&v.style.flex>0&&(p+=Number(v.style.flex)))}}catch(e){h.e(e)}finally{h.f()}var _,O=te(i);try{for(O.s();!(_=O.n()).done;){var I=_.value,S=Pe(Te(I)),E=null;c?E=I.style.flex?(u-f)/ie(p,1)*I.style.flex:null:t.style.alignItems&&"stretch"!==t.style.alignItems||(E=u),null==I.autoFitSize[s].size&&E?le(I,E,s,S,!1,l):"absolute"===(null===(n=S.position)||void 0===n?void 0:n[1])&&le(I,u,s,S,!1,l)}}catch(e){O.e(e)}finally{O.f()}}}}catch(e){o.e(e)}finally{o.f()}var w,C=te(i);try{for(C.s();!(w=C.n()).done;){e(w.value)}}catch(e){C.e(e)}finally{C.f()}var k,T=te(ae);try{for(T.s();!(k=T.n()).done;){var A=k.value,P=t.autoFitSize[A],D=P.size,x=P.padding;null!=D&&t.style[A]!==D+x&&(t.style[A]=D+x)}}catch(e){T.e(e)}finally{T.f()}t instanceof a.Text&&null==t.style.lineHeight&&(t.style.lineHeight=t.style.height)},pe=function(e,t){for(var n=e.autoFitSize.width.size,a=e.autoFitSize.height.size,r=0,i=Object.keys(t);r<i.length;r++){var o=i[r],s=t[o];"percent"===s[0]?"horizontal"===be[o]&&null!=n?e.style[o]=s[1]*n:"vertical"===be[o]&&null!=a&&(e.style[o]=s[1]*a):"normal"===s[0]&&(e.style[o]=s[1])}t.transform&&"transform"===t.transform[0]&&(e.style.left=ue(t.transform[1][0],n||0,e.style.left||0),e.style.top=ue(t.transform[1][1],a||0,e.style.top||0)),!e.style.lineHeight&&e.parent&&e.parent.style.lineHeight&&(e.style.lineHeight=e.parent.style.lineHeight)},he=function e(t){var n,a,r=[["width","left"],["height","top"]],i=te(Object($.getVisibleChildren)(t));try{for(i.s();!(a=i.n()).done;){var o=a.value;e(o);var s,c=te(r);try{for(c.s();!(s=c.n()).done;){var u=Object(J.default)(s.value,2),l=u[0],d=u[1];if((o.style.position||(null===(n=o.expandAbsoluteSize)||void 0===n?void 0:n.has(l)))&&"hidden"!==t.style.overflow){var f=(o.style[l]||0)+(o.style[d]||0);f>(t.style[l]||0)&&(t.style[l]=f,t.expandAbsoluteSize=t.expandAbsoluteSize||new Set,t.expandAbsoluteSize.add(l))}}}catch(e){c.e(e)}finally{c.f()}}}catch(e){i.e(e)}finally{i.f()}},ve=function(e){de(e),fe(e),he(e)};function ge(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var me=function(e){return Number(e).toString()===e},be={left:"horizontal",right:"horizontal",marginLeft:"horizontal",marginRight:"horizontal",paddingLeft:"horizontal",paddingRight:"horizontal",marginTop:"horizontal",marginBottom:"horizontal",paddingTop:"horizontal",paddingBottom:"horizonta",borderRadius:"horizontal",top:"vertical",bottom:"vertical"},_e=/^\s*#[0-9a-fA-F]{3}\s*$/,Oe=/^\s*#[0-9a-fA-F]{3,6}\s*$/,Ie=/^\s*rgb\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/,Se=/^\s*rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)\s*$/,Ee=/px$/,we=function(e){return"number"==typeof e?e:Ee.test(e)?Number(e.replace(Ee,""))||0:me(e)?parseInt(e,10):e},Ce=function(e){if("string"==typeof e&&_e.test(e)){var t=e.slice(1),n=Object(J.default)(t,3),a=n[0],r=n[1],i=n[2];return"#"+a+a+r+r+i+i}return e},ke=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={},n=0,a=Object.keys(e);n<a.length;n++){var i=a[n],o=e[i];if(["padding","margin"].includes(i)){var s,c=Array.isArray(o)?o:(null==o?"":o).toString().split(/\s+/),u=null,l=null,d=null,f=null;switch(c.length){case 0:continue;case 1:var p=Object(J.default)(c,1);u=p[0];var h=Object(J.default)(c,1);l=h[0];var v=Object(J.default)(c,1);d=v[0];var g=Object(J.default)(c,1);f=g[0];break;case 2:var y=Object(J.default)(c,2);u=y[0],l=y[1];var m=Object(J.default)(c,2);d=m[0],f=m[1];break;case 3:var b=Object(J.default)(c,3);u=b[0],l=b[1],d=b[2],f=l;break;case 4:var _=Object(J.default)(c,4);u=_[0],f=_[1],d=_[2],l=_[3];break;default:continue}Object.assign(t,(s={},Object(r.default)(s,i+"Top",we(u)),Object(r.default)(s,i+"Left",we(l)),Object(r.default)(s,i+"Bottom",we(d)),Object(r.default)(s,i+"Right",we(f)),s))}else if("border"===i){var O=(o||"").toString().split(/\s+/);switch(O.length){case 0:continue;case 1:t.borderColor=Ce(O[0]);continue;case 2:t.borderWidth=we(O[0]),t.borderColor=Ce(O[1]);continue;case 3:t.borderWidth=we(O[0]),t.borderColor=Ce(O[2]);continue;default:continue}}else if("background"===i&&Oe.test(e[i]))t.backgroundColor=Ce(e[i]);else if("background"===i&&(Ie.test(e[i])||Se.test(e[i])))t.backgroundColor=e[i];else if("background"===i&&e[i].includes("linear-gradient"))t.backgroundColor=e[i];else if("color"===i&&"string"==typeof o&&Se.test(o)){var I=Se.exec(o).slice(1,5).map((function(e){return Number(e)})),S=Object(J.default)(I,4),E=S[0],w=S[1],C=S[2],k=S[3],T=function(e){return e.toString(16)};t.color="#"+T(E)+T(w)+T(C),null==e.opacity&&(t.opacity=Number(k))}else if("display"===i&&"none"===e[i])t.hidden=!0;else if("rotate"===i){var A=e[i];t.rotate="string"==typeof A?Number(A.replace("deg",""))||0:A}else t[i]=Ce(we(e[i]))}return t},Te=function(e){var t=_(e.referComponent);if(!t)return Object.assign({},e.style||{});var n,a={},r=t.style||{},i=ge(e.classList||[]);try{for(i.s();!(n=i.n()).done;){var o=n.value;Object.assign(a,ke(r[o])),Object.assign(a,ke(r["."+o]))}}catch(e){i.e(e)}finally{i.f()}return r[e.name]&&Object.assign(a,ke(r[e.name])),e.name&&t._manualStyle[e.name]&&Object.assign(a,ke(t._manualStyle[e.name])),a},Ae={percent:/^-?[1-9]\d*(\.\d+)?%$/,translate:/translate\(\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*,\s*(-?\d+(?:\.\d+)?(?:%|px)?)\s*\)/},Pe=function(e){for(var t={},n=0,a=Object.keys(e);n<a.length;n++){var r=a[n],i=e[r];if(null!=i){var o=i.toString().trim();if((be[r]||["width","height"].includes(r))&&Ae.percent.test(o)){var s=parseFloat(o.slice(0,-1))/100;t[r]=["percent",s]}else if(me(o))t[r]=["digit",Number(o)];else if("transform"===r&&o.includes("translate")){var c=Ae.translate.exec(o);c&&(t[r]=["transform",c.slice(1,3)])}else t[r]="string"==typeof i?["normal",o]:["normal",i]}}return t},De=a.webviewLayout},function(e,t,n){n.r(t),n.d(t,"onShow",(function(){return a.onShow})),n.d(t,"offShow",(function(){return a.offShow})),n.d(t,"_onShow",(function(){return a._onShow})),n.d(t,"_offShow",(function(){return a._offShow})),n.d(t,"emitGameOnshow",(function(){return a.emitGameOnshow})),n.d(t,"_onBaseFrameShow",(function(){return a._onBaseFrameShow})),n.d(t,"_offBaseFrameShow",(function(){return a._offBaseFrameShow})),n.d(t,"onHide",(function(){return l})),n.d(t,"offHide",(function(){return d})),n.d(t,"_onHide",(function(){return f})),n.d(t,"_offHide",(function(){return p})),n.d(t,"_onBaseFrameHide",(function(){return h})),n.d(t,"_offBaseFrameHide",(function(){return v})),n.d(t,"onStickyStatusChange",(function(){return y})),n.d(t,"offStickyStatusChange",(function(){return m}));var a=n(100),r=n(31),i=n(21),o=n(94),s=n(124),c=Object(i.getEventManager)("Hide"),u=Object(i.getEventManager)("BaseFrameHide"),l=c.onMethod,d=c.offMethod,f=c.internalOnMethod,p=c.internalOffMethod,h=u.internalOnMethod,v=u.internalOffMethod;Object(r.onNativeEvent)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.setLastOnHideMode)(e.mode),Object(o.isAtFunctionalPage)()?u.emit(e):(u.emit(e),c.emit(e))}));var g=n(59),y=function(){Object(g.reportDeprecatedAPI)("onStickyStatusChange"),console.warn("wx.onStickyStatusChange 已废弃，请勿继续使用")},m=function(){Object(g.reportDeprecatedAPI)("offStickyStatusChange"),console.warn("wx.offStickyStatusChange 已废弃，请勿继续使用")}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){n.r(t),n.d(t,"AdProxy",(function(){return ai})),n.d(t,"encodeIdKey",(function(){return Za.encodeIdKey})),n.d(t,"IDKEY_GROUP",(function(){return Za.IDKEY_GROUP})),n.d(t,"IDKEY",(function(){return Za.IDKEY})),n.d(t,"SPLASHAD_IDKEY",(function(){return Za.SPLASHAD_IDKEY})),n.d(t,"CUSTOMAD_IDKEY",(function(){return Za.CUSTOMAD_IDKEY})),n.d(t,"CrtSize",(function(){return za})),n.d(t,"ProductType",(function(){return Ka})),n.d(t,"MpTagType",(function(){return Xa})),n.d(t,"typeMap",(function(){return Qa})),n.d(t,"watermarkTypeMap",(function(){return $a})),n.d(t,"validPt",(function(){return er})),n.d(t,"validCrtSize",(function(){return tr})),n.d(t,"ClickPos",(function(){return Ja})),n.d(t,"H5_PRELOAD_MINIGAME_SCENE",(function(){return or})),n.d(t,"LiveVideoMode",(function(){return nr})),n.d(t,"LiveVideoSubMode",(function(){return ar})),n.d(t,"LiveStatus",(function(){return rr})),n.d(t,"JumpChannelsScene",(function(){return ir})),n.d(t,"DestType",(function(){return fn}));var a=n(36),r=n(16),i=n(4),o=n(5),s=n(18),c=n(13),u=n.n(c),l=n(68),d=n.n(l),f=n(1),p=n(15),h=n(113),v=n(27),g=n(74),y=n(120),m="<?xml version='1.0' encoding='utf-8' ?>",b=function(e){return"<![CDATA["+e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")+"]]>"},_=function(e){return e.children&&e.children.length>0?e.children.map((function(e){return O(e)})).join(""):""},O=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=t?m:"";return n+="<"+e.name+">",e.children.length>0?n+=_(e):n+=b(e.content),n+="</"+e.name+">"},I=n(97),S=n(40),E=n(73),w=n(11),C=Symbol("signExport"),k=function(){return function(e,t){e[C]=e[C]||new Set,e[C].add(t)}};function T(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return A(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return A(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function A(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var P=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))},D=function(e,t){var n,a=Array.isArray(t)?t:[t],r=T(a);try{for(r.s();!(n=r.n()).done;){var i=n.value;if(!(i in e)||"function"!=typeof e[i])throw new Error(i+" is not the function method of the class")}}catch(e){r.e(e)}finally{r.f()}return a.map((function(t){return e[t]}))},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a,r){var i=r.value,o=D(n,e);r.value=t?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return P(this,void 0,void 0,u.a.mark((function e(){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.call.apply(i,[this].concat(t));case 2:n=e.sent,a=T(o),e.prev=4,a.s();case 6:if((r=a.n()).done){e.next=12;break}return s=r.value,e.next=10,s.call(this,n);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),a.e(e.t0);case 17:return e.prev=17,a.f(),e.finish(17);case 20:return e.abrupt("return",n);case 21:case"end":return e.stop()}}),e,this,[[4,14,17,20]])})))}:function(){for(var e=this,t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=i.call.apply(i,[this].concat(n));if(r instanceof Promise)return r.then((function(t){var n,a=T(o);try{for(a.s();!(n=a.n()).done;){n.value.call(e,t)}}catch(e){a.e(e)}finally{a.f()}return t}));var s,c=T(o);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.call(this,r)}}catch(e){c.e(e)}finally{c.f()}return r}}},R=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return function(n,a,r){var i=r.value,o=D(n,e);r.value=t?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return P(this,void 0,void 0,u.a.mark((function e(){var n,a,r,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,i.call.apply(i,[this].concat(t));case 3:return n=e.sent,e.abrupt("return",n);case 7:e.prev=7,e.t0=e.catch(0),a=T(o),e.prev=10,a.s();case 12:if((r=a.n()).done){e.next=18;break}return s=r.value,e.next=16,s.call(this,e.t0);case 16:e.next=12;break;case 18:e.next=23;break;case 20:e.prev=20,e.t1=e.catch(10),a.e(e.t1);case 23:return e.prev=23,a.f(),e.finish(23);case 26:throw e.t0;case 27:case"end":return e.stop()}}),e,this,[[0,7],[10,20,23,26]])})))}:function(){var e=this;try{for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];var r=i.call.apply(i,[this].concat(n));return r instanceof Promise&&r.catch((function(t){var n,a=T(o);try{for(a.s();!(n=a.n()).done;){n.value.call(e,t)}}catch(e){a.e(e)}finally{a.f()}})),r}catch(e){var s,c=T(o);try{for(c.s();!(s=c.n()).done;){var u=s.value;u.call(this,e)}}catch(e){c.e(e)}finally{c.f()}throw e}}}},j=n(23),M=n(148),N=n(3),L=n(9),B=n(14),F=n(17),W=n(8),V=n(33),U=new(n(106).default),G={banner:"SHOW_BANNER","incentive-video":"SHOW_REWARD",grid:"SHOW_GRID"},H={banner:"HIDE_BANNER","incentive-video":"HIDE_REWARD",grid:"HIDE_GRID"},Y=function(){function e(t){var n=t.adUnitId,a=t.adType,r=void 0===a?"banner":a;Object(i.default)(this,e),this.adUnitId=n,this.adType=r}return Object(o.default)(e,[{key:"show",value:function(){var e=G[this.adType];e&&U.emit(e,{adUnitId:this.adUnitId})}},{key:"hide",value:function(){var e=H[this.adType];e&&U.emit(e,{adUnitId:this.adUnitId})}},{key:"on",value:function(e,t){var n=this;U.on(e,(function(e){e.adUnitId!==n.adUnitId&&t(e)}))}}]),e}(),q=n(63),z=n(126),K=n(24),X=n(22),Z=n(127),J=n(0),Q=n(26),$={},ee=function(e,t,n){$.hasOwnProperty(e)||($[e]={}),$[e][t]=n},te=function(e,t){if($.hasOwnProperty(e))return $[e][t]},ne=n(83),ae=n(34),re=n(6),ie=n(19),oe=(n(142),n(137),n(59),new ae.default);Object(J.onMethod)("onRecorderStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state;delete e.state,oe.emit("onRecorderStateChange_"+t,e)}));var se,ce=n(10),ue=n(56),le=n(61),de=new ue.Emitter("BackgroundAudioManager",!0),fe=wxNativeConsole.createLogger("BackgroundAudioManager"),pe={src:"",currentTime:0,duration:0,paused:!0,buffered:0,title:"",coverImgUrl:"",description:"",startTime:0,playbackRate:1,referrerPolicy:""};Object(J.onMethod)("onBackgroundAudioNext",(function(){de.emit("Next")})),Object(J.onMethod)("onBackgroundAudioPrev",(function(){de.emit("Prev")})),Object(J.onMethod)("onBackgroundAudioStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.state;delete e.state,"play"===t?(pe.paused=!1,re.default.possessingBackgroundAudioPlayer=!0):"preempted"===t||"occupied"===t?(re.default.possessingBackgroundAudioPlayer=!1,de.emit("Stop",e)):("pause"===t||"stop"===t)&&(pe.paused=!0),de.emit(""+t[0].toUpperCase()+t.substr(1),e)}));var he={play:function(){setTimeout((function(){ve({operationType:"play"})}),0)},pause:function(){setTimeout((function(){ve({operationType:"pause"})}),0)},seek:function(e){if("number"!=typeof e)throw new Error("BackgroundAudioManager.seek(currentTime): unexpected type "+Object(s.default)(e));setTimeout((function(){ve({currentTime:e,operationType:"seek"})}),0)},stop:function(){setTimeout((function(){ve({operationType:"stop"})}),0)},onTimeUpdate:function(e){var t=this;void 0===se&&(se=setInterval((function(){var e=pe.currentTime;ge("currentTime",(function(){"active"===re.default.runningStatus&&!1!==re.default.possessingBackgroundAudioPlayer&&t.currentTime!==e&&de.emit("Timeupdate")}))}),250)),de.off("Timeupdate"),de.on("Timeupdate",e)}};function ve(e){Object(J.invokeMethod)("operateBackgroundAudio",e)}["src","title","epname","singer","startTime","coverImgUrl","currentTime","duration","paused","buffered","webUrl","protocol","playbackRate","referrerPolicy"].forEach((function(e){Object.defineProperty(he,e,{get:function(){return"src"===e&&he.srcCloudId?he.srcCloudId:"coverImgUrl"===e&&he.coverCloudId?he.coverCloudId:ge(e)},set:function(t){["src","title","epname","singer","coverImgUrl","startTime","webUrl","protocol","playbackRate","referrerPolicy"].indexOf(e)>-1&&("src"===e?Object(le.getCloudFileUrl)([t],"audio",(function(n){/^(cloud):\/\//.test(t)?he.srcCloudId=t:he.srcCloudId="",me(e,n.data[0].url)})):"coverImgUrl"===e?Object(le.getCloudFileUrl)([t],"image",(function(n){/^(cloud):\/\//.test(t)?he.coverCloudId=t:he.coverCloudId="",me(e,n.data[0].url)})):me(e,t))}})}));function ge(e,t){if(!1!==re.default.possessingBackgroundAudioPlayer){var n=pe[e];return Object(J.invokeMethod)("getBackgroundAudioState",{success:function(a){void 0===a.paused||!0===a.paused?a.paused=!0:a.paused=!1,pe=Object.assign(pe,a),n=pe[e],"function"==typeof t&&t(n)},fail:function(e){var t=e.errMsg;fe.error("getBackgroundAudioState fail: "+t)}}),n}}["Canplay","Waiting","Error","Play","Pause","Seeking","Seeked","Ended","Stop","Next","Prev"].forEach((function(e){he["on"+e]=function(t){de.off(e),de.on(e,t)}}));var ye={};function me(e,t){if("src"===e&&!t)throw new Error("invalid BackgroundAudioManager.src: "+t);if("active"!==re.default.runningStatus&&!1===re.default.possessingBackgroundAudioPlayer)throw new ce.AppServiceSdkKnownError("Can not set BackgroundAudioManager."+e+", background audio is preempted.");ye[e]=t,1===Object.keys(ye).length&&setTimeout((function(){Object.assign(pe,ye),pe.src&&pe.title?(fe.log("setBackgroundAudioState, stateInstance:",pe),Object(J.invokeMethod)("setBackgroundAudioState",Object.assign({},pe,{fail:function(e){var t=e.errMsg;fe.error(t),de.emit("Error",{errMsg:t.replace(/^setBackgroundAudioState: fail /,"")})}})),ye={}):ye={}}),0)}var be=new ae.default;Object(J.onMethod)("onMusicPlay",(function(){re.default.possessingBackgroundAudioPlayer=!0,be.emit("onBackgroundAudioPlay")}));wxNativeConsole.createLogger("MediaAudioPlayerJsApi"),new WeakMap;wxNativeConsole.createLogger("MediaAudioPlayerBinding"),new WeakMap;var _e=n(29),Oe=n(41),Ie=null,Se=!1;Object(Oe.onAppRoute)((function(){Se=!0})),Object(ne.onAppRouteDone)((function(){Se=!1,Ie&&(we(Ie),Ie=null)}));var Ee=100,we=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.type||(e.type="all"),void 0===e.count&&(e.count=Ee),Object(_e.beforeInvoke)("chooseMessageFile",e,{type:"",count:0})&&(e.count<=0?Object(_e.beforeInvokeFail)("chooseMessageFile",e,"param count should be larger than 0."):void 0===e.extension||"[object Array]"===Object.prototype.toString.call(e.extension)?!e.extension||e.extension.length?(e.count>Ee&&(e.count=Ee),Se?Ie=e:Object(_e.invokeMethod)("chooseMessageFile",e)):Object(_e.beforeInvokeFail)("chooseMessageFile",e,"param extension should not be empty."):Object(_e.beforeInvokeFail)("chooseMessageFile",e,"param extension should be Array."))},Ce=(n(46),n(112),n(21)),ke=Object(Ce.getEventManager)("AudioInterruptionBegin"),Te=(ke.onMethod,ke.offMethod,ke.internalOnMethod,ke.internalOffMethod,Object(Ce.getEventManager)("AudioInterruptionEnd")),Ae=(Te.onMethod,Te.offMethod,Te.internalOnMethod,Te.internalOffMethod,!1);Object(J.onMethod)("onAudioInterruptionBegin",(function(e){wxNativeConsole.info("onAudioInterruptionBegin"),!0,!1===Ae&&ke.emit(e)})),Object(J.onMethod)("onAudioInterruptionEnd",(function(e){wxNativeConsole.info("onAudioInterruptionEnd"),!1,!1===Ae&&Te.emit(e)}));var Pe=function(){return Ae};Object.assign,new WeakMap,new WeakMap;n(30),n(51);var De=n(2);var xe=new ae.default;new WeakMap,new WeakMap;Object(J.onMethod)("onCanvasPlayerStateChange",(function(e){var t=e.state;"playEnd"===t?xe.emit(e.containerId,{event:"ended",data:{}}):"buffSize"===t?xe.emit(e.containerId,{event:"bufferchange",data:{size:e.buffSize}}):"error"===t&&xe.emit(e.containerId,{event:"error",data:{message:e.errMsg,code:e.errCode}})}));n(161),Object.assign;var Re=n(47),je=n(12),Me=n(150),Ne=new WeakMap,Le=new WeakMap,Be=new WeakMap,Fe=new WeakMap,We=new WeakMap,Ve=new WeakMap,Ue=new WeakMap,Ge=new Map,He=new Map;ie.default.EventHandler&&(ie.default.EventHandler.onbindingobjectdestruct=function(e){var t=He[e];t&&Object(J.invokeMethod)("getAudioState",{audioId:t,success:function(e){!0===e.paused?(Ge.delete(t),Object(J.invokeMethod)("destroyAudioInstance",{audioId:t})):Ge.get(t)&&!1===Ge.get(t).loop&&Je.once(t+"_onAudioStateChange_ended",(function(){Ge.delete(t),Object(J.invokeMethod)("destroyAudioInstance",{audioId:t})}))}})});var Ye=function(e,t){var n=this;Le.set(this,Object.assign(Le.get(this),Object(r.default)({},e,t))),"src"===e&&Le.set(this,Object.assign(Le.get(this),{paused:!0})),Fe.get(this)&&(setTimeout((function(){var a=Object.assign({},Le.get(n),We.get(n),{timestamp:Date.now(),audioId:Ne.get(n),success:function(){Le.set(n,Object.assign(Le.get(n),Object(r.default)({},e,t)))},fail:function(){ze.call(n)}});Pe()&&(a.autoplay=!1),Object(J.invokeMethod)("setAudioState",a),Fe.set(n,!0)}),0),Fe.set(this,!1)),We.set(this,Object.assign(We.get(this),Object(r.default)({},e,t)))},qe=function(e,t){var n=this;Ue.get(this).then((function(){Ye.call(n,e,t)}))},ze=function(e,t){var n=this,a=Le.get(this)[e];return Object(J.invokeMethod)("getAudioState",{audioId:Ne.get(this),success:function(r){delete r.errMsg,Le.set(n,Object.assign(Le.get(n),r)),a=r[e],"function"==typeof t&&t(a)}}),a},Ke=function(e){var t=Ne.get(this);Object(J.invokeMethod)("operateAudio",Object.assign({timestamp:Date.now(),audioId:t,fail:function(e){var t=e.errMsg;at("error",{errMsg:t,errCode:-1})}},e))},Xe=function(e){var t=this;Ue.get(this).then((function(){setTimeout((function(){Ke.call(t,e)}),0)}))},Ze=function(){};f.default.onReady((function(){Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a="";"undefined"!=typeof wx&&wx.version&&wx.version.version&&(a=wx.version.version);var r=f.default.appLaunchInfo,i="";i=Object.keys(r.query||{}).map((function(e){return e+"="+r.query[e]})).join("&"),i=encodeURIComponent(i);var o=[Math.round(Date.now()/1e3),r.scene,"",r.sessionid||r.sessionId,r.path,i,Object(Re._getCurrentNetworkType)(),a,5,t,n,encodeURIComponent(e.substring(0,1024)).substring(0,1024),f.default.appType+1e3].join(",");Reporter.reportKeyValue({key:"MediaCompStatus",value:o})}}));var Je=new ae.default;Object(J.onMethod)("onAudioStateChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.state=e.state.toLowerCase();var t=e.state,n=e.audioId;delete e.audioId,delete e.state;var a="play"!==t,r=Ge.get(n);r&&(r.paused=a),Object(J.invokeMethod)("getAudioState",{audioId:n,success:function(e){var n=parseInt(e.currentTime/1e3,10),a=parseInt(e.duration/1e3,10);switch(t){case"canplay":Ze(e.src,121,[e.autoplay?2:1,a].join(";"));break;case"waiting":Ze(e.src,122,[n,a,e.buffered].join(";"));break;case"ended":Ze(e.src,123,e.duration);break;case"error":Ze(e.src,124,e.errCode);break;case"seeking":Ze(e.src,125,[n,a,e.buffered].join(";"))}}}),Je.emit(n+"_onAudioStateChange_"+t,e)}));var Qe,$e=function(e,t){var n=Ne.get(this)+"_onAudioStateChange_"+e,a=function(n){__errorTracer__.surroundThirdByTryCatch(t,"at audioContext.on"+e+" callback function")(n)};Ve.set(t,a),Je.on(n,a)},et=function(e,t){var n=this;Ue.get(this).then((function(){$e.call(n,e,t)}))},tt=function(e,t){var n=Ne.get(this)+"_onAudioStateChange_"+e;if(Object(je.isFunction)(t)){var a=Ve.get(t);Object(je.isFunction)(a)&&Je.off(n,a)}else Je.removeAllListeners(n)},nt=function(e,t){var n=this;Ue.get(this).then((function(){tt.call(n,e,t)}))},at=function(e,t){Je.emit(Ne.get(this)+"_onAudioStateChange_"+e,t)},rt=0,it=!1,ot=function(){function e(t){var n,a,r=this;Object(i.default)(this,e),Le.set(this,{}),We.set(this,{}),Be.set(this,void 0),Fe.set(this,!0),Ue.set(this,new Me.WxPromise((function(e,t){n=e,a=t}))),Object(J.invokeMethod)(De.IS_ANDROID&&Object(p.isGame)()&&f.default.clientVersion>=654315008&&t?"createAudioInstanceAsync":"createAudioInstance",{timestamp:Date.now(),success:function(e){var t={src:"",startTime:0,paused:!0,currentTime:0,duration:0,obeyMuteSwitch:!0,volume:1,autoplay:!1,loop:!1,buffered:0,referrerPolicy:""};if(Ge.set(e.audioId,t),Ne.set(r,e.audioId),Le.set(r,t),ie.default.BindingObject){var a=new ie.default.BindingObject;r.__bindingObject=a,He[a.__id]=e.audioId}rt+=1,++rt>=1024&&!it&&De.IS_IOS&&(it=!0,Reporter.reportIDKey({id:356,key:"audioInstancesCountReach1024"})),setTimeout(n,0)},fail:function(e){a(e.errMsg)}}),["Play","Pause","Stop","Canplay","Error","Ended","Waiting","Seeking","Seeked"].forEach((function(e){r["on"+e]=function(t){et.call(r,e.toLowerCase(),t)},r["off"+e]=function(t){nt.call(r,e.toLowerCase(),t)}}))}return Object(o.default)(e,[{key:"src",get:function(){return this.cloudId?this.cloudId:ze.call(this,"src")},set:function(e){var t=this;"string"==typeof e&&0!==e.length?Object(le.getCloudFileUrl)([e],"audio",(function(n){/^(cloud):\/\//.test(e)?t.cloudId=e:t.cloudId="",e=n.data[0].url,qe.call(t,"src",e)})):at.call(this,"error",{errMsg:"Failed to set src, the src "+e+" is invalid."})}},{key:"startTime",get:function(){return ze.call(this,"startTime")/1e3},set:function(e){"number"==typeof e?qe.call(this,"startTime",1e3*e):at("error",{errMsg:"Failed to set startTime, the startTime "+e+" is invalid."})}},{key:"autoplay",get:function(){return ze.call(this,"autoplay")},set:function(e){"boolean"==typeof e&&qe.call(this,"autoplay",e)}},{key:"loop",get:function(){return ze.call(this,"loop")},set:function(e){"boolean"==typeof e&&qe.call(this,"loop",e)}},{key:"obeyMuteSwitch",get:function(){return ze.call(this,"obeyMuteSwitch")},set:function(e){"boolean"==typeof e&&qe.call(this,"obeyMuteSwitch",e)}},{key:"volume",get:function(){return ze.call(this,"volume")},set:function(e){"number"!=typeof e||e<0||e>1||qe.call(this,"volume",e)}},{key:"playbackRate",get:function(){return ze.call(this,"playbackRate")},set:function(e){"number"!=typeof e||e<0||qe.call(this,"playbackRate",e)}},{key:"referrerPolicy",get:function(){return ze.call(this,"referrerPolicy")},set:function(e){"string"==typeof e&&qe.call(this,"referrerPolicy",e)}},{key:"paused",get:function(){return ze.call(this,"paused")}},{key:"duration",get:function(){return ze.call(this,"duration")/1e3}},{key:"currentTime",get:function(){return ze.call(this,"currentTime")/1e3}},{key:"buffered",get:function(){return ze.call(this,"buffered")/1e3}},{key:"play",value:function(){!1===Pe()&&Xe.call(this,{operationType:"play"})}},{key:"pause",value:function(){Xe.call(this,{operationType:"pause"})}},{key:"stop",value:function(){Xe.call(this,{operationType:"stop"})}},{key:"seek",value:function(e){"number"!=typeof e||e<0?at("error",{errMsg:"Failed to seek, the currentTime "+e+" is invalid."}):Xe.call(this,{operationType:"seek",currentTime:1e3*e})}},{key:"destroy",value:function(){var e=this;Ue.get(this).then((function(){var t=Ne.get(e);Ge.has(t)&&(["play","pause","stop","canplay","error","ended","waiting","seeking","seeked"].forEach((function(e){var n=t+"_onAudioStateChange_"+e;Je.removeAllListeners(n)})),Ge.delete(t),rt-=1,Object(J.invokeMethod)("destroyAudioInstance",{audioId:t}))}))}},{key:"onTimeUpdate",value:function(e){var t=this;Ue.get(this).then((function(){var n=Ne.get(t)+"_onAudioStateChange_timeupdate";void 0===Be.get(t)&&Be.set(t,setInterval((function(){if("active"===re.default.runningStatus&&!0!==Le.get(t).paused&&1!==Le.get(t).paused){var e=Le.get(t).currentTime;ze.call(t,"currentTime",(function(t){t!==e&&Je.emit(n)}))}}),250)),Je.removeAllListeners(n);var a=function(t){__errorTracer__.surroundThirdByTryCatch(e,"at audioContext.onTimeUpdate callback function")(t)};Ve.set(e,a),Je.on(n,a)}))}},{key:"offTimeUpdate",value:function(e){var t=this;Ue.get(this).then((function(){nt.call(t,"timeupdate",e)}))}}],[{key:"pauseAllAudio",value:function(){Ge.forEach((function(e,t){Object(J.invokeMethod)("operateAudio",{timestamp:Date.now(),audioId:t,operationType:"pause"})}))}}]),e}(),st=["src","startTime","autoplay","loop","obeyMuteSwitch","volume","playbackRate","duration","currentTime","paused","buffered","referrerPolicy"],ct=["startTime","duration","currentTime"],ut=["Canplay","Ended","Error","Pause","Play","Seeked","Seeking","Stop","TimeUpdate","Waiting"],lt=new Set,dt=new WeakMap,ft=new WeakMap,pt=new WeakMap,ht=function(){function e(){var t=this;Object(i.default)(this,e);var n=new ie.default.Audio,a=new ae.default;dt.set(this,n),lt.add(this),st.forEach((function(e){return Object.defineProperty(t,e,{get:function(){return ct.includes(e)?n[e]/1e3:n[e]},set:function(t){ct.includes(e)?n[e]=1e3*t:n[e]=t}})})),ut.forEach((function(e){t["on"+e]=function(t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at audioContext.on"+e+" callback function");ft.set(t,n),pt.set(n,t),a.on(e,n)},t["off"+e]=function(t){if(Object(je.isFunction)(t)){var n=ft.get(t);Object(je.isFunction)(n)&&(a.off(e,n),ft.delete(t),pt.delete(n))}else a.listeners(e).forEach((function(e){var t=pt.get(e);ft.delete(t),pt.delete(e)})),a.removeAllListeners(e)},n["on"+e.toLowerCase()]=function(t,n){t?a.emit(e,{errCode:t,errMsg:n}):a.emit(e)}}))}return Object(o.default)(e,[{key:"play",value:function(){dt.get(this).play()}},{key:"stop",value:function(){dt.get(this).stop()}},{key:"pause",value:function(){dt.get(this).pause()}},{key:"seek",value:function(e){dt.get(this).seek(1e3*e)}},{key:"destroy",value:function(){var e=dt.get(this);e.destroy&&e.destroy(),lt.delete(this),dt.delete(this)}}],[{key:"pauseAllAudio",value:function(){lt.forEach((function(e){var t=dt.get(e);t&&t.pause()}))}}]),e}(),vt=(De.IS_PC||De.IS_MINA)&&ie.default.Audio?ht:ot,gt=n(78);!function(e){e.REWARD_ENDPAGE_HEAD_IMG="REWARD_ENDPAGE_HEAD_IMG",e.REWARD_ENDPAGE_WORDING_LOGO_ENHANCED="REWARD_ENDPAGE_WORDING_LOGO_ENHANCED",e.REWARD_ENDPAGE_WORDING_TEXT_ENHANCED="REWARD_ENDPAGE_WORDING_TEXT_ENHANCED",e.REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED="REWARD_ENDPAGE_BUTTON_LOGO_ENHANCED",e.REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED="REWARD_ENDPAGE_BUTTON_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_HEAD_IMG="REWARD_EXPAND_CARD_HEAD_IMG",e.REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED="REWARD_EXPAND_CARD_WORDING_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED="REWARD_EXPAND_CARD_WORDING_TEXT_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED="REWARD_EXPAND_CARD_BUTTON_LOGO_ENHANCED",e.REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED="REWARD_EXPAND_CARD_BUTTON_TEXT_ENHANCED",e.REWARD_OLD_ENDPAGE_BUTTON="REWARD_OLD_ENDPAGE_BUTTON",e.REWARD_TEMPLATE_AREA="REWARD_TEMPLATE_AREA",e.REWARD_PAGE_BUTTON="REWARD_PAGE_BUTTON",e.REWARD_PAGE_CARD="REWARD_PAGE_CARD",e.REWARD_PAGE_IMAGE="REWARD_PAGE_IMAGE",e.REWARD_CARD_BUTTON="REWARD_CARD_BUTTON",e.REWARD_CARD="REWARD_CARD",e.REWARD_DOWNLOAD="REWARD_DOWNLOAD",e.REWARD_DYNAMIC_CONTENT="REWARD_DYNAMIC_CONTENT",e.REWARD_DYNAMIC_BUTTON="REWARD_DYNAMIC_BUTTON"}(Qe||(Qe={}));var yt="REWARDED_DYNAMIC",mt=n(62),bt={defaultPageHeadline:{flexDirection:"row"},defaultPageAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},defaultPageWordingWrapper:{marginTop:0,marginBottom:48,height:72},defaultPageAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},defaultPageAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},_t={expandCardHeadline:{flexDirection:"row"},expandCardAppIcon:{borderRadius:3,marginTop:2,width:24,height:24,position:"absolute"},expandCardWordingWrapper:{marginTop:0,marginBottom:48,height:72},expandCardAppName:{textAlign:"center",height:28,lineHeight:28,fontSize:17,fontWeight:300,position:"relative",left:16,marginTop:0,color:"#ffffff",opacity:.8},expandCardAppWording:{marginTop:16,fontSize:20,fontWeight:500,opacity:1}},Ot=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({container:{rotate:0,position:"absolute",justifyContent:"center",alignItems:"center",overflow:"hidden",zIndex:1000002,hidden:!0},video:{padding:8,paddingBottom:16,flexDirection:"column",justifyContent:"space-between",alignItems:"flex-start",backgroundColor:"#ff0000",position:"absolute",bottom:0},blank:{width:1,height:1},cardContainer:{hidden:!0,position:"absolute",left:8,flexDirection:"column",alignSelf:"stretch",overflow:"hidden"},card:{hidden:!0,backgroundColor:"rgba(247, 247, 247, 0.95)",borderColor:"rgba(0, 0, 0, 0.08)",flexDirection:"row",alignItems:"center",borderRadius:8,portrait:{height:90,padding:16},landscape:{width:348,height:72,padding:10}},appIcon:{borderRadius:8,opacity:.95,portrait:{width:48,height:48,marginRight:10},landscape:{width:45,height:45,marginRight:6}},appInformation:{flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},appName:{height:22.5,lineHeight:22.5,marginBottom:5,fontSize:17,lineBreak:"ellipsis",color:"#000000",portrait:{marginBottom:5},landscape:{marginBottom:2}},appWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#888888",fontSize:14},button:{width:84,height:36,lineHeight:36,textAlign:"center",fontSize:16,color:"#ffffff",borderWidth:1,borderColor:"#07C160",borderRadius:4,marginLeft:8,backgroundColor:"#07C160"},downloadButton:{width:62,height:32,hidden:!0,marginLeft:10},downloadButtonText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#ffffff"},downloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},downloadProgressText:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:13,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:3,backgroundColor:"#04be02"},dialogContainer:{zIndex:1000007,position:"absolute",overflow:"hidden",top:0,left:0,hidden:!0},dialogMask:{position:"absolute",overflow:"hidden",backgroundColor:"#000000",opacity:.7,top:0,left:0},dialog:{position:"absolute",width:300,height:168,borderRadius:10,backgroundColor:"rgba(255, 255, 255, 1)"},dialogTitle:{marginTop:28,marginBottom:27,width:300,height:48,lineHeight:24,textAlign:"center",color:"#000000",fontSize:17,fontWeight:"bold",lineBreak:"break-all"},dialogSplit:{width:300,height:1,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogButton:{width:300,justifyContent:"center",flexDirection:"row",alignItems:"center"},buttonSplit:{width:1,height:63.5,backgroundColor:"rgba(0, 0, 0, 0.1)"},dialogClose:{marginTop:19,marginBottom:19,width:149.5,height:25,lineHeight:25,textAlign:"center",color:"#000000",fontWeight:"bold",fontSize:18},dialogCancel:{marginTop:19,marginBottom:19,width:150,height:25,lineHeight:25,textAlign:"center",color:"#576A94",fontWeight:"bold",fontSize:18},pageCardBody:{position:"absolute",hidden:!0,flexDirection:"column",alignItems:"center",height:340},pageCardHotArea:{flexDiretion:"cloumn",alignItems:"center",height:70},pageCardTipIcon:{hidden:!0,marginTop:33,width:20,height:6.5},pageCardTip:{marginTop:2,hidden:!0,width:52,height:20,lineHeight:20,fontSize:13,color:"#ffffff"},pageCardContainer:{borderRadius:10,flexDirection:"column",height:270},pageCard:{paddingLeft:15,paddingRight:15,flexDirection:"row",alignItems:"center",borderRadius:5,height:80},pageCardAppIcon:{borderRadius:10,opacity:.95,width:48,height:48},pageCardAppInformation:{paddingLeft:5,marginTop:3,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},pageCardAppName:{height:22.5,fontSize:16,color:"#ffffff"},pageCardAppWording:{height:20,marginTop:1,color:"#888888",fontSize:14},pageCardButton:{width:60,height:30,lineHeight:30,textAlign:"center",fontSize:14,color:"#ffffff",borderWidth:1,backgroundColor:"#07C160",borderColor:"#07C160",borderRadius:4},pageCardSplitLine:{marginLeft:15,marginRight:15,height:1,backgroundColor:"rgba(255, 255, 255, 0.10)"},pageCardImgContainer:{marginTop:15,marginLeft:15,marginRight:15,marginBottom:25,height:150,overflow:"hidden"},pageCardImgBox:{height:150,left:0,flexDirection:"row",justifyContent:"center"},pageCardImg0:{order:0,borderRadius:3},pageCardImg1:{marginLeft:10,order:1,borderRadius:3},pageCardImg2:{marginLeft:10,order:2,borderRadius:3},pageCardImg3:{marginLeft:10,order:3,borderRadius:3},pageHandler:{top:0,position:"absolute",hidden:!0},pageMask:{top:0,position:"absolute",backgroundColor:"#000000",hidden:!0},dialogCloseTip:{hidden:!0,position:"absolute",overflow:"hidden",top:0,left:0},adCloseTipWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{playableTipsWrap:{left:0,hidden:!0,marginBottom:10,width:132,height:32,flexDirection:"row",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.6)",borderRadius:4},playableTipsContent:{width:100,height:16,lineHeight:16,fontSize:12,color:"#ffffff",textAlign:"center"},playableGiveUp:{hidden:!0,marginLeft:8,width:24,height:32,lineHeight:32,fontSize:12,color:"#07C160"},playableCancelBox:{hidden:!0,width:44,height:32,left:72,position:"absolute"}}),{pageContainer:{top:0,hidden:!0,position:"absolute",backgroundColor:"#ffffff"},pageImgContainer:{position:"absolute",overflow:"hidden",backgroundColor:"#000000"},pageImgBox:{flexDirection:"row",justifyContent:"center",position:"absolute",backgroundColor:"#000000"},pageImg0:{flex:1,order:0},pageImg1:{flex:1,order:1},pageImg2:{flex:1,order:2},pageImgTips:{flexDirection:"row",justifyContent:"center",height:10,width:35},pageImgIcon0:{height:7,width:7,borderRadius:16,backgroundColor:"#ffffff"},pageImgIcon1:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageImgIcon2:{height:7,width:7,marginLeft:7,borderRadius:16,backgroundColor:"rgba(255, 255, 255, 0.55)"},pageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},pageInfoWrapper:{flexDirection:"column",alignItems:"center",height:242},pageAppIcon:{borderRadius:8,width:64,height:64},pageAppName:{marginTop:20,width:180,textAlign:"center",height:28,lineHeight:28,fontSize:20,color:"#000000"},pageAppWording:{marginTop:4,marginBottom:20,width:220,height:28,textAlign:"center",lineHeight:28,color:"#888888",fontSize:17},pageAppConversion:{hidden:!0,width:220,height:24,textAlign:"center",lineHeight:24,color:"#000000",opacity:.3,fontSize:14},pageButton:{marginTop:14,width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4},pageDownloadButton:{marginTop:14,width:166,height:42,hidden:!0},pageDownloadButtonText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#04be02",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#ffffff"},pageDownloadProgress:{width:0,position:"absolute",top:0,left:0,overflow:"hidden"},pageDownloadProgressText:{width:164,height:40,lineHeight:40,textAlign:"center",fontSize:17,color:"#ffffff",borderWidth:1,borderColor:"#04be02",borderRadius:4,backgroundColor:"#04be02"}}),{defaultPageContainer:{hidden:!0,top:0,position:"absolute",backgroundColor:"#000000"},defaultPageBackgroundContainer:{position:"absolute"},defaultPageBackgroundMask:{position:"absolute",left:0,top:0,backgroundColor:"#000000",opacity:.6},defaultPageBackgroundImage:{position:"absolute",left:0,top:0},defaultPageInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},defaultPageWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},defaultPageAppIcon:{borderRadius:8,width:64,height:64,left:0},defaultPageAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},defaultPageAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},defaultPageAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},defaultPageButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{topBar:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:0,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10}},barLeft:{flexWrap:"nowrap"},count:{marginLeft:10,paddingLeft:12.5,paddingRight:12.5,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},barRight:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},close:{width:29,height:32,lineHeight:32,color:"#ffffff",fontSize:14},splitLine:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},sound:{width:20,height:20},topBarFix:{zIndex:1000003,position:"absolute",justifyContent:"space-between",flexDirection:"row",alignItems:"flex-start",left:10,top:16,"ios-portrait":{top:12},"ios-landscape":{top:10},"iphone x-portrait":{top:44},"iphone x-landscape":{top:10},hidden:!0},barLeftFix:{marginRight:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,flexDirection:"row",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"},soundFix:{width:20,height:20},splitLineFix:{width:1,height:18.5,marginLeft:8,marginRight:8,backgroundColor:"rgba(255, 255, 255, 0.25)"},countDownFix:{width:33.5,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppendFix:{height:32,lineHeight:32,color:"#ffffff",fontSize:14},closeFix:{width:56,height:32,lineHeight:32,color:"#ffffff",fontSize:14},adFeedback:{hidden:!0,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:4},splitLineLeft:{width:1,height:18.5,marginLeft:12,marginRight:12,backgroundColor:"rgba(255, 255, 255, 0.25)"},adFeedbackList:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:50,left:11,width:134,height:98,position:"absolute",zIndex:1000005,borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff","ios-portrait":{top:46},"ios-landscape":{top:44},"iphone x-portrait":{top:78},"iphone x-landscape":{top:44}},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}}),{expandCardContainer:{hidden:!0,top:0,position:"absolute",flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"rgba(0,0,0,0)"},expandCardInfoContainer:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardHeadline:{flexDirection:"column",alignItems:"center",justifyContent:"center"},expandCardWordingWrapper:{flexDirection:"column",alignItems:"center",justifyContent:"center",width:300,height:144,marginBottom:24},expandCardAppIcon:{borderRadius:8,width:64,height:64,left:0},expandCardAppName:{width:300,textAlign:"center",height:28,lineHeight:28,fontSize:20,marginTop:20,fontWeight:500,color:"#ffffff",opacity:1},expandCardAppWording:{marginTop:4,width:300,height:28,textAlign:"center",lineHeight:28,opacity:.8,color:"#ffffff",fontSize:17},expandCardAppConversion:{hidden:!0,width:300,height:24,textAlign:"center",lineHeight:24,color:"#ffffff",opacity:.5,fontSize:14},expandCardButton:{marginTop:16,width:184,height:40,lineHeight:40,textAlign:"center",fontSize:17,fontWeight:500,color:"#ffffff",backgroundColor:"#07C160",borderWidth:1,borderColor:"#07C160",borderRadius:4}}),{dynamicContainer:{hidden:!0,position:"absolute",top:0,left:0}}),{pendantContainer:{hidden:!0,position:"absolute"}}),It=n(52),St=n(91),Et=n(156),wt=n(7),Ct=n(155),kt=[{op:"insert",id:"innerPendant",parent:"pendantContainer",tpl:{type:"image",id:"innerPendantImage",style:{width:80,height:60},options:{baseType:1,data:{imgUrlExpr:"$scope.private.data.crtInfo.wxgame_video_card.pendant_img"},events:{rewardedVideoPlay:[{action:"rewardedVideoDynamic",expr:"$scope.private.pendantContainer.style.hidden == $const.true",value:{list:[{op:"setStyle",id:"pendantContainer",expr:"$const.systemInfo.screenWidth < $const.systemInfo.screenHeight",style:{hidden:!1,width:80,height:60,leftExpr:"#sub($const.systemInfo.screenWidth, 92)",bottomExpr:"#rewardedVideoIsExpandStyle() ? #add(12, #multi(1032, #division($const.systemInfo.screenWidth, 960))) : 150"}},{op:"setStyle",id:"pendantContainer",expr:"$const.systemInfo.screenWidth > $const.systemInfo.screenHeight",style:{hidden:!1,width:80,height:60,leftExpr:"#rewardedVideoIsExpandStyle() ? #sub(#sub(#division($const.systemInfo.screenWidth, 2), #division($const.systemInfo.screenHeight, 6)), 92)  : #sub($const.systemInfo.screenWidth, 92)",bottom:20}}]}}],tap:[{action:"landAd"},{action:"reportAdMonitorData",value:{id:924,key:172,extInfo:"pendant-click"}}]}}}}];function Tt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(W.default)(e);if(t){var r=Object(W.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(F.default)(this,n)}}function At(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Dt=w.POS_ID_MAP["incentive-video"],xt=function(e){return Object(X.getPrivateThis)(e)},Rt=function(){return K.logReport.apply(void 0,arguments)},jt=d()('\n  <view id="container">\n    <video id="video" controls="false" muted="true" autoplay="false" object-fit="contain" enable-progress-gesture="false" enable-play-gesture="false" show-center-play-btn="false" auto-insert="false" scene="ad">\n      <view id="blank"></view>\n      <view id="page-card-body">\n        <view id="page-card-hot-area">\n          <image id="page-card-tip-icon"></image>\n          <text id="page-card-tip" value="了解更多"></text>\n        </view>\n        <image id="page-card-container" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=a5af9b5364f6e959667331801f6558e8&filekey=3033020101041f301d02016d040253480410a5af9b5364f6e959667331801f6558e80202423f040d00000004627466730000000131&hy=SH&storeid=32303138313031363036343533343030306464383764313336666664393336663561333230613030303030303664&bizid=1023">\n          <view id="page-card" click-state="true">\n            <image id="page-card-app-icon" bubble-event="true"></image>\n            <view id="page-card-app-information" bubble-event="true">\n              <text id="page-card-app-name" bubble-event="true"></text>\n              <text id="page-card-app-wording" bubble-event="true"></text>\n            </view>\n            <text id="page-card-button" click-state="true"></text>\n          </view>\n          <view id="page-card-split-line"></view>\n          <view id="page-card-img-container">\n            <view id="page-card-img-box" click-state="true">\n              <image id="page-card-img0" bubble-event="true"></image>\n              <image id="page-card-img1" bubble-event="true"></image>\n              <image id="page-card-img2" bubble-event="true"></image>\n              <image id="page-card-img3" bubble-event="true"></image>\n            </view>\n          </view>\n        </image>\n      </view>\n    </video>\n    \n  <view id="dynamic-container"></view>\n\n    <view id="card-container">\n      \n  <view id="playable-tips-wrap">\n    <text id="playable-tips-content" value="视频结束后可试玩"></text>\n    <text id="playable-give-up" value="放弃"></text>\n    <view id="playable-cancel-box" click-state="true"></view>\n  </view>\n\n      <view id="card" click-state="true">\n        <image id="app-icon" bubble-event="true"></image>\n        <view id="app-information" bubble-event="true">\n          <text id="app-name" bubble-event="true"></text>\n          <text id="app-wording" bubble-event="true"></text>\n        </view>\n        <text id="button" click-state="true"></text>\n        <view id="download-button" click-state="true">\n          <text id="download-button-text" bubble-event="true"></text>\n          <text id="download-progress" bubble-event="true">\n            <text id="download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n    \n  <view id="expand-card-container">\n    <view id="expand-card-info-container">\n      <view id="expand-card-wording-wrapper">\n        <view id="expand-card-headline" bubble-event="true">\n          <image id="expand-card-app-icon" bubble-event="true"></image>\n          <text id="expand-card-app-name" bubble-event="true"></text>\n        </view>\n        <text id="expand-card-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="expand-card-app-conversion"></text>\n      <text id="expand-card-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="pendant-container"></view>\n\n    \n  <view id="default-page-container">\n    <view id="default-page-background-container">\n      <image id="default-page-background-image"></image>\n      <view id="default-page-background-mask"></view>\n    </view>\n    <view id="default-page-info-container">\n      <view id="default-page-wording-wrapper">\n        <view id="default-page-headline" bubble-event="true">\n          <image id="default-page-app-icon" bubble-event="true"></image>\n          <text id="default-page-app-name" bubble-event="true"></text>\n        </view>\n        <text id="default-page-app-wording" bubble-event="true"></text>\n      </view>\n      <text id="default-page-app-conversion"></text>\n      <text id="default-page-button" click-state="true"></text>\n    </view>\n  </view>\n\n    \n  <view id="page-container">\n    <view id="page-img-container">\n      <view id="page-img-box">\n        <image id="page-img0" bubble-event="true"></image>\n        <image id="page-img1" bubble-event="true"></image>\n        <image id="page-img2" bubble-event="true"></image>\n      </view>\n      <view id="page-img-tips">\n        <view id="page-img-icon0"></view>\n        <view id="page-img-icon1"></view>\n        <view id="page-img-icon2"></view>\n      </view>\n    </view>\n    <view id="page-info-container">\n      <view id="page-info-wrapper">\n        <image id="page-app-icon"></image>\n        <text id="page-app-name"></text>\n        <text id="page-app-wording"></text>\n        <text id="page-app-conversion"></text>\n        <text id="page-button" click-state="true"></text>\n        <view id="page-download-button" click-state="true">\n          <text id="page-download-button-text" bubble-event="true"></text>\n          <text id="page-download-progress" bubble-event="true">\n            <text id="page-download-progress-text" bubble-event="true"></text>\n          </text>\n        </view>\n      </view>\n    </view>\n  </view>\n\n    <view id="page-handler"></view>\n    <view id="page-mask"></view>\n    \n  <view id="top-bar">\n    <view id="bar-left">\n      <view id="count">\n        <view id="ad-feedback">\n          <text id="ad-text" value="广告" bubble-event="true"></text>\n          <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n          <view id="split-line-left" bubble-event="true"></view>\n        </view>\n        <text id="count-down"></text>\n        <text id="count-down-append"></text>\n      </view>\n    </view>\n    <view id="bar-right">\n      <image id="sound"></image>\n      <view id="split-line"></view>\n      <text id="close" value="关闭"></text>\n    </view>\n  </view>\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n  <view id="top-bar-fix">\n    <view id="bar-left-fix">\n      <image id="sound-fix"></image>\n      <view id="split-line-fix"></view>\n      <text id="count-down-fix"></text>\n      <text id="count-down-append-fix"></text>\n      <text id="close-fix" value="关闭广告"></text>\n    </view>\n  </view>\n\n    <view id="dialog-close-tip">\n      <view id="ad-close-tip-wrap">\n        <text id="ad-close-tip-content" bubble-event="true" value="感谢你的反馈"></text>\n      </view>\n    </view>\n    <view id="dialog-container">\n      <view id="dialog-mask"></view>\n      <view id="dialog">\n        <text id="dialog-title"></text>\n        <view id="dialog-split"></view>\n        <view id="dialog-button">\n          <text id="dialog-close" value="放弃"></text>\n          <view id="button-split"></view>\n          <text id="dialog-cancel" value="继续"></text>\n        </view>\n      </view>\n    </view>\n  </view>\n').root,Mt="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",Nt="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",Lt="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNTTiaKet81gQJAic1IGjzG9g458d7DpIe8URUq74t0dicbwKKc69rPBf8hiby1llOBTndbKUq2NTA9YaA/0?wx_fmt=png",Bt=1e3,Ft=2e3,Wt=500,Vt=!1,Ut="portrait",Gt=0,Ht=0,Yt=0,qt=0,zt=0,Kt=0,Xt={};f.default.onReady((function(){Xt=f.default.safeArea||{};try{f.default.global.window.pageOrientation&&(Ut=f.default.global.window.pageOrientation)}catch(e){}if(N.deviceInfo.isIOS?Vt=!0===f.default.showStatusBar:N.deviceInfo.isAndroid&&(Vt=!0===f.default.showStatusBar||"true"===f.default.showStatusBar),N.deviceInfo.isWaGame){var e=n(177).default;e.onTouchStart((function(e){(null==e?void 0:e.changedTouches)&&e.changedTouches.length>0&&(Gt=Math.round(e.changedTouches[0].clientX),Ht=Math.round(e.changedTouches[0].clientY),Yt=0,qt=0,Kt=0,zt=+new Date)})),e.onTouchEnd((function(e){(null==e?void 0:e.changedTouches)&&e.changedTouches.length>0&&(Yt=Math.round(e.changedTouches[0].clientX),qt=Math.round(e.changedTouches[0].clientY),Kt=+new Date-zt)}))}}));var Zt,Jt,Qt,$t,en,tn,nn,an,rn,on,sn,cn,un,ln,dn,fn,pn,hn,vn,gn=function(e,t){var n=e.touchendTimeStamp-e.touchstartTimeStamp;e.touchendTimeStamp>0&&e.touchstartTimeStamp>0&&n>=0&&Object(St.reportMMData)(17035,{aid:t.aid,traceid:t.traceid,touch_start_x:Math.round(e.touchstartPosX),touch_start_y:Math.round(e.touchstartPosY),touch_end_x:Math.round(e.touchendPosX),touch_end_y:Math.round(e.touchendPosY),touch_duration:n,screenwidth:N.deviceInfo.screenWidth,screenheight:N.deviceInfo.screenHeight,device_orientation:N.deviceInfo.deviceOrientation})},yn=function(){var e=xt(this);try{if(N.deviceInfo.isIOS&&N.deviceInfo.isApp&&e.adProxy.isValidCondition("widget_gray_measure_text")){var t;Object(J.invokeMethod)("measureText",{text:e.button.value,fontSize:16,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete:function(e){t={width:e.width||0}}}),!1===e.button.style.hidden&&(e.button.style.width=t.width+24),e.data.flooringPage&&2===e.pageType&&(Object(J.invokeMethod)("measureText",{text:e.button.value,fontSize:e.pageCardButton.style.fontSize||14,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",complete:function(e){t={width:e.width||0}}}),e.pageCardButton.style.width=t.width+24)}else{var n=gt.default.getTextWidthInAndroid(e.button.value,e.button.style.fontSize||16)+24;!1===e.button.style.hidden&&(e.button.style.width=n),!1===e.downloadButton.style.hidden&&(n=gt.default.getTextWidthInAndroid(e.downloadButtonText.value,e.downloadButtonText.style.fontSize||13)+24,e.downloadButton.style.width=n+2,e.downloadButtonText.style.width=n,e.downloadProgressText.style.width=n),e.data.flooringPage&&2===e.pageType&&(n=gt.default.getTextWidthInAndroid(e.button.value,e.pageCardButton.style.fontSize||14)+24,e.pageCardButton.style.width=n)}}catch(t){e.adProxy.reportAdMonitorData(Za.IDKEY.REWARDED_VIDEO_BUTTON_WIDTH_ERROR,t)}},mn="video-ad has been destroyed",bn=function(){var e=xt(this);return e.playableTipsWrap.animate({left:-144,duration:200}).then((function(){var t="即将跳转试玩",n={text:t=N.deviceInfo.isIOS?t+" ":t,fontSize:12},a=Object(S.measureText)(n)||72,r=Object(S.measureText)({text:"放弃",fontSize:12})||24;return e.playableTipsContent.style.width=a,e.playableGiveUp.style.width=r,e.playableTipsWrap.style.width=a+r+32,e.playableTipsContent.value=t,e.playableGiveUp.value="放弃",e.playableGiveUp.style.hidden=!1,e.playableCancelBox.style.left=a+12,e.playableCancelBox.style.hidden=!1,e.playableCancelBox.style.width=r+20,Object(K.timeout)(300).then((function(){return e.playableTipsWrap.animate({left:0,duration:200})}))}))},_n=function(e){if(!Ca.call(this)){var t=xt(this);if("object"===Object(s.default)(e)&&e.length>0){var n,a=At(e);try{for(a.s();!(n=a.n()).done;){var r=n.value;t[r]&&(t[r].style.width=N.deviceInfo.screenWidth,t[r].style.height=N.deviceInfo.screenHeight)}}catch(e){a.e(e)}finally{a.f()}}}},On=function(){var e=this;if(Ca.call(this))return Promise.reject({errMsg:mn});var t=xt(this);return Sn.call(this,"hide").then((function(){N.deviceInfo.isWaGame||(t.adProxy.setPageOrientation(N.deviceInfo.deviceOrientation),N.deviceInfo.isAndroid&&(t.updateScreenInfoTimer&&(clearTimeout(t.updateScreenInfoTimer),t.updateScreenInfoTimer=null),t.updateScreenInfoTimer=setTimeout((function(){var n=N.deviceInfo.screenWidth,a=N.deviceInfo.screenHeight;Object(N.getDeviceOrientation)();var r=!1,i=0;N.deviceInfo.screenHeight===a&&N.deviceInfo.screenWidth===n||(r=!0,i=N.deviceInfo.screenHeight-a),i&&(t.cardContainer.style.top+=i);var o=["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"];Aa.call(e)&&o.push("video"),_n.call(e,o),r&&Aa.call(e)&&(kn.call(e,!0),Na.call(e),Ga.call(e))}),1e3)))}))},In=function(){if(Ca.call(this))return Promise.reject({errMsg:mn});var e=xt(this);return Sn.call(this,"show").then((function(){N.deviceInfo.isWaGame||e.adProxy.setPageOrientation(Ut)})).catch((function(t){throw e.adProxy.reportAdMonitorData(Za.IDKEY.REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR,t),t}))},Sn=function(e){var t=xt(this);return Da.call(this)?Promise.resolve():t.adProxy.operateFullscreen(e)},En=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Ca.call(this))return!1;var n=xt(this),a=n.adProxy.isTriggerClick(e),r=a?0:1;return t&&oa.call(this,e,r),a},wn=function(){var e=this;if(!Ca.call(this)){var t=xt(this),n=t.data,a=n.product_type,r=n.button_action,i=n.card,o=i.icon,s=i.name,c=i.wording,u=i.showTime,l=i.headBgImg,d=i.mpTagType,f=n.app,p=n.flooringPage,h=xa.call(this);t.cardShowTime=u,t.appIcon.src=o,t.appName.value=Object(K.truncate)(s,20),t.appWording.value=c,t.appIcon.style.borderRadius=10,-1===[12,19].indexOf(a)&&("portrait"===N.deviceInfo.deviceOrientation?t.appIcon.style.borderRadius=27:"landscape"===N.deviceInfo.deviceOrientation&&(t.appIcon.style.borderRadius=22)),t.button.value=r.button_text,r.button_text||(12===a?t.button.value="下载":19===a&&(t.button.value="查看")),23===a&&t.adProxy.checkFollow(t.data.app.uin).then((function(n){var a=n?"查看公众号":r.button_text||"关注公众号";t.button.value=a,yn.call(e),t.data.flooringPage&&1===t.pageType&&0===t.buttonTextType?t.pageButton.value=a:t.data.flooringPage&&2===t.pageType&&0===t.buttonTextType?t.pageCardButton.value=a:t.pageType||(t.defaultPageButton.value=a),t.expandCardButton.value=a,na.call(e,wt.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:a})})).catch((function(){var n=f.isFollowed?"查看公众号":r.button_text||"关注公众号";t.button.value=n,yn.call(e),na.call(e,wt.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:n})})),1===t.buttonTextType&&(t.button.value=r.button_text,na.call(this,wt.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:r.button_text})),yn.call(this),t.pageType=(null==p?void 0:p.landpage_type)?p.landpage_type:0,Hn.call(this),h&&(t.expandCardAppIcon.bubbleEvent=!1),t.expandCardAppIcon.src=o,t.expandCardAppName.value=Object(K.truncate)(s,20),t.expandCardAppWording.value=c,t.expandCardButton.value=t.button.value;var v=N.deviceInfo.screenWidth,y=N.deviceInfo.screenHeight,m=t.expandCardInfoContainer.style;if("portrait"===N.deviceInfo.deviceOrientation?(m.width=v,m.justifyContent="flex-start",m.paddingLeft=0,m.paddingTop=48,m.height=400/375*v,m.bottom=0,m.position="absolute"):(m.justifyContent="center",m.paddingLeft=.672*y,m.width=m.paddingLeft+300,m.paddingTop=0,m.height=y,m.bottom=null,m.position=null),!h){var b=gt.default.getTextWidth(Object(K.truncate)(s,20),17);t.expandCardAppIcon.style.left=134-b/2;for(var _=0,O=Object.keys(_t);_<O.length;_++){var I=O[_],E=_t[I];t[I]&&Object.assign(t[I].style,E)}}if(t.expandCardAppIcon.style.borderRadius=h?8:3,-1===[w.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB,w.PRODUCT_TYPE.APPLE_APP_STORE].indexOf(a)&&(t.expandCardAppIcon.style.borderRadius=h?32:12),p&&1===t.pageType&&"portrait"===N.deviceInfo.deviceOrientation)t.pageAppIcon.src=o,t.pageAppIcon.style.borderRadius=t.appIcon.style.borderRadius,t.pageAppName.value=Object(K.truncate)(s,20),t.pageAppWording.value=c,t.pageButton.value=t.button.value,t.imgBaseName="pageImg",t.pageImgContainer.style.width=v,t.pageImgContainer.style.height=v,t.pageImgBox.style.width=3*v,t.pageImgBox.style.height=v,t.pageImgBox.style.left=0,t.pageInfoContainer.style.width=v,t.pageInfoContainer.style.height=y-v,t.pageInfoContainer.style.top=v,t.pageImgTips.style.top=v-20,t.pageImgTips.style.left=v/2-17.5,N.deviceInfo.isIOS&&(t.pageImgIcon0.style.borderRadius=4,t.pageImgIcon1.style.borderRadius=4,t.pageImgIcon2.style.borderRadius=4),t.pageImgIcon0.style.backgroundColor="#ffffff",t.pageImgIcon1.style.backgroundColor="rgba(255, 255, 255, 0.55)",t.pageImgIcon2.style.backgroundColor="rgba(255, 255, 255, 0.55)",Un.call(this),kn.call(this);else if(p&&2===t.pageType&&"portrait"===N.deviceInfo.deviceOrientation)t.pageCardContainer.style.width=v,t.pageCardAppIcon.src=o,t.pageCardAppIcon.style.borderRadius=t.appIcon.style.borderRadius,t.pageCardAppName.value=Object(K.truncate)(s,20),t.pageCardAppWording.value=c,t.pageCardButton.value=t.button.value,t.pageCard.style.width=v,t.pageCardSplitLine.style.width=v-20,t.pageCardHotArea.style.width=v,t.pageCardImgContainer.style.width=v-20,t.pageCardImgBox.style.width=Wn.call(this,{padding:10}),t.pageCardTipIcon.src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=f8ba19ac709edca00138c47585de39be&filekey=3033020101041f301d02016d040253480410f8ba19ac709edca00138c47585de39be020202d1040d00000004627466730000000131&hy=SH&storeid=32303138313031303133353430323030303461363337313336666664393336663561333230613030303030303664&bizid=1023",t.video.style.padding=0,t.video.style.paddingBottom=0,t.imgBaseName="pageCardImg",Un.call(this),kn.call(this),t.pageHandler.style.hidden=!1;else if(p&&[3,4].indexOf(t.pageType)>-1){var C="视频结束后可试玩",k={text:C=N.deviceInfo.isIOS?C+" ":C,fontSize:12},T=Object(S.measureText)(k)||100;t.playableTipsContent.style.width=T,t.playableTipsWrap.style.width=T+24,t.cardContainer.style.top-=32}else if(!t.pageType){if(h&&(t.defaultPageAppIcon.bubbleEvent=!1),t.defaultPageAppIcon.src=o,t.defaultPageAppName.value=Object(K.truncate)(s,20),t.defaultPageAppWording.value=c,t.defaultPageButton.value=t.button.value,!h){var A=gt.default.getTextWidth(Object(K.truncate)(s,20),17);t.defaultPageAppIcon.style.left=134-A/2;for(var P=0,D=Object.keys(bt);P<D.length;P++){var x=D[P],R=bt[x];t[x]&&Object.assign(t[x].style,R)}}t.defaultPageAppIcon.style.borderRadius=h?8:3,-1===[w.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB,w.PRODUCT_TYPE.APPLE_APP_STORE].indexOf(a)&&(t.defaultPageAppIcon.style.borderRadius=h?32:12),t.defaultPageBackgroundImage.src=l||"",Na.call(this)}if(8===d){var j=+new Date;Object(g.fetchRelationInfo)({buttonText:t.button.value,aid:t.adProxy.data.aid}).then((function(e){var n=+new Date;if(t.adProxy.reportRelationFetchDuration({startTime:j,endTime:n,showTime:t.showDetailTime||0}),e){var a="- 最近已有"+e.count+"人"+e.descText+" -";t.pageType?1===t.pageType&&(t.pageAppConversion.value=a,t.pageAppConversion.style.hidden=!1):(t.defaultPageAppConversion.value=a,t.defaultPageAppConversion.style.hidden=!1),t.expandCardAppConversion.value=a,t.expandCardAppConversion.style.hidden=!1}else t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0})).catch((function(e){t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0,t.adProxy.reportAdMonitorData(Za.IDKEY.REWARDED_VIDEO_RELATION_FETCH_ERROR,e)}))}else t.pageAppConversion.style.hidden=!0,t.defaultPageAppConversion.style.hidden=!0,t.expandCardAppConversion.style.hidden=!0;t.androidAppState=0,t.button.style.hidden=!1,t.pageButton.style.hidden=!1,t.defaultPageButton.style.hidden=!1,t.expandCardButton.style.hidden=!1,t.downloadButton.style.hidden=!0,t.pageDownloadButton.style.hidden=!0,12===a&&t.adProxy.isValidCondition("widget_gray_video_download_v2")&&(t.button.style.hidden=!0,t.downloadButton.style.hidden=!1,t.downloadButtonText.value=r.button_text,t.downloadProgressText.value=r.button_text,yn.call(this),1===t.pageType&&(t.pageButton.style.hidden=!0,t.pageDownloadButton.style.hidden=!1,t.pageDownloadButtonText.value=r.button_text,t.pageDownloadProgressText.value=r.button_text))}},Cn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ca.call(this))return!1;var t=xt(this);if(t.direction)return t.direction===e.direction;if(1===t.pageType||!t.pageType)return!!t.flooringPageIsShow;if(2===t.pageType){if("left"===e.direction){var n=e.y,a=t.flooringPageIsShow?t.video.style.height-180:0,r=t.flooringPageIsShow?t.video.style.height:0;return!!(n>a&&n<r)}if("top"===e.direction){var i=e.y,o=0,s=t.flooringPageIsShow?t.video.style.height-180:t.video.style.height;return!!(i>o&&i<s)}}return!1},kn=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Ca.call(this)){var t,n=N.deviceInfo.screenWidth,a=N.deviceInfo.screenHeight,r=xt(this),i="",o="",s=0,c=0,u=0,l=0,d=(a-r.video.style.height)/2;1===r.pageType?(r.pageHandler.style.width=n,r.pageHandler.style.height=n,i="pageImgBox",c=n/4,s=3*n/4-r.pageImgBox.style.width,t={xRevise:!0,decideByDirection:!0,setImgTips:!0,posQueue:[0,-n,-2*n]}):2===r.pageType&&(r.pageHandler.style.width=n,r.pageHandler.style.height=r.video.style.height,r.pageHandler.style.top=(a-r.video.style.height)/2,(a!==r.video.style.height||e)&&(r.pageMask.style.hidden=!1,r.pageMask.style.width=n,r.pageMask.style.height=(a-r.video.style.height)/2,r.pageMask.style.top=(a+r.video.style.height)/2),i="pageCardImgBox",o="pageCardBody",s=n-(c=60)-r.pageCardImgBox.style.width,u=r.video.style.height-r.pageCardBody.style.height+10,!N.deviceInfo.isWaGame&&N.deviceInfo.isAndroid&&(u=r.video.style.height-r.pageCardBody.style.height+d+10),l=u+180,r.pageCardBody.style.top=l,t={yRevise:!0,directionMap:{up:u,down:l},logPagePull:!0,showTips:!0,xInertia:!0,handleTail:!0,xHead:0,xTail:n-r.pageCardImgBox.style.width-20,touchClick:!0,imgBoxHeight:180,cardHeight:60,buttonWidth:60,buttonHeight:30}),r.flooringPageInfos={xMin:s,xMax:c,yMin:u,yMax:l,xContainer:i,yContainer:o,infos:t}}},Tn=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ca.call(this)){var n=xt(this),a=!0===n.flooringPageIsShow?t.max:t.min;return n.pageCardBody.animate({top:a,duration:50}).then((function(){return Kn.call(e,t)})).then((function(){return Dn.call(e)}))}},An=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ca.call(this)){var t=xt(this),n=e.event?e.event:{};if(xn.call(this,n))if(t.flooringPageIsShow){var a=t.pageCard.getAbsolutePosition(),r=a.top,i=a.top+e.cardHeight,o=t.pageCardImgContainer.getAbsolutePosition(),s=o.top;if(n.y>r&&n.y<i){var c=t.pageCardButton.getAbsolutePosition(),u=c.top,l=c.top+e.buttonHeight,d=c.left,f=c.left+e.buttonWidth;n.y>u&&n.y<l&&n.x>d&&n.x<f?Rn.call(this,n,"button",Qe.REWARD_PAGE_BUTTON):Rn.call(this,n,"card",Qe.REWARD_PAGE_CARD)}else n.y>=s&&n.y<=t.video.style.height?Rn.call(this,n,"img",Qe.REWARD_PAGE_IMAGE):Tn.call(this,e)}else{var p=t.pageCard.getAbsolutePosition(),h=p.top,v=p.top+e.cardHeight,g=t.pageCardButton.getAbsolutePosition(),y=g.top,m=g.top+e.buttonHeight,b=g.left,_=g.left+e.buttonWidth;n.y>h&&n.y<v?n.y>y&&n.y<m&&n.x>b&&n.x<_?Rn.call(this,n,"button",Qe.REWARD_PAGE_BUTTON):Rn.call(this,n,"card",Qe.REWARD_PAGE_CARD):Tn.call(this,e)}}},Pn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ca.call(this)){var t=xt(this),n=e.imgBox?e.imgBox:"",a=e.xMin?e.xMin:0,r=e.xMax?e.xMax:0,i=e.xHead?e.xHead:0,o=e.xTail?e.xTail:0;return t[n].nextLayout((function(){var e=t[n].style.left,s=e;if(e>i&&e<=r?s=i:e>=a&&e<o&&(s=o),s!==e)return t[n].animate({left:s,duration:50})}))}},Dn=function(){if(!Ca.call(this)){var e=xt(this);e.flooringPageIsShow?(e.pageCardTipIcon.style.hidden=!0,e.pageCardTip.style.hidden=!0):(e.showTipsTimer&&(clearTimeout(e.showTipsTimer),e.showTipsTimer=null),e.pageCardTipIcon.style.hidden=!1,e.pageCardTip.style.hidden=!1)}},xn=function(e){if(!Ca.call(this)){var t=xt(this);return!!(Math.abs(e.x-t.startPosX)<30&&Math.abs(e.y-t.startPosY)<30)}},Rn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;Ca.call(this)||xn.call(this,e)&&jn.call(this,e,t,n)},jn=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",a=arguments.length>2?arguments[2]:void 0;if(!Ca.call(this)){var r=xt(this);if([1,2].includes(r.pageType)&&qn.call(this,e,n),N.deviceInfo.isAndroid&&12===r.data.product_type&&1===r.pageType&&r.adProxy.isValidCondition("widget_gray_video_download_v2"))_a.call(this);else if(N.deviceInfo.isIOS&&46===r.data.product_type&&6===r.data.dest_type)Promise.race([sa.call(this,e,a),Object(K.timeout)(500)]).then((function(){ua.call(t,{button:5},e),ya.call(t)})).catch((function(){ua.call(t,{button:5},e),ya.call(t)}));else{sa.call(this,e,a),ua.call(this,{button:5},e);var i={};23===r.data.product_type&&(i["button"===n?"isButton":"toOfficalAccountDetail"]=!0),ya.call(this,i)}}},Mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ca.call(this)){var t=xt(this),n=e.container?e.container:"",a=e.event?e.event:{},r=t[n].getAbsolutePosition();return{x:r.left+a.x,y:r.top+a.y}}},Nn=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!Ca.call(this)){var n=xt(this);n.isPress=e,n.startPosX=(null==t?void 0:t.x)?t.x:0,n.startPosY=(null==t?void 0:t.y)?t.y:0,n.lastPosX=(null==t?void 0:t.x)?t.x:0,n.lastPosY=(null==t?void 0:t.y)?t.y:0,n.lastSecondPosX=(null==t?void 0:t.x)?t.x:0,n.lastSecondPosY=(null==t?void 0:t.y)?t.y:0,n.direction="",n.startTime=e?+new Date:0,e&&n.throttleTimer&&clearTimeout(n.throttleTimer),n.throttleTimer=null,n.timeStamp=0,n.callCount=0,n.distanceList=[]}},Ln=function(){if(!Ca.call(this))for(var e=xt(this),t=e.imgBaseName,n=0;n<3;n++){var a=e[t+n].getAbsolutePosition();e["pageImgIcon"+n].style.backgroundColor=0===a.left?"#ffffff":"rgba(255, 255, 255, 0.55)"}},Bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ca.call(this)){var t=xt(this),n=e.event?e.event:{},a=e.direction?e.direction:"left",r="top"===a?n.y-t.lastPosY:n.x-t.lastPosX;N.deviceInfo.isAndroid&&(r="top"===a?n.y-t.lastSecondPosY:n.x-t.lastSecondPosX);var i=e.critical?e.critical:0;return"top"===a?r<0&&Math.abs(r)>=i?"up":"down":r<0&&Math.abs(r)>=i?"right":"left"}},Fn=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Ca.call(this))return Promise.reject({errMsg:mn});var n=xt(this),a=t.direction?t.direction:"left",r=t.imgBox?t.imgBox:"",i="top"===a?t.event.y:t.event.x,o=Bn.call(this,t),s=t.directionMap?t.directionMap:{},c=t.posQueue?t.posQueue:[],u=null;if(Object.keys(s).length>0)u=s[o]?s[o]:0;else{i=n[r].style[a],c.sort((function(e,t){return e-t}));for(var l=0,d=c.length-1;l<d;){var f=Math.floor((l+d)/2),p=d-l,h=c[f];if(i===h){u=h;break}if(i>h?l=f:d=f,p<=1)break}if(!u)if(t.decideByDirection)u=c[o]||("right"===o?c[l]:c[d]);else{var v=c[d],g=c[l];u=Math.abs(i-v)>=Math.abs(i-g)?g:v}}return Promise.resolve().then((function(){n[r].style[a]=u})).then((function(){if(t.logPagePull)return Kn.call(e,t);Nn.call(e)})).then((function(){if(t.showTips)return Dn.call(e)})).then((function(){if(t.setImgTips)return n[r].nextLayout((function(){Ln.call(e)}))}))},Wn=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ca.call(this)&&t&&"object"===Object(s.default)(t)){var n=xt(this),a=t.padding?t.padding:0,r=n.pageType,i=n.data.flooringPage.img_list?n.data.flooringPage.img_list:[];i="string"==typeof i?JSON.parse(i):i;var o=0;return i.forEach((function(t,n){var i=Vn.call(e,{pageType:r,width:t.width,height:t.height}).width;o+=0===n?i:a+i})),o}},Vn=function(e){if(!Ca.call(this)){var t={},n=N.deviceInfo.screenWidth;if(!e||"object"!==Object(s.default)(e))return t;var a=e.pageType,r=e.width,i=e.height;return 1!==a&&a?2===a&&r===i?(t.scale=150/r,t.width=150,t.height=150):2===a&&r!==i&&(t.scale=150/i,t.width=150*r/i,t.height=150):(t.scale=n/r,t.width=n,t.height=n),t}},Un=function(){var e=this;if(!Ca.call(this)){var t=xt(this),n=t.pageType,a=t.data.flooringPage.img_list?t.data.flooringPage.img_list:[];a="string"==typeof a?JSON.parse(a):a;var r=t.imgBaseName?t.imgBaseName:"";a.forEach((function(a,i){var o=r+i,s=Vn.call(e,{pageType:n,width:a.width,height:a.height}),c=s.width,u=s.height,l=s.scale;t[o].scale=l,t[o].style.width=c,t[o].style.height=u,t[o].src=a.image_url}))}},Gn=function(){var e=this;if(Ca.call(this))return Promise.resolve();var t=xt(this);if(!t.data.flooringPage)return Promise.resolve();aa.call(this,wt.REWARDEDVIDEO_EVENT.REWARDEDVIDEOSHOWFLOORINGPAGE);var n=t.flooringPageInfos,a=n.yMin,r=n.yMax;return 2!==t.pageType||t.flooringPageIsShow?1===t.pageType?t.pageContainer.animate({left:0,duration:300}).then((function(){return Kn.call(e)})):t.pageType?Promise.resolve():(t.cardContainer.animate({opacity:0,duration:280}),t.defaultPageContainer.animate({opacity:1,duration:280}).then((function(){return Kn.call(e)}))):t.pageCardBody.animate({top:a,duration:50}).then((function(){return t.flooringPageAutoShow=!0,Kn.call(e,{min:a,max:r})})).then((function(){return Dn.call(e)}))},Hn=function(){if(!Ca.call(this)){var e=xt(this);if([1,2].includes(e.pageType)){e.flooringPageState.pageType=e.pageType,e.flooringPageState.card={click:0},e.flooringPageState.button={click:0};for(var t=0;t<=3&&(3!==t||2===e.pageType);t++)e.flooringPageState["img"+t]={exposure:0,click:0}}}},Yn=function(){if(!Ca.call(this)){var e=xt(this);if(N.deviceInfo.isIOS){for(var t=0;t<3;t++)e["pageImg"+t].src=Lt,e["pageCardImg"+t].src=Lt;e.pageCardImg3.src=Lt,e.pageAppIcon.src=Lt,e.pageCardAppIcon.src=Lt,e.pageCardTipIcon.src=Lt}}},qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(!Ca.call(this)){var n=xt(this);if("img"===t)for(var a=n.imgBaseName,r=0;r<=3&&(3!==r||2===n.pageType);r++){var i=n[a+r].getAbsolutePosition(),o=n[a+r].style.width,s=n[a+r].style.height,c=i.left,u=i.left+o,l=i.top,d=i.top+s;e.x>=c&&e.x<=u&&e.y>=l&&e.y<=d&&(n.flooringPageState["img"+r].click+=1)}else["card","button"].includes(t)&&(n.flooringPageState[t].click+=1)}},zn=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!Ca.call(this)){var a=xt(this);if(n){if(a.pageType)for(var r=a.imgBaseName,i=0;i<=3&&(3!==i||2===a.pageType);i++){var o=a[r+i].getAbsolutePosition(),s=a[r+i].style.width,c=-s/2,u=N.deviceInfo.screenWidth-s/2;o.left>c&&o.left<u&&(a.flooringPageState["img"+i].exposure+=1)}}else a.exposureTimer&&(clearTimeout(a.exposureTimer),a.exposureTimer=null),a.exposureTimer=setTimeout((function(){return e.call(t,!0)}),1e3)}},Kn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ca.call(this)){var t=xt(this);if(2===t.pageType){var n=e.min?e.min:0,a=e.max?e.max:0;t.pageCardBody.style.top!==n||t.flooringPageIsShow||t.flooringPageAutoShow?t.pageCardBody.style.top===a&&t.flooringPageIsShow?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Xn.call(this,{type:2,staytime:0,componentsstartstr:""}),Xn.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageShowTime=0,t.flooringPageCloseTime=0,Hn.call(this)):t.pageCardBody.style.top===n&&t.flooringPageAutoShow?(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Xn.call(this,{type:4,staytime:0,componentsstartstr:""}),zn.call(this)):e.isClose&&t.flooringPageIsShow&&(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Xn.call(this,{type:5,staytime:0,componentsstartstr:""}),Xn.call(this,{type:3,staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Hn.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Xn.call(this,{type:1,staytime:0,componentsstartstr:""}),zn.call(this))}else 1===t.pageType?e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Xn.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Hn.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Xn.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),zn.call(this)):t.pageType||(e.isClose?(t.flooringPageIsShow=!1,t.flooringPageCloseTime=+new Date,Xn.call(this,{staytime:t.flooringPageCloseTime-t.flooringPageShowTime,componentsstartstr:JSON.stringify(t.flooringPageState)}),t.flooringPageCloseTime=0,t.flooringPageShowTime=0,Hn.call(this)):(t.flooringPageIsShow=!0,t.flooringPageShowTime=+new Date,Xn.call(this,{staytime:0,componentsstartstr:JSON.stringify(t.flooringPageState)}),zn.call(this)))}},Xn=function(e){if(!Ca.call(this)){var t=xt(this);1===t.pageType&&delete e.type;var n=[];return n.push(e),t.adProxy.reportFlooringPage(t.pageType,n)}},Zn=function(){var e=this;if(Ca.call(this))return Promise.reject({errMsg:mn});var t=xt(this);return t.adProxy.fetch().then((function(n){try{t.adProxy.setTimePoint("p4");var a=Object.keys(t.emitter.emitter).includes("_events")?Object.keys(t.emitter.emitter._events):[];return"devtools"!==N.deviceInfo.platform||a.includes("_error")?(t.data=n,t.isData=!0,Jn.call(e),t.adProxy.preloadLanding(),t.emitter.emit("load"),void t.adProxy.setTimePoint("p5")):void console.error("您没有设置onError函数，该函数用于处理广告拉取的异常。请至少处理两种情况：1.调用正常，但没有合适的广告返回给用户。 2. 错误的调用导致的异常返回。 几种情况的详细描述，请查看《小游戏开发者文档》。（无广告返回时，建议不设置激励视频入口）")}catch(e){throw t.adProxy.reportAdMonitorData(Za.IDKEY.REWARDED_VIDEO_PARSE_ERROR,e),{}}}))},Jn=function(){var e,t;if(!Ca.call(this)){var n=xt(this),a=n.data,r=N.deviceInfo.deviceOrientation,i=N.deviceInfo.screenWidth,o=N.deviceInfo.screenHeight;if(n.container.style.left=0,N.deviceInfo.isIOS){var s="portrait"===r?Xt.top?44:12:10,c="portrait"===r?Xt.top?78:46:44;n.topBar.style.top=s,n.topBarFix.style.top=s,n.adFeedbackList.style.top=c,n.adFeedbackMenu.style.top=c}n.container.style.top=o,n.video.style.padding=8,n.video.style.paddingBottom=16;if(_n.call(this,["container","dialogContainer","dialogMask","expandCardContainer","defaultPageInfoContainer","defaultPageBackgroundContainer","defaultPageBackgroundMask"]),i<o)n.cardContainer.style.width=i-16,n.cardContainer.style.top=o-130,n.cardContainer.style.left=8,n.topBar.style.left=0,n.topBar.style.width=i,n.card.style.height=90;else if(i>=o){var u=Xt.top||0;n.cardContainer.style.width=348,n.cardContainer.style.top=o-104,n.cardContainer.style.left=u+18,n.topBar.style.width=i-2*u-16,n.topBar.style.left=u+8,n.card.style.height=72}if(Vt&&(n.topBar.style.top=n.topBar.style.top+30,n.topBarFix.style.top=n.topBarFix.style.top+30,n.adFeedbackList.style.top=n.adFeedbackList.style.top+30,n.adFeedbackMenu.style.top=n.adFeedbackMenu.style.top+30),N.deviceInfo.isWaGame?n.container.style.fixed&&delete n.container.style.fixed:n.container.style.fixed=!0,n.dialog.style.top=o>138?(o-138)/2:0,n.dialog.style.left=i>300?(i-300)/2:0,n.dialogCloseTip.style.top=(o-36)/2,n.dialogCloseTip.style.left=(i-124)/2,Pa.call(this))n.cardContainer.style.hidden=!0,n.container.style.backgroundColor="rgba(0, 0, 0, 0)",n.topBar.style.hidden=!0,n.topBarFix.style.hidden=!0,n.video.style.hidden=!0,n.video.src&&(n.video.src="https://wxa.wxs.qq.com/images/wxapp/empty.mp4");else{n.container.style.backgroundColor="#000000";var l=a.product_type,d=Va.call(this),f=d.src,p=d.poster,h=d.duration;n.cardContainer.style.hidden=Fa.call(this),n.expandCardContainer.style.hidden=!Fa.call(this),N.deviceInfo.isIOS&&n.video.src===f&&n.video.seek(0),N.deviceInfo.isIOS?(n.video.poster=p,Object(K.timeout)(500).then((function(){n.video.src=f}))):(n.video.src=f,n.video.poster=p),n.adProxy.setTimePoint("p8"),n.buttonTextType=n.data.button_action.text_type||0,Ga.call(this),N.deviceInfo.isAndroid&&(n.preloadVideo=!0,n.preloadVideoSuccess=!1,n.adProxy.preloadVideo([f]).catch((function(e){n.adProxy.reportAdMonitorData(Za.IDKEY.REWARDED_VIDEO_PRELOAD_ERROR,e)})));var v=n.data.rewardedTime,g=Math.ceil((h>v?v:h)/1e3).toString();n.countDown.value=g,n.countDownFix.value=g,n.countDownAppend.value="秒后可获得奖励",n.countDownAppendFix.value="秒后可获得奖励",n.countDown.style.width=2===g.length?19:12,n.countDownFix.style.width=2===g.length?19:12,n.countDownAppend.style.width=100,n.countDownAppendFix.style.width=100,wn.call(this),n.adProxy.isValidCondition("widget_gray_close_v2")&&(n.adFeedback.style.hidden=!1,n.close.value="关闭",n.close.style.width=29),12===l&&(n.adProxy.setAppInstallState(!1),ba.call(this));var y=[];(null===(t=null===(e=n.data.crtInfo)||void 0===e?void 0:e.wxgame_video_card)||void 0===t?void 0:t.pendant_img)&&(y=y.concat(kt));var m=n.adProxy.data.adDynamicList,b=(null==m?void 0:m.length)?y.concat(m):y;ea.call(this,b)}}},Qn=function(e){var t=this,n=xt(this),a=Object(j.pick)(N.deviceInfo,["screenWidth","screenHeight","deviceOrientation"]);return Object(Ct.run)(e,{$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:Object.assign({},a),time:Date.now()},$scope:{private:n,safeArea:Xt}},{"#rewardedVideoIsExpandStyle":function(){return Fa.call(t)}})},$n=null,ea=function(e){var t=this,n=xt(this),r=Object(j.pick)(N.deviceInfo,["screenWidth","screenHeight","deviceOrientation"]);(null==e?void 0:e.length)&&(n.dynamicElems||(n.dynamicElems={}),n.dynamicOldStyle||(n.dynamicOldStyle={}),n.dynamicEmitter||ta.call(this),e.forEach((function(e){var i,o,s,c,u=e.op,l=e.expr;if(!l||Qn.call(t,l))if("insert"===u){var d=e.id,f=e.parent,p=e.tpl,h=e.bubbleEvent;if(null===(i=n.dynamicElems)||void 0===i?void 0:i[d]){if(r.screenWidth===$n)return;null===(s=(o=n.dynamicElems[d]).remove)||void 0===s||s.call(o),Object(mt.unmount)(null===(c=n.dynamicElems[d])||void 0===c?void 0:c.referComponent)}var v=Object(mt.render)(Et.CustomItem,{manager:null,reporter:null,emitter:n.dynamicEmitter,adProxy:n.adProxy,template:p,systemInfo:Object.assign({},r),scope:{private:n,safeArea:Xt},adData:n.adProxy.data,adDatas:n.adProxy.datas,adCustomId:yt,isEmpty:!1},!1);!1!==h&&v.updateBubbleEvent(),n.dynamicElems[d]=v.getRootElement(),n[f]&&n[f].add(n.dynamicElems[d])}else if("setStyle"===u){var g=e.id,y=e.style,m=n[g]||n.dynamicElems[g]||null;if(m){var b=!1;n.dynamicOldStyle&&!n.dynamicOldStyle[g]&&(b=!0,n.dynamicOldStyle[g]={});for(var _=0,O=Object.keys(y);_<O.length;_++){var I=O[_],S=I,E=y[I];if(I.includes("Expr")){var w=I.split("Expr");if(2===w.length)S=Object(a.default)(w,1)[0],E=Qn.call(t,E)}b&&(n.dynamicOldStyle[g][S]=m.style[S]),m.style[S]=E}}}else if("setAttrs"===u){var C=e.id,k=e.attrs,T=n[C]||n.dynamicElems[C]||null;if(T)for(var A=0,P=Object.keys(k);A<P.length;A++){var D=P[A];T[D]=k[D]}}})),$n=r.screenWidth),aa.call(this,wt.REWARDEDVIDEO_EVENT.REWARDEDVIDEOHANDLEDYNAMICDONE)},ta=function(){var e=this,t=xt(this);t.dynamicEmitter=new z.EventEmitter,t.dynamicEmitter.on("adCustomEvent",(function(n){var a,r,i=n.action,o=n.adCustomId,s=n.value;if(o===yt)if(i===wt.CUSTOM_EVENT.LANDAD){var c=null===(a=n.value)||void 0===a?void 0:a.event;if(!En.call(e,c))return;jn.call(e,c,"",Qe.REWARD_DYNAMIC_CONTENT)}else if(i===wt.CUSTOM_EVENT.BTNTAP){var u=null===(r=n.value)||void 0===r?void 0:r.event;if(!En.call(e,u))return;jn.call(e,u,"button",Qe.REWARD_DYNAMIC_BUTTON)}else if(i===wt.CUSTOM_EVENT.REPORTADMONITORDATA){var l=s.id,d=s.key,f=s.extInfo,p=l?{idKeyGroup:l,idKey:d}:d;t.adProxy.reportAdMonitorData(p,f)}else if(i===wt.CUSTOM_EVENT.REWARDEDVIDEODYNAMIC){var h=s.list;Object(N.getDeviceOrientation)(),ea.call(e,h)}}))},na=function(e,t){var n=xt(this);if(n.dynamicElems){for(var a=[],r=0,i=Object.keys(n.dynamicElems);r<i.length;r++){var o=i[r];a.push(n.dynamicElems[o].ready())}Promise.all(a).then((function(){n.dynamicEmitter&&n.dynamicEmitter.emit("adCustomEvent",{adCustomId:yt,action:e,value:t})}))}},aa=function(e,t){var n,a=xt(this);if(a.dynamicElems)for(var r=0,i=Object.keys(a.dynamicElems);r<i.length;r++){var o=i[r],s=null===(n=a.dynamicElems[o])||void 0===n?void 0:n.referComponent;s&&s.emitComponentEvent(e,t)}},ra=function(){var e=xt(this);ia.call(this);var t=Va.call(this);e.keepAliveTimer=setTimeout((function(){e.adProxy.reportAdMonitorData(Za.IDKEY.REWARDED_VIDEO_KEEP_ALIVE,{currentTime:e.currentTime,duration:t.duration,src:e.video.src,preloadVideo:e.preloadVideo?1:0,preloadVideoSuccess:e.preloadVideoSuccess?1:0})}),3e3)},ia=function(){var e=xt(this);e.keepAliveTimer&&clearTimeout(e.keepAliveTimer)},oa=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(Ca.call(this))return Promise.reject({errMsg:mn});var a=xt(this),r=2===a.pageType?a.pageCard.layoutBox:a.card.layoutBox,i=r.width,o=r.height;[0,2,3].includes(n)&&(a.clickCount+=1);var s={slotid:Dt,costtype:(null===(t=a.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,click_time:+new Date,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:Number(i)||0,ad_height:Number(o)||0,press_interval:e.pressInterval,block_click:n};return a.adProxy.reportTouchClick(s)},sa=function(e,t){if(Ca.call(this))return Promise.reject({errMsg:mn});var n=xt(this),a=Va.call(this),r=Promise.resolve(),i={currentTime:n.currentTime,duration:a.duration},o=n.card,s=e.absoluteX,c=e.absoluteY;2===n.pageType?(o=n.pageCardContainer,s=Math.round(e.x),c=Math.round(e.y)):o=[Qe.REWARD_CARD_BUTTON,Qe.REWARD_CARD].indexOf(t)>-1?n.card:n.container;var u=o.getAbsolutePosition(),l=u.left,d=u.top,f=o.layoutBox,p=f.width,h=f.height;return r=n.adProxy.reportClick({clickAbsoluteLeft:s,clickAbsoluteTop:c,clickRelativeLeft:s-l,clickRelativeTop:c-d,pressInterval:e.pressInterval,left:l,top:d,width:p,height:h,videoData:i}),Ra.call(this,t),Rt(r,"激励视频","点击广告卡片"),la.call(this,{stage:1002}),r},ca=function(e){var t=e.playType,n=e.conditionType;if(Ca.call(this))return Promise.reject({errMsg:mn});var a=xt(this),r=Va.call(this);return a.adProxy.reportVideo({playType:t,conditionType:n,playDuration:a.currentTime,videoDuration:r.duration,muted:a.video.muted,rewardedTime:a.data.rewardedTime,isRewarded:a.isRewarded})},ua=function(e){var t,n=e.button,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Ca.call(this))return Promise.reject({errMsg:mn});var r=xt(this),i=Va.call(this),o=5===n?+new Date:0,s=a?a.pressInterval:0;return r.adProxy.reportBehaviorButton({button:n,isEnded:r.isEnded,playDuration:r.currentTime,videoDuration:null!==(t=null==i?void 0:i.duration)&&void 0!==t?t:0,preloadVideo:r.preloadVideo?1:0,preloadVideoSuccess:r.preloadVideoSuccess?1:0,videoFirstPlay:r.videoFirstPlayTime,cardFirstShow:r.cardFirstShowTime,clickCard:o,pressInterval:s,currentPlayUrl:r.video.src,lastFetchUrl:i?i.src:""})},la=function(e){var t=e.stage;if(Ca.call(this))return Promise.reject({errMsg:mn});var n={adtype:2,stage:t};return xt(this).adProxy.reportADFunnelModel(n)},da=function(e){e?Object(It.reportCanvasData)(It.ReportCanvasDataEventType.EVENT_CANVAS_ADS_FIN):Object(It.reportCanvasData)(It.ReportCanvasDataEventType.EVENT_CANVAS_ADS_CANCEL)},fa=function(){var e,t,n,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!Ca.call(this)){var r=xt(this);r.adProxy.reportTimePoints({slotid:Dt,costtype:(null===(e=r.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,extInfo:{preloadVideoSuccess:r.preloadVideoSuccess?1:0}});var i=r.isRewarded;r.sound.style.hidden=!1,r.soundFix.style.hidden=!1,r.splitLine.style.hidden=!1,r.splitLineFix.style.hidden=!1,r.landingCount=0,r.clickCount=0,r.isPlaying=!1,r.isVideoCalledPlay=!1,r.isFirstPlaySuccess=!1,r.isShowed=!1,r.isRewarded=!1,r.isEnded=!1,r.isData=!1,r.disableGaussBlur=!1;try{if(r.dynamicElems)for(var o=0,s=Object.keys(r.dynamicElems);o<s.length;o++){var c=s[o],u=r.dynamicElems[c];(null==u?void 0:u.remove)&&u.remove(),u.referComponent&&Object(mt.unmount)(u.referComponent)}if(r.dynamicOldStyle)for(var l=0,d=Object.keys(r.dynamicOldStyle);l<d.length;l++)for(var f=d[l],p=r[f]||(null===(t=r.dynamicElems)||void 0===t?void 0:t[f])||null,h=r.dynamicOldStyle[f],v=0,g=Object.keys(h);v<g.length;v++){var y=g[v];p.style[y]=h[y]}r.dynamicElems=null,r.dynamicOldStyle=null,(null===(n=r.dynamicEmitter)||void 0===n?void 0:n.off)&&r.dynamicEmitter.off("adCustomEvent"),r.dynamicEmitter=null}catch(e){}r.isCancelPlayablePage=!1,r.isLandingPlayblePage=!1,r.playableTipsContent.value="视频结束后可试玩",r.playableGiveUp.value="放弃",r.playableGiveUp.style.color="#07C160",r.playableGiveUp.style.opacity=1,r.playableTipsWrap.style.width=132,r.playableTipsWrap.style.left=0,r.playableTipsWrap.style.hidden=!0,r.cardContainer.style.hidden=!0,r.playableTipsContent.style.width=120,r.playableGiveUp.style.hidden=!0,r.playableCancelBox.style.hidden=!0,r.cardContainer.style.opacity=1,r.rewardPageCostTime=0,r.isShowedExposureReported=!1,r.isViewableExposureReported=!1,r.adProxy.isViewable=!0,N.deviceInfo.isWaGame||(r.isFullscreen=!1),r.downloadProgress.style.width=0,r.pageDownloadProgress.style.width=0,2!==a&&(!N.deviceInfo.isWaGame&&(N.deviceInfo.isIOS||r.data&&r.data.crt_size===w.CRT_SIZE.CRT_SIZE_REWARD_LANDINGPAGE)?Object(K.timeout)(100).then((function(){r.emitter.emit("close",{isEnded:i}),da(i)})):(r.emitter.emit("close",{isEnded:i}),da(i))),r.adProxy.reset();var m=Zn.call(this);m.catch((function(){})),r.adFetchResult=m,r.container.style.hidden=!0,r.adCover.hide(),i?la.call(this,{stage:1005}):la.call(this,{stage:1006}),1===r.pageType?r.pageContainer.style.hidden=!0:2===r.pageType?(r.pageHandler.style.hidden=!0,r.pageCardBody.style.hidden=!0,r.pageMask.style.hidden=!0,r.pageCardTip.style.hidden=!0,r.video.style.padding=8,r.video.style.paddingBottom=16):r.pageType||(r.defaultPageContainer.style.hidden=!0),r.pageHandler.style.hidden=!0,Kn.call(this,{isClose:!0}),N.deviceInfo.isAndroid&&r.adProxy.setInnerAudioOption(!0).catch((function(){})),r.showTipsTimer&&clearTimeout(r.showTipsTimer),r.exposureTimer&&clearTimeout(r.exposureTimer),r.updateScreenInfoTimer&&clearTimeout(r.updateScreenInfoTimer),r.layoutTimer&&clearTimeout(r.layoutTimer),r.rewardPageTimer&&clearTimeout(r.rewardPageTimer),r.reportDurationTimer&&clearTimeout(r.reportDurationTimer),r.pageType=0,r.imgBaseName="",ee("show",r.adType,0),ee("close",r.adType,+new Date)}},pa=function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(Ca.call(this))return Promise.reject({errMsg:mn});var n=xt(this);return Pa.call(this)||Da.call(this)?ha.call(this,t):(ca.call(this,{playType:n.isEnded?"complete":"partial",conditionType:"close"}),1===t?(fa.call(this),Promise.resolve()):[2,3].includes(t)?Promise.all([In.call(this),fa.call(this,t)]):n.container.animate({top:N.deviceInfo.screenHeight,duration:Wt}).then((function(){return In.call(e)})).then((function(){return fa.call(e)})))},ha=function(e){if(Ca.call(this))return Promise.reject({errMsg:mn});var t=xt(this);return Da.call(this)||(t.container.style.top=N.deviceInfo.screenHeight,t.topBar.style.hidden=!0,t.topBarFix.style.hidden=!1,t.dialogClose.value="放弃",t.dialogCancel.value="继续",t.video.style.hidden=!1,t.showDialogContainer=!1),1===e?(fa.call(this),Promise.resolve()):Promise.all([In.call(this),fa.call(this,e)])},va=function(){if(!Ca.call(this)){var e=xt(this);if(e.rewardPageCostTime>=15e3)e.isEnded=!0,e.isRewarded=!0,pa.call(this),ua.call(this,{button:4});else{e.showDialogContainer=!0,e.dialogContainer.style.hidden=!1,e.dialogTitle.value="暂未获得奖励\n是否继续浏览页面",e.adProxy.setRightButtonHide(!0).catch((function(){}))}}},ga=function(){if(!Ca.call(this)){var e=xt(this);if(ia.call(this),e.isRewarded)pa.call(this),ua.call(this,{button:4});else{e.dialogContainer.style.hidden=!1,e.dialogTitle.value="暂未获得奖励\n是否继续观看视频",Ua.call(this,"pause"),e.isPause=!0}}},ya=function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ca.call(this)){var a=xt(this),r=Va.call(this);a.notReportExit=!0,a.landingCount+=1,a.landingCount>1&&a.adProxy.reportRepeatClick({slotId:Dt,costType:(null===(e=a.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,clkCnt:a.landingCount,lastClkPeriod:+new Date-a.lastLandingTime,retCode:a.lastJsapiStatus,costTime:a.lastJsapiCostTime,pageStayTime:a.landingPageCostTime,jsapiName:a.lastJsapiName}),a.lastLandingTime=+new Date,a.lastJsapiStatus=2,a.lastJsapiCostTime=0,a.isLandingPage=!1,a.landingPageCostTime=0;var i=a.adProxy.land(n);if(23===a.data.product_type&&n&&n.isButton&&!a.adProxy.data.biz_info.is_subscribed?(i.then((function(e){var n,r=/ok/.test(e.errMsg);r&&(0===a.buttonTextType&&(a.button.value="查看公众号",yn.call(t),na.call(t,wt.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:"查看公众号"})),a.data.flooringPage&&1===a.pageType&&0===a.buttonTextType?a.pageButton.value="查看公众号":a.data.flooringPage&&2===a.pageType&&0===a.buttonTextType?a.pageCardButton.value="查看公众号":a.pageType||(a.defaultPageButton.value="查看公众号"),a.expandCardButton.value="查看公众号",a.adProxy.data.biz_info&&(a.adProxy.data.biz_info.is_subscribed=1),a.adProxy.reportAdIDKey({key:Za.IDKEY.REWARDED_VIDEO_FOLLOW_SUCCESS})),e.errMsg&&(a.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var i=+new Date;a.lastJsapiStatus=0,a.lastJsapiCostTime=i-a.lastLandingTime,"private_addContact"===a.lastJsapiName&&a.adProxy.reportLandingTime({slotId:Dt,costType:(null===(n=a.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,openTime:a.lastLandingTime,closeTime:i,stayTime:a.lastJsapiCostTime,jsapiName:a.lastJsapiName,clickTime:a.lastLandingTime,clkCnt:a.landingCount,retCode:a.lastJsapiStatus,costTime:a.lastJsapiCostTime,actTypeInt:r?2:3,actTypeStr:r?"关注":"取消"}),N.deviceInfo.isWaGame||!N.deviceInfo.isAndroid||Da.call(t)||setTimeout((function(){a.adProxy.hideVirtualBottomNavigationBar().catch((function(){})),a.container.forceUpdate()}),250)})).catch((function(){a.lastJsapiStatus=1})),ma.call(this,i)):(a.flooringPageCloseTime=(new Date).getTime(),i.then((function(e){e.errMsg&&(a.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===a.lastJsapiName||"navigateToMiniProgram"===a.lastJsapiName||"openADCanvas"===a.lastJsapiName||"launchApplication"===a.lastJsapiName?(a.isLandingPage=!0,ia.call(t),a.flooringPageIsShow&&(Xn.call(t,{type:3,staytime:a.flooringPageCloseTime-a.flooringPageShowTime,componentsstartstr:JSON.stringify(a.flooringPageState)}),a.flooringPageShowTime=0,a.flooringPageCloseTime=0,Hn.call(t))):a.lastJsapiStatus=0,a.lastJsapiCostTime=+new Date-a.lastLandingTime})).catch((function(){a.lastJsapiStatus=1}))),Pa.call(this)||Da.call(this)){setTimeout((function(){a.notReportExit=!1}),1e3);var o=a.adProxy.reportVideo({playType:a.isPlaying?"partial":"complete",conditionType:"land",playDuration:a.currentTime,videoDuration:r.duration,muted:a.video.muted});Rt(o,"激励视频","跳转落地页")}return i}},ma=function(e){if(!Ca.call(this)){var t=xt(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):Promise.resolve()})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}));return Rt(n,"激励视频","关注"),n}},ba=function(){var e=this;if(!Ca.call(this)){var t=xt(this),n=t.data.appInfo,a=n.apkName,r=n.versionCode,i=n.urlScheme;t.adProxy.getInstallState(a).then((function(n){if(n.isInstalled&&(void 0===n.versionCode||n.versionCode>=r)){if(t.adProxy.setAppInstallState(!0),t.androidAppState=4,t.button&&i&&i.trim().length>0){if(t.button.value="进入应用",t.pageCardButton.value="进入应用",t.pageButton.value="进入应用",t.defaultPageButton.value="进入应用",t.expandCardButton.value="进入应用",na.call(e,wt.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:"进入应用"}),1===t.buttonTextType){var a=t.data.button_action.button_text;t.button.value=a,t.pageCardButton.value=a,t.pageButton.value=a,t.defaultPageButton.value=a,t.expandCardButton.value=a,na.call(e,wt.CUSTOM_EVENT.CHANGEADBTNTEXT,{text:a})}yn.call(e)}if(t.adProxy.isValidCondition("widget_gray_video_download_v2")&&t.downloadButtonText&&i&&i.trim().length>0){if(t.downloadButtonText.value="进入应用",t.downloadProgressText.value="进入应用",1===t.buttonTextType){var o=t.data.button_action.button_text;t.downloadButtonText.value=o,t.downloadProgressText.value=o}if(1===t.pageType&&(t.pageDownloadButtonText.value="进入应用",t.pageDownloadProgressText.value="进入应用",1===t.buttonTextType)){var s=t.data.button_action.button_text;t.pageDownloadButtonText.value=s,t.pageDownloadProgressText.value=s}yn.call(e)}}else t.adProxy.isValidCondition("widget_gray_video_download_v2")&&4===t.androidAppState&&(t.downloadButtonText.value=t.data.button_action.button_text,t.downloadProgressText.value=t.data.button_action.button_text,yn.call(e),1===t.pageType&&(t.pageDownloadButtonText.value=t.data.button_action.button_text,t.pageDownloadProgressText.value=t.data.button_action.button_text),t.androidAppState=0)})).catch((function(){}))}},_a=function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Ca.call(this)){var a=xt(this);sa.call(this,n,Qe.REWARD_DOWNLOAD);var r=a.data.appInfo,i=r.appName,o=r.apkName,s=r.apkUrl,c=r.appMd5,u=r.urlScheme,l=a.adProxy.data,d=l.aid,f=l.traceid,p=l.apurl,h=0,v="";if(a.landingCount+=1,a.lastLandingTime=+new Date,a.lastJsapiStatus=0,a.lastJsapiCostTime=0,4===a.androidAppState)a.adProxy.launchApplication(u).catch((function(){ya.call(t,{isButton:!0})})),a.lastJsapiName="launchApplication",a.isLandingPage=!0;else if(0===a.androidAppState){var g=[d,f,o.replace(/./g,"_"),0,20,p.indexOf("ad.wx.com")>-1?1:0].join(".");a.adProxy.addDownloadTaskStraight(i,s,c,g).then((function(e){a.androidDownloadId=e.downloadId,setTimeout(Oa.bind(t),Bt)})).catch((function(){ya.call(t,{isButton:!0})})),a.lastJsapiName="addDownloadTaskStraight",h=4,v="下载"}else 1===a.androidAppState?(a.adProxy.pauseDownloadTask(a.androidDownloadId).catch((function(){})),a.downloadButtonText.value="继续下载",a.downloadProgressText.value="继续下载",1===a.pageType&&(a.pageDownloadButtonText.value="继续下载",a.pageDownloadProgressText.value="继续下载"),yn.call(this),a.androidAppState=2,a.lastJsapiName="pauseDownloadTask",h=5,v="暂停"):2===a.androidAppState?(a.adProxy.resumeDownloadTask(a.androidDownloadId).then((function(){setTimeout(Oa.bind(t),Bt)})).catch((function(){})),a.downloadButtonText.value="暂停下载",a.downloadProgressText.value="暂停下载",1===a.pageType&&(a.pageDownloadButtonText.value="暂停下载",a.pageDownloadProgressText.value="暂停下载"),yn.call(this),a.androidAppState=1,a.lastJsapiName="resumeDownloadTask",h=6,v="继续"):3===a.androidAppState&&(a.adProxy.installDownloadTask(a.androidDownloadId).catch((function(){})),a.lastJsapiName="installDownloadTask",h=7,v="安装");h>0&&a.adProxy.reportLandingTime({slotId:Dt,costType:(null===(e=a.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,openTime:a.lastLandingTime,clickTime:a.lastLandingTime,clkCnt:a.landingCount,jsapiName:a.lastJsapiName,actTypeInt:h,actTypeStr:v})}},Oa=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;if(!Ca.call(this)){var a=xt(this);a.adProxy.queryDownloadTask(a.androidDownloadId).then((function(n){if("download_succ"===n.state)a.downloadButtonText.value="安装应用",a.downloadProgressText.value="安装应用",a.downloadProgress.style.width=a.downloadButton.style.width,1===a.pageType&&(a.pageDownloadButtonText.value="安装应用",a.pageDownloadProgressText.value="安装应用",a.pageDownloadProgress.style.width=a.pageDownloadButton.style.width),a.androidAppState=3,yn.call(t);else if("downloading"===n.state)a.downloadButtonText.value="暂停下载",a.downloadProgressText.value="暂停下载",a.downloadProgress.style.width=a.downloadButton.style.width*parseInt(n.progress,10)/100,1===a.pageType&&(a.pageDownloadButtonText.value="暂停下载",a.pageDownloadProgressText.value="暂停下载",a.pageDownloadProgress.style.width=a.pageDownloadButton.style.width*parseInt(n.progress,10)/100),a.androidAppState=1,yn.call(t);else if("download_fail"===n.state){if(a.downloadButtonText.value=a.data.button_action.button_text,a.downloadProgressText.value=a.data.button_action.button_text,a.downloadProgress.style.width=0,1===a.pageType&&(a.pageDownloadButtonText.value=a.data.button_action.button_text,a.pageDownloadProgressText.value=a.data.button_action.button_text,a.pageDownloadProgress.style.width=0,1===a.buttonTextType)){var r=a.data.button_action.button_text;a.pageDownloadButtonText.value=r}a.androidAppState=0,yn.call(t)}"downloading"!==n.state&&"default"!==n.state||setTimeout(e.bind(t),Bt)})).catch((function(){n>0&&e.call(t,n-1)}))}},Ia=function(e){var t=e.firstGradeId,n=void 0===t?1:t,a=e.firstGradeDesc,r=void 0===a?"广告角标":a,i=e.secondGradeId,o=void 0===i?0:i,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u;if(!Ca.call(this)){var d=xt(this);n&&!o&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:N.deviceInfo.screenWidth,adHeight:N.deviceInfo.screenHeight,adPosX:0,adPosY:0,expTime:d.startExposureTime,firstGradeId:n,firstGradeDesc:r,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:o,secondGradeDesc:c,secondGradeTime:o?+new Date:0,feedbackReason:l})}},Sa=function(e){var t=xt(this),n={adWidth:N.deviceInfo.screenWidth,adHeight:N.deviceInfo.screenHeight,adPosX:0,adPosY:0},a={dismatch:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1},quality:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4},duplicate:{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}};if(Array.isArray(e)){var r,i=At(e);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=o.type,c=o.expTime,u=o.isClickAd,l=o.clickAdTimeMs,d=o.feedbackTimeMs;if("good"!==s){var f=a[s]||{};t.adProxy.reportAdFeedbackData(Object.assign(Object.assign(Object.assign({},n),f),{expTime:c||0,isClickAd:u,clickAdTimeMs:l||0,secondGradeTime:d||0}))}}}catch(e){i.e(e)}finally{i.f()}}},Ea=function(){var e=xt(this),t=N.deviceInfo.isWaGame?"count":"count_"+e.adProxy.getWebviewInfo().currentWebviewId,n=te(t,e.adType)||0;ee(t,e.adType,n>0?n-1:0),Object(q._offShow)(e.onShow),Object(q._offHide)(e.onHide),e.emitter.off("_error"),e.emitter.off("load"),e.emitter.off("close"),V.webviewLayout.remove(e.container),Object(X.removePrivateThis)(this)},wa=function(){var e=this;if(!Ca.call(this)){var t=xt(this),n=Promise.resolve();t.isShowed&&(n=In.call(this).then((function(){t.adCover.hide(),N.deviceInfo.isAndroid&&t.adProxy.setInnerAudioOption(!0).catch((function(){})),ee("show",t.adType,0),ee("close",t.adType,+new Date)}))),n.then((function(){Ea.call(e)})).catch((function(){Ea.call(e)})),this._destroyed=!0}},Ca=function(){return this._destroyed},ka=function(e){var t=xt(this),n=t.adProxy.reportExposure({exposureType:e,left:0,top:0,width:N.deviceInfo.screenWidth,height:N.deviceInfo.screenHeight});"showed"===e?t.isShowedExposureReported=!0:"viewable"===e&&(t.isViewableExposureReported=!0),Rt(n,"激励浏览","原始曝光")},Ta=function(){var e=this,t=xt(this);return Da.call(this)||(t.container.style.hidden=!1,t.container.style.top=0,t.adCover.show()),t.container.nextLayout().then((function(){return Ca.call(e)?Promise.reject({errMsg:mn}):(On.call(e).then((function(){N.deviceInfo.isWaGame||(t.isFullscreen=!0)})).catch((function(e){t.adProxy.reportAdMonitorData(Za.IDKEY.REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR,e)})),ya.call(e))})).then((function(n){if(Da.call(e)){n?t.adProxy.reportAdMonitorData(Za.IDKEY.REWARD_CHANNELS_CALLBACK_SUCCESS,n):t.adProxy.reportAdMonitorData(Za.IDKEY.REWARD_CHANNELS_CALLBACK_FAILED);var a=n||{},r=a.rewardedDuration,i=a.feedbackInfo,o=null!=r&&r>=15;t.isEnded=o,t.isRewarded=o,pa.call(e),ua.call(e,{button:o?4:1}),Sa.call(e,i)}})).catch((function(e){throw ee("show",t.adType,0),e}))},Aa=function(){var e;return(null===(e=xt(this).data)||void 0===e?void 0:e.crt_size)!==za.CRT_SIZE_REWARD_LANDINGPAGE},Pa=function(){var e,t,n=xt(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===za.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)!==fn.DEST_TYPE_CHANNELS},Da=function(){var e,t,n=xt(this);return(null===(e=n.data)||void 0===e?void 0:e.crt_size)===za.CRT_SIZE_REWARD_LANDINGPAGE&&(null===(t=n.data)||void 0===t?void 0:t.dest_type)===fn.DEST_TYPE_CHANNELS},xa=function(){var e=xt(this),t=e.data.product_type;return[w.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB,w.PRODUCT_TYPE.APPLE_APP_STORE,w.PRODUCT_TYPE.WECHAT,w.PRODUCT_TYPE.MINI_GAME].includes(t)||!e.expandCardUseLogoStrategy},Ra=function(e){xt(this).adProxy.reportMMClickPos({clickPos:e})},ja=function(){var e=this,t=xt(this);if(La.call(this)){t.disableGaussBlur=!0;var n=Va.call(this),a=n.poster,r=n.src;t.video.poster!==a&&(t.video.poster=a),t.video.src!==r&&(t.video.src=r,setTimeout((function(){t.isVideoCalledPlay&&Ua.call(e,"play")}),0)),t.video.style.width=N.deviceInfo.screenWidth,t.video.style.height=N.deviceInfo.screenHeight,Ma.call(this)}},Ma=function(){var e=xt(this);"portrait"===N.deviceInfo.deviceOrientation?e.video.style.bottom=217*N.deviceInfo.screenWidth/160-N.deviceInfo.screenHeight/2:e.video.style.left=43*-N.deviceInfo.screenHeight/96},Na=function(){var e=xt(this),t=N.deviceInfo.deviceOrientation,n=N.deviceInfo.screenWidth,a=N.deviceInfo.screenHeight,r="portrait"===t,i=r?a:n,o=r?n:a;e.defaultPageBackgroundImage.style.width=i,e.defaultPageBackgroundImage.style.height=i;var s=(i-o)/-2;r?(e.defaultPageBackgroundImage.style.left=s,e.defaultPageBackgroundImage.style.top=0):(e.defaultPageBackgroundImage.style.left=0,e.defaultPageBackgroundImage.style.top=s)},La=function(){var e=xt(this);return!(!e.data||e.disableGaussBlur)&&Ba(e.data)},Ba=function(e){var t,n,a=Wa(e),r="portrait"===N.deviceInfo.deviceOrientation,i=e.crt_size===za.CRT_SIZE_REWARD_VEDIO916;return Boolean((null===(t=null==e?void 0:e.condition)||void 0===t?void 0:t.widget_gray_reward_use_gauss_blur)&&(null===(n=null==e?void 0:e.gaussVideo)||void 0===n?void 0:n.src)&&r!==i&&[za.CRT_SIZE_REWARD_VEDIO169,za.CRT_SIZE_REWARD_VEDIO916].includes(e.crt_size)&&(a||r))},Fa=function(){var e=xt(this);return!!e.data&&Wa(e.data)},Wa=function(e){var t=e.flooringPage,n="portrait"===N.deviceInfo.deviceOrientation,a=e.crt_size===za.CRT_SIZE_REWARD_VEDIO916;return Boolean(n!==a&&!N.deviceInfo.isIPad&&[za.CRT_SIZE_REWARD_VEDIO169,za.CRT_SIZE_REWARD_VEDIO916,za.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size)&&![2,3,4].includes(null==t?void 0:t.landpage_type))},Va=function(){var e,t,n=xt(this);return La.call(this)&&(null===(e=n.data)||void 0===e?void 0:e.gaussVideo)?n.data.gaussVideo:(null===(t=null==n?void 0:n.data)||void 0===t?void 0:t.shortVideo)||null},Ua=function(e){var t=xt(this),n=t.video;n&&("play"===e?(t.isVideoCalledPlay=!0,n.play()):"pause"===e?(t.isVideoCalledPlay=!1,n.pause()):"stop"===e&&(t.isVideoCalledPlay=!1,n.stop()))},Ga=function(){var e=xt(this),t=N.deviceInfo.deviceOrientation,n=N.deviceInfo.screenWidth,a=N.deviceInfo.screenHeight,r=Va.call(this),i=r.width,o=r.height;if(e.video.style.width=n,e.video.style.height=a,e.video.style.left=0,e.video.style.bottom=0,La.call(this)){if("portrait"===t&&i<o)e.video.style.height=Math.floor(n/i*o),e.video.style.width=n;else if("landscape"===t&&i>o){var s=Math.floor(a*i/o);e.video.style.width=s,e.video.style.height=a,e.video.style.left=(n-s)/2}}else Fa.call(this)&&Ma.call(this)},Ha=(X.Component,function(e,t,n,a){var r,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":Object(s.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(i<3?r(o):i>3?r(t,n,o):r(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o}),Ya=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(s.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},qa=function(){function e(t){Object(i.default)(this,e),this.adProxy=t,this.timePoints={},this.analyseBranchInfo=null}return Object(o.default)(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"data",get:function(){return this.adProxy.data}},{key:"convertedAdData",get:function(){return this.adProxy.convertedAdData}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"adUnitId",get:function(){return this.adProxy.getAdUnitId()}},{key:"pluginAppid",get:function(){return this.adProxy.getPluginAppid()}},{key:"lastClickTime",get:function(){return this.adProxy.getLastClickTime()}},{key:"getTimePoint",value:function(e){return this.timePoints[e]?this.timePoints[e]:0}},{key:"setTimePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if("splashAd"!==this.adType){["p2","p12"].includes(e)&&(this.timePoints={p1:this.timePoints.p1||0});var n=t.time;this.timePoints[e]=n||Date.now()}else this.timePoints[e]=Date.now()}},{key:"reportTimePoints",value:function(e){var t=e.slotid,n=e.costtype,a=e.splash_instance_id,r=void 0===a?"":a,i=e.scene,o=void 0===i?0:i,s=e.errCode,c=void 0===s?0:s,u=e.extInfo,l=void 0===u?{}:u;if(["customAd","incentive-video","splashAd","interstitialAd"].includes(this.adType)){this.reportMMData(19837,Object.assign({slotid:t,costtype:n,ext_info:JSON.stringify(Object.assign({},l,{adUnitId:this.adUnitId,is_game:!0})),instance_id:r,scene:o,crt_size:this.data.crt_size,error_code:c},this.timePoints))}}},{key:"reportCloseAction",value:function(e){return this.reportMMData(16743,e)}},{key:"reportAdEntranceExposure",value:function(e){return this.reportMMData(18988,e)}},{key:"reportTouchClick",value:function(e){return this.reportMMData(16487,e)}},{key:"reportCancelRewardPlayablePage",value:function(e){return this.reportMMData(20299,e)}},{key:"formatMMData",value:function(e,t){var n,a=Object(M.getMMDataProto)(e);if(!a||0===a.length)return null;var r=this.data;if("grid"===this.adType&&-1!==[16139].indexOf(e))try{r=this.datas[this.datas.length-1]}catch(e){}return Object.assign(t,{aid:r.aid,traceid:r.traceid,crt_size:r.crt_size,slotid:w.POS_ID_MAP[this.adType],report_time:Date.now(),ad_pos_type:null!==(n=w.POS_TYPE_MAP[this.adType])&&void 0!==n?n:0,publisher_appid:this.pluginAppid?this.pluginAppid:N.deviceInfo.gameAppId,appid:this.pluginAppid?this.pluginAppid:N.deviceInfo.gameAppId,orig_weapp_id:this.pluginAppid?N.deviceInfo.gameAppId:"",network_type:N.deviceInfo.adNetworkType,wechat_version:N.deviceInfo.wechatVersion,platform:N.deviceInfo.platform,system_version:N.deviceInfo.systemVersion,device_orientation:N.deviceInfo.deviceOrientation,wxapp_lib_version:N.deviceInfo.SDKVersion,wxapp_lib_time:N.deviceInfo.SDKVersionTime,machine_type:N.deviceInfo.model,ad_platform:N.deviceInfo.isWaGame?1:0,ad_unit_id:this.adUnitId}),a.map((function(e){return{type:e.type,value:(t[e.key]||e.value).toString()}}))}},{key:"reportMMData",value:function(e,t){var n=this.formatMMData(e,t);return Object(v.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}})}},{key:"reportAbnormalDetect",value:function(e){var t={adunit_id:this.adUnitId,appid:N.deviceInfo.gameAppId};if(Object.assign(e,t),"object"===Object(s.default)(e))return this.reportMMData(16139,e)}},{key:"reportAdIDKey",value:function(e){var t,n=e.key,a=e.id,r=n;"object"===Object(s.default)(r)&&(!a&&(a=r.idKeyGroup),r=r.idKey),a||(a=null!==(t=w.ID_KEY_MAP[this.adType])&&void 0!==t?t:924),0===r&&(r="0"),Reporter.reportIDKeyDirectly({id:a,key:r})}},{key:"processStackMsg",value:function(e){var t=(e.stack||"").replace(/\n/gi,"").split(/\bat\b/).slice(0,9).join("@").replace(/\?[^:]+/gi,""),n=e.toString();return t.indexOf(n)<0&&(t=n+"@"+t),t}},{key:"reportAdIDKeyErrorData",value:function(e){var t,n,a=e.key,r=e.id,i=e.extInfo,o=a,c=r,u=void 0===i?"":i;"object"===Object(s.default)(o)&&(!c&&(c=o.idKeyGroup),o=o.idKey),0===o&&(o="0");var l="",d="";try{if(this.data){var f={crt_size:this.data.crt_size,product_type:this.data.product_type,dest_type:this.data.dest_type,url:this.data.url};if([za.CRT_SIZE_REWARD_VEDIO169,za.CRT_SIZE_REWARD_VEDIO916,za.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(this.data.crt_size)){var p=this.convertedAdData;p&&(f.is_gauss_blur=Ba(p),f.is_expand_style=Wa(p),d=f.is_gauss_blur?p.gaussVideo.src:p.shortVideo.src)}else this.adProxy.isBannerAd()&&(d=this.data.image_url);l=JSON.stringify(f)}if(u&&"string"!=typeof u)try{u instanceof Error&&(u=this.processStackMsg(u)),u=JSON.stringify(u)}catch(e){u=u.toString()}}catch(e){u=this.processStackMsg(e),d="",l=null===(t=this.data)||void 0===t?void 0:t.crt_size}return this.reportMMData(16295,{id_key:o,id_key_group:null!==(n=null!=c?c:w.ID_KEY_MAP[this.adType])&&void 0!==n?n:924,report_time:+new Date,source_url:d,expand_feild:l,expand_feild2:u,scene:this.adProxy.scene||0})}},{key:"reportAdMonitorData",value:function(e,t){this.reportAdIDKey({key:e}),this.reportAdIDKeyErrorData({key:e,extInfo:t})}},{key:"reportEndPage",value:function(e){var t=e.slotid,n=e.costtype,a=e.isGame,r=void 0===a?0:a,i=e.posType,o=e.ace_type,s=e.exposure_duration,c=void 0===s?0:s;return this.reportMMData(19002,{slotid:t,costtype:n,is_game:r,pos_type:i,ace_type:o,exposure_duration:c})}},{key:"reportAdFeedbackData",value:function(e){var t,n,a,r={};if("grid"===this.adType){var i={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(t=this.datas)||void 0===t||t.forEach((function(e){e.extBackComm&&i.viewid.push(e.extBackComm.viewid),i.s_pt.push(e.pt),i.s_aid.push(e.aid),i.s_trace_id.push(e.traceid)})),r.grid_feedback_info=i}return this.reportMMData(17045,{appid:N.deviceInfo.gameAppId,weapp_path:N.appRouteInfo.weappPath,ad_unit_id:this.adUnitId,device_type:N.deviceInfo.model||"",ad_height:e.adHeight,ad_width:e.adWidth,screen_height:N.deviceInfo.screenHeight,screen_width:N.deviceInfo.screenWidth,ad_pos_x:e.adPosX,ad_pos_y:e.adPosY,exp_time:e.expTime,clk_complaint_button:1,slotid:w.POS_ID_MAP[this.adType],service_type:N.deviceInfo.isWaGame?1:0,first_grade_id:e.firstGradeId,first_grade_desc:e.firstGradeDesc,first_grade_time:e.firstGradeTime,second_grade_id:e.secondGradeId,second_grade_desc:e.secondGradeDesc,second_grade_time:e.secondGradeTime,is_finish_complaint:0,is_click_ad:null!==(n=e.isClickAd)&&void 0!==n?n:0!==this.lastClickTime?1:0,click_ad_time_ms:null!==(a=e.clickAdTimeMs)&&void 0!==a?a:this.lastClickTime,feedback_reason:e.feedbackReason,ext_feedback_comm:JSON.stringify(r)})}},{key:"reportBehaviorButton",value:function(e){var t=e.button,n=e.playDuration,a=e.preloadVideo,r=e.preloadVideoSuccess,i=e.videoFirstPlay,o=e.cardFirstShow,s=e.clickCard,c=e.pressInterval,u=e.currentPlayUrl,l=e.lastFetchUrl,d=e.isEnded,f=e.videoDuration;return this.reportMMData(16e3,{click_button:t,play_duration:n,click_close_ts:+new Date,preload_video:a,preload_video_success:r,video_first_play_ts:i,card_first_show_ts:o,click_card_ts:s,press_interval:c,current_play_url:u,last_fetch_url:l,is_ended:d?1:0,video_duration:f})}},{key:"reportVideoLoadTime",value:function(e){var t=e.beginTime,n=void 0===t?0:t,a=e.endTime,r=void 0===a?0:a,i=e.departureTime,o=void 0===i?0:i,s=e.preloadVideo,c=void 0===s?0:s,u=e.preloadVideoSuccess,l=void 0===u?0:u,d=e.reportType,f=void 0===d?0:d,p=r-o-n;return p>0?this.reportMMData(15730,{load_begin_time:n,load_end_time:r,load_departure_time:o,load_cost_time:p,preload_video:c,preload_video_success:l,report_type:f}):Promise.resolve()}},{key:"reportRepeatClick",value:function(e){var t=e.slotId,n=e.costType,a=e.clkCnt,r=e.lastClkPeriod,i=e.retCode,o=e.costTime,s=e.pageStayTime,c=e.jsapiName;return this.reportMMData(15979,{slotid:t,costtype:n,clkcnt:a,currenttime:+new Date,lastclkperiod:r,retcode:i,costtime:o,pagestaytime:s,jsapiname:c})}},{key:"reportLandingTime",value:function(e){var t=e.slotId,n=e.costType,a=e.openTime,r=e.closeTime,i=e.stayTime,o=e.jsapiName,s=e.clickTime,c=e.clkCnt,u=e.retCode,l=e.costTime,d=e.actTypeInt,f=e.actTypeStr;return this.reportMMData(15980,{slotid:t,costtype:n,currenttime:s,opentime:a,closetime:r,staytime:i,jsapiname:o,clkcnt:c,retcode:u,costtime:l,act_type_int:d,act_type_str:f})}},{key:"reportVideoLastClick",value:function(e){var t=e.touchStartX,n=e.touchStartY,a=e.touchEndX,r=e.touchEndY,i=e.touchDuration,o=e.screenWidth,s=e.screenHeight;return this.reportMMData(17035,{touch_start_x:t,touch_start_y:n,touch_end_x:a,touch_end_y:r,touch_duration:i,screenwidth:o,screenheight:s})}},{key:"reportBannerLastClick",value:function(e){var t=e.lastClickArr,n=e.top,a=e.left,r=e.width,i=e.height,o=e.expMs,s=e.clickMs,c=e.bannerClkScreenX,u=e.bannerClkScreenY,l=e.lastShowTime;return this.reportMMData(18072,{last_clicks:t,banner_x:n,banner_y:a,banner_width:r,banner_height:i,exp_ms:o,clk_ms:s,banner_clk_screen_x:c,banner_clk_screen_y:u,last_show_time:l,slotid:w.POS_ID_MAP[this.adType]})}},{key:"reportRelationFetchDuration",value:function(e){var t=e.startTime,n=e.showTime,a=e.endTime;return this.reportMMData(19429,{start_time:t,show_time:n,end_time:a,show_delay_duration:0===n?0:a-n,fetch_duration:a-t})}},{key:"reportMMClickPos",value:function(e){var t,n=e.clickPos;return this.reportMMData(20480,{slotid:w.POS_ID_MAP[this.adType],costtype:(null===(t=this.data)||void 0===t?void 0:t.is_cpm)?1:2,currenttime:Date.now(),click_pos:n})}},{key:"reportADFunnelModel",value:function(e){var t=[e.adtype,e.stage].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"GameADFunnelModel",value:t,force:!0,immediately:!0})}},{key:"recordAnalyseBranchInfo",value:function(e){var t=e.branchId,n=e.branchDim;this.analyseBranchInfo={branchId:t,branchDim:n}}},{key:"resetAnalyseBranchInfo",value:function(){this.analyseBranchInfo=null}},{key:"reportAnalyseInfo",value:function(e){var t=w.EXPOSURE_TYPE_MAP[this.adType]||"viewable";if(N.deviceInfo.isWaGame&&e===t){var n=this.analyseBranchInfo;n&&("release"!==N.deviceInfo.envVersion&&this.adProxy.reportAnalyseDebugInfo(n),this.reportMMData(20317,{branch_id:n.branchId,branch_dim:n.branchDim}))}}},{key:"reportRewardGaussVideo",value:function(e){var t=e.useGaussVideo,n=e.useExpandStyle,a=e.videoUrl,r=e.gaussVideoUrl,i=e.expUseGaussVideo,o=e.expUseExpandStyle;this.reportMMData(21644,{use_gauss_video:t?1:0,video_url:a,gauss_video_url:r,use_expand_style:n?1:0,exp_use_gauss_video:i,exp_use_expand_style:o})}}]),e}();Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[String]),Ya("design:returntype",void 0)],qa.prototype,"getTimePoint",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[String,Object]),Ya("design:returntype",void 0)],qa.prototype,"setTimePoint",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportTimePoints",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportCloseAction",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportAdEntranceExposure",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportTouchClick",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportCancelRewardPlayablePage",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Number,Object]),Ya("design:returntype",void 0)],qa.prototype,"reportMMData",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportAbnormalDetect",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportAdIDKey",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Error]),Ya("design:returntype",void 0)],qa.prototype,"processStackMsg",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportAdIDKeyErrorData",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object,Object]),Ya("design:returntype",void 0)],qa.prototype,"reportAdMonitorData",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportEndPage",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportAdFeedbackData",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportBehaviorButton",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportVideoLoadTime",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportRepeatClick",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportLandingTime",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportVideoLastClick",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportBannerLastClick",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportRelationFetchDuration",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportMMClickPos",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportADFunnelModel",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"recordAnalyseBranchInfo",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[]),Ya("design:returntype",void 0)],qa.prototype,"resetAnalyseBranchInfo",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[String]),Ya("design:returntype",void 0)],qa.prototype,"reportAnalyseInfo",null),Ha([k(),Ya("design:type",Function),Ya("design:paramtypes",[Object]),Ya("design:returntype",void 0)],qa.prototype,"reportRewardGaussVideo",null),function(e){e[e.kUnknown=0]="kUnknown",e[e.kVideo=1]="kVideo",e[e.kArticle=2]="kArticle"}(Zt||(Zt={})),function(e){e[e.EXPOSE=1]="EXPOSE",e[e.CLICK=2]="CLICK"}(Jt||(Jt={})),function(e){e[e.kDeviceUnknow=0]="kDeviceUnknow",e[e.kDeviceAndroid=1]="kDeviceAndroid",e[e.kDeviceIphone=2]="kDeviceIphone",e[e.kDeviceIpad=3]="kDeviceIpad",e[e.kDeviceTv=4]="kDeviceTv"}(Qt||(Qt={})),function(e){e[e.AppServiceType_NORMAL=1]="AppServiceType_NORMAL",e[e.AppServiceType_GAME=2]="AppServiceType_GAME"}($t||($t={})),function(e){e[e.AllOS=0]="AllOS",e[e.Ios=1]="Ios",e[e.Android=2]="Android",e[e.Winphone=3]="Winphone",e[e.JAVA=4]="JAVA",e[e.OS_UNKNOWN=5]="OS_UNKNOWN",e[e.SYMBIAN=6]="SYMBIAN",e[e.S40asha=7]="S40asha",e[e.Webwx=8]="Webwx",e[e.Blackberry=9]="Blackberry",e[e.Windows=10]="Windows"}(en||(en={})),function(e){e[e.kUnknownNetwork=0]="kUnknownNetwork",e[e.kWIFI=1]="kWIFI",e[e.k2G=2]="k2G",e[e.k3G=3]="k3G",e[e.k4G=4]="k4G",e[e.k5G=5]="k5G",e[e.kAll=10]="kAll"}(tn||(tn={})),function(e){e[e.kUnknownCarrier=0]="kUnknownCarrier",e[e.kCMCC=1]="kCMCC",e[e.kCUCC=2]="kCUCC",e[e.kCTCC=3]="kCTCC"}(nn||(nn={})),function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.CMNET=1]="CMNET",e[e.CMWAP=2]="CMWAP",e[e.THREEGNET=3]="THREEGNET",e[e.THREEGWAP=4]="THREEGWAP",e[e.UNINET=5]="UNINET",e[e.UNIWAP=6]="UNIWAP",e[e.WIFI=7]="WIFI",e[e.CTWAP=8]="CTWAP",e[e.CTNET=9]="CTNET",e[e.THREEGNET_UNINET=10]="THREEGNET_UNINET",e[e.THREEGWAP_UNIWAP=11]="THREEGWAP_UNIWAP",e[e.CTNET_CTWAP=12]="CTNET_CTWAP",e[e.THREEGNET_THREEGWAP_UNINET_UNIWAP=13]="THREEGNET_THREEGWAP_UNINET_UNIWAP",e[e.WIMAX=14]="WIMAX"}(an||(an={})),function(e){e[e.Default_Source=0]="Default_Source",e[e.MediaPlatform=1]="MediaPlatform",e[e.WeApp=2]="WeApp",e[e.Moments=3]="Moments",e[e.BizTimeLine=4]="BizTimeLine"}(rn||(rn={})),function(e){e[e.JSON=0]="JSON",e[e.XML=1]="XML"}(on||(on={})),function(e){e[e.Unknown_sys=-1]="Unknown_sys",e[e.Windows=0]="Windows",e[e.Ios=1]="Ios",e[e.Android=2]="Android"}(sn||(sn={})),function(e){e[e.Unknown_type=0]="Unknown_type",e[e.Wifi=1]="Wifi",e[e.TwoG=2]="TwoG",e[e.TreeG=3]="TreeG",e[e.FourG=4]="FourG",e[e.FiveG=5]="FiveG",e[e.Ethernet=6]="Ethernet"}(cn||(cn={})),function(e){e[e.SOURCE_UNKNOW=0]="SOURCE_UNKNOW",e[e.SOURCE_MP=1]="SOURCE_MP",e[e.SOURCE_OSS=2]="SOURCE_OSS",e[e.SOURCE_MP_OSS=3]="SOURCE_MP_OSS",e[e.SOURCE_OPEN_API=4]="SOURCE_OPEN_API",e[e.SOURCE_MARKETING_API=5]="SOURCE_MARKETING_API",e[e.SOURCE_WEPAY=6]="SOURCE_WEPAY",e[e.SOURCE_PRODUCT_API=7]="SOURCE_PRODUCT_API",e[e.SOURCE_WEAPP=8]="SOURCE_WEAPP",e[e.SOURCE_LOCAL_BUSINESS=9]="SOURCE_LOCAL_BUSINESS"}(un||(un={})),function(e){e[e.NORMAL_AD=0]="NORMAL_AD",e[e.LOCAL_BUSINESS_AD=1]="LOCAL_BUSINESS_AD"}(ln||(ln={})),function(e){e[e.POS_TYPE_APPMSG_BOTTOM=0]="POS_TYPE_APPMSG_BOTTOM",e[e.POS_TYPE_APPMSG_TOP=1]="POS_TYPE_APPMSG_TOP",e[e.POS_TYPE_NEWS=2]="POS_TYPE_NEWS",e[e.POS_TYPE_APPMSG_VIDEO=3]="POS_TYPE_APPMSG_VIDEO",e[e.POS_TYPE_FREE_TRADE=4]="POS_TYPE_FREE_TRADE",e[e.POS_TYPE_APPMSG_MIDDLE=5]="POS_TYPE_APPMSG_MIDDLE",e[e.POS_TYPE_MAIL=6]="POS_TYPE_MAIL",e[e.POS_TYPE_WX_APPLICATION=7]="POS_TYPE_WX_APPLICATION",e[e.POS_TYPE_WX_GAME_VIDEO=8]="POS_TYPE_WX_GAME_VIDEO",e[e.POS_TYPE_MP_PRODUCT=9]="POS_TYPE_MP_PRODUCT",e[e.POS_TYPE_WEAPP_INTERSTITIAL=10]="POS_TYPE_WEAPP_INTERSTITIAL",e[e.POS_TYPE_BOX=11]="POS_TYPE_BOX",e[e.POS_TYPE_WEAPP_COVER=12]="POS_TYPE_WEAPP_COVER",e[e.POS_TYPE_WEAPP_TEMPLATE=13]="POS_TYPE_WEAPP_TEMPLATE",e[e.POS_TYPE_WX_PAY=14]="POS_TYPE_WX_PAY",e[e.POS_TYPE_BIZ_TIME_LINE=15]="POS_TYPE_BIZ_TIME_LINE",e[e.POS_TYPE_MP_MAX=100]="POS_TYPE_MP_MAX",e[e.POS_TYPE_MULTI_SLOT=101]="POS_TYPE_MULTI_SLOT",e[e.POS_TYPE_WX_APPLET=997]="POS_TYPE_WX_APPLET",e[e.POS_TYPE_MP_ALL=998]="POS_TYPE_MP_ALL",e[e.POS_TYPE_SNS_FEED=999]="POS_TYPE_SNS_FEED"}(dn||(dn={})),function(e){e[e.DEST_TYPE_AD=0]="DEST_TYPE_AD",e[e.DEST_TYPE_OUTER=1]="DEST_TYPE_OUTER",e[e.DEST_TYPE_APPDETAIL=2]="DEST_TYPE_APPDETAIL",e[e.DEST_TYPE_BIZ=3]="DEST_TYPE_BIZ",e[e.DEST_TYPE_APPINFO_PAGE=4]="DEST_TYPE_APPINFO_PAGE",e[e.DEST_TYPE_WECHAT_SHOP=5]="DEST_TYPE_WECHAT_SHOP",e[e.DEST_TYPE_WECHAT_APPLET=6]="DEST_TYPE_WECHAT_APPLET",e[e.DEST_TYPE_CANVAS=9]="DEST_TYPE_CANVAS",e[e.DEST_TYPE_CHANNELS=101]="DEST_TYPE_CHANNELS",e[e.DEST_TYPE_CHANNELS_LIVE=102]="DEST_TYPE_CHANNELS_LIVE",e[e.DEST_TYPE_CHANNELS_USER_PROFILE=103]="DEST_TYPE_CHANNELS_USER_PROFILE"}(fn||(fn={})),function(e){e[e.RT_SIZE_WORD=91]="RT_SIZE_WORD",e[e.CRT_SIZE_PIC=133]="CRT_SIZE_PIC",e[e.CRT_SIZE_APPMSG=134]="CRT_SIZE_APPMSG",e[e.CRT_SIZE_CARD=135]="CRT_SIZE_CARD",e[e.CRT_SIZE_TOP_PIC=166]="CRT_SIZE_TOP_PIC",e[e.CRT_SIZE_APPDETAIL=167]="CRT_SIZE_APPDETAIL",e[e.CRT_SIZE_WECHAT_SHOP=267]="CRT_SIZE_WECHAT_SHOP",e[e.CRT_SIZE_COPY_CARD=354]="CRT_SIZE_COPY_CARD",e[e.CRT_SIZE_PIC_CARD=355]="CRT_SIZE_PIC_CARD",e[e.CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC=998]="CRT_SIZE_WECHAT_ARTICLE_GRAND_PIC",e[e.CRT_SIZE_OFF_ACCOUNT_PIC=117]="CRT_SIZE_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_WECHAT_APPLET_GRAND_PIC=484]="CRT_SIZE_WECHAT_APPLET_GRAND_PIC",e[e.CRT_SIZE_WECHAT_VIDEO=538]="CRT_SIZE_WECHAT_VIDEO",e[e.CRT_SIZE_H5VIDEO_PIC_6S=555]="CRT_SIZE_H5VIDEO_PIC_6S",e[e.CRT_SIZE_H5VIDEO_VIDEO_15S=1515]="CRT_SIZE_H5VIDEO_VIDEO_15S",e[e.CRT_SIZE_MUTUAL_VIDEO_169=996]="CRT_SIZE_MUTUAL_VIDEO_169",e[e.CRT_SIZE_MUTUAL_VIDEO_43=997]="CRT_SIZE_MUTUAL_VIDEO_43",e[e.CRT_SIZE_IMAGE=666]="CRT_SIZE_IMAGE",e[e.CRT_SIZE_VIDEO=888]="CRT_SIZE_VIDEO",e[e.CRT_SIZE_CARD_IMAGE=450]="CRT_SIZE_CARD_IMAGE",e[e.CRT_SIZE_CARD_VIDEO=452]="CRT_SIZE_CARD_VIDEO",e[e.CRT_SIZE_LINK=454]="CRT_SIZE_LINK",e[e.CRT_SIZE_CARD_SELECT_IMAGE=480]="CRT_SIZE_CARD_SELECT_IMAGE",e[e.CRT_SIZE_CARD_SELECT_VIDEO=482]="CRT_SIZE_CARD_SELECT_VIDEO",e[e.CRT_SIZE_CARD_VOTE_IMAGE=516]="CRT_SIZE_CARD_VOTE_IMAGE",e[e.CRT_SIZE_CARD_VOTE_VIDEO=519]="CRT_SIZE_CARD_VOTE_VIDEO",e[e.CRT_SIZE_WXAPP_PIC=532]="CRT_SIZE_WXAPP_PIC",e[e.CRT_SIZE_CARD_TURN_IMAGE=539]="CRT_SIZE_CARD_TURN_IMAGE",e[e.CRT_SIZE_CARD_TURN_VIDEO=540]="CRT_SIZE_CARD_TURN_VIDEO",e[e.CRT_SIZE_WXAPP_CARD_PIC=556]="CRT_SIZE_WXAPP_CARD_PIC",e[e.CRT_SIZE_WXGAME_VIDEO_0=559]="CRT_SIZE_WXGAME_VIDEO_0",e[e.CRT_SIZE_WXGAME_VIDEO_1=560]="CRT_SIZE_WXGAME_VIDEO_1",e[e.CRT_SIZE_WXAPP_BANNER_608=608]="CRT_SIZE_WXAPP_BANNER_608",e[e.CRT_SIZE_MULTI_POS_960_334=567]="CRT_SIZE_MULTI_POS_960_334",e[e.CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC=568]="CRT_SIZE_MULTI_POS_OFF_ACCOUNT_PIC",e[e.CRT_SIZE_MULTI_POS_CARD=569]="CRT_SIZE_MULTI_POS_CARD",e[e.CRT_SIZE_MULTI_POS_COPY_CARD=570]="CRT_SIZE_MULTI_POS_COPY_CARD",e[e.CRT_SIZE_CARD_RATING_IMAGE=588]="CRT_SIZE_CARD_RATING_IMAGE",e[e.CRT_SIZE_CARD_RATING_VIDEO=589]="CRT_SIZE_CARD_RATING_VIDEO",e[e.CRT_SIZE_CARD_FULL_IMAGE=598]="CRT_SIZE_CARD_FULL_IMAGE",e[e.CRT_SIZE_CARD_FULL_VIDEO=599]="CRT_SIZE_CARD_FULL_VIDEO",e[e.CRT_SIZE_MP_TAGS=677]="CRT_SIZE_MP_TAGS",e[e.CRT_SIZE_SCREEN_701=701]="CRT_SIZE_SCREEN_701",e[e.CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO=913]="CRT_SIZE_WEAPP_INTERSTITIAL_VIDEO",e[e.CRT_SIZE_CARD_FULL_GESTURE_VIDEO=698]="CRT_SIZE_CARD_FULL_GESTURE_VIDEO",e[e.CRT_SIZE_BOTTOM_708=708]="CRT_SIZE_BOTTOM_708",e[e.CRT_SIZE_IN_TEXT_841=841]="CRT_SIZE_IN_TEXT_841",e[e.CRT_SIZE_CARD_COMPONENT_IMAGE=1707]="CRT_SIZE_CARD_COMPONENT_IMAGE",e[e.CRT_SIZE_CARD_COMPONENT_VIDEO=1708]="CRT_SIZE_CARD_COMPONENT_VIDEO",e[e.CRT_SIZE_PRODUCT=1501]="CRT_SIZE_PRODUCT",e[e.CRT_SIZE_CARD_SPHERE_IMAGE=699]="CRT_SIZE_CARD_SPHERE_IMAGE",e[e.CRT_SIZE_IMAGE_TEXT_CARD=904]="CRT_SIZE_IMAGE_TEXT_CARD",e[e.CRT_SIZE_MULTI_SLOT_BANNER=925]="CRT_SIZE_MULTI_SLOT_BANNER",e[e.CRT_SIZE_MULTI_SLOT_BANNER_MP=926]="CRT_SIZE_MULTI_SLOT_BANNER_MP",e[e.CRT_SIZE_MULTI_SLOT_IMAGE=927]="CRT_SIZE_MULTI_SLOT_IMAGE",e[e.CRT_SIZE_MULTI_SLOT_IMAGE_MP=928]="CRT_SIZE_MULTI_SLOT_IMAGE_MP",e[e.CRT_SIZE_MULTI_SLOT_VIDEO=929]="CRT_SIZE_MULTI_SLOT_VIDEO",e[e.CRT_SIZE_MULTI_SLOT_BOX=972]="CRT_SIZE_MULTI_SLOT_BOX",e[e.CRT_SIZE_BUTTON_CARD_IMAGE=955]="CRT_SIZE_BUTTON_CARD_IMAGE",e[e.CRT_SIZE_BUTTON_CARD_VIDEO=957]="CRT_SIZE_BUTTON_CARD_VIDEO",e[e.CRT_SIZE_WXGAME_LAND_PAGE=910]="CRT_SIZE_WXGAME_LAND_PAGE",e[e.CRT_SIZE_WEAPP_COVER=1003]="CRT_SIZE_WEAPP_COVER",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO=1064]="CRT_SIZE_SNS_PORTRAIL_VIDEO",e[e.CRT_SIZE_CARD_FULL_PRESS_VIDEO=1065]="CRT_SIZE_CARD_FULL_PRESS_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_1=1479]="CRT_SIZE_SNS_PORTRAIL_VIDEO_1",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_2=1480]="CRT_SIZE_SNS_PORTRAIL_VIDEO_2",e[e.CRT_SIZE_CHANNELS_IMAGE=1530]="CRT_SIZE_CHANNELS_IMAGE",e[e.CRT_SIZE_CHANNELS_PORTRAIL_IMAGE=1531]="CRT_SIZE_CHANNELS_PORTRAIL_IMAGE",e[e.CRT_SIZE_CARD_FULL_TWIST_VIDEO=1733]="CRT_SIZE_CARD_FULL_TWIST_VIDEO",e[e.CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280=721]="CRT_SIZE_SNS_PORTRAIL_VIDEO_720_1280",e[e.CRT_SIZE_CARD_FINDER_EVENT_VIDEO=1748]="CRT_SIZE_CARD_FINDER_EVENT_VIDEO"}(pn||(pn={})),function(e){e[e.PAGE_TYPE_NONE=0]="PAGE_TYPE_NONE",e[e.PAGE_TYPE_OUTLINK=1]="PAGE_TYPE_OUTLINK",e[e.PAGE_TYPE_ARTICLE=2]="PAGE_TYPE_ARTICLE",e[e.PAGE_TYPE_H5CANVAS=3]="PAGE_TYPE_H5CANVAS",e[e.PAGE_TYPE_CANVAS=4]="PAGE_TYPE_CANVAS",e[e.PAGE_TYPE_CARD=5]="PAGE_TYPE_CARD",e[e.PAGE_TYPE_ACCOUNT=6]="PAGE_TYPE_ACCOUNT",e[e.PAGE_TYPE_APPSTORE=7]="PAGE_TYPE_APPSTORE",e[e.PAGE_TYPE_TMPL=8]="PAGE_TYPE_TMPL",e[e.PAGE_TYPE_SIMPLE_CANVAS=9]="PAGE_TYPE_SIMPLE_CANVAS",e[e.PAGE_TYPE_AD=10]="PAGE_TYPE_AD",e[e.PAGE_TYPE_DIRECT=11]="PAGE_TYPE_DIRECT",e[e.PAGE_TYPE_APPDETAIL=12]="PAGE_TYPE_APPDETAIL",e[e.PAGE_TYPE_APPINFO_PAGE=13]="PAGE_TYPE_APPINFO_PAGE",e[e.PAGE_TYPE_WECHAT_SHOP=14]="PAGE_TYPE_WECHAT_SHOP",e[e.PAGE_TYPE_WEAPP=15]="PAGE_TYPE_WEAPP",e[e.PAGE_TYPE_ACTIVE=16]="PAGE_TYPE_ACTIVE",e[e.PAGE_TYPE_FORM_IMAGE=17]="PAGE_TYPE_FORM_IMAGE",e[e.PAGE_TYPE_FORM_VIDEO=18]="PAGE_TYPE_FORM_VIDEO",e[e.PAGE_TYPE_APP_IMAGE=19]="PAGE_TYPE_APP_IMAGE",e[e.PAGE_TYPE_APP_VIDEO=20]="PAGE_TYPE_APP_VIDEO",e[e.PAGE_TYPE_CANVAS_QUES=21]="PAGE_TYPE_CANVAS_QUES",e[e.PAGE_TYPE_CANVAS_VOTE=22]="PAGE_TYPE_CANVAS_VOTE",e[e.PAGE_TYPE_WEPAY_CARD=23]="PAGE_TYPE_WEPAY_CARD",e[e.PAGE_TYPE_WXGAME=24]="PAGE_TYPE_WXGAME",e[e.PAGE_TYPE_FY_EGOODS=25]="PAGE_TYPE_FY_EGOODS",e[e.PAGE_TYPE_ALITA=26]="PAGE_TYPE_ALITA",e[e.PAGE_TYPE_PHONE_CALL=27]="PAGE_TYPE_PHONE_CALL",e[e.PAGE_TYPE_SUBSCRIPTION=40027]="PAGE_TYPE_SUBSCRIPTION",e[e.PAGE_TYPE_YOUZAN=20003]="PAGE_TYPE_YOUZAN",e[e.PAGE_TYPE_WEIMENG=20305]="PAGE_TYPE_WEIMENG",e[e.PAGE_TYPE_FENGYE_EC_SINGLE=10001]="PAGE_TYPE_FENGYE_EC_SINGLE",e[e.PAGE_TYPE_FENGYE_EC_TOGETHER=10002]="PAGE_TYPE_FENGYE_EC_TOGETHER",e[e.PAGE_TYPE_FENGYE_EC_FOCUS=10003]="PAGE_TYPE_FENGYE_EC_FOCUS",e[e.PAGE_TYPE_PLAY_H5=18001]="PAGE_TYPE_PLAY_H5",e[e.PAGE_TYPE_SCAN=40026]="PAGE_TYPE_SCAN",e[e.PAGE_TYPE_CHANNELS=60003]="PAGE_TYPE_CHANNELS",e[e.PAGE_TYPE_CHANNELS_WATCH_LIVE=60005]="PAGE_TYPE_CHANNELS_WATCH_LIVE",e[e.PAGE_TYPE_CHANNELS_RESERVE_LIVE=60006]="PAGE_TYPE_CHANNELS_RESERVE_LIVE",e[e.PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5=40028]="PAGE_TYPE_WECHAT_XJ_ANDROID_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_IOS_APP_H5=40029]="PAGE_TYPE_WECHAT_XJ_IOS_APP_H5",e[e.PAGE_TYPE_WECHAT_XJ_WEBSITE_H5=40030]="PAGE_TYPE_WECHAT_XJ_WEBSITE_H5",e[e.PAGE_TYPE_WECHAT_RED_PACKET_COVER=40031]="PAGE_TYPE_WECHAT_RED_PACKET_COVER",e[e.PAGE_TYPE_WECHAT_VIDEO_TOPIC=40032]="PAGE_TYPE_WECHAT_VIDEO_TOPIC",e[e.PAGE_TYPE_MAX=1e8]="PAGE_TYPE_MAX"}(hn||(hn={})),function(e){e[e.PRODUCTTYPE_UNKNOWN=0]="PRODUCTTYPE_UNKNOWN",e[e.PRODUCTTYPE_OPEN_PLATFORM_APP_MOB=12]="PRODUCTTYPE_OPEN_PLATFORM_APP_MOB",e[e.PRODUCTTYPE_APPLE_APP_STORE=19]="PRODUCTTYPE_APPLE_APP_STORE",e[e.PRODUCTTYPE_WECHAT=23]="PRODUCTTYPE_WECHAT",e[e.PRODUCTTYPE_JD_URL=25]="PRODUCTTYPE_JD_URL",e[e.PRODUCTTYPE_DP_SHOP=26]="PRODUCTTYPE_DP_SHOP",e[e.PRODUCTTYPE_WECHAT_ARTICLE=29]="PRODUCTTYPE_WECHAT_ARTICLE",e[e.PRODUCTTYPE_WECHAT_SHOP=30]="PRODUCTTYPE_WECHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_URL=31]="PRODUCTTYPE_WECHAT_URL",e[e.PRODUCTTYPE_WECHAT_CARD=36]="PRODUCTTYPE_WECHAT_CARD",e[e.PRODUCTTYPE_WECHAT_LBS=37]="PRODUCTTYPE_WECHAT_LBS",e[e.PRODUCTTYPE_WECHAT_APP=38]="PRODUCTTYPE_WECHAT_APP",e[e.GDT_PRODUCTTYPE_WECHAT_LBS=39]="GDT_PRODUCTTYPE_WECHAT_LBS",e[e.PRODUCTTYPE_LEAD_AD=43]="PRODUCTTYPE_LEAD_AD",e[e.PRODUCTTYPE_WECHAT_MINI_GAME=46]="PRODUCTTYPE_WECHAT_MINI_GAME",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.PRODUCTTYPE_WECHAT_CHANNELS=51]="PRODUCTTYPE_WECHAT_CHANNELS",e[e.PRODUCTTYPE_MINI_PROGRAM_WECHAT=52]="PRODUCTTYPE_MINI_PROGRAM_WECHAT"}(vn||(vn={}));var za,Ka,Xa,Za=n(130);!function(e){e[e.PIC_TIME5=555]="PIC_TIME5",e[e.VIDEO_TIME15=1515]="VIDEO_TIME15",e[e.APP_VIDEO=538]="APP_VIDEO",e[e.CRT_SIZE_WX_APPLICATION=532]="CRT_SIZE_WX_APPLICATION",e[e.CRT_SIZE_WX_APPLICATION_X=567]="CRT_SIZE_WX_APPLICATION_X",e[e.CRT_SIZE_WX_APPLICATION_NEW=608]="CRT_SIZE_WX_APPLICATION_NEW",e[e.CRT_SIZE_WX_APPLICATION_CARD=556]="CRT_SIZE_WX_APPLICATION_CARD",e[e.CRT_SIZE_REWARD_VEDIO169=559]="CRT_SIZE_REWARD_VEDIO169",e[e.CRT_SIZE_REWARD_VEDIO916=560]="CRT_SIZE_REWARD_VEDIO916",e[e.CRT_SIZE_REWARD_LANDINGPAGE=910]="CRT_SIZE_REWARD_LANDINGPAGE",e[e.CRT_SIZE_TABLE_SCREEN_IMAGE=701]="CRT_SIZE_TABLE_SCREEN_IMAGE",e[e.CRT_SIZE_INSERT_VIDEO=913]="CRT_SIZE_INSERT_VIDEO",e[e.CRT_SIZE_MULTI_POS_NEW_PIC=927]="CRT_SIZE_MULTI_POS_NEW_PIC",e[e.CRT_SIZE_MULTI_POS_VEDIO=929]="CRT_SIZE_MULTI_POS_VEDIO",e[e.CRT_SIZE_MULTI_POS_GRID=972]="CRT_SIZE_MULTI_POS_GRID",e[e.CRT_SIZE_COVER_AD=1003]="CRT_SIZE_COVER_AD",e[e.CRT_SIZE_CPM_PIC=998]="CRT_SIZE_CPM_PIC",e[e.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT=928]="CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT",e[e.CRT_SIZE_VERTICAL_VIDEO_NEW_916=721]="CRT_SIZE_VERTICAL_VIDEO_NEW_916"}(za||(za={})),function(e){e[e.ANDROID=12]="ANDROID",e[e.IOS=19]="IOS",e[e.WE_CHAT=23]="WE_CHAT",e[e.MINI_GAME=46]="MINI_GAME",e[e.WE_CHAT_CARD=36]="WE_CHAT_CARD",e[e.WE_CHAT_SHOP=30]="WE_CHAT_SHOP",e[e.PRODUCTTYPE_WECHAT_PAY_COUPON=47]="PRODUCTTYPE_WECHAT_PAY_COUPON",e[e.WE_CHAT_ARTICLE=29]="WE_CHAT_ARTICLE",e[e.GDT_WE_CHAT_ARTICLE=31]="GDT_WE_CHAT_ARTICLE",e[e.WE_CHAT_APP=38]="WE_CHAT_APP",e[e.LBS=37]="LBS",e[e.LEAD_AD=43]="LEAD_AD",e[e.JD_URL=25]="JD_URL"}(Ka||(Ka={})),function(e){e[e.MP_TAG_TYPE_NONE=0]="MP_TAG_TYPE_NONE",e[e.MP_TAG_TYPE_PLAY=1]="MP_TAG_TYPE_PLAY",e[e.MP_TAG_TYPE_DOWNLOAD=3]="MP_TAG_TYPE_DOWNLOAD",e[e.MP_TAG_TYPE_FOLLOW=4]="MP_TAG_TYPE_FOLLOW",e[e.MP_TAG_TYPE_FORM=5]="MP_TAG_TYPE_FORM",e[e.MP_TAG_TYPE_CATEGORY=2]="MP_TAG_TYPE_CATEGORY",e[e.MP_TAG_TYPE_ORDER=6]="MP_TAG_TYPE_ORDER",e[e.MP_TAG_TYPE_POI=7]="MP_TAG_TYPE_POI",e[e.MP_TAG_TYPE_CONVERTION=8]="MP_TAG_TYPE_CONVERTION",e[e.MP_TAG_TYPE_APP_CATEGORY=9]="MP_TAG_TYPE_APP_CATEGORY"}(Xa||(Xa={}));var Ja,Qa={123:["image","brand"],124:["image","store"],127:["image","download"],128:["image","follow"],134:["image","wxgame"],138:["image","brand"],126:["card","follow","normal"],129:["card","follow","large"],132:["card","download","large"],130:["video","download"],131:["video","brand"],133:["video","wxgame"],135:["video","brand"],136:["video","follow"],137:["video","brand"]},$a={1:"store",2:"brand",3:"download",6:"follow",7:"wxgame"},er=[123,124,126,127,128,129,130,131,132,133,134,135,136,137,138],tr=[za.CRT_SIZE_WX_APPLICATION,za.CRT_SIZE_WX_APPLICATION_NEW,za.CRT_SIZE_WX_APPLICATION_X,za.CRT_SIZE_WX_APPLICATION_CARD,za.CRT_SIZE_REWARD_VEDIO169,za.CRT_SIZE_REWARD_VEDIO916,za.CRT_SIZE_TABLE_SCREEN_IMAGE,za.CRT_SIZE_REWARD_LANDINGPAGE,za.CRT_SIZE_INSERT_VIDEO,za.CRT_SIZE_MULTI_POS_NEW_PIC,za.CRT_SIZE_MULTI_POS_VEDIO,za.CRT_SIZE_MULTI_POS_GRID,za.CRT_SIZE_CPM_PIC,za.CRT_SIZE_COVER_AD,za.CRT_SIZE_MULTI_POS_NEW_PIC_WE_CHAT,za.CRT_SIZE_VERTICAL_VIDEO_NEW_916];!function(e){e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON=2001]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_ACT_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON=2002]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CLOSE_BUTTON",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT=2003]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER=2004]="MMOCAD_CLICKPOS_BIZ_VIDEO_END_PAGE_CORNER",e[e.MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT=2005]="MMOCAD_CLICKPOS_BIZ_VIDEO_CONTENT",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION=2006]="MMOCAD_CLICKPOS_BIZ_MIDDLE_BEFORE_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION=2007]="MMOCAD_CLICKPOS_BIZ_MIDDLE_IN_ANIMATION",e[e.MMOCAD_CLICKPOS_BIZ_FOLLOW=2008]="MMOCAD_CLICKPOS_BIZ_FOLLOW",e[e.MMOCAD_CLICKPOS_BIZ_LIKE=2009]="MMOCAD_CLICKPOS_BIZ_LIKE",e[e.MMOCAD_CLICKPOS_BIZ_COMMENT=2010]="MMOCAD_CLICKPOS_BIZ_COMMENT",e[e.MMOCAD_CLICKPOS_BIZ_HEADIMAGE=2011]="MMOCAD_CLICKPOS_BIZ_HEADIMAGE",e[e.MMOCAD_CLICKPOS_BIZ_NICKNAME=2012]="MMOCAD_CLICKPOS_BIZ_NICKNAME",e[e.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD=2013]="MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD"}(Ja||(Ja={}));var nr,ar,rr,ir,or=20002;!function(e){e[e.DEFAULT=0]="DEFAULT",e[e.VIDEO=1]="VIDEO",e[e.LIVE=2]="LIVE"}(nr||(nr={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ROOM=1]="ROOM",e[e.RESERVATION=2]="RESERVATION"}(ar||(ar={})),function(e){e[e.NONE=1]="NONE",e[e.ON_AIR=2]="ON_AIR",e[e.ENDED=3]="ENDED",e[e.IN_PREPARE=4]="IN_PREPARE"}(rr||(rr={})),function(e){e[e.NONE=0]="NONE",e[e.NICKNAME=1]="NICKNAME",e[e.LINK=2]="LINK",e[e.RESOURCE=3]="RESOURCE",e[e.ACTIONBUTTON=4]="ACTIONBUTTON",e[e.CANVASBUTTON=5]="CANVASBUTTON",e[e.TAGBUTTON=6]="TAGBUTTON"}(ir||(ir={}));var sr=function(e,t,n,a){var r,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":Object(s.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(i<3?r(o):i>3?r(t,n,o):r(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},cr=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(s.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ur=1,lr=new Set,dr=function(){function e(t){Object(i.default)(this,e),this.adProxy=t,this.lastVideoReportTime=0,this.lastExposureTime=0,this.lastClickTime=0,this.lastAdReqTs=0,this.index=ur,ur+=1,lr.add(this.adUnitId)}return Object(o.default)(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"adUnitId",get:function(){return this.adProxy.getAdUnitId()}},{key:"slotData",get:function(){return this.adProxy.getSlotData()}},{key:"pluginAppid",get:function(){return this.adProxy.getPluginAppid()}},{key:"data",get:function(){return this.adProxy.data}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"reportAdMonitorData",get:function(){return this.adProxy.reportAdMonitorData}},{key:"reset",value:function(){this.lastVideoReportTime=0}},{key:"getLastClickTime",value:function(){return this.lastClickTime}},{key:"getLastAdReqTs",value:function(){return this.lastAdReqTs}},{key:"setLastExposureTime",value:function(e){this.lastExposureTime=e}},{key:"setLastClickTime",value:function(e){this.lastClickTime=e}},{key:"setLastAdReqTs",value:function(e){this.lastAdReqTs=e}},{key:"reportFollow",value:function(e){var t=this,n=e.result,a=5;return this.adProxy.isRewardedVideoAd()?a=6:[za.CRT_SIZE_TABLE_SCREEN_IMAGE,za.CRT_SIZE_INSERT_VIDEO].includes(this.data.crt_size)&&(a=8),Object(v.operateWXData)({apiName:"webapi_adfollow_report",reqData:{type:{success:140,fail:141,already:142,cancel:143}[n],source:5,scene:75,traceid:this.data.traceid,trace_id:this.data.traceid,aid:this.data.aid,pos_type:a}}).catch((function(e){throw t.reportAdMonitorData(Za.IDKEY.FOLLOW_REPORT_ERROR,e),e}))}},{key:"getExtraExpOrClkData",value:function(e){var t,n,a,r,i,o,s=this,c=[];"exposure"===e.reportType&&e.isMulti&&e.multiList?c=e.multiList.map((function(e,t){return{idx:t,waid:s.datas[e].waid||""}})):this.data.waid&&(c=[{idx:0,waid:this.data.waid}]);var u=Object.assign(Object.assign({},Object(N.getIndentityInfo)()),{weapp_enter_scene:(null===(t=null===f.default||void 0===f.default?void 0:f.default.appLaunchInfo)||void 0===t?void 0:t.scene)||0,extra:JSON.stringify(c)}),l=Object.assign({},u),d=Object.assign({},u);if("customAd"===this.adType&&e.isMulti)if("exposure"===e.reportType){var p={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(n=e.multiList)||void 0===n||n.forEach((function(e){var t=s.datas[e];t.extBackComm&&p.viewid.push(t.extBackComm.viewid),p.s_pt.push(t.pt),p.s_aid.push(t.aid),p.s_trace_id.push(t.traceid)})),l.box_ad_exposure={report_mode:1,box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:JSON.stringify({viewid:p.viewid}),s_trace_id:JSON.stringify(p.s_trace_id),s_aid:JSON.stringify(p.s_aid),s_pt:JSON.stringify(p.s_pt),s_index:JSON.stringify(e.multiList||[])}}else if("click"===e.reportType){var h=this.adProxy.adDataIndex;d.box_ad_click={box_size:this.datas.length,box_used_cnt:this.datas.length,viewid:null===(a=this.data.extBackComm)||void 0===a?void 0:a.viewid,box_index:h}}if("customAd"===this.adType){var v=null===(r=this.data.extBackComm)||void 0===r?void 0:r.sub_templ_id;v&&(l.sub_templ_id=v,d.sub_templ_id=v)}if("incentive-video"===this.adType&&this.data.isPlayable&&(l.is_playable=1,d.is_playable=1),["interstitialAd","incentive-video","customAd"].includes(this.adType)&&e.videoData){var g=e.videoData,y=g.currentTime,m=g.duration;(y||m)&&(d.video_play_time=y,d.video_duration=m)}if("grid"===this.adType)if("exposure"===e.reportType){var b={viewid:[],s_pt:[],s_aid:[],s_trace_id:[]};null===(i=this.datas)||void 0===i||i.forEach((function(e){e.extBackComm&&b.viewid.push(e.extBackComm.viewid),b.s_pt.push(e.pt),b.s_aid.push(e.aid),b.s_trace_id.push(e.traceid)})),l.box_ad_exposure={report_mode:1,box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:JSON.stringify({viewid:b.viewid}),s_trace_id:JSON.stringify(b.s_trace_id),s_aid:JSON.stringify(b.s_aid),s_pt:JSON.stringify(b.s_pt)}}else if("click"===e.reportType){var _=e.clickAdIndex||0;d.box_ad_click={box_size:this.slotData.gridCount,box_used_cnt:this.slotData.gridCount,box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)||100,viewid:null===(o=this.data.extBackComm)||void 0===o?void 0:o.viewid,box_index:_}}return{extExposureComm:l,extClickComm:d}}},{key:"reportExpOrClk",value:function(e){var t=this,n=3;if("exposure"===e.reportType?(n={showed:2,viewable:5,incentiveVideoCard:14}[e.exposureType],"showed"===e.exposureType?this.adProxy.setTimePoint("p6"):"viewable"===e.exposureType&&this.adProxy.setTimePoint("p7"),this.adProxy.reportAnalyseInfo(e.exposureType)):"click"===e.reportType&&this.adProxy.setTimePoint("p10"),"exposure"===e.reportType&&e.multiList&&e.isMulti){var a=this.adProxy.adDataIndex;e.multiList.forEach((function(e){t.adProxy.setCurrentData(e),Object(J.invokeMethod)("adDataReport",{adInfo:t.adProxy.getTransmissionChainData({logtype:n})})})),this.adProxy.setCurrentData(a)}else Object(J.invokeMethod)("adDataReport",{adInfo:this.adProxy.getTransmissionChainData({logtype:n})});var r=this.getExtraExpOrClkData(e),i=r.extExposureComm,o=r.extClickComm,s=this.getExpOrClkCommonArgs(e),c="click"===e.reportType?{click_point:JSON.stringify({x:e.clickAbsoluteLeft,y:e.clickAbsoluteTop}),press_interval:e.pressInterval,pos_x:e.clickRelativeLeft,pos_y:e.clickRelativeTop,click_pos:0,ext_click_comm:JSON.stringify(o)}:{exposure_type:w.REPORT_EXPOSURE_TYPE_MAP[e.exposureType],ext_exposure_comm:JSON.stringify(i)};return Object(v.operateWXData)({apiName:"advert_report",reqData:Object.assign(Object.assign(Object.assign({},s),c),{report_type:w.REPORT_TYPE_MAP[e.reportType],weapp_extra_data:JSON.stringify(s.weapp_extra_data),ad_group_id:s.advert_group_id,apurl:this.data.apurl,rl:this.data.rl,weapp_ghid:s.weapp_gh_id})})}},{key:"getExpOrClkCommonArgs",value:function(e){var t;return{advert_group_id:this.data.group_id,trace_id:this.data.traceid,pos_id:w.POS_ID_MAP[this.adType],pos_type:w.AD_TYPE_MAP[this.adType],sdk_version:N.deviceInfo.SDKVersion,ad_w:e.width,ad_h:e.height,aid:this.data.aid,weapp_gh_id:(null===(t=this.data.weapp_info)||void 0===t?void 0:t.original_id)||"",pt:this.data.pt,screen_cnt:1,from_h5:0,from_game:1,wegame_start_ts:N.deviceInfo.startTime.valueOf(),wegame_enter_ts:N.appRouteInfo.enterForegroundTime.valueOf(),wegame_user_duration:N.appRouteInfo.gameDuration+(Date.now()-N.appRouteInfo.enterForegroundTime.getTime()),wxa_report_detail:this.getWxaReportDetail({left:e.left,top:e.top}),weapp_extra_data:Object.assign(Object.assign({},this.getWeappExtraData()),e.weappExtraData||{})}}},{key:"reportClick",value:function(e){var t=this;return this.lastClickTime=+new Date,this.reportExpOrClk(Object.assign({reportType:"click"},e)).catch((function(e){throw t.reportAdMonitorData(Za.IDKEY.CLICK_REPORT_ERROR,e),e}))}},{key:"reportExposure",value:function(e){var t=this;return"showed"===e.exposureType&&this.adProxy.checkPreloadH5Page(),this.lastExposureTime=+new Date,this.reportExpOrClk(Object.assign({reportType:"exposure"},e)).catch((function(e){throw t.reportAdMonitorData(Za.IDKEY.EXPOSURE_REPORT_ERROR,e),e}))}},{key:"reportFlooringPage",value:function(e,t){var n={aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:N.deviceInfo.gameAppId,orig_weapp_id:this.pluginAppid?N.deviceInfo.gameAppId:""},a=null==t?void 0:t.map((function(e){return Object.assign(Object.assign({},n),e)})),r={};return 1===e?r.rewared_video_ending_page_a=a:2===e&&(r.rewared_video_ending_page_b=a),Object(v.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(r)}})}},{key:"reportAntifraud",value:function(e){var t=Object.assign(Object.assign({},e),{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,publisher_appid:this.pluginAppid?this.pluginAppid:N.deviceInfo.gameAppId,orig_weapp_id:this.pluginAppid?N.deviceInfo.gameAppId:"",network_type:N.deviceInfo.adNetworkType,wechat_version:N.deviceInfo.wechatVersion,platform:N.deviceInfo.platform,system_version:N.deviceInfo.systemVersion,device_orientation:N.deviceInfo.deviceOrientation,wxapp_lib_version:N.deviceInfo.SDKVersion,crt_size:this.data.crt_size,product_type:this.data.product_type,adunitid:this.adUnitId,machine_brand:N.deviceInfo.brand||"",machine_type:N.deviceInfo.model||"",clientimptime:this.lastAdReqTs}),n={};return n.antifraud_table_screen_report=[t],Object(v.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(n)}})}},{key:"reportVideo",value:function(e){var t=e.playType,n=e.conditionType,a=e.muted,r=e.playDuration,i=e.videoDuration,o=e.rewardedTime,s=e.isRewarded,c=Object(v.operateWXData)({apiName:"webapi_advideo_report",reqData:{aid:parseInt(this.data.aid,10),traceid:this.data.traceid,trace_id:this.data.traceid,viewid:this.data.wx_game_video.short_video.viewid,video_play_info:{play_type:{unknown:0,complete:1,partial:2,error:3}[t],play_duration:r-this.lastVideoReportTime,video_duration:i,auto_play:!0,muted:a,rewarded_time:o&&Math.min(o,i),is_rewarded:s},report_type:{unknown:0,land:1,end:2,start:3,exit:4,close:5}[n]}});return this.lastVideoReportTime=r,c}},{key:"getWxaReportDetail",value:function(e){var t=e.top,n=void 0===t?0:t,a=e.left,r=void 0===a?0:a;return{page_x:r||0,page_y:n||0,screen_x:r||0,screen_y:n||0,ad_number:ur-1,ad_unit_number:lr.size,ad_index:this.index,page_enter_time:N.appRouteInfo.enterForegroundTime.valueOf(),phone_screen_width:N.deviceInfo.screenWidth,phone_screen_height:N.deviceInfo.screenHeight}}},{key:"getWeappExtraData",value:function(){var e,t;return{weixin_version:N.deviceInfo.wechatVersion,os_version:N.deviceInfo.systemVersion,machine_brand:N.deviceInfo.brand||"",machine_type:N.deviceInfo.model,network_type:N.deviceInfo.adNetworkType,start_ts:N.deviceInfo.startTime.valueOf(),enter_ts:N.appRouteInfo.enterForegroundTime.valueOf(),user_duration:N.appRouteInfo.gameDuration+(Date.now()-N.appRouteInfo.enterForegroundTime.getTime()),imp_time:this.lastAdReqTs,exp_time:this.lastExposureTime,clk_time:this.lastClickTime,env:null===(e=f.default.host)||void 0===e?void 0:e.env,app_appid:null===(t=f.default.host)||void 0===t?void 0:t.appId}}},{key:"composeExposureCommonInfo",value:function(e){var t,n=e.top,a=void 0===n?0:n,r=e.left,i=void 0===r?0:r,o=e.width,s=void 0===o?0:o,c=e.height,u=void 0===c?0:c,l=e.adType,d=void 0===l?"incentive-video":l;try{t=this.data.weapp_info.original_id}catch(e){}var f=Object.assign({},Object(N.getIndentityInfo)()),p=this.getWeappExtraData(),h=this.getWxaReportDetail({top:a,left:i}),v={report_type:0,pos_id:w.POS_ID_MAP[this.adType],sdk_version:N.deviceInfo.SDKVersion,aid:this.data.aid,traceid:this.data.traceid,trace_id:this.data.traceid,ad_group_id:this.data.group_id,weapp_ghid:t,rl:this.data.rl,pt:this.data.pt,screen_cnt:1,ad_w:s,ad_h:u,from_game:1,from_h5:0,wegame_start_ts:N.deviceInfo.startTime.valueOf(),wegame_enter_ts:N.appRouteInfo.enterForegroundTime.valueOf(),wegame_user_duration:N.appRouteInfo.gameDuration+(Date.now()-N.appRouteInfo.enterForegroundTime.getTime()),pos_type:w.AD_TYPE_MAP[d],wxa_report_detail:h,weapp_extra_data:JSON.stringify(p),ext_exposure_comm:JSON.stringify(f)};return JSON.stringify(v)}},{key:"reportInstallFollow",value:function(e){var t=this.data.condition;t&&1===t.widget_gray_report_install_follow&&Object(v.operateWXData)({apiName:"advert_report",reqData:{report_action:"comm_real_report",report_data_json:JSON.stringify(e)}})}},{key:"reportAnalyseDebugInfo",value:function(e){var t=this,n=w.ANALYSE_INFO_DEBUG_TYPE[this.adType];return n||this.reportAdMonitorData(Za.IDKEY.ANALYSE_DEBUG_REPORT_ERROR,new Error("invalid reportType "+this.adType)),Object(v.operateWXData)({apiName:"webapi_reportbranchanalyticsfordebugtool",reqData:{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:n}]}}).catch((function(e){t.reportAdMonitorData(Za.IDKEY.ANALYSE_DEBUG_REPORT_ERROR,e)}))}}]),e}();function fr(e){return{appId:e.weapp_info&&e.weapp_info.appid,appType:46==e.product_type?1004:1e3,path:e.url,openRate:e.extBackComm&&e.extBackComm.pctr||0}}sr([k(),cr("design:type",Function),cr("design:paramtypes",[]),cr("design:returntype",void 0)],dr.prototype,"getLastClickTime",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[]),cr("design:returntype",void 0)],dr.prototype,"getLastAdReqTs",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Number]),cr("design:returntype",void 0)],dr.prototype,"setLastExposureTime",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Number]),cr("design:returntype",void 0)],dr.prototype,"setLastClickTime",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Number]),cr("design:returntype",void 0)],dr.prototype,"setLastAdReqTs",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",void 0)],dr.prototype,"reportFollow",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",void 0)],dr.prototype,"getExpOrClkCommonArgs",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",void 0)],dr.prototype,"reportClick",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",void 0)],dr.prototype,"reportExposure",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object,Array]),cr("design:returntype",void 0)],dr.prototype,"reportFlooringPage",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",void 0)],dr.prototype,"reportAntifraud",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",void 0)],dr.prototype,"reportVideo",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",Object)],dr.prototype,"getWxaReportDetail",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",void 0)],dr.prototype,"composeExposureCommonInfo",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",void 0)],dr.prototype,"reportInstallFollow",null),sr([k(),cr("design:type",Function),cr("design:paramtypes",[Object]),cr("design:returntype",void 0)],dr.prototype,"reportAnalyseDebugInfo",null);var pr=function(e,t,n,a){var r,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":Object(s.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(i<3?r(o):i>3?r(t,n,o):r(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},hr=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(s.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},vr=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))},gr=function(){function e(t){Object(i.default)(this,e),this.adProxy=t,this.isAppInstalled=!1}return Object(o.default)(e,[{key:"adType",get:function(){return this.adProxy.getAdType()}},{key:"data",get:function(){return this.adProxy.data}},{key:"datas",get:function(){return this.adProxy.datas}},{key:"reportAdMonitorData",get:function(){return this.adProxy.reportAdMonitorData}},{key:"isValidCondition",get:function(){return this.adProxy.isValidCondition}},{key:"getFullRl",value:function(){var e=this.data.rl;try{/viewid=([^&]+)/.test(e)||(-1===e.indexOf("?")?e+="?viewid="+this.data.extBackComm.viewid:e+="&viewid="+this.data.extBackComm.viewid)}catch(e){}return e}},{key:"getFollowPageUrl",value:function(e,t){var n={source:4,tid:e.traceid,pt:e.pt,aid:e.aid,ad_engine:e.is_cpm?1:0,pos_type:e.pos_type,jsapi_scene:N.deviceInfo.isWaGame?147:140};return Object(j.addUrlParam)(t,n)}},{key:"isPrefetch",value:function(e){var t,n,a,r,i,o,s,c,u={url:this.data.url,jump_url:this.data.button_action.jump_url,playable_url:null===(r=null===(a=null===(n=null===(t=this.data.crtInfo)||void 0===t?void 0:t[0])||void 0===n?void 0:n.wxgame_video_card)||void 0===a?void 0:a.flooring_page)||void 0===r?void 0:r.page_url}[e],l={url:this.data.dest_type===fn.DEST_TYPE_OUTER,jump_url:(null===(i=this.data.button_action)||void 0===i?void 0:i.jump_type)===fn.DEST_TYPE_OUTER,playable_url:!0}[e];return u&&l&&Boolean(null===(c=null===(s=null===(o=this.data)||void 0===o?void 0:o.extBackComm)||void 0===s?void 0:s.material_handler_info)||void 0===c?void 0:c.h5_preload_info[e])}},{key:"getTransmissionChainData",value:function(e){var t=e.logtype,n=void 0===t?3:t,a={traceid:this.data.traceid,trace_id:this.data.traceid,product_type:this.data.pt,jump_url:encodeURIComponent(this.data.url),rl:encodeURIComponent(this.getFullRl()),logtype:n};return Object.keys(a).map((function(e){return e+"="+a[e]})).join("&")}},{key:"setAppInstallState",value:function(e){this.isAppInstalled=e}},{key:"land",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.isButton,a=void 0!==n&&n;return vr(this,void 0,void 0,u.a.mark((function t(){var n,r,i,o,s,c,l,d,f,p,h,y,m,b,_,O,I,S=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.data,r=n.dest_type,i=n.product_type,o=n.url,s={isButton:a},!a){t.next=44;break}if(this.isPrefetch("jump_url")&&this.adProxy.reportAdMonitorData(Za.IDKEY.H5_PRELOAD_BUTTON_CLICKED),c=this.data.button_action,l=c.jump_type,d=c.jump_url,i!==Ka.IOS){t.next=7;break}return t.abrupt("return",this.openAppStore());case 7:if(i!==Ka.WE_CHAT){t.next=41;break}if(f=this.data.biz_info,p=f.user_name,!f.is_subscribed){t.next=13;break}if(10!==l){t.next=12;break}return t.abrupt("return",this.landPage(l,o,s));case 12:return t.abrupt("return",Object(v.openUrl)({url:this.getFollowPageUrl(this.data,d),adInfo:this.getTransmissionChainData({logtype:3})}));case 13:return t.prev=13,t.next=16,this.adProxy.addContact({username:p,isWaGame:N.deviceInfo.isWaGame});case 16:h=t.sent,y=this.data,m=y.ext_info,b=y.uxinfo;try{_=JSON.parse(m)}catch(e){}if(!(/ok|added/.test(h.errMsg)&&_&&_.guide_group_id&&b)){t.next=30;break}return t.prev=21,t.next=24,Object(g.bindGuideGroup)({guide_group_id:_.guide_group_id,uxinfo:b});case 24:this.adProxy.reportAdIDKey({key:Za.IDKEY.BIND_GUIDE_SUCCESS}),t.next=30;break;case 27:t.prev=27,t.t0=t.catch(21),this.reportAdMonitorData(Za.IDKEY.BIND_GUIDE_ERROR,t.t0);case 30:return t.abrupt("return",h);case 33:if(t.prev=33,t.t1=t.catch(13),!/cancel/.test(t.t1.errMsg)){t.next=37;break}return t.abrupt("return",t.t1);case 37:throw this.reportAdMonitorData(Za.IDKEY.ADD_CONTACT_ERROR,t.t1),t.t1;case 39:t.next=42;break;case 41:return t.abrupt("return",this.landPage(l,d,s));case 42:t.next=54;break;case 44:if(this.isPrefetch("url")&&this.adProxy.reportAdMonitorData(Za.IDKEY.H5_PRELOAD_CARD_CLICKED),!([12,19].indexOf(i)>-1)){t.next=53;break}if(O=this.data.app_info.url_scheme,N.deviceInfo.isIOS&&(I=JSON.stringify({aid:this.data.aid,ad_uid:null===(e=this.data.extBackComm)||void 0===e?void 0:e.uid,scene_id:4001})),!(O&&O.trim().length>0)){t.next=52;break}if(!N.deviceInfo.isAndroid||this.isAppInstalled){t.next=51;break}return t.abrupt("return",this.landPage(r,o,s));case 51:return t.abrupt("return",this.adProxy.launchApplication({schemeUrl:O,isIosDirect:N.deviceInfo.isIOS,appInfo:this.data.app_info,extraData:I}).catch((function(){return S.landPage(r,o,s)})));case 52:case 53:return t.abrupt("return",this.landPage(r,o,s));case 54:case"end":return t.stop()}}),t,this,[[13,33],[21,27]])})))}},{key:"landPage",value:function(e,t,n){var a,r=this;if(e===fn.DEST_TYPE_APPDETAIL&&N.deviceInfo.isIOS){var i=this.data.app_info.appinfo_url,o=JSON.stringify({aid:this.data.aid,ad_uid:null===(a=this.data.extBackComm)||void 0===a?void 0:a.uid,scene_id:4001});return this.adProxy.launchApplication({schemeUrl:i,extraData:o}).catch((function(){return Object(v.openUrl)({url:i,adInfo:r.getTransmissionChainData({logtype:3})}).catch((function(e){throw r.reportAdMonitorData(Za.IDKEY.OPEN_URL_ERROR,e),e}))}))}if(e===fn.DEST_TYPE_BIZ)return Object(v.openUrl)({url:this.getFollowPageUrl(this.data,t),adInfo:this.getTransmissionChainData({logtype:3})}).catch((function(e){throw r.reportAdMonitorData(Za.IDKEY.OPEN_URL_ERROR,e),e}));if(e===fn.DEST_TYPE_WECHAT_APPLET){var s=this.data,c=s.weapp_info.appid,u=s.traceid,l=s.aid,d=s.uxinfo;return Object(v.navigateToMiniProgram)({appId:c,path:t,traceid:u,aid:l,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:d}).catch((function(e){throw r.reportAdMonitorData(Za.IDKEY.OPEN_WXAPP_ERROR,e),e}))}if(e===fn.DEST_TYPE_CANVAS){var f=this.data,p=f.canvas_info,h=f.pos_type;return Object(v.openADCanvas)({canvasInfo:p,posType:h}).catch((function(e){throw r.reportAdMonitorData(Za.IDKEY.OPEN_CANVAS_ERROR,e),e}))}if(10===e){var g=this.data.biz_info.user_name;return this.adProxy.openProfile({username:g}).catch((function(e){throw e}))}return e===fn.DEST_TYPE_CHANNELS?this.jumpChannels("activity",n):e===fn.DEST_TYPE_CHANNELS_LIVE?this.jumpChannels("live",n):e===fn.DEST_TYPE_CHANNELS_USER_PROFILE?this.jumpChannels("userProfile",n):Object(v.openUrl)({url:t,adInfo:this.getTransmissionChainData({logtype:3}),adUxInfo:this.data.uxinfo}).catch((function(e){throw r.reportAdMonitorData(Za.IDKEY.OPEN_URL_ERROR,e),e}))}},{key:"getChannelsExtraInfo",value:function(e){return JSON.stringify({sns_ad:{uxinfo:this.data.uxinfo||"",snsid:"",scene:e}}).replace(/,/g,";")}},{key:"jumpChannels",value:function(e,t){var n,a=t.isButton;return vr(this,void 0,void 0,u.a.mark((function t(){var r,i,o,s,c,l,d,f,p;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=null===(n=this.data)||void 0===n?void 0:n.extBackComm.channels_info,i=this.data,o=i.crt_size,s=i.apurl,c=i.rl,l={feedId:r.id,nonceId:r.nonce_id,finderUserName:r.username,reportExtraInfo:this.getChannelsExtraInfo(a?ir.ACTIONBUTTON:ir.RESOURCE)},d={activity:Za.IDKEY.OPEN_CHANNELS_ACTIVITY_SUCCESS,live:Za.IDKEY.OPEN_CHANNELS_LIVE_SUCCESS,userProfile:Za.IDKEY.OPEN_CHANNELS_USER_PROFILE_SUCCESS}[e],f={activity:Za.IDKEY.OPEN_CHANNELS_ACTIVITY_FAILED,live:Za.IDKEY.OPEN_CHANNELS_LIVE_FAILED,userProfile:Za.IDKEY.OPEN_CHANNELS_USER_PROFILE_FAILED}[e],!r){t.next=38;break}if("activity"!==e||o!==za.CRT_SIZE_REWARD_LANDINGPAGE){t.next=18;break}return t.prev=7,t.next=10,this.adProxy.openChannelsRewardedVideoAd(Object.assign(Object.assign({},l),{expReportLink:s,clkReportLink:c,reportInfo:this.adProxy.getExpOrClkCommonArgs({top:0,left:0,width:N.deviceInfo.screenWidth,height:N.deviceInfo.screenHeight}),clickPosMap:{follow:Ja.MMOCAD_CLICKPOS_BIZ_FOLLOW,like:Ja.MMOCAD_CLICKPOS_BIZ_LIKE,comment:Ja.MMOCAD_CLICKPOS_BIZ_COMMENT,headimage:Ja.MMOCAD_CLICKPOS_BIZ_HEADIMAGE,nickname:Ja.MMOCAD_CLICKPOS_BIZ_NICKNAME,forward:Ja.MMOCAD_CLICKPOS_BIZ_MATERIAL_FORWARD},feedbackUrl:this.getFeedbackUrl(N.deviceInfo.isWaGame?1003:1005)}));case 10:return p=t.sent,this.reportAdMonitorData(d),t.abrupt("return",p);case 15:t.prev=15,t.t0=t.catch(7),this.reportAdMonitorData(f,t.t0);case 18:t.prev=18,t.t1=e,t.next="activity"===t.t1?22:"live"===t.t1?25:"userProfile"===t.t1?28:31;break;case 22:return t.next=24,this.adProxy.openChannelsRewardedVideoAd(Object.assign(Object.assign({},l),{adJSAPIType:1}));case 24:return t.abrupt("break",31);case 25:return t.next=27,this.adProxy.openChannelsLive(l);case 27:return t.abrupt("break",31);case 28:return t.next=30,this.adProxy.openChannelsUserProfile(l);case 30:return t.abrupt("break",31);case 31:return this.reportAdMonitorData(d),t.abrupt("return");case 35:t.prev=35,t.t2=t.catch(18),this.reportAdMonitorData(f,t.t2);case 38:return this.reportAdMonitorData(f,new Error("channelsInfo is empty")),t.abrupt("return");case 40:case"end":return t.stop()}}),t,this,[[7,15],[18,35]])})))}},{key:"openAppStore",value:function(){var e,t=this,n=this.data.app_info,a=n.appinfo_url,r=n.url_scheme,i=JSON.stringify({aid:this.data.aid,ad_uid:null===(e=this.data.extBackComm)||void 0===e?void 0:e.uid,scene_id:4001});return r&&r.trim().length>0?this.adProxy.launchApplication({schemeUrl:r,isIosDirect:!0,appInfo:this.data.app_info,extraData:i}).catch((function(){return t.adProxy.launchApplication({schemeUrl:a,extraData:i}).catch((function(){return Object(v.openUrl)({url:a,adInfo:t.getTransmissionChainData({logtype:3})}).catch((function(e){throw t.reportAdMonitorData(Za.IDKEY.OPEN_URL_ERROR,e),e}))}))})):this.adProxy.launchApplication({schemeUrl:a,extraData:i}).catch((function(){return Object(v.openUrl)({url:a,adInfo:t.getTransmissionChainData({logtype:3})}).catch((function(e){throw t.reportAdMonitorData(Za.IDKEY.OPEN_URL_ERROR,e),e}))}))}},{key:"preloadLanding",value:function(){var e=this;try{if(6===this.data.dest_type){var t=[],n=[];if("grid"===this.adType?this.datas.forEach((function(e){var a;(null===(a=e.weapp_info)||void 0===a?void 0:a.appid)&&(t.push(e.weapp_info.appid),n.push(fr(e)))})):(t=[this.data.weapp_info.appid],n.push(fr(this.data))),Object(J.invokeMethod)("batchGetContact",{appIds:t}),N.deviceInfo.isAndroid)this.isValidCondition("widget_gray_batchload_app")&&Object(J.invokeMethod)("batchPreloadMiniProgram",{openParams:{visitScene:N.appRouteInfo.currentScene,businessScene:1,innerScene:1095},preloadList:n,success:function(t){e.reportAdMonitorData(Za.IDKEY.BATCHLOAD_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(Za.IDKEY.BATCHLOAD_ERROR,t)}});else if(N.deviceInfo.isIOS){var a="app";this.data.product_type===Ka.MINI_GAME&&(a="game"),this.isValidCondition("widget_gray_preload_env")&&(N.deviceInfo.isAndroid||"app"===a)&&Object(J.invokeMethod)("preloadMiniProgramEnv",{type:a,success:function(t){e.reportAdMonitorData(Za.IDKEY.PRELOAD_MINIENV_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(Za.IDKEY.PRELOAD_MINIENV_ERROR,t)}}),this.isValidCondition("widget_gray_predownload_app")&&Object(J.invokeMethod)("predownloadMiniProgramPackage",{username:this.data.weapp_info.original_id+"@app",path:this.data.url,scene:1,success:function(t){e.reportAdMonitorData(Za.IDKEY.PREDOWNLOAD_SUCCESS,t)},fail:function(t){e.reportAdMonitorData(Za.IDKEY.PREDOWNLOAD_ERROR,t)}})}}}catch(e){}}},{key:"checkFollow",value:function(e){return vr(this,void 0,void 0,u.a.mark((function t(){var n,a;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(v.operateWXData)({apiName:"webapi_checkcontact",reqData:{biz_uin:e}});case 2:return n=t.sent,a=n.rawData,t.abrupt("return",1===JSON.parse(a).is_subscribed);case 5:case"end":return t.stop()}}),t)})))}},{key:"getFeedbackUrl",value:function(e){var t=this.data.material_id_list||[],n=encodeURIComponent("["+t.toString()+"]")||"",a=Object(j.addUrlParam)("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html#wechat_redirect",{aid:this.data.aid,traceid:this.data.traceid,source:e,material_id:n||"",machine_type:N.deviceInfo.model,publisher_appid:N.deviceInfo.gameAppId});if("grid"===this.adType){var r=[],i=[],o=[];this.datas.forEach((function(e){r.push(e.traceid),i.push(e.material_id_list||[]),o.push(e.aid)}));var s={traceid:JSON.stringify(r),source:e,aid:JSON.stringify(o),material_id:JSON.stringify(i),machine_type:N.deviceInfo.model,publisher_appid:N.deviceInfo.gameAppId};a=Object(j.addUrlParam)("https://mp.weixin.qq.com/promotion/res/htmledition/mobile/html/feedback.html?ismulity=1#wechat_redirect",s)}return a}},{key:"openFeedbackUrl",value:function(e){var t=this.getFeedbackUrl(e);return Object(v.openUrl)({url:t})}},{key:"checkPreloadH5Page",value:function(){var e,t,n,a,r;return vr(this,void 0,void 0,u.a.mark((function i(){var o,s,c,l,d;return u.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(o=new Set,s=this.data.url,c=null===(e=this.data.button_action)||void 0===e?void 0:e.jump_url,l=null===(r=null===(a=null===(n=null===(t=this.data.crtInfo)||void 0===t?void 0:t[0])||void 0===n?void 0:n.wxgame_video_card)||void 0===a?void 0:a.flooring_page)||void 0===r?void 0:r.page_url,this.isPrefetch("url")&&("1"!==Object(j.getQueryString)(s).prefetch&&(s=Object(j.addUrlParam)(s,{prefetch:1}),this.data.url=s),o.add(s)),this.isPrefetch("jump_url")&&("1"!==Object(j.getQueryString)(c).prefetch&&(c=Object(j.addUrlParam)(c,{prefetch:1}),this.data.button_action.jump_url=c),o.add(c)),this.isPrefetch("playable_url")&&("1"!==Object(j.getQueryString)(l).prefetch&&(l=Object(j.addUrlParam)(l,{prefetch:1}),this.data.crtInfo[0].wxgame_video_card.flooring_page.page_url=l),o.add(l)),!(d=Object(Q.default)(o).map((function(e){return{url:e,bizScene:or}}))).length){i.next=18;break}return i.prev=9,i.next=12,this.adProxy.preloadH5Page({urlList:d});case 12:this.reportAdMonitorData(Za.IDKEY.H5_PRELOAD_SUCCESS),i.next=18;break;case 15:i.prev=15,i.t0=i.catch(9),this.reportAdMonitorData(Za.IDKEY.H5_PRELOAD_FAILED,i.t0);case 18:case"end":return i.stop()}}),i,this,[[9,15]])})))}}]),e}();pr([k(),hr("design:type",Function),hr("design:paramtypes",[String]),hr("design:returntype",void 0)],gr.prototype,"isPrefetch",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[Object]),hr("design:returntype",void 0)],gr.prototype,"getTransmissionChainData",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[Boolean]),hr("design:returntype",void 0)],gr.prototype,"setAppInstallState",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[Object]),hr("design:returntype",Promise)],gr.prototype,"land",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[Number,String,Object]),hr("design:returntype",void 0)],gr.prototype,"landPage",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[Number]),hr("design:returntype",void 0)],gr.prototype,"getChannelsExtraInfo",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[]),hr("design:returntype",void 0)],gr.prototype,"openAppStore",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[]),hr("design:returntype",void 0)],gr.prototype,"preloadLanding",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[Number]),hr("design:returntype",Promise)],gr.prototype,"checkFollow",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[Number]),hr("design:returntype",void 0)],gr.prototype,"getFeedbackUrl",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[Number]),hr("design:returntype",void 0)],gr.prototype,"openFeedbackUrl",null),pr([k(),hr("design:type",Function),hr("design:paramtypes",[]),hr("design:returntype",Promise)],gr.prototype,"checkPreloadH5Page",null);var yr=n(85),mr=n(25),br=Object(mr.default)("getChannelsLiveInfo","webapi_getfinderviewlastlive",{},{},(function(e){return{export_id:e.feedId,finder_username:e.finderUserName}}),(function(e){e.live_info&&e.live_info.length&&(e.feedId=e.live_info[0].export_id,e.nonceId=e.live_info[0].nonce_id,e.description=e.live_info[0].description,e.status=e.live_info[0].status,e.headUrl=e.live_info[0].head_url,e.nickname=e.live_info[0].nickname),delete e.live_info,delete e.rawData}));n(39);var _r=function(e,t,n,a){var r,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":Object(s.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(i<3?r(o):i>3?r(t,n,o):r(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},Or=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(s.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},Ir=__safeway__.apiSign.makeApiSign,Sr=function(e){return function(t){return new Promise((function(n,a){e(Object.assign({},t,{success:n,fail:a}))}))}},Er=function(e,t,n){var a,r,i;e.errMsg=e.errMsg||t+":ok";var o=0===e.errMsg.indexOf(t+":ok"),s=0===e.errMsg.indexOf(t+":fail");o?null===(a=null==n?void 0:n.success)||void 0===a||a.call(n,e):s&&(null===(r=null==n?void 0:n.fail)||void 0===r||r.call(n,e)),null===(i=null==n?void 0:n.complete)||void 0===i||i.call(n,e)},wr=function(e){var t=e.username,n=e.success,a=e.fail,r=e.complete;Object(J.invokeMethod)("profile",{username:t,scene:75,success:n,fail:a,complete:r})},Cr=function(e){var t=e.username,n=e.isWaGame,a=e.success,r=e.fail,i=e.complete;Object(J.invokeMethod)("private_addContact",{username:t,scene:n?146:139,webtype:1,success:a,fail:r,complete:i})},kr=function(e){var t=e.schemeUrl,n=e.isIosDirect,a=e.appInfo,r=e.extraData,i=e.success,o=e.fail,s=e.complete,c={};n&&(c.appId=a.app_id,c.installSchemeUrl=a.appinfo_url,c.installAction=0),r&&(c.extraData=r),Object(J.invokeMethod)("launchApplication",Object.assign(c,{schemeUrl:t,operateDirectly:1,success:i,fail:o,complete:s}))},Tr=function(e){var t=e.appUrl,n=e.success,a=e.fail,r=e.complete,i=Ir("downloadAppInternal",{appUrl:t,operateDirectly:1,success:n,fail:a,complete:r});Object(J.invokeMethod)("downloadAppInternal",i)},Ar=function(e){var t=e.packageName,n=e.success,a=e.fail,r=e.complete,i=Ir("getInstallState",{packageName:t,permissionBytes:[1,1,1],success:n,fail:a,complete:r});Object(J.invokeMethod)("getInstallState",i)},Pr=function(e){var t=e.downloadId,n=e.success,a=e.fail,r=e.complete;Object(J.invokeMethod)("queryDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:a,complete:r})},Dr=function(e){var t=e.downloadId,n=e.success,a=e.fail,r=e.complete;Object(J.invokeMethod)("pauseDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:a,complete:r})},xr=function(e){var t=e.downloadId,n=e.success,a=e.fail,r=e.complete;Object(J.invokeMethod)("resumeDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:a,complete:r})},Rr=function(e){var t=e.downloadId,n=e.success,a=e.fail,r=e.complete,i=Ir("installDownloadTask",{downloadId:t,permissionBytes:[1,1,1],success:n,fail:a,complete:r});Object(J.invokeMethod)("installDownloadTask",i)},jr=function(e){var t=e.isHide,n=e.success,a=e.fail,r=e.complete;Object(J.invokeMethod)("setNavigationBarRightButton",{hide:t,success:n,fail:a,complete:r})},Mr=function(e){var t=e.isHide,n=e.success,a=e.fail,r=e.complete;Object(J.invokeMethod)("private_setNavigationBarRightButton",{hide:t,success:n,fail:a,complete:r})},Nr=function(e){var t=e.resources,n=e.success,a=e.fail,r=e.complete;Object(J.invokeMethod)("loadVideoResource",{resources:t,success:n,fail:a,complete:r})},Lr=function(e){var t=e.orientation,n=e.success,a=e.fail,r=e.complete;Object(J.invokeMethod)("private_setPageOrientation",{orientation:t,success:n,fail:a,complete:r})},Br=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,a=e.complete;Object(J.invokeMethod)("hideVirtualBottomNavigationBar",{success:t,fail:n,complete:a})},Fr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,a=e.complete;Object(J.invokeMethod)("showVirtualBottomNavigationBar",{success:t,fail:n,complete:a})},Wr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,a=e.complete;Object(J.invokeMethod)("showStatusBar",{success:t,fail:n,complete:a})},Vr=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,a=e.complete;Object(J.invokeMethod)("hideStatusBar",{success:t,fail:n,complete:a})},Ur=function(e){var t=e.success,n=e.fail,a=e.complete,r=e.feedId,i=e.nonceId,o=e.finderUserName,s=e.reportExtraInfo;Object(yr.invoke)("openChannelsActivity",{feedId:r,nonceId:i,finderUserName:o,reportExtraInfo:s,permissionBytes:[1,1,1]},(function(e){Er(e,"openChannelsActivity",{success:t,fail:n,complete:a})}))},Gr=function(e){var t=e.success,n=e.fail,a=e.complete,r=e.feedId,i=e.nonceId,o=e.finderUserName,s=e.reportExtraInfo;Object(yr.invoke)("openChannelsLive",{feedId:r,nonceId:i,finderUserName:o,reportExtraInfo:s,permissionBytes:[1,1,1]},(function(e){Er(e,"openChannelsLive",{success:t,fail:n,complete:a})}))},Hr=function(e){var t=e.success,n=e.fail,a=e.complete,r=e.finderUserName,i=e.reportExtraInfo;Object(yr.invoke)("openChannelsUserProfile",{finderUserName:r,reportExtraInfo:i,permissionBytes:[1,1,1]},(function(e){Er(e,"openChannelsUserProfile",{success:t,fail:n,complete:a})}))},Yr=function(e){var t=e.success,n=e.fail,a=e.complete,r=e.feedId,i=e.nonceId,o=e.finderUserName,s=e.reportExtraInfo,c=e.adJSAPIType,u=e.expReportLink,l=e.clkReportLink,d=e.reportInfo,f=e.clickPosMap,p=e.feedbackUrl;Object(J.invokeMethod)("openChannelsRewardedVideoAd",{feedId:r,nonceId:i,finderUserName:o,reportExtraInfo:s,adJSAPIType:c,expReportLink:u,clkReportLink:l,reportInfo:d,clickPosMap:f,feedbackUrl:p,success:t,fail:n,complete:a})},qr=function(e){var t=e.mixWithOther,n=void 0===t||t,a=e.obeyMuteSwitch,r=void 0===a||a,i=e.success,o=e.fail,s=e.complete;Object(J.invokeMethod)("setInnerAudioOption",{mixWithOther:n,obeyMuteSwitch:r,success:i,fail:o,complete:s})},zr=function(e){var t=e.urlList,n=e.success,a=e.fail,r=e.complete;Object(J.invokeMethod)("private_onWebPageUrlExposed",{urlList:t,success:n,fail:a,complete:r})},Kr=Sr((function(e){var t=e.taskName,n=e.taskUrl,a=e.fileMd5,r=e.extInfo,i=e.success,o=e.fail,s=e.complete,c=Ir("addDownloadTaskStraight",{taskName:t,taskUrl:n,fileMd5:a,extInfo:r,permissionBytes:[1,1,1],success:i,fail:o,complete:s});Object(J.invokeMethod)("addDownloadTaskStraight",c)})),Xr=Object(o.default)((function e(){var t=this;Object(i.default)(this,e),this.setNavigationBarRightButton=Sr(jr),this.setMiniProgramNavigationBarRightButton=Sr(Mr),this.hideVirtualBottomNavigationBar=Sr(Br),this.showVirtualBottomNavigationBar=Sr(Fr),this.showStatusBar=Sr(Wr),this.hideStatusBar=Sr(Vr),this.openProfile=Sr(wr),this.addContact=Sr(Cr),this.downloadAppInternal=Sr(Tr),this.openChannelsActivity=Sr(Ur),this.openChannelsRewardedVideoAd=Sr(Yr),this.openChannelsLive=Sr(Gr),this.openChannelsUserProfile=Sr(Hr),this.getChannelsLiveInfo=Sr(br),this.getNetworkType=Sr(Re.getNetworkType),this.preloadH5Page=Sr(zr),this.innerPreloadVideo=Sr(Nr),this.preloadVideo=function(e){return t.innerPreloadVideo({resources:e})},this.innerLaunchApplication=Sr(kr),this.launchApplication=function(e){var n="string"==typeof e?{schemeUrl:e}:e;return t.innerLaunchApplication(n)},this.innerGetInstallState=Sr(Ar),this.getInstallState=function(e){return t.innerGetInstallState({packageName:e})},this.innerQueryDownloadTask=Sr(Pr),this.queryDownloadTask=function(e){return t.innerQueryDownloadTask({downloadId:e})},this.innerPauseDownloadTask=Sr(Dr),this.pauseDownloadTask=function(e){return t.innerPauseDownloadTask({downloadId:e})},this.innerResumeDownloadTask=Sr(xr),this.resumeDownloadTask=function(e){return t.innerResumeDownloadTask({downloadId:e})},this.innerInstallDownloadTask=Sr(Rr),this.installDownloadTask=function(e){return t.innerInstallDownloadTask({downloadId:e})},this.innerSetPageOrientation=Sr(Lr),this.setPageOrientation=function(e){return t.innerSetPageOrientation({orientation:e})},this.innerSetInnerAudioOption=Sr(qr),this.setInnerAudioOption=function(e,n){return t.innerSetInnerAudioOption({mixWithOther:e,obeyMuteSwitch:n})}}));function Zr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Jr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jr(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}_r([k(),Or("design:type",Object)],Xr.prototype,"setNavigationBarRightButton",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"setMiniProgramNavigationBarRightButton",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"hideVirtualBottomNavigationBar",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"showVirtualBottomNavigationBar",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"showStatusBar",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"hideStatusBar",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"openProfile",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"addContact",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"downloadAppInternal",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"openChannelsActivity",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"openChannelsRewardedVideoAd",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"openChannelsLive",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"openChannelsUserProfile",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"getChannelsLiveInfo",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"getNetworkType",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"preloadH5Page",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"preloadVideo",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"launchApplication",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"getInstallState",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"queryDownloadTask",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"pauseDownloadTask",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"resumeDownloadTask",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"installDownloadTask",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"setPageOrientation",void 0),_r([k(),Or("design:type",Object)],Xr.prototype,"setInnerAudioOption",void 0);var Qr,$r=function(e,t,n,a){var r,i=arguments.length,o=i<3?t:null===a?a=Object.getOwnPropertyDescriptor(t,n):a;if("object"===("undefined"==typeof Reflect?"undefined":Object(s.default)(Reflect))&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,a);else for(var c=e.length-1;c>=0;c--)(r=e[c])&&(o=(i<3?r(o):i>3?r(t,n,o):r(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},ei=function(e,t){if("object"===("undefined"==typeof Reflect?"undefined":Object(s.default)(Reflect))&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},ti=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))},ni=!1,ai=function(){function e(t){var n=this,a=t.adUnitId,r=t.adType,o=t.pluginAppid,s=void 0===o?"":o;Object(i.default)(this,e),this.slotData={},this.lastAdRetCode=0,this.limitAdReqTime=3e4,this.fetchPromise=null,this.webviewId=N.appRouteInfo.currentWebviewId,this.fetchRetryCount=0,this.isCanvasXmlHook=!1,this.handledInNewFetch=!1,this.nativeMethodInvoker=new Xr,this.datas=[],this.data={},this.convertedAdData=null,this.isMulti=!1,this.isViewable=!1,this.adDataIndex=0,this.scene=0,"splashAd"!==r&&Object(N.proxyReady)(),this.adUnitId=a,this.adType=r,this.pluginAppid=N.deviceInfo.isWaGame?"":s,this.mmReporter=new qa(this),this.cgiReporter=new dr(this),this.lander=new gr(this),this.bindProxyMethods(),this.setTimePoint("p1"),Object(I.onWxAdUserCaptureScreen)((function(e){if(e.webviewId===N.appRouteInfo.currentWebviewId&&n.data&&n.isViewable){var t=n.data.uxinfo;Object(y.reportUserCaptureScreen)({eventTimeStamp:e.eventTimeStamp?e.eventTimeStamp:+new Date,scene:4,uxinfo:t,url:e.path?e.path:"index.html"})}}))}return Object(o.default)(e,[{key:"bindProxyMethods",value:function(){for(var e=this,t=[this.nativeMethodInvoker,this.mmReporter,this.cgiReporter,this.lander],n=function(){var t,n=r[a],i=Zr(Object(j.getMembers)(n));try{var o=function(){var a,r,i,o=t.value;r=o,(null===(i=(a=n)&&a[C])||void 0===i?void 0:i.has(r))&&(e[o]=function(){return n[o].apply(n,arguments)})};for(i.s();!(t=i.n()).done;)o()}catch(e){i.e(e)}finally{i.f()}},a=0,r=t;a<r.length;a++)n()}},{key:"isLimitRequest",value:function(){return 0!==this.lastAdRetCode&&+new Date-this.getLastAdReqTs()<this.limitAdReqTime}},{key:"convertTestAdData",value:function(e){var t,n;try{var a=Object(j.cloneDeep)(e),r=JSON.parse(a.crt_exp_info);if(a.crtExpInfo=r,1002===r.exp_type){if(null===(t=a.wx_game_video)||void 0===t?void 0:t.wxgame_video_card){var i=JSON.parse(r.exp_data);a.wx_game_video.wxgame_video_card.flooring_page=i}}else if(1001===r.exp_type){a.profile_exp=!0;var o=r.exp_data&&"string"==typeof r.exp_data?JSON.parse(r.exp_data):r.exp_data;a.dest_type=o.dest_type;var s={};if(a.button_action)try{s=JSON.parse(e.button_action)}catch(e){}s.jump_type=o.jump_type,a.button_action=JSON.stringify(s)}else if(105===r.exp_type)a.ad_style_data=r.exp_data;else if(106===r.exp_type){var c=r.exp_data&&"string"==typeof r.exp_data?JSON.parse(r.exp_data):r.exp_data;Object(j.mergeDeep)(a,c),a.common_exp=!0}else if(r.exp_type&&[108,109,2001].includes(r.exp_type))a.ad_dynamic_list=r.exp_data;else if(r.crt_size&&[za.CRT_SIZE_WX_APPLICATION_NEW,za.CRT_SIZE_WX_APPLICATION_X].includes(r.crt_size)){if(a.crt_size=r.crt_size,a.ad_width=r.width,a.material_width=r.width,a.ad_height=r.height,a.material_height=r.height,a.image_url=r.image_url,r.dest_url&&a.url&&[1,3,6].includes(a.dest_type)){var u=Object(j.getQueryString)(a.url),l={};u.weixinadkey&&(l.weixinadkey=u.weixinadkey),u.ticket&&(l.ticket=u.ticket),u.gdt_vid&&(l.gdt_vid=u.gdt_vid),u.weixinadinfo&&(l.weixinadinfo=u.weixinadinfo),a.url=Object(j.addUrlParam)(r.dest_url,l)}a.watermark_text=r.watermark||""}else r.landpage_type&&(null===(n=a.wx_game_video)||void 0===n?void 0:n.wxgame_video_card)&&(a.wx_game_video.wxgame_video_card.flooring_page=r);return a}catch(t){return e}}},{key:"getFetchArgs",value:function(e){var t,n,a=e.isAdInterval,r={scene_type:N.appRouteInfo.currentScene,ad_unit_id:this.adUnitId,appid:this.pluginAppid?this.pluginAppid:N.deviceInfo.gameAppId,orig_weapp_id:this.pluginAppid?N.deviceInfo.gameAppId:"",weapp_path:N.appRouteInfo.weappPath,pos_id:"",network_type:N.deviceInfo.adNetworkType,orientation:{landscape:1,portrait:2}[N.deviceInfo.deviceOrientation],sdk_version:N.deviceInfo.SDKVersion,ext_slot_custom_comm:"",weapp_extra_data:JSON.stringify({wxa_start_ts:N.deviceInfo.startTime.valueOf(),wxa_enter_ts:N.appRouteInfo.enterForegroundTime.valueOf(),weixin_version:N.deviceInfo.wechatVersion,os_version:N.deviceInfo.systemVersion,machine_type:N.deviceInfo.model,is_ad_interval:!!a,env:null===(t=f.default.host)||void 0===t?void 0:t.env,app_appid:null===(n=f.default.host)||void 0===n?void 0:n.appId})};r.pos_id=w.POS_ID_MAP[this.adType];var i={};return"grid"===this.adType?i.box_slot_ad={count:String(this.slotData.gridCount),box_bg_color:"black"===this.slotData.adTheme?"232323":"FFFFFF",box_opacity:Math.floor(100*this.slotData.gridOpacity)}:"splashAd"===this.adType?(i.splash_ad={count:String(5)},delete r.appid):"customAd"===this.adType&&(i={is_adunit_tmpl:!0}),Object(p.isIn3rdApp)()&&(i.in_3rd_app=1),r.ext_slot_custom_comm=JSON.stringify(i),r}},{key:"validateFetchEnv",value:function(){if(Object(p.isIn3rdApp)()&&this.reportAdMonitorData(Za.IDKEY.THIRD_ERROR),"splashAd"!==this.adType&&!this.adUnitId)throw{errMsg:"no ad unit id"};if(this.isLimitRequest())throw{errMsg:"no advertisement",errCode:this.lastAdRetCode}}},{key:"validateFetchRes",value:function(e){if("-12001"===e.err_code)throw this.lastAdRetCode=e.err_code,{errMsg:"no permission",errCode:-12001};if(this.lastAdRetCode=e.ret,!e.advertisement_num||e.advertisement_num<=0)throw{errMsg:"no advertisement",errCode:e.ret};if(!e.advertisement_info)throw e}},{key:"validateCrtSize",value:function(e){var t=e.pt,n=e.crt_size,a=er.includes(t),r=tr.includes(n);if(!a&&!r){if(n&&!r)throw{errMsg:"unexpected advertisement crt_size "+n};throw{errMsg:"unexpected advertisement type "+t}}}},{key:"handleAdDataDone",value:function(){this.reportAdMonitorData(Za.IDKEY.AD_FETCH_SUCCESS)}},{key:"handleAdDataError",value:function(e){this.reportAdMonitorData(Za.IDKEY.AD_FETCH_SUCCESS,e)}},{key:"handleWaidForList",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n={};if(t.length<1)return Promise.resolve(n);var a=[];return null==t||t.forEach((function(e){a.push(Object(h.getWaid)(e.apkName).then((function(t){return Object.assign(Object.assign({},t),{aid:e.aid})})))})),Promise.race([Promise.all(a).then((function(e){return e.forEach((function(e){var t=e.waid,a=e.aid,r=void 0===a?"":a;t&&r&&(n[r]=t)})),n})).catch((function(t){return e.reportAdMonitorData(Za.IDKEY.READ_ADINFOS_ERROR,t),n})),Object(S.timeout)(2e3).then((function(){return n}))])}},{key:"handleBulkSaveMaterials",value:function(e){var t=[];return this.isSplashAd()&&this.data&&(t=this.getSplashAdMaterialList(e)),t.length>0?Object(E.bulkSaveMaterials)(t):Promise.resolve()}},{key:"getSplashAdMaterialList",value:function(e){var t,n,a=[],r=(null==e?void 0:e.crtInfo[0])||{},i=e.rerankingExtInfo.material_hash||"",o=(null==r?void 0:r.image_url)||"",s=(null===(t=null==r?void 0:r.card_info)||void 0===t?void 0:t.pure_color_url)||"",c=(null===(n=null==r?void 0:r.card_info)||void 0===n?void 0:n.material_blur_url)||"",u=w.WX_AD_PATH+"/"+e.aid+"_"+i+".png";if(i&&a.push({url:o,fileName:e.aid+"_"+i+".png",filePath:u}),s){var l=w.WX_AD_PATH+"/"+e.aid+"_"+i+"_pure_color.png";i&&a.push({url:s,fileName:e.aid+"_"+i+"_pure_color.png",filePath:l})}if(c){var d=w.WX_AD_PATH+"/"+e.aid+"_"+i+"_blur.png";i&&a.push({url:c,fileName:e.aid+"_"+i+"_blur.png",filePath:d})}return a}},{key:"handleAdInfosIndexCache",value:function(e,t,n){return ti(this,void 0,void 0,u.a.mark((function a(){var r,i;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,this.handleWaidForList(e);case 3:r=a.sent,a.next=8;break;case 6:a.prev=6,a.t0=a.catch(0);case 8:return t.deviceInfo=Object(N.getIndentityInfo)(),t.waidMap=r,this.reportAdMonitorData(Za.IDKEY.READ_ADINFOS_SUCCESS,{adInfos:t}),a.prev=11,a.next=14,Object(E.saveAdDataToFile)(t,n);case 14:return a.abrupt("return",this.reportAdMonitorData(Za.SPLASHAD_IDKEY.WRITE_ADINFOS_SUCCESS,{adInfos:t}));case 17:return a.prev=17,a.t1=a.catch(11),i=a.t1 instanceof Error?this.processStackMsg(a.t1):a.t1,a.abrupt("return",this.reportAdMonitorData(Za.SPLASHAD_IDKEY.WRITE_ADINFOS_FAIL,{adInfos:t,errMsg:i}));case 21:case"end":return a.stop()}}),a,this,[[0,6],[11,17]])})))}},{key:"handleSplashAd",value:function(e){return ti(this,void 0,void 0,u.a.mark((function t(){var n,a,i,o,s,c,l,d,f,p,h,v,g,y=this;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return this.reportAdMonitorData(Za.SPLASHAD_IDKEY.dataLoadSuccess),a=0,i=[],o=[],s=[],c=Object(S.getTodayFormat)(),l=c+"_exposure_times",d=w.WX_AD_PATH+"/adinfos.txt",n={slot_id:w.POS_ID_MAP[this.adType],ads:[],crtSizeMap:{},materialHashMap:{},total_exposure_times:0},Object(r.default)(n,l,0),Object(r.default)(n,"requestInQueue","true"),Object(r.default)(n,"totalSizeUsed",0),f=n,t.next=11,Object(E.getCacheDataInfo)(w.WX_AD_PATH);case 11:return p=t.sent,f.totalSizeUsed=p.totalSize,h=p.outedDateFileList||[],20971520,h=h.length<21&&p.totalSize>20971520?p.fileList:h,t.prev=16,t.next=19,Object(E.removeOutdatedData)(w.WX_AD_PATH,h);case 19:t.next=24;break;case 21:t.prev=21,t.t0=t.catch(16),this.reportAdMonitorData(Za.SPLASHAD_IDKEY.removeFileDataFail,t.t0);case 24:t.prev=24,v=e.advertisement_info.length>0&&e.advertisement_info.map((function(e,t){var n,r,c={},u=y.handleAdData(e),d=u.rerankingExtInfo.material_hash||"";c.material_hash=u.rerankingExtInfo.material_hash||"",c.tid=u.rerankingExtInfo.tid.toString()||"",c.aid=u.aid,c.trace_id=u.traceid,f.ads.push(c),f.total_exposure_times=u.rerankingExtInfo.total_exposure_times||0,f[l]=u.rerankingExtInfo[l]||0;var p=null===(n=u.condition)||void 0===n?void 0:n.widget_gray_splash_data_channel_parallel;f.requestInQueue=p?"false":"true",f.materialHashMap[u.aid]=d;var h=u.crtInfo[0]||{};u.crtInfo&&(f.crtSizeMap[u.aid]=h.width>h.height?"landscape":"portrait");var v=y.getSplashAdMaterialList(u);o=o.concat(v),a+=0===t?v.length:0;var g=w.WX_AD_PATH+"/"+u.aid+".txt";if(i.push(Object(E.saveAdDataToFile)(u,g)),u.product_type===Ka.ANDROID){var m=null===(r=u.appInfo)||void 0===r?void 0:r.apkName;s.push({apkName:m,aid:u.aid})}return u})),this.datas=v,t.next=33;break;case 29:throw t.prev=29,t.t1=t.catch(24),this.reportAdMonitorData(Za.SPLASHAD_IDKEY.handleDataFail,t.t1),t.t1;case 33:return g=o.slice(0,a),t.next=36,Object(E.bulkSaveMaterials)(g);case 36:return i.push(Object(E.bulkSaveMaterials)(o)),i.push(this.handleAdInfosIndexCache(s,f,d)),Promise.all(i).then((function(){return y.reportAdMonitorData(Za.SPLASHAD_IDKEY.dataPreloadSuccess)})).catch((function(e){throw y.reportAdMonitorData(Za.SPLASHAD_IDKEY.dataPreloadFail,e),e})),t.abrupt("return",this.datas[0]);case 40:case"end":return t.stop()}}),t,this,[[16,21],[24,29]])})))}},{key:"handleCustomAd",value:function(e){var t=this,n=e.advertisement_info.map((function(e,n){var a,r,i,o=function(e){if(0===n)throw e},s=null,c=t.handleAdData(e),u=c.crtInfo,l=c.button_action,d=c.product_type,f=c.dest_type,p=c.crt_size;if(c.reranking_ext_info&&c.reranking_ext_info.refresh_time)i=c.reranking_ext_info.refresh_time;else if(c.reranking_ext_info&&"string"==typeof c.reranking_ext_info)try{var h=JSON.parse(c.reranking_ext_info);h.refresh_time&&(i=h.refresh_time)}catch(e){}if(null===(a=null==c?void 0:c.extBackComm)||void 0===a?void 0:a.tmpl_info)try{var v=JSON.parse(c.extBackComm.tmpl_info);s=JSON.parse(v.tmpl_content),r=Number(c.extBackComm.sub_templ_id)}catch(e){t.reportAdMonitorData(Za.CUSTOMAD_IDKEY.TPL_PARSE_FAILED),o({errMsg:"custom template error",errCode:w.CUSTOMAD_ERROR_CODE.ERR_TPL_PARSE})}else t.reportAdMonitorData(Za.CUSTOMAD_IDKEY.TPL_LOAD_FAILED),o({errMsg:"no custom template",errCode:w.CUSTOMAD_ERROR_CODE.ERR_TPL_NONE});return Object.assign(Object.assign({},e),{crtInfo:u,button_action:l,product_type:d,dest_type:f,crt_size:p,condition:c.condition,template:s,subTemplId:r,refreshTime:i,aid:c.aid,app:c.app,appInfo:c.appInfo,extBackComm:c.extBackComm,wording:c.hint_txt,card_info:c.card_info,video_info:c.video_info,image_url:c.image_url,weapp_info:c.weapp_info,wx_game_video:c.wx_game_video})}));return this.reportAdMonitorData(Za.CUSTOMAD_IDKEY.LOAD_SUCCESS),n.length>1?this.isMulti=!0:this.isMulti=!1,this.datas=n,this.setCurrentData(0),n[0]}},{key:"handleGridAd",value:function(e){var t=this;if(e.advertisement_info.length!==this.slotData.gridCount)throw this.reportAdMonitorData(Za.IDKEY.AD_GRID_LOAD_COUNT_ERROR,{count:this.slotData.gridCount,getCount:e.advertisement_info.length}),{errMsg:"no advertisement count error",errCode:e.ret};var n=e.advertisement_info.map((function(e,n){var a=t.handleAdData(e);return a._isGrid=!0,a._gridInfo={row:5===t.slotData.gridCount?1:2,column:5===t.slotData.gridCount?5:4,index:n},a}));this.datas=n,this.setCurrentData(0),this.fetchRetryCount=0;var a,r=Zr(this.datas);try{for(r.s();!(a=r.n()).done;){var i=a.value;if(i.crt_size!==za.CRT_SIZE_MULTI_POS_GRID)throw{errMsg:"unexpected advertisement crt_size "+i.crt_size}}}catch(e){r.e(e)}finally{r.f()}return this.reportAdMonitorData(Za.IDKEY.AD_GRID_LOAD_SUCCESS),this.datas}},{key:"handleInterstitialAd",value:function(e){var t=JSON.parse(e.image_url),n=Object.assign(Object.assign({},t[0]||{}),Object(j.pick)(e,["crtInfo","product_type","dest_type","crt_size","button_action","condition","app","appInfo"]));if(e.crt_size===za.CRT_SIZE_INSERT_VIDEO){var a="0",r=decodeURIComponent(this.data.apurl);/viewid=([^&]+)/.test(r)&&(a=RegExp.$1),this.data.wx_game_video={short_video:{viewid:a}}}return this.convertedAdData=n,n}},{key:"handleRewardedVideoAd",value:function(e){var t,n,r,i;e.crt_size===za.CRT_SIZE_REWARD_LANDINGPAGE&&this.handleRewardedLandingPage(e);var o=this.data.crtInfo&&Array.isArray(this.data.crtInfo)?this.data.crtInfo:[];0===o.length&&o.push({wxgame_video_card:{}});var s=Object(a.default)(o,1)[0],c=s.wxgame_video_card,u=c.head_bg_img,l=c.mp_tag_type,d=s.wxgame_gauss_video,f=e.canvas_info,p=e.wx_game_video,h=p.short_video,v=p.wxgame_video_card,g=v.show_time,y=v.thumb,m=v.title,b=v.desc,_=v.flooring_page,O=30;if(e.reranking_ext_info&&e.reranking_ext_info.rewarded_time)O=e.reranking_ext_info.rewarded_time;else if(e.reranking_ext_info&&"string"==typeof e.reranking_ext_info)try{var I=JSON.parse(e.reranking_ext_info);I.rewarded_time&&(O=I.rewarded_time)}catch(e){}O=Math.floor(1e3*O),_&&[3,4].indexOf(_.landpage_type)>-1&&(this.data.isPlayable=!0);var S=Object.assign({crtInfo:o[0],canvas_info:f,type:Qa[e.pt],shortVideo:this.mapRewardVideoFields(h),gaussVideo:d?this.mapRewardVideoFields(Object.assign(Object.assign({},d),{video_duration:d.video_duration_ms})):null,rewardedTime:O,card:{icon:y,name:m,wording:b,headBgImg:u,mpTagType:l,showTime:g},flooringPage:_},Object(j.pick)(e,["crt_size","product_type","dest_type","button_action","condition","app","appInfo"]));this.convertedAdData=S;var E=Ba(S),w=Wa(S);return this.reportRewardGaussVideo({useGaussVideo:E,useExpandStyle:w,expUseGaussVideo:null!==(n=null===(t=e.condition)||void 0===t?void 0:t.widget_gray_reward_use_gauss_blur)&&void 0!==n?n:0,expUseExpandStyle:1,videoUrl:null!==(r=null==h?void 0:h.video_url)&&void 0!==r?r:"",gaussVideoUrl:null!==(i=null==d?void 0:d.video_url)&&void 0!==i?i:""}),(null==d?void 0:d.video_url)&&this.reportAdMonitorData(Za.IDKEY.REWARD_GAUSS_EXISTS),E&&w?this.reportAdMonitorData(Za.IDKEY.REWARD_USE_GAUSS_AND_EXPAND_STYLE):E?this.reportAdMonitorData(Za.IDKEY.REWARD_USE_GAUSS):w&&this.reportAdMonitorData(Za.IDKEY.REWARD_USE_EXPAND_STYLE),S}},{key:"mapRewardVideoFields",value:function(e){return{poster:e.thumb_url,src:e.video_url,duration:e.video_duration,width:e.thumb_width,height:e.thumb_height}}},{key:"handleRewardedLandingPage",value:function(e){var t,n=N.deviceInfo.isAndroid&&f.default.clientVersion>=654315008||N.deviceInfo.isIOS&&f.default.clientVersion>=385879552;if((null===(t=this.data.condition)||void 0===t?void 0:t.widget_gray_rewardedpage_exposure_v2)&&n)try{var a=e.canvas_info,r=d()(a.ad_info_xml).root,i=Object(S.getAdDataViewId)(e),o=this.composeExposureCommonInfo({top:0,left:0,width:N.deviceInfo.screenWidth,height:N.deviceInfo.screenHeight});r.children.push({name:"viewid",children:[],attributes:{},content:i},{name:"commInfo",children:[],attributes:{},content:o});var s=O(r,!0);this.data.canvas_info.ad_info_xml=s,this.isCanvasXmlHook=!0}catch(e){this.isCanvasXmlHook=!1}}},{key:"handleBannerAd",value:function(e){var t,n,a=e.pt,r=e.crt_size,i=e.image_url,o=e.material_width,s=e.material_height,c=e.ad_width,u=e.ad_height,l=e.use_style_data,d=e.hint_txt,f=e.watermark_type,p=Qa[a];l?(t=c,n=u):[za.CRT_SIZE_WX_APPLICATION,za.CRT_SIZE_WX_APPLICATION_NEW,za.CRT_SIZE_WX_APPLICATION_X].includes(r)?(t=(c||o)/2,n=(u||s)/2):r===za.CRT_SIZE_WX_APPLICATION_CARD&&(t=c,n=u);var h=Object.assign({type:p,crt_size:r,useStyleData:l,watermark:$a[f],width:t,height:n,image:{src:i,width:o,height:s},wording:d},Object(j.pick)(e,["ad_style_data","product_type","dest_type","button_action","watermark_text","condition","app","appInfo"]));return this.convertedAdData=h,h}},{key:"extractJson",value:function(e,t,n,a){var r=null!=n?n:t;if(e[r]&&"string"==typeof e[r])try{e[t]=JSON.parse(e[r])}catch(n){e[t]=null!=a?a:{}}else null!=a&&(e[t]=a)}},{key:"buildWechatInfo",value:function(e){if(e.product_type===Ka.WE_CHAT){var t=e.biz_appid,n=e.biz_info,a=n.nick_name,r=n.is_subscribed;return{icon:n.head_img,nickname:a,uin:n.biz_uin,isFollowed:r,biz_appid:t}}return{}}},{key:"buildAppInfo",value:function(e){var t=e.product_type;if([Ka.ANDROID,Ka.IOS].includes(t)){var n=e.app_info;return{appName:n.app_name,apkName:n.apk_name,apkUrl:n.apk_url,appMd5:n.app_md5,iconUrl:n.icon_url,urlScheme:n.url_scheme,versionCode:n.version_code,channelId:n.channel_id,desc:n.desc}}return{}}},{key:"handleAdData",value:function(e){var t,n=this;if(0===Object.keys(e).length)throw{errMsg:"unexpected adData"};var a=e.crt_exp_tid&&e.crt_exp_info?this.convertTestAdData(e):Object(j.cloneDeep)(e),r=a;if(a.crt_size&&(r.crt_size=Number(a.crt_size)),this.extractJson(r,"crtInfo","crt_info"),this.extractJson(r,"extBackComm","ext_back_comm"),this.extractJson(r,"button_action","button_action",{}),this.extractJson(r,"adStyleData","ad_style_data",""),this.extractJson(r,"rerankingExtInfo","reranking_ext_info",""),this.extractJson(r,"extInfo","ext_info"),this.extractJson(r,"adDynamicList","ad_dynamic_list"),a.flow_exp_info&&!this.isSplashAd())try{r.condition=Object(g.getWidgetGrayCondition)(a.flow_exp_info),this.handleSplashAdFetchLog(r.condition)}catch(e){}if(r.adStyleData&&[za.CRT_SIZE_REWARD_VEDIO169,za.CRT_SIZE_REWARD_VEDIO916,za.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(r.crt_size)){r.use_style_data=!0;var i=r.adStyleData;a.ad_width=i.width,a.ad_height=i.height,i.widgets.forEach((function(e){var t=a.button_action;4===e.type&&(t.button_text=e.title,t.jump_type=e.dest_type||t.jump_type,t.jump_url=e.dest_url||t.jump_url)}))}else this.validateCrtSize(r);var o=a.button_action;if(o.button_text=o.button_text||"查看",a.watermark_text=a.watermark_text||"去逛逛",18001===(null===(t=null==r?void 0:r.extInfo)||void 0===t?void 0:t.page_type)){var s={gdt_vid:a.traceid||"",uxinfo:a.uxinfo||"",ad_token:a.ad_token||"",rl:a.rl||""};a.url=Object(j.addUrlParam)(a.url,s)}var c=this.buildWechatInfo(r),u=this.buildAppInfo(r);return a.product_type===Ka.ANDROID&&Object(h.getWaid)(u.apkName).then((function(e){var t=e.waid;r.waid=t,n.reportAdMonitorData(Za.IDKEY.GET_WAID_SUCCESS)})).catch((function(e){n.reportAdMonitorData(Za.IDKEY.GET_WAID_ERROR,e)})),Object.assign(Object.assign({},r),{app:c,appInfo:u})}},{key:"handleSplashAdFetchLog",value:function(e){this.handledInNewFetch||(this.handledInNewFetch=!0,Object(E.handleSplashAdFetchLog)(e))}},{key:"handleOperateWXData",value:function(e){var t={apiName:"webapi_getadvert",reqData:e,requestInQueue:!1};return this.isSplashAd()?Object(v.adOperateWXData)(t):Object(v.operateWXData)(t)}},{key:"processFetch",value:function(e,t){return ti(this,void 0,void 0,u.a.mark((function n(){var a,r,i,o,s,c;return u.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(this.validateFetchEnv(),!(Object.keys(t).length>0)){n.next=5;break}Object(N.loadDeviceInfoByManual)(t),n.next=11;break;case 5:return N.deviceInfo.deviceOrientation=Object(N.getDeviceOrientation)(),n.next=8,this.getNetworkType();case 8:a=n.sent,r=a.networkType,N.deviceInfo.adNetworkType=r;case 11:return i=this.getFetchArgs({isAdInterval:e}),this.setLastAdReqTs(+new Date),this.setLastExposureTime(0),this.setLastClickTime(0),this.setTimePoint("p2"),n.prev=16,n.next=19,this.handleOperateWXData(i);case 19:if(o=n.sent,this.fetchPromise=null,this.fetchRetryCount=0,this.handledInNewFetch=!1,this.setTimePoint("p3"),o=JSON.parse(o.rawData),this.validateFetchRes(o),!this.isSplashAd()){n.next=28;break}return n.abrupt("return",this.handleSplashAd(o));case 28:if(!this.isGridAd()){n.next=30;break}return n.abrupt("return",this.handleGridAd(o));case 30:if(!this.isCustomAd()){n.next=32;break}return n.abrupt("return",this.handleCustomAd(o));case 32:if(s=this.handleAdData(o.advertisement_info[0]),this.data=s,this.checkDuplicateRecommendedAds(s.product_type,s.app,s.appInfo),!this.isInterstitialAd(s)){n.next=37;break}return n.abrupt("return",this.handleInterstitialAd(s));case 37:if(!this.isRewardedVideoAd(s)){n.next=39;break}return n.abrupt("return",this.handleRewardedVideoAd(s));case 39:return n.abrupt("return",this.handleBannerAd(s));case 42:n.prev=42,n.t0=n.catch(16),c="";try{c=JSON.parse(n.t0).errMsg}catch(e){}if(this.fetchPromise=null,!(0===c.indexOf("getAdData:fail")&&this.fetchRetryCount<1)){n.next=50;break}return this.fetchRetryCount+=1,n.abrupt("return",this.fetch(e));case 50:throw this.isBannerAd()?this.reportAdMonitorData(Za.IDKEY.AD_BANNER_LOAD_ERROR,n.t0):this.isRewardedVideoAd()?this.reportAdMonitorData(Za.IDKEY.AD_VIDEO_LOAD_ERROR,n.t0):this.isInterstitialAd()?this.reportAdMonitorData(Za.IDKEY.AD_INTERSTITIAL_LOAD_ERROR,n.t0):this.isGridAd()?this.reportAdMonitorData(Za.IDKEY.AD_GRID_LOAD_ERROR,n.t0):this.isCustomAd()?this.reportAdMonitorData(Za.CUSTOMAD_IDKEY.LOAD_FAILED,n.t0):this.isSplashAd()&&this.reportAdMonitorData(Za.SPLASHAD_IDKEY.dataLoadFail,n.t0),n.t0;case 52:case"end":return n.stop()}}),n,this,[[16,42]])})))}},{key:"checkDuplicateRecommendedAds",value:function(e,t,n){return ti(this,void 0,void 0,u.a.mark((function a(){var r,i,o,s,c,l,d,f,p,h,v,g,y;return u.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return r=[],i="0",o=decodeURIComponent(this.data.apurl),/viewid=([^&]+)/.test(o)&&(i=RegExp.$1),s={conv_status:r},c={},a.next=8,N.deviceInfoLoaded;case 8:if(l=a.sent,d=l.imei,f=l.idfa,p={viewid:i,app_status:0,follow_status:0,imei:d,idfa:f},e!==Ka.WE_CHAT){a.next=20;break}if(c.ad_type=1,c.ad_id=t.biz_appid,p.follow_status=t.isFollowed?2:1,!t.isFollowed){a.next=18;break}return a.abrupt("return",this.reportAdMonitorData(Za.IDKEY.AD_FOLLOWED,{adInfo:c}));case 18:a.next=37;break;case 20:if(e!==Ka.ANDROID){a.next=37;break}return h=n.apkName,v=n.versionCode,a.prev=22,a.next=25,this.getInstallState(h);case 25:g=a.sent,y=g.isInstalled&&(void 0===g.versionCode||g.versionCode>=v),c.ad_type=2,c.ad_id=h,p.app_status=y?2:1,y&&this.reportAdMonitorData(Za.IDKEY.AD_INSTALLED,{adInfo:c}),a.next=37;break;case 33:a.prev=33,a.t0=a.catch(22),p.app_status=0,Reporter.reportIDKey({key:"adGetInstallState_fail",force:!0});case 37:r.push(p),this.reportInstallFollow(s);case 39:case"end":return a.stop()}}),a,this,[[22,33]])})))}},{key:"getAdType",value:function(){return this.adType}},{key:"getAdUnitId",value:function(){return this.adUnitId}},{key:"getPluginAppid",value:function(){return this.pluginAppid}},{key:"getSlotData",value:function(){return this.slotData}},{key:"getDeviceInfo",value:function(){return N.deviceInfo}},{key:"isBannerAd",value:function(){return"banner"===this.adType}},{key:"isRewardedVideoAd",value:function(e){return"incentive-video"===this.adType&&(!e||[za.CRT_SIZE_REWARD_VEDIO169,za.CRT_SIZE_REWARD_VEDIO916,za.CRT_SIZE_VERTICAL_VIDEO_NEW_916,za.CRT_SIZE_REWARD_LANDINGPAGE].includes(e.crt_size))}},{key:"isInterstitialAd",value:function(e){return"interstitialAd"===this.adType&&(!e||[za.CRT_SIZE_TABLE_SCREEN_IMAGE,za.CRT_SIZE_INSERT_VIDEO].includes(e.crt_size))}},{key:"isGridAd",value:function(){return"grid"===this.adType}},{key:"isCustomAd",value:function(){return"customAd"===this.adType}},{key:"isSplashAd",value:function(){return"splashAd"===this.adType}},{key:"getProgramStartTime",value:function(){return N.deviceInfo.startTime}},{key:"getWebviewInfo",value:function(){return{createWebviewId:this.webviewId,lastWebviewId:N.appRouteInfo.lastWebviewId,currentWebviewId:N.appRouteInfo.currentWebviewId,openType:N.appRouteInfo.currentOpenType}}},{key:"setSlotData",value:function(e){this.slotData=Object.assign(this.slotData,e||{})}},{key:"reset",value:function(){this.adDataIndex=0,this.cgiReporter.reset()}},{key:"fetch",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.fetchPromise||(this.fetchPromise=this.processFetch(e,t)),this.fetchPromise}},{key:"setRightButtonHide",value:function(e){var t=this,n=function(){return N.deviceInfo.isWaGame?t.setNavigationBarRightButton({isHide:e}):t.setMiniProgramNavigationBarRightButton({isHide:e})};return n().catch((function(a){return t.reportAdMonitorData(Za.IDKEY.RIGHTBUTTON_HIDE_ERROR,{retryCount:0,isHide:e,message:t.processStackMsg(a)}),n().catch((function(n){throw t.reportAdMonitorData(Za.IDKEY.RIGHTBUTTON_HIDE_ERROR,{retryCount:1,isHide:e,message:t.processStackMsg(n)}),n}))}))}},{key:"addDownloadTaskStraight",value:function(e,t,n,a){var r=this;return Kr({taskName:e,taskUrl:t,fileMd5:n,extInfo:a}).catch((function(e){return r.reportAdMonitorData(Za.IDKEY.ADD_DOWNLOAD_TASK_ERROR,e),Promise.reject(e)}))}},{key:"operateFullscreen",value:function(e){if(!e)return Promise.reject();var t=[this.setRightButtonHide("hide"===e)];return N.deviceInfo.isWaGame||t.push("hide"===e?this.hideStatusBar():this.showStatusBar()),!N.deviceInfo.isWaGame&&N.deviceInfo.isAndroid&&t.push("hide"===e?this.hideVirtualBottomNavigationBar():this.showVirtualBottomNavigationBar()),Promise.all(t)}},{key:"isTriggerClick",value:function(e){var t=e.absoluteX,n=e.absoluteY,a=e.absoluteEndX,r=e.absoluteEndY,i=e.pressInterval,o=!1;return Math.abs(r-n)<30&&Math.abs(a-t)<30&&i<300&&(o=!0),o}},{key:"isValidCondition",value:function(e){return!!(e&&this.data&&this.data.condition)&&(this.data.condition[e]||void 0===this.data.condition[e])}},{key:"setCurrentData",value:function(e){var t;this.adDataIndex=e,(null===(t=this.datas)||void 0===t?void 0:t[e])&&(this.data=this.datas[e])}},{key:"checkCanvasXmlState",value:function(){return this.isCanvasXmlHook}},{key:"handleRewardedVideoPlayableLand",value:function(e,t){var n,a,r=null===(a=null===(n=null==this?void 0:this.data)||void 0===n?void 0:n.extBackComm)||void 0===a?void 0:a.uid,i={};4===t?i.xj_scene=6:(i.gdt_vid=this.data.traceid||"",i.uxinfo=this.data.uxinfo||"",i.reward=1),i.rl=this.data.rl||"",i.ad_token=this.data.ad_token||"",N.deviceInfo.isIOS&&(i.uid=r||"");var o=Object(j.addUrlParam)(e,i);return this.isPrefetch("playable_url")&&this.reportAdMonitorData(Za.IDKEY.H5_PRELOAD_BUTTON_CLICKED),Object(v.openUrl)({url:o})}},{key:"setDeviceInfo",value:function(e){Object.assign(N.deviceInfo,e)}},{key:"setSplashAdShowStatus",value:function(){ni=!0}},{key:"getSplashAdShowStatus",value:function(){return ni}},{key:"getChannelsLiveStatus",value:function(){return ti(this,void 0,void 0,u.a.mark((function e(){var t,n,a,r,i,o,s,c,l,d;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.data,n=t.dest_type,a=t.extBackComm,r=a.channels_info,i=a.live_video_mode,o=a.live_video_sub_mode,r&&null!=i&&null!=o){e.next=3;break}return e.abrupt("return","none");case 3:if(!Object(j.isLiveRoomMode)(i,o)||n!==fn.DEST_TYPE_CHANNELS_LIVE){e.next=30;break}if(s=r.id,c=r.username,s&&c){e.next=7;break}return e.abrupt("return","none");case 7:return e.prev=7,e.next=10,this.getChannelsLiveInfo({feedId:s,finderUserName:c});case 10:if(l=e.sent,d=l.status,![rr.NONE,rr.IN_PREPARE].includes(d)){e.next=16;break}return e.abrupt("return","none");case 16:if(d!==rr.ON_AIR){e.next=20;break}return e.abrupt("return","onlive");case 20:if(d!==rr.ENDED){e.next=22;break}return e.abrupt("return","end");case 22:this.reportAdIDKey({key:Za.IDKEY.GET_CHANNELS_LIVE_STATUS_SUCCESS}),e.next=28;break;case 25:e.prev=25,e.t0=e.catch(7),this.reportAdMonitorData(Za.IDKEY.GET_CHANNELS_LIVE_STATUS_FAILED,{id:s,username:c,errMsg:e.t0});case 28:e.next=32;break;case 30:if(!Object(j.isLiveNoticeMode)(i,o)||n!==fn.DEST_TYPE_CANVAS){e.next=32;break}return e.abrupt("return","reserve");case 32:return e.abrupt("return","none");case 33:case"end":return e.stop()}}),e,this,[[7,25]])})))}}]),e}();$r([x("handleAdDataDone"),R("handleAdDataError"),ei("design:type",Function),ei("design:paramtypes",[Object]),ei("design:returntype",Promise)],ai.prototype,"handleSplashAd",null),$r([x("handleAdDataDone"),R("handleAdDataError"),ei("design:type",Function),ei("design:paramtypes",[Object]),ei("design:returntype",void 0)],ai.prototype,"handleCustomAd",null),$r([x("handleAdDataDone"),R("handleAdDataError"),ei("design:type",Function),ei("design:paramtypes",[Object]),ei("design:returntype",void 0)],ai.prototype,"handleGridAd",null),$r([x("handleAdDataDone"),R("handleAdDataError"),ei("design:type",Function),ei("design:paramtypes",[Object]),ei("design:returntype",void 0)],ai.prototype,"handleInterstitialAd",null),$r([x("handleAdDataDone"),R("handleAdDataError"),ei("design:type",Function),ei("design:paramtypes",[Object]),ei("design:returntype",void 0)],ai.prototype,"handleRewardedVideoAd",null),$r([x("handleAdDataDone"),R("handleAdDataError"),ei("design:type",Function),ei("design:paramtypes",[Object]),ei("design:returntype",void 0)],ai.prototype,"handleBannerAd",null),$r([function(e,t,n){var a=n.value;n.value=function(){var e=this,t=function(t){Qr&&Qr in e&&"function"==typeof e[Qr]&&e[Qr](t)};try{for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var o=a.call.apply(a,[this].concat(r));return o instanceof Promise?o.catch((function(e){return t(e)})):o}catch(e){t(e)}}},ei("design:type",Function),ei("design:paramtypes",[Number,Object,Object]),ei("design:returntype",Promise)],ai.prototype,"checkDuplicateRecommendedAds",null)},function(e,t,n){n.r(t),n.d(t,"SET_COOKIES_INDEX",(function(){return h})),n.d(t,"GET_COOKIES_INDEX",(function(){return v})),n.d(t,"parseCookies",(function(){return _})),n.d(t,"initCheckCookies",(function(){return O})),n.d(t,"transCookieObjectToString",(function(){return I})),n.d(t,"getPassCookieString",(function(){return S})),n.d(t,"getPayCookieString",(function(){return E})),n.d(t,"getShareCookieString",(function(){return w})),n.d(t,"setCookiesWithoutPermission",(function(){return C})),n.d(t,"getCookiesWithoutPermission",(function(){return k})),n.d(t,"setCookies",(function(){return T})),n.d(t,"getCookies",(function(){return A}));var a=n(16),r=n(53),i=n(41),o=n(45),s=n(1),c=n(2),u=n(101),l=n(32),d=[],f=[],p=["expires","domain","path","busid","indate","receivetime","spread"],h=502,v=503,g={scene:-1,sceneNote:"",sessionId:""};function y(e){return c.IS_DEVTOOLS||Object(l.checkPermissionSync)(e)}function m(e){var t,n;t=function(t){t&&_(t,!1,d),e&&e()},n=s.default.accountInfo&&s.default.accountInfo.appId||"noAppId",Object(o.invokeWebviewMethod)("getCookiesFromGlobalStorage",{appId:n},void 0,t)}function b(){var e=Date.now(),t=[];d.forEach((function(n){var a=n.expires||n.__wxprivate_calc_expires__;if(a&&1e3*a>e){var r=[];for(var i in n)p.indexOf(i)>=0&&r.push(encodeURIComponent(i)+"="+encodeURIComponent(n[i]));r.push(encodeURIComponent(n.key)+"="+encodeURIComponent(n.value)),t.push(r.join("; "))}}));var n,a,r,i=t.join(";; ");i.length>=4096||(n=i,a=function(){},r=s.default.accountInfo&&s.default.accountInfo.appId||"noAppId",n&&n.trim()&&Object(o.invokeWebviewMethod)("setCookiesToGlobalStorage",{cookies:n,appId:r},void 0,a))}function _(e,t,n){if("string"==typeof e){var a=Date.now();e.split(";;").forEach((function(e){var r;if(e.split(";").forEach((function(e){r=r||{};var t=(e=e.split("="))[0].trim(),n=e[1]&&e[1].trim();"expires"!==t&&"indate"!==t||(n=+n,n=Number.isNaN(n)?void 0:n),t&&void 0!==n&&(p.indexOf(t)>=0?r[decodeURIComponent(t)]=decodeURIComponent(n):(r.key=decodeURIComponent(t),r.value=decodeURIComponent(n)))})),r){t&&(r.receivetime=~~(a/1e3)),void 0===r.expires&&void 0!==r.indate&&r.receivetime&&(r.__wxprivate_calc_expires__=+r.receivetime+ +r.indate);var i=r.expires||r.__wxprivate_calc_expires__;i&&!(1e3*i>a)||function(e,t){for(var n=0,a=t.length;n<a;n++){var r=t[n];if(e.busid===r.busid&&e.key===r.key)return!0}return!1}(r,n)||n.push(r),s.default.accountInfo&&s.default.accountInfo.appId&&r.spread&&(r.spread="*"===r.spread?"":r.spread+":",r.spread+=s.default.accountInfo.appId)}}))}}Object(u._onAppShow)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};g.scene=e.scene,g.sceneNote=e.scene_note,g.sessionId=e.sessionid}));var O=function(){Object(i.onAppRoute)((function(){var e=s.default.appLaunchInfo||{},t=+s.default.appLaunchInfo.scene,n=e.referrerInfo&&e.referrerInfo.privateExtraData,a=e.referrerInfo&&e.referrerInfo.messageExtraData,r=n&&n.cookies||a&&a.cookies;"string"==typeof r&&_(r,1037!==t,d),m(b)})),Object(r.onAppEnterForeground)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=+e.scene,n=e.referrerInfo&&e.referrerInfo.privateExtraData,a=e.referrerInfo&&e.referrerInfo.messageExtraData,r=n&&n.cookies||a&&a.cookies;(1037===t||r&&"string"==typeof r||1===e.reLaunch||!0===e.reLaunch)&&(d=[],f=[]),"string"==typeof r&&_(r,1037!==t,d),m(b)}))};function I(e){var t=[];for(var n in e)p.indexOf(n)>=0&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.push(encodeURIComponent(e.key)+"="+encodeURIComponent(e.value)),t.join("; ")}var S=function(e){var t=Date.now(),n=[];d.forEach((function(e){var a=e.expires||e.__wxprivate_calc_expires__;e.domain&&"*"===e.domain&&(!a||1e3*a>t)&&n.push(I(e))}));var a=n.join(";; ");return e&&e.success&&e.success({cookies:a}),a},E=function(e){var t=Date.now(),n=[];d.forEach((function(e){var a=e.expires||e.__wxprivate_calc_expires__;(!a||1e3*a>t)&&n.push(e)}));var a=s.default&&s.default.accountInfo&&s.default.accountInfo.appId||"",r=g.scene||"",i=g.sceneNote||"",o=g.sessionId||"";n.push({key:"appid",value:a,busid:"wxapp"},{key:"sessionid",value:o,busid:"wxapp"},{key:"scene",value:r,busid:"wxapp"},{key:"scene_note",value:i,busid:"wxapp"});var c=e&&e.pluginInfo?e.pluginInfo:{},u=c.hostAppId,l=c.pluginAppId;if(void 0!==u&&void 0!==l){var f=n.find((function(e){return"appid"===e.key}));f&&(f.value=u),n.push({key:"plugin_appid",value:l,busid:"wxapp"})}var p=s.default.host||{};"SDK"===p.env&&n.push({key:"sdk_host_appid",value:p.appId,busid:"wxapp"});var h=n.map(I).join(";; ");return e&&e.success&&e.success({cookies:h}),h},w=function(){var e=Date.now(),t=[];return f.forEach((function(n){var a=n.expires||n.__wxprivate_calc_expires__;(!a||1e3*a>e)&&t.push(I(n))})),t.join(";; ")},C=function(e){var t=Date.now(),n=e.cookies||[],a=e.isTemporary;if(n instanceof Array){var r=a?f:d,i=[],o={},c={},u=s.default.accountInfo&&s.default.accountInfo.appId||"";if(n.forEach((function(e){if(e.key&&"string"==typeof e.key){var n=+e.expires;if(!e.value||n&&1e3*n<t)o[e.key]={key:e.key,busid:e.busid};else{var r={key:e.key,value:e.value};p.forEach((function(t){var n=e[t];"expires"!==t&&"indate"!==t||(n=+n,n=Number.isNaN(n)?void 0:n),"spread"===t&&n&&!a&&u&&(r.spread="*"===n?"":n+":",r.spread+=u),"receivetime"!==t&&"spread"!==t&&void 0!==n&&(r[t]=n)})),c[e.key]=r,i.push(r)}}})),r.forEach((function(e){var n=o[e.key];if(!n||(n.busid||e.busid)&&n.busid!==e.busid){var a=c[e.key];if(!a||(a.busid||e.busid)&&a.busid!==e.busid){var r=e.expires||e.__wxprivate_calc_expires__;r&&1e3*r<t||i.push(e)}}})),function(e){var t=[];return e.forEach((function(e){t.push(I(e))})),t.join(";; ")}(i).length>=4096)return"setCookies:fail whole cookies storage is out of limit(4KB limit)";a?f=i:(d=i,b())}},k=function(e){var t=Date.now(),n=e.keys||[],r=e.busid,i=e.isTemporary;if(n instanceof Array){var o=[];return(i?f:d).forEach((function(e){var i=e.expires||e.__wxprivate_calc_expires__;if((!i||1e3*i>t)&&n.indexOf(e.key)>=0&&(!r||r&&r===e.busid)){var s=Object(a.default)({},e.key,e.value);Object.keys(e).forEach((function(t){p.indexOf(t)>=0&&(s[t]=e[t]),"indate"!==t&&"expires"!==t||(s[t]=+s[t])})),o.push(s)}})),o}},T=function(e){var t="setCookies:ok";if(y("setCookies")){var n=C(e);n?(t=n,"function"==typeof e.fail&&e.fail({errMsg:t})):"function"==typeof e.success&&e.success({errMsg:t})}else t="setCookies:fail has no permission for setCookies API","function"==typeof e.fail&&e.fail({errMsg:t});"function"==typeof e.complete&&e.complete({errMsg:t})},A=function(e){var t="getCookies:ok";if(y("getCookies")){var n=k(e);"function"==typeof e.success&&e.success({errMsg:t,cookies:n})}else t="getCookies:fail has no permission for getCookies API","function"==typeof e.fail&&e.fail({errMsg:t});"function"==typeof e.complete&&e.complete({errMsg:t})}},function(e,t,n){n.r(t),n.d(t,"setEnterOptions",(function(){return c})),n.d(t,"setInnerEnterOptions",(function(){return u})),n.d(t,"getEnterOptionsSync",(function(){return l})),n.d(t,"getInnerEnterOptionsSync",(function(){return d}));var a=n(71),r=n(112),i=n(0),o={},s={};function c(e){o=e}function u(e){s=e}function l(){var e=Object(r.getPluginId)(this)||"";return Object(a.isolateInfo)(o,e)}function d(){return s}Object(i.subscribe)("getEnterAppInfo",(function(e,t){var n=e.callbackId;Object(i.publish)("appEnterInfoGot",{res:d(),callbackId:n},[t])}))},function(e,t,n){var a=n(165)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:n()}}();function t(){if(i(/^<\?xml\s*/)){for(var e={attributes:{}};!o()&&!s("?>");){var t=r();if(!t)return e;e.attributes[t.name]=t.value}return i(/\?>\s*/),e}}function n(){a("tag %j",e);var t=i(/^<([\w-:.]+)\s*/);if(t){for(var c,u={name:t[1],attributes:{},children:[]};!(o()||s(">")||s("?>")||s("/>"));){var l=r();if(!l)return u;u.attributes[l.name]=l.value}if(i(/^\s*\/>\s*/))return u;for(i(/\??>\s*/),u.content=function(){a("content %j",e);var t=i(/^([^<]*)/);return t?t[1]:""}();c=n();)u.children.push(c);return i(/^<\/[\w-:.]+>\s*/),u}}function r(){a("attribute %j",e);var t,n=i(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(n)return{name:n[1],value:(t=n[2],t.replace(/^['"]|['"]$/g,""))}}function i(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function o(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},function(e,t,n){n.r(t),n.d(t,"LOG_LIMIT",(function(){return a})),n.d(t,"AppStatus",(function(){return r})),n.d(t,"BackgroudAPIBlackList",(function(){return i})),n.d(t,"NotActiveAPIBlackList",(function(){return o}));var a=1024,r={FORE_GROUND:0,BACK_GROUND:1,LOCK:2},i=[],o=[]},function(e,t,n){var a;n.r(t),n.d(t,"CUSTOM_EVENT",(function(){return a})),function(e){e.SHOWFEEDBACK="showFeedback",e.ADSHOWHALF="adShowHalf",e.ADHIDEHALF="adHideHalf",e.TRIGGEREVENT="triggerEvent",e.REPORTVIDEOPLAY="reportVideoPlay",e.APPENTERBACKGROUND="appEnterBackground",e.ADVIDEOPAUSE="adVideoPause",e.ADVIDEOPLAY="adVideoPlay",e.FEEDBACKBTNTAP="feedbackBtnTap",e.FEEDBACKREPORT="feedbackReport",e.BTNTAP="btnTap",e.CHANGEADBTNTEXT="changedAdBtnText",e.ENDPAGEINIT="endPageInit",e.SHOWENDPAGE="showEndPage",e.REPORTENDPAGE="reportEndPage",e.APPENTERFOREGROUND="appEnterForeground",e.ENDPAGEHIDE="endPageHide",e.ENDPAGESHOW="endPageShow",e.REPORTMMDATA="reportMMData",e.HIDEAD="hideAd",e.REPORTTIMEPOINT="reportTimePoint",e.CHANGEMULTISHOW="changeMultiShow",e.CHECKEXPOSURE="checkExposure",e.LANDAD="landAd",e.CHANGECOUNTDOWN="changeCountdown",e.SPLASHSKIPAD="splashSkipAd",e.REPORTADMONITORDATA="reportAdMonitorData",e.REWARDEDVIDEODYNAMIC="rewardedVideoDynamic"}(a||(a={}))},function(e,t,n){n.r(t),n.d(t,"filterInfo",(function(){return d})),n.d(t,"filterPublicInfo",(function(){return f})),n.d(t,"isolateInfo",(function(){return p})),n.d(t,"setPrivateExtraData",(function(){return h}));var a,r=n(18),i=n(60),o=n(10),s=n(6),c=n(0),u=n(1),l=n(32);function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(e.scene=e.scene?parseInt(e.scene,10):e.scene,e.query=(t?e.query:s.default.query)||{},e.path=t?Object(o.removeHtmlSuffixFromUrl)(e.path):Object(o.removeHtmlSuffixFromUrl)(s.default.lastRoute),e.referrerInfo=e.referrerInfo||{},e.isLaunch=t,t||(1044===e.scene?s.default.lastShareInfo={shareInfo:e.shareInfo,path:e.path,query:e.query}:s.default.lastShareInfo=void 0),i.default.sceneHistory.push(e.scene),!e.referrerInfo.appId||1036!==e.scene&&1069!==e.scene||(i.default.appId=e.referrerInfo.appId),"object"===Object(r.default)(e.shareInfo)&&null!==e.shareInfo){var n=e.shareInfo;n.shareKey&&n.shareName&&(Object(c.invokeMethod)("showUpdatableMessageSubscribeButton",{shareKey:n.shareKey}),e.shareTicket=i.default.ShareInfoStorage.set(n.shareKey,n.shareName),i.default.ShareInfoStorage.lastShareTicket=e.shareTicket),delete e.shareInfo}return e}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;0===(e=Object.assign({},e)).scene?e.scene=a:a=e.scene;var n=e.scene;1103===n?n=1001:1104===n?n=1089:1131===n||1158!==n&&1159!==n&&1160!==n||!Object(l.checkPermissionSync)("getGroupToolbarInfo")&&(n=1008),[1106,1005,1006,1027,1042].indexOf(n)>-1&&(e.referrerInfo.appId=null);var r=e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{};if(e.referrerInfo.privateExtraData&&e.referrerInfo.privateExtraData.__pluginAppId){e.referrerInfo.appId&&(r.pluginAppId=e.referrerInfo.privateExtraData.__pluginAppId),delete e.referrerInfo.privateExtraData.__pluginAppId;var i=Object.keys(e.referrerInfo.privateExtraData);0===i.length&&delete e.referrerInfo.privateExtraData}var o={path:e.path,query:e.query,scene:n,shareTicket:e.shareTicket,referrerInfo:r};e.chatroomUsername&&1156===n&&(o.chatroomUsername=e.chatroomUsername);var s=e.nativeExtraData||{};return s.location&&(o.locationInfo=s.location),7!==u.default.appType&&10!==u.default.appType||(e.nativeExtraData&&(o.nativeExtraData=e.nativeExtraData),o.sessionId=e.sessionid||e.sessionId,o.isLaunch=e.isLaunch,e.isLaunch&&(o.prerender=!!u.default.prerender),o.clickTimestamp=e.clickTimestamp,o.preloadType=t),e.mode&&(o.mode=e.mode),1173===n&&(s.mimeType?o.forwardMaterials=[{type:s.mimeType,path:s.materialPath,name:s.materialName,size:s.materialSize}]:Array.isArray(s.materials)&&(o.forwardMaterials=s.materials)),o}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=Object(o.getRouteDomain)(e.path||"");if(n!==t){var a={path:e.path,query:{},scene:e.scene,shareTicket:e.shareTicket,referrerInfo:{}};return e.mode&&(a.mode=e.mode),10===u.default.appType&&(e.nativeExtraData&&(a.nativeExtraData=e.nativeExtraData),a.sessionId=e.sessionId,a.isLaunch=e.isLaunch,e.isLaunch&&(a.prerender=e.prerender),a.clickTimestamp=e.clickTimestamp,a.preloadType=e.preloadType),a}return e}function h(e){try{__appServiceEngine__.setPrivateExtraData(e.privateExtraData),e.success()}catch(t){e.fail(t)}}},function(e,t,n){n.r(t),n.d(t,"getBanRuleIndexByPath",(function(){return b})),n.d(t,"getBanRuleIndexForPage",(function(){return _})),n.d(t,"needReport",(function(){return g})),n.d(t,"banAPISet",(function(){return y})),n.d(t,"ruleList",(function(){return m})),n.d(t,"checkAPIAvailableForCurrentPage",(function(){return I})),n.d(t,"reportAPIBanForPage",(function(){return S})),n.d(t,"ReportCheckScene",(function(){return h})),n.d(t,"ReportBlockStatus",(function(){return p}));var a=n(26),r=n(1),i=n(12),o=n(6),s=n(0),c=n(37),u=n(2),l=0,d=1,f=2,p={OK:1,BLOCK:2,NO_BLOCK:3},h={NAVIGATE_TO:1,SWITCH_TAB:2,REDIRECT_TO:3,API:4,RE_LAUNCH:5},v=wxNativeConsole.createLogger("BanForPage"),g=!1,y=new Set(["shareAppMessage","shareAppMessageDirectly","requestPayment","setClipboardData","getClipboardData","getLocation","getPhoneNumber","navigateToMiniProgram","navigateBackMiniProgram"]),m=[];function b(e){if(!e)return-1;var t=-1;try{t=m.findIndex((function(t){return Object(i.isString)(t.path_rule)&&new RegExp(t.path_rule).test(e)}))}catch(e){v.log("[getBanRuleIndexByPath] error: "+e.message)}return v.log('[getBanRuleIndexByPath] path="'+e+'", index='+t),t}function _(e,t,n){for(var a=-1,r=0;r<m.length;r++){var o=m[r];if((!Object(i.isString)(o.path_rule)||!o.path_rule||new RegExp(o.path_rule).test(t))&&(!Object(i.isString)(o.title_rule)||!o.title_rule||new RegExp(o.title_rule).test(n))){a=r;break}}return v.log("[getBanRuleIndexForPage] banRuleIndex="+a),a}function O(e,t,n){v.log("[checkAPIAvailableForPage] APIName="+e+", path="+t+", title="+n);var a=_(0,t,n);if(-1===a)return S(e,p.OK,h.API,e),!0;var r=m[a];return v.log("[checkAPIAvailableForPage], found rule:",r),function(e,t){var n,a,r=e.ban_jsapi_list.find((function(e){return e.jsapi_name===t}));if(!r)return v.log("[checkAPIAvailableForPageByRule], no APIItem found"),!0;if(v.log("[checkAPIAvailableForPageByRule], found APIItem:",r),r.state===l)n=!1;else if(r.state===d)n=!0;else if(r.state===f&&(n=!0,1===e.is_valid)){var i=r.toast_wording||"该功能暂时无法使用";Object(s._invokeMethod)("showToast",{title:i,icon:"none"})}return a=n?e.is_valid?p.BLOCK:p.NO_BLOCK:p.OK,S(t,a,h.API,t),1!==e.is_valid||!n}(r,e)}function I(e){var t=Object.keys(o.default.query).reduce((function(e,t){return[].concat(Object(a.default)(e),[t+"="+o.default.query[t]])}),[]).join("&"),n=o.default.lastRoute+(t?"?"+t:""),r=o.default.navigationBarTitleMap[o.default.lastRoute]||"";return v.log("[checkAPIAvailableForCurrentPage] APIName="+e+", path="+n+", title="+r),O(e,n,r)}function S(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";if(v.log("[reportAPIBanForPage] APIName="+e+", blockType="+t+", checkScene="+n+", extraInfo="+a+", needReport="+g),g){var s=r.default.appLaunchInfo,u=Object.keys(o.default.query).map((function(e){return e+"="+o.default.query[e]})).join("&"),l={session_id:s.sessionid||s.sessionId,cur_path:o.default.lastRoute+(u?"?"+u:""),title:o.default.navigationBarTitleMap[o.default.lastRoute],check_scene:n,block_status:t,extra_info:a,launch_scene:s.scene,launch_path:s.path,target_path:i};v.log("[reportAPIBanForPage], reqData:",l),Object(c._operateWXData)({reqData:l,apiName:"webapi_reportnvgcheckinfo",complete:function(e){v.log("[reportAPIBanForPage], res.errMsg="+e.errMsg)}})}}r.default.onReady((function(){if(!u.IS_DEVTOOLS)try{var e=r.default.appContactInfo.operationInfo.jsonInfo.navigate_ban_info,t=e.do_report,n=e.navigate_ban_rule_list;m=n,g=1===t,y=new Set(n.reduce((function(e,t){return[].concat(Object(a.default)(e),Object(a.default)(t.ban_jsapi_list))}),y)),v.log("[BanForPage][init] needReport="+g),v.log("[BanForPage][init] ruleList:",m),v.log("[BanForPage][init] banAPISet:",y)}catch(e){v.error("[BanForPage][init] fail, errMsg="+e.message)}}))},function(e,t,n){n.r(t),n.d(t,"saveAdDataToFile",(function(){return m})),n.d(t,"saveAdMaterialData",(function(){return b})),n.d(t,"removeOutdatedData",(function(){return y})),n.d(t,"handleSplashAdFetchLog",(function(){return O})),n.d(t,"bulkSaveMaterials",(function(){return _})),n.d(t,"getCacheDataInfo",(function(){return g}));var a=n(18),r=n(87),i=n(27),o=n(11),s=n(2),c=n(75),u=n(15);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var f=6048e5,p=0,h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){i.fs.stat({path:e,recursive:!0,success:t,fail:n})}))},v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){i.fs.unlink({filePath:e,success:t,fail:function(e){e&&e.errMsg&&e.errMsg.indexOf("no such file or directory")>-1||n(e)}})}))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?h(e).then((function(e){var t,n=0,a=[],r=[],i=e.stats||[],o=+new Date,s=l(i);try{for(s.s();!(t=s.n()).done;){var c=t.value;n+=c.stats.size||0,["adinfos.txt","/"].includes(c.path)||a.push(c.path),o-1e3*c.stats.lastAccessedTime>=f&&!["adinfos.txt","/"].includes(c.path)&&r.push(c.path)}}catch(e){s.e(e)}finally{s.f()}return{totalSize:n,fileList:a,outedDateFileList:r}})):{totalSize:0,fileList:[],outedDateFileList:[]}},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!e||0===t.length)return Promise.resolve();var n,a=[],r=l(t);try{for(r.s();!(n=r.n()).done;){var i=n.value,o=e+"/"+i;a.push(v(o))}}catch(e){r.e(e)}finally{r.f()}return Promise.all(a)},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t?Object(u.isIn3rdApp)()?Promise.resolve():s.IS_ANDROID||s.IS_IOS?new Promise((function(n,a){i.fs.writeFile({filePath:t,data:JSON.stringify(e),encoding:"utf-8",success:n,fail:a})})):Promise.resolve():Promise.resolve()},b=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(e&&t)return new Promise((function(n,a){Object(r._downloadFileSkipCheckDomain)({url:e,filePath:t,success:n,fail:a})}))},_=function(e){return e&&0!==e.length?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";if(e)return new Promise((function(t,n){i.fs.readdir({dirPath:e,success:t,fail:n})}))}(o.WX_AD_PATH).then((function(t){var n=t.files;e&&e.map((function(e){var t=e.url,a=e.filePath,r=e.fileName;return n.includes(r)?Promise.resolve():b(t,a)}))})):Promise.reject({errMsg:"无数据"})},O=function(e){if(e&&"object"===Object(a.default)(e)&&!(p>0)&&(p+=1,!Object(u.isIn3rdApp)()&&(s.IS_ANDROID||s.IS_IOS)&&e&&e.widget_gray_unlimit_fetch_tag)){var t=3600*e.widget_gray_unlimit_fetch_tag*1e3;try{i.fs.stat({path:o.SPLASHAD_FETCH_LOG,success:function(e){var n;Date.now()-1e3*(null==e||null===(n=e.stats)||void 0===n?void 0:n.lastModifiedTime)>=t&&Object(c.emitSplashAdFetch)()},fail:function(e){e.errMsg&&e.errMsg.indexOf("no such file")>-1&&m({},o.SPLASHAD_FETCH_LOG)}})}catch(e){}}}},function(e,t,n){n.r(t),n.d(t,"handleData",(function(){return l})),n.d(t,"checkAdStatus",(function(){return d})),n.d(t,"fetchRelationInfo",(function(){return f})),n.d(t,"bindGuideGroup",(function(){return p})),n.d(t,"getWidgetGrayCondition",(function(){return c}));var a=n(40),r=n(27),i=n(11);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var c=function(e){var t={};try{var n,a=o(e=JSON.parse(e));try{for(a.s();!(n=a.n()).done;){var r=n.value;r.hasOwnProperty("exp_para")&&r.exp_para.forEach((function(e){t[e.name]=Number(e.value)}))}}catch(e){a.e(e)}finally{a.f()}for(var s in t)i.FLOW_EXP_MAP[s]&&(t[i.FLOW_EXP_MAP[s]]=t[s]);return t}catch(e){return{}}},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0!==Object.keys(e).length)try{var t=JSON.parse(JSON.stringify(e)),n=JSON.parse(t.crt_exp_info);if(1002===n.exp_type){if(t.wx_game_video&&t.wx_game_video.wxgame_video_card){var r=JSON.parse(n.exp_data);t.wx_game_video.wxgame_video_card.flooring_page=r}}else if(1001===n.exp_type){t.profile_exp=!0;var i=n.exp_data&&"string"==typeof n.exp_data?JSON.parse(n.exp_data):n.exp_data;if(t.dest_type=i.dest_type,t.button_action)try{t.button_action=JSON.parse(t.button_action)}catch(e){t.button_action={}}else t.button_action={};t.button_action.jump_type=i.jump_type,t.button_action=JSON.stringify(t.button_action)}else if(105===n.exp_type)t.ad_style_data=n.exp_data;else if(106===n.exp_type){var o=n.exp_data&&"string"==typeof n.exp_data?JSON.parse(n.exp_data):n.exp_data;Object(a.mergeDeep)(t,o),t.common_exp=!0}else if(608===n.crt_size||567===n.crt_size){if(t.crt_size=n.crt_size,t.ad_width=t.material_width=n.width,t.ad_height=t.material_height=n.height,t.image_url=n.image_url,n.dest_url&&t.url&&(1==t.dest_type||3==t.dest_type||6==t.dest_type)){var s=Object(a.getQueryString)(t.url),c={};s.weixinadkey&&(c.weixinadkey=s.weixinadkey),s.ticket&&(c.ticket=s.ticket),s.gdt_vid&&(c.gdt_vid=s.gdt_vid),s.weixinadinfo&&(c.weixinadinfo=s.weixinadinfo),t.url=Object(a.addUrlParam)(n.dest_url,c)}t.watermark_text=n.watermark||""}else if(n.landpage_type)t.wx_game_video&&t.wx_game_video.wxgame_video_card&&(t.wx_game_video.wxgame_video_card.flooring_page=n);else if(2001===n.exp_type){var u=JSON.parse(n.exp_data);t.adDynamicList=u}return t}catch(t){return e}},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(0!==Object.keys(e).length){if(e.crt_exp_tid&&e.crt_exp_info&&(e=u(e)),e.crt_size&&(e.crt_size=Number(e.crt_size)),e.button_action)try{e.button_action=JSON.parse(e.button_action)}catch(t){e.button_action={}}else e.button_action={};if(e.button_action.button_text=e.button_action.button_text||"查看",e.watermark_text=e.watermark_text||"去逛逛",e.flow_exp_info&&(e.condition=c(e.flow_exp_info)),e.ext_back_comm)try{e.extBackComm=JSON.parse(e.ext_back_comm)}catch(e){}if(e.reranking_ext_info)try{e.rerankingExtInfo=JSON.parse(e.reranking_ext_info)}catch(t){e.rerankingExtInfo={}}if(e.crt_info)try{e.crtInfo=JSON.parse(e.crt_info)}catch(t){e.crtInfo={}}var t={};if(23===e.product_type){var n=e,a=n.biz_appid,r=n.biz_info,i=r.nick_name,o=r.is_subscribed,s=r.head_img,l=r.biz_uin;t={icon:s,nickname:i,uin:l,isFollowed:o,biz_appid:a}}var d={};if([12,19].indexOf(e.product_type)>-1){var f=e,p=f.app_info,h=p.app_name,v=p.apk_name,g=p.apk_url,y=p.app_md5,m=p.icon_url,b=p.url_scheme,_=p.version_code,O=p.channel_id;d={appName:h,apkName:v,apkUrl:g,appMd5:y,iconUrl:m,urlScheme:b,versionCode:_,channelId:O}}return Object.assign({},e,{app:t,appInfo:d})}},d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(r.adOperateWXData)({apiName:"webapi_getadvert",reqData:{action:"CheckAdIsOnline",request_data:JSON.stringify(e)},requestInQueue:t})},f=function(e){var t=e.aid,n=e.buttonText,i=void 0===n?"":n;return Object(r.operateWXData)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"get_ad_metric",aid:t.toString(),button_text:i})}}).then((function(e){if(!e.rawData)throw new Error("get_ad_metric no result");try{var t=JSON.parse(e.rawData),n=JSON.parse(t.result)||{},r=n.ad_metric_count,i=n.desc_text;return null==r||null==i||r<50?null:{count:Object(a.convertTenThousand)(r),descText:i}}catch(e){throw new Error("get_ad_metric invalid result")}})).catch((function(){throw new Error("get_ad_metric request failed")}))},p=function(e){var t=e.guide_group_id,n=e.uxinfo;return Object(r.operateWXData)({apiName:"webapi_getadvert",reqData:{action:"weapp_comm",request_data:JSON.stringify({rpc_method:"BindAdFansToGuideGroup",guide_group_id:t,uxinfo:n})}}).then((function(e){return"ok"===e.msg?Promise.resolve(e):Promise.reject(e)}))}},function(e,t,n){n.r(t),n.d(t,"emitSplashAdFetch",(function(){return i})),n.d(t,"onEmitSplashAdFetch",(function(){return o})),n.d(t,"onShouldShowSplashAd",(function(){return s})),n.d(t,"onSplashAdShow",(function(){return c})),n.d(t,"onSplashAdHide",(function(){return u})),n.d(t,"onSplashAdClose",(function(){return l})),n.d(t,"onSplashAdWillLayout",(function(){return d})),n.d(t,"onSplashAdButtonClicked",(function(){return f}));var a=n(0),r=new(n(15).EventEmitter),i=function(){r.emit("_onEmitSplashAdFetch")},o=function(e){"function"==typeof e&&r.on("_onEmitSplashAdFetch",e)};function s(e){Object(a.onMethod)("shouldShowSplashAd",e)}function c(e){Object(a.onMethod)("onSplashAdShow",e)}function u(e){Object(a.onMethod)("onSplashAdHide",e)}function l(e){Object(a.onMethod)("onSplashAdClose",e)}function d(e){Object(a.onMethod)("onSplashAdWillLayout",e)}function f(e){Object(a.onMethod)("onSplashAdButtonClicked",e)}},function(e,t,n){n.r(t),n.d(t,"UI_JSAPI",(function(){return r})),n.d(t,"webviewAnimation",(function(){return o})),n.d(t,"clearDelayedInvoke",(function(){return s})),n.d(t,"registerDelayedInvoke",(function(){return c}));var a=n(0),r=["startPullDownRefresh"],i=[],o={appRoute:!1,appRouteDone:!1},s=function(){i.forEach((function(e){var t=e.name,n=e.args,r=e.option;Object(a.mainInvokeMethod)(t,n,r)})),i=[]},c=function(e,t,n){var r=o.appRoute,s=o.appRouteDone;!r&&s?Object(a.mainInvokeMethod)(e,t,n):i.push({name:e,args:t,option:n})}},function(e,t,n){n.r(t),n.d(t,"getLaunchOptionsSync",(function(){return d})),n.d(t,"_getLaunchOptionsSync",(function(){return f})),n.d(t,"formatLaunchInfo",(function(){return p}));var a,r,i=n(18),o=n(111),s=n(1),c=n(32),u=n(124),l=o.share.ShareInfoStorage;s.default.onReady((function(){var e=p(s.default.appLaunchInfo||{});a=e.appLaunchInfo,r=e.publicLaunchInfo}));var d=function(){return r},f=function(){return a};function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.shareInfo,n=e.scene,a=e.query||{};"object"===Object(i.default)(t)&&null!==t&&(e.shareTicket=l.set(t.shareKey,t.shareName),l.lastShareTicket=e.shareTicket),e.query=e.query||{},e.scene=e.scene?parseInt(e.scene,10):e.scene,e.referrerInfo=e.referrerInfo||{},1022===e.scene&&(a=e.query={}),!1===e.reLaunch&&(a={}),Object(u.getLastOnHideMode)(),void 0===e.reLaunch&&"hide"===Object(u.getLastOnHideMode)()&&(a={}),1103===e.scene&&(n=1001),1104===e.scene&&(n=1089),1158!==e.scene&&1159!==e.scene&&1160!==e.scene||!Object(c.checkPermissionSync)("getGroupToolbarInfo")&&(n=1008);var r={scene:n,query:a,shareTicket:e.shareTicket,referrerInfo:e.referrerInfo.appId?{appId:e.referrerInfo.appId,extraData:e.referrerInfo.extraData}:{}};return s.default.debugLaunchInfo&&s.default.debugLaunchInfo.lanDebugInfo&&(r.lanDebugInfo=s.default.debugLaunchInfo.lanDebugInfo),{publicLaunchInfo:r,appLaunchInfo:e}}},function(e,t,n){n.r(t);var a,r=n(4),i=n(5),o=n(16),s={AD_TYPE_BANNER:1,AD_TYPE_PORTAL:2,AD_TYPE_ICON:3},c=(a={},Object(o.default)(a,s.AD_TYPE_BANNER,"BANNER"),Object(o.default)(a,s.AD_TYPE_PORTAL,"PORTAL"),Object(o.default)(a,s.AD_TYPE_ICON,"ICON"),{0:5.5615234375,1:5.5615234375,2:5.5615234375,3:5.5615234375,4:5.5615234375,5:5.5615234375,6:5.5615234375,7:5.5615234375,8:5.5615234375,9:5.5615234375,"%":8.8916015625,"(":3.330078125,")":3.330078125,"-":3.330078125,".":2.7783203125,"/":2.7783203125,A:6.669921875,B:6.669921875,C:7.2216796875,D:7.2216796875,E:6.669921875,F:6.1083984375,G:7.7783203125,H:7.2216796875,I:2.7783203125,J:5,K:6.669921875,L:5.5615234375,M:8.330078125,N:7.2216796875,O:7.7783203125,P:6.669921875,Q:7.7783203125,R:7.2216796875,S:6.669921875,T:6.1083984375,U:7.2216796875,V:6.669921875,W:9.4384765625,X:6.669921875,Y:6.669921875,Z:6.1083984375,a:5.5615234375,b:5.5615234375,c:5,d:5.5615234375,e:5.5615234375,f:2.7783203125,g:5.5615234375,h:5.5615234375,i:2.2216796875,j:2.2216796875,k:5,l:2.2216796875,m:8.330078125,n:5.5615234375,o:5.5615234375,p:5.5615234375,q:5.5615234375,r:3.330078125,s:5,t:2.7783203125,u:5.5615234375,v:5,w:7.2216796875,x:5,y:5,z:5,"|":2.59765625}),u=n(2),l=n(15),d=n(57),f=(n(98),n(80),n(6)),p=n(9),h=n(14),v=n(17),g=n(8),y=n(20),m=n(109),b=n(43);function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(g.default)(e);if(t){var r=Object(g.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(v.default)(this,n)}}var O={},I={},S={},E=new WeakMap,w={};function C(e,t){var n=Object(y.concatId)(t,e.canvasNumber);S[n]={top:e.top,left:e.left,width:e.width,height:e.height,canvasNumber:e.canvasNumber,nodeId:e.nodeId,pluginId:e.pluginId,webviewId:t},I[n]=Object.assign({},e.data,{webviewId:t});var a=O[n];"function"==typeof a&&(a.call(),delete O[n]),Object(b.onBeforeUnloadPage)(t,(function(){k(e,t)}))}function k(e,t){var n=Object(y.concatId)(t,e.canvasNumber);delete S[n],delete I[n],delete O[n],delete w[n]}m.CanvasInterface;var T=n(0),A=n(92);var P=null,D=!1,x={},R=["touchstart","touchmove","touchend","touchcancel"];u.IS_IOS&&(Object(T.subscribe)("webGLInserted",(function(e,t){var n;P||(P=Object(A.getWeixinCanvas)()),D||(D=!0,n=P,R.forEach((function(e){n["on"+e]=function(t){var n=x[t.canvasId];n?n.handlers["bind"+e]&&f.default.webviewEventCallback({data:{type:e,target:n.target,currentTarget:n.target,timeStamp:t.timeStamp,touches:Object(y.normalizeTouch)(t.touches),changedTouches:Object(y.normalizeTouch)(t.changedTouches)},eventName:n.handlers["bind"+e],webviewId:n.webviewId,nodeId:n.nodeId}):console.error("event can not be dispatched due to missing node info")}}))),x[e.canvasNumber]=Object.assign({},e.data,{webviewId:t}),C(e,t)})),Object(T.subscribe)("webGLRemoved",(function(e,t){delete x[e.canvasNumber],k(e,t)})));var j=n(28),M=n(19);var N=["touchstart","touchmove","touchend","touchcancel"],L=!1;function B(){var e=M.default.EventHandler;N.forEach((function(t){e["on"+t]=function(e){var n=e.currentTarget,a=I[n._canvasId];a?a.handlers["bind"+t]&&f.default.webviewEventCallback({data:{type:t,target:a.target,currentTarget:a.target,timeStamp:e.timeStamp,touches:Object(y.normalizeTouch)(e.touches),changedTouches:Object(y.normalizeTouch)(e.changedTouches)},eventName:a.handlers["bind"+t],webviewId:a.webviewId,nodeId:a.nodeId}):console.error("event can not be dispatched due to missing node info")}}))}u.IS_ANDROID&&(Object(T.subscribe)("webGLInserted",(function(){L||(L=!0,B()),C.apply(void 0,arguments)})),Object(T.subscribe)("webGLRemoved",k));var F=n(36),W=n(41);function V(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return U(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var G={},H={},Y={},q={},z=f.default.currentWebviewId;u.IS_DEVTOOLS&&(Object(T.subscribe)("webGLInserted",C),Object(T.subscribe)("webGLUpdated",(function(e,t){var n=Object(y.concatId)(t,e.canvasNumber),a=G[n];if(!a)return;a.style.top=e.box.top+"px",a.style.left=e.box.left+"px",a.style.width=e.box.width+"px",a.style.height=e.box.height+"px"})),Object(T.subscribe)("webGLRemoved",(function(e,t){var n=Object(y.concatId)(t,e.canvasNumber);k(e,t),delete G[n]})),Object(T.subscribe)("webGLPageScroll",(function(e,t){"function"==typeof window.scrollTo&&(document.body.scrollWidth===e.width&&document.body.scrollHeight===e.height||(document.body.style.width=e.width+"px",document.body.style.height=e.height+"px"),window.scrollTo(e.scrollLeft,e.scrollTop),Y[t]={scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})})),Object(W.onAppRoute)((function(e){q[e.webviewId]||(Object(b.onBeforeUnloadPage)(e.webviewId,(function(){var t=H[e.webviewId];if(t){var n,a=V(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;delete G[r._canvasId],document.body.removeChild(r)}}catch(e){a.e(e)}finally{a.f()}delete Y[e.webviewId],delete H[e.webviewId],delete q[e.webviewId]}})),q[e.webviewId]=!0);var t=e.webviewId;if(t!==z)for(var n=0,a=Object.entries(H);n<a.length;n++){var r=Object(F.default)(a[n],2),i=r[0],o=r[1];if(String(i)===String(t)){var s,c=V(o);try{for(c.s();!(s=c.n()).done;){s.value.style.visibility="visible"}}catch(e){c.e(e)}finally{c.f()}var u=Y[i];u?window.scrollTo(u.scrollLeft,u.scrollTop):window.scrollTo(0,0)}else{var l,d=V(o);try{for(d.s();!(l=d.n()).done;){l.value.style.visibility="hidden"}}catch(e){d.e(e)}finally{d.f()}}}z=t})));var K=n(35),X=(n(151),n(152),n(88)),Z=n(50);function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(g.default)(e);if(t){var r=Object(g.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(v.default)(this,n)}}function Q(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return $(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return $(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function $(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var ee={},te={},ne={},ae=f.default.currentWebviewId;u.IS_DEVTOOLS&&(Object(T.subscribe)("skiaCanvasInsert",(function(e,t){Object(K.skiaCanvasInsert)(e,t)})),Object(T.subscribe)("skiaCanvasRemove",(function(e,t){Object(K.skiaCanvasRemove)(e,t);var n=Object(y.concatId)(t,e.canvasNumber);delete ee[n]})),Object(T.subscribe)("skiaCanvasUpdated",(function(e,t){var n=Object(y.concatId)(t,e.canvasNumber),a=ee[n];if(!a||"function"==typeof a){return void new Promise((function(e){ee[n]=e})).then((function(t){t.style.top=e.box.top+"px",t.style.left=e.box.left+"px",t.style.width=e.box.width+"px",t.style.height=e.box.height+"px"}))}a.style.top=e.box.top+"px",a.style.left=e.box.left+"px",a.style.width=e.box.width+"px",a.style.height=e.box.height+"px"})),Object(T.subscribe)("skiaPageScroll",(function(e,t){"function"==typeof window.scrollTo&&(document.body.scrollWidth===e.width&&document.body.scrollHeight===e.height||(document.body.style.width=e.width+"px",document.body.style.height=e.height+"px"),window.scrollTo(e.scrollLeft,e.scrollTop),ne[t]={scrollLeft:e.scrollLeft,scrollTop:e.scrollTop})})),Object(W.onAppRoute)((function(e){Object(b.onBeforeUnloadPage)(e.webviewId,(function(){var t=te[e.webviewId];if(t){var n,a=Q(t);try{for(a.s();!(n=a.n()).done;){var r=n.value;document.body.removeChild(r)}}catch(e){a.e(e)}finally{a.f()}delete ne[e.webviewId],delete te[e.webviewId]}}));var t=e.webviewId;if(t!==ae)for(var n=0,a=Object.entries(te);n<a.length;n++){var r=Object(F.default)(a[n],2),i=r[0],o=r[1];if(String(i)===String(t)){var s,c=Q(o);try{for(c.s();!(s=c.n()).done;){s.value.style.visibility="visible"}}catch(e){c.e(e)}finally{c.f()}var u=ne[i];u?window.scrollTo(u.scrollLeft,u.scrollTop):window.scrollTo(0,0)}else{var l,d=Q(o);try{for(d.s();!(l=d.n()).done;){l.value.style.visibility="hidden"}}catch(e){d.e(e)}finally{d.f()}}}ae=t})));K.SkiaCanvas,n(123);var re=c,ie=null,oe=function(){function e(){Object(r.default)(this,e)}return Object(i.default)(e,[{key:"getCharWidth",value:function(e,t){return(re[e]?re[e]:10)*t/10}},{key:"limitString",value:function(e,t){return e&&e.length>t?e.substring(0,t)+"...":e}},{key:"getTextWidth",value:function(e,t){if(u.IS_ANDROID)return this.getTextWidthInAndroid(e,t);var n=function(){if(ie)return ie;if(Object(l.isGame)()){var e=new NativeGlobal.Canvas;e.width=1,e.height=1,ie=e.getContext("2d")}else ie=Object(d.createCanvasContext)();return ie}();return t&&(n.font=t+"px PingFangSC-Regular, SF Pro Display, SF Pro Text"),Math.ceil(n.measureText(e).width||0)+1}},{key:"getTextWidthInAndroid",value:function(e,t){var n=this;e=(e=String(e)).split("");var a=0;return e.forEach((function(e){var r=n.getCharWidth(e,t);a+=r})),a}},{key:"getMaxWordLength",value:function(e,t,n){var a=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];e=(e=String(e)).split("");var r=0,i=0;a&&(n-=this.getTextWidth("...",t));for(var o=0;o<e.length;o++){var s=e[o],c=this.getCharWidth(s,t);if(r+c>n)break;i++,r+=c}return i}},{key:"textMetrics",value:function(e,t){for(var n=t.fontSize,a=t.maxWidth,r=t.maxLines,i=void 0===r?1:r,o=[],s=0,c=e.substring(0,e.length);s<i;){var u=this.getMaxWordLength(c,n,a,!(s!==i-1)),l=s===i-1?this.limitString(c,u):c.substring(0,u);l&&o.push({text:l,width:this.getTextWidth(l,n)}),s++,c=c.substring(u,c.length)}return o}}]),e}();t.default=new oe},function(e,t,n){n.r(t),n.d(t,"_setWxIsInvokeInTapForNavToMiniProgram",(function(){return q})),n.d(t,"_navigateToMiniProgram",(function(){return G})),n.d(t,"_checkBeforeNavigateToMiniProgram",(function(){return U})),n.d(t,"_doNavigateToMiniProgram",(function(){return P})),n.d(t,"navigateToMiniProgram",(function(){return z})),n.d(t,"navigateToMiniProgramDirectly",(function(){return K}));var a=n(16),r=n(30),i=n(13),o=n.n(i),s=n(29),c=n(10),u=n(66),l=n(82),d=n(105),f=n(1),p=n(37),h=n(15),v=n(2),g=n(32),y=n(48),m=n(107),b=n(44),_=n(38),O=n(139),I=n(47),S=n(115),E=n(39),w=n(96);function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T,A=Object(_.invoke2Async)(p._operateWXData),P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};JSON.stringify(e),JSON.stringify(t),JSON.stringify(n),y.nativeConsole.log("[_doNavigateToMiniProgram], args="+JSON.stringify(e)+", privateArgs="+JSON.stringify(t)+", ext="+JSON.stringify(n));var a=Object.assign({},e);delete a.sourcetype,delete a.preScene,delete a.preSceneNote,7!==f.default.appType&&(delete a.scene,delete a.sceneNote);var r,i=Object(u.getPassCookieString)();if(i?(a.privateExtraData=a.privateExtraData||{},a.privateExtraData.cookies=i):a.privateExtraData&&delete a.privateExtraData.cookies,r="string"==typeof a.path&&a.path.trim().length>0?Object.assign({},a,t,{path:Object(c.transWxmlToHtml)(a.path).trim()}):Object.assign({},a,t,{path:void 0}),JSON.stringify(r),y.nativeConsole.log("[_doNavigateToMiniProgram], finalArgs="+JSON.stringify(r)),r.needTransferToWeChat&&Object(h.isIn3rdApp)())return Object(s.beforeInvokeCallback)({name:"navigateToMiniProgram",args:r}),delete r.success,delete r.fail,delete r.complete,void Object(s.invokeMethod)("sdk_navigateToMiniProgram",r,n);Object(s.invokeMethod)("navigateToMiniProgram",r,n)},D=function(e,t,n,a){var r=[e,t,f.default.appType+1e3,n+1e3,a].join(",");Reporter.reportKeyValue({key:"NavigateToMiniProgramAlert",value:r})},x=function(){return T||(T=new Promise((function(e){__sclEngine__.initScl((function(t){return e(t.mainRoot)}))}))),T},R=function(){var e=Object(r.default)(o.a.mark((function e(t){var n,a,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:n=e.sent,e.t0=M,e.next=e.t0===j.HALF_SCREEN_DIALOG_WITHOUT_LOGO?6:e.t0===j.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED?8:e.t0===j.HALF_SCREEN_DIALOG_WITH_SCORE?11:14;break;case 6:return a=n.append("navigateToMp",{title:t.oldWording,logo:"",name:"",type:j.HALF_SCREEN_DIALOG}),e.abrupt("break",16);case 8:return a=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:j.HALF_SCREEN_DIALOG}),t.expensiveWording&&t.expensiveWording.then((function(e){var t=e.used_friend_cnt_sub_desc;a.setData({desc:t||""})})),e.abrupt("break",16);case 11:return a=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:j.HALF_SCREEN_DIALOG}),t.expensiveWording&&t.expensiveWording.then((function(e){var t=e.score_sub_desc;a.setData({desc:t||""})})),e.abrupt("break",16);case 14:return a=n.append("navigateToMp",{title:t.title,logo:t.icon_url,name:t.desc,type:M}),e.abrupt("break",16);case 16:return r=Object(b.setNavigateBackInterception)((function(e){[b.NavigationBackTypes.BottomBackButton,b.NavigationBackTypes.NavigationBackInterceptionType,b.NavigationBackTypes.NavigateBackCall].includes(e.type)&&a.handleCancel()})),e.next=19,new Promise((function(e){a.addListener("confirm",(function(){e({confirm:!0})})),a.addListener("cancel",(function(){e({confirm:!1})}))}));case 19:return i=e.sent,Object(b.stopNavigateBackInterception)(r),e.abrupt("return",i);case 22:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j={DEFAULT:0,DIALOG:1,HALF_SCREEN_DIALOG:2,HALF_SCREEN_DIALOG_WITHOUT_LOGO:3,HALF_SCREEN_DIALOG_WITH_SCORE:4,HALF_SCREEN_DIALOG_WITH_FRIENDS_USED:5},M=j.DEFAULT;f.default.onReady((function(){Object(m._getABTestConfig)({experimentId:"clicfg_navigation_use_scl_alert_v5",experimentType:"Expt",success:function(e){JSON.stringify(e),e&&void 0!==e.testConfig&&(M=Number(e.testConfig)||j.DEFAULT,Object.values(j).includes(M)||(M=j.DEFAULT))}})}));var N,L=function(e,t,n,a,r,i){if(1===t)return Promise.resolve();var o=M!==j.DEFAULT&&"undefined"!=typeof __sclEngine__&&(v.IS_DEVTOOLS||v.IS_IOS||v.IS_ANDROID)&&r,c=o?M:j.DEFAULT;return Promise.resolve().then((function(){return o?R(k(k({},r),{},{oldWording:e,expensiveWording:i})):new Promise((function(t,n){Object(s.invokeMethod)("showModal",{title:"",content:e,confirmText:"允许",cancelText:"取消",showCancel:!0,confirmColor:"#576B95",confirmColorDark:"#7D90A9",cancelColor:"#000000",cancelColorDark:"#AAAAAA",success:function(e){t(e)},fail:function(e){n(e)}})}))})).then((function(e){if(!e.confirm)throw D(2,n,a,c),{errMsg:"cancel"};D(1,n,a,c)}),(function(e){throw D(3,n,a,c),e}))},B=1,F=2,W=function(){var e=Object(r.default)(o.a.mark((function e(t){var n,a,r,i;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n=[],e.t0=M,e.next=e.t0===j.HALF_SCREEN_DIALOG_WITH_FRIENDS_USED?4:e.t0===j.HALF_SCREEN_DIALOG_WITH_SCORE?6:8;break;case 4:return n.push(F),e.abrupt("break",9);case 6:return n.push(B),e.abrupt("break",9);case 8:return e.abrupt("break",9);case 9:if(n.length){e.next=11;break}return e.abrupt("return",{});case 11:return t.appId,y.nativeConsole.log("[_getNavigateWxAppDescInfo] appId="+t.appId),e.prev=13,e.next=16,A({apiName:"webapi_getnavigatewxaappdesc",reqData:{target_appid:t.appId,desc_type_list:n}});case 16:return a=e.sent,(r=a.respData).data,i=JSON.parse(r.data),e.abrupt("return",i);case 23:return e.prev=23,e.t1=e.catch(13),e.t1.message,e.abrupt("return",{});case 27:case"end":return e.stop()}}),e,null,[[13,23]])})));return function(t){return e.apply(this,arguments)}}(),V=(N=[],f.default.onReady((function(){Array.isArray(f.default.navigateToMiniProgramAppIdList)&&(N=f.default.navigateToMiniProgramAppIdList,Object(g.checkPermissionSync)("openWxappLimit5")&&N.splice(5))})),function(e,t){return new Promise((function(n,a){var r=Object(h.checkAPIAvailable)("navigateToMiniProgramConfig");!1===r||v.IS_DEVTOOLS?t?n():N.indexOf(e)>-1?n({sourcetype:4}):a({errMsg:'appId "'+e+'" is not in navigateToMiniProgramAppIdList'}):!0===r?n():"unknown"===r&&n({sourcetype:4})}))}),U=function(e){e.appId,y.nativeConsole.log("[_checkBeforeNavigateToMiniProgram] appId="+e.appId);var t="_checkBeforeNavigateToMiniProgram",n=function(e){return new Promise((function(t,n){e.appId,y.nativeConsole.log("[_getNavigateWxAppInfo] appId="+e.appId),Object(p._operateWXData)({apiName:"webapi_getnavigatewxaappinfo",reqData:{target_appid:e.appId},success:function(e){var n=JSON.parse(e.respData.data),a=n.action_code,r=n.skip_local_check,i=Boolean(n.runtime_sdk_whitelist);t({actionCode:a,skipLocalCheck:r,reason:n.reason,wording:n.wording,appType:n.apptype,newWording:n.new_wording,popupInfo:n.pop_up_info,needTransferToWeChat:i}),e.respData.data},fail:function(e){n(e),e.errMsg}})}))}(e),a=W(e);return M!==j.DEFAULT&&x(),new Promise((function(r,i){n.then((function(n){var o=n.actionCode,c=n.skipLocalCheck,u=n.reason,l=n.wording,d=n.appType,p=n.newWording,h=n.popupInfo,v=n.needTransferToWeChat;y.nativeConsole.log("[_getNavigateWxAppInfo][resolve] actionCode="+o+", skipLocalCheck="+c+", reason="+u+", wording="+l),1!==o&&2!==o?(h?(Reporter.reportKeyValue({key:"WeAppNavBan",value:[f.default.appType+1e3,f.default.appLaunchInfo.scene,33,3302,0,1,u,"跳转跳出",Object(I._getCurrentNetworkType)()].join(",")}),Object(s.invokeMethod)("showModal",{showCancel:!0,content:h.desc,confirmText:h.confirm_wording,cancelText:h.cancel_wording,success:function(e){var t=e.confirm,n=h.confirm_url;t&&Object(O.privateOpenUrl)({url:n}),Reporter.reportKeyValue({key:"WeAppNavBan",value:[f.default.appType+1e3,f.default.appLaunchInfo.scene,33,3302,t?1:2,2,u,"跳转跳出",Object(I._getCurrentNetworkType)()].join(",")})}})):l&&Object(s.invokeMethod)("showModal",{content:l,showCancel:!1}),Object(s.beforeInvokeFail)(t,e,u),i({errMsg:u})):V(e.appId,c).then((function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return L(l,o,e.appId,d,p,a).then((function(){Object(s.beforeInvokeCallback)({name:t,args:e,res:{sourcetype:n.sourcetype}}),r(k(k({},n),{},{needTransferToWeChat:v}))}))})).catch((function(n){var a=n.errMsg||n.message;Object(s.beforeInvokeFail)(t,e,a),i(n)}))}),(function(n){Object(s.beforeInvokeCallback)({name:t,args:e}),r(),n.errMsg}))}))},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(s.beforeInvoke)("navigateToMiniProgram",e,{appId:""})&&(e.appId,y.nativeConsole.log("[_navigateToMiniProgram] appId="+e.appId),U({appId:e.appId}).then((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};JSON.stringify(t),y.nativeConsole.log("[_checkBeforeNavigateToMiniProgram][resolve], res="+JSON.stringify(t)),P(e,{sourcetype:t.sourcetype,needTransferToWeChat:t.needTransferToWeChat})}),(function(t){var n=t.errMsg||t.message;y.nativeConsole.log("[_checkBeforeNavigateToMiniProgram][reject], errMsg="+n),Object(s.beforeInvokeFail)("navigateToMiniProgram",e,n),"cancel"!==n&&Reporter.errorReport({key:"appServiceSDKScriptError",error:t,extend:"at checking before navigate to miniprogram"})})))},H=!1,Y=0;Object(w._onTapAnyWhere)((function(e){Y=e.timeStamp,H=!0})),Object(l.onAppEnterBackground)((function(){Y=0,H=!1}));var q=function(){Y=Date.now(),H=!0},z=function(e){if(Object(S.isHalfPageMode)()&&Object(S.isFromChannels)())return Object(s.beforeInvokeFail)("navigateToMiniProgram",e,"not supported"),void Object(E.showToast)({icon:"none",title:"暂不支持当前功能"});var t=f.default.accountInfo.appId;0===f.default.appType&&"wx308bd2aeb83d3345"!==t&&"wxc98889eca359c1e5"!==t?H?(G(e),Object(d.reportRecycledAPI)({name:"navigateToMiniProgram",scene:0,strategy:0,timeDiffToLastTap:0===Y?-2:Date.now()-Y})):Object(s.beforeInvokeFail)("navigateToMiniProgram",e,"can only be invoked by user TAP gesture."):G(e)},K=function(e){Object(g.checkPermissionSync)("navigateToMiniProgramDirectly")?P(e,e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("navigateToMiniProgram","navigateToMiniProgramDirectly")}}):Object(s.beforeInvokeFail)("navigateToMiniProgramDirectly",e,"no permission")}},function(e,t,n){n.r(t),function(e){n.d(t,"skiaCanvasInsert",(function(){return p})),n.d(t,"skiaCanvasRemove",(function(){return h})),n.d(t,"getOrCreateCanvas",(function(){return v})),n.d(t,"SkiaCanvas",(function(){return y}));var a=n(114),r=n(26),i=n(4),o=n(5),s=n(0),c=n(20),u=n(10),l=n(2),d={},f={};function p(e,t){var n=e.canvasId,a=e.viewId,r=e.canvasNumber,i=e.pluginId,o=e.position,s=e.nodeId,u=Object(c.concatId)(t,n,i,s),l=v(u);l.context&&(l=g(u)),l.context||l.init(r,o.width,o.height,a,t)}function h(e){var t=e.canvasId,n=e.pluginId,a=e.nodeId,r=e.viewId,i=e.webviewId,o=Object(c.concatId)(i,t,n,a);delete d[o],delete f[r]}function v(e){return d[e]?d[e]:g(e)}function g(e){var t=new y(e);return d[e]=t,t}l.IS_ANDROID&&Object(s.onMethod)("onXWebCanvasSurfaceChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=f[e.viewId];t&&"function"==typeof t.swapSurface&&t.swapSurface()})),Object(s.subscribe)("skiaCanvasSizeChanged",(function(e,t){var n=e.canvasId,a=e.pluginId,r=e.nodeId,i=e.position,o=Object(c.concatId)(t,n,a,r),s=d[o];0===i.width&&0===i.height||!s||s.width===i.width&&s.height===i.height||(s.width=i.width,s.height=i.height,s.canvas&&s.context&&(s.canvas.width=i.width,s.canvas.height=i.height,s.needsReplay()&&s.replayActions()))}));var y=function(){function t(e){var n=this;Object(i.default)(this,t),this.id=e,this.width=0,this.height=0,this.context=null,this._actionsDefer=[],this._actionsWaiting=!1,this._images=[],this._actionsQueue=[],this._contextPromise=new Promise((function(e){n._resolveContext=e}))}return Object(o.default)(t,[{key:"init",value:function(t,n,a,r){this.width=n,this.height=a,l.IS_IOS&&(this.canvas=new e.Canvas(t),this.context=this.canvas.getContext("2d")),l.IS_ANDROID&&(this.canvasView=HTMLCanvasView.createView(r),f[r]=this.canvasView,this.canvas=HTMLCanvasElement.createElement(this.canvasView),this.context=this.canvas.getContext("2d")),this._resolveContext&&this._resolveContext(this.context)}},{key:"preloadImage",value:function(t){var n=this;t.forEach((function(t){var a="",r=t.method,i=t.data;"drawImage"===r?a=i[0]:"setFillStyle"===r&&"pattern"===i[0]&&(a=i[1]),a&&!n._images[a]&&(l.IS_IOS?(n._images[a]=new e.Image,n._images[a].onload=function(){n._images[a].ready=!0}):l.IS_ANDROID&&(n._images[a]=new SkiaImage,n._images[a].onload=function(){n._images[a].ready=!0}),n._images[a].setSrc(a))}))}},{key:"checkImageLoaded",value:function(e,t,n){var a=this,r=this._images[e];return r.ready?(n(r),!0):(this._actionsDefer.unshift([t,!0]),this._actionsWaiting=!0,r.onload=function(){r.ready=!0,n(r),a._actionsWaiting=!1;var e=a._actionsDefer.slice(0);a._actionsDefer=[];for(var t=e.shift();t;)a.draw(t[0],t[1],t[2],a._webviewId,a._nodeId,a._pluginId),t=e.shift()},!1)}},{key:"draw",value:function(e,t,n,a,r,i){var o=this;this._webviewId=a,this._nodeId=r,this._pluginId=i,this.context?this._draw(e,t,n,a,r,i):this._contextPromise.then((function(){return o._draw(e,t,n,a,r,i),null})).catch((function(){}))}},{key:"_draw",value:function(e,t,n,i,o,s){var c=this,u=this.context;if(e)if(t||this._flushQueue(),this._enqueue({actions:e,reserve:t}),this._actionsWaiting)this._actionsDefer.push([e,t,n]);else{t||(u.fillStyle="#000000",u.strokeStyle="#000000",u.shadowColor="#000000",u.shadowBlur=0,u.shadowOffsetX=0,u.shadowOffsetY=0,u.setTransform(1,0,0,1,0,0),u.clearRect(0,0,this.width,this.height)),this.preloadImage(e,i,o,s),u.save();for(var d=function(t){var n=e[t],i=n.method,o=n.data;if(/^set/.test(i)&&"setTransform"!==i){var s=i[3].toLowerCase()+i.slice(4),l=void 0;if("fillStyle"===s||"strokeStyle"===s){if("normal"===o[0])l=o[1];else if("linear"===o[0])l=u.createLinearGradient.apply(u,Object(r.default)(o[1])),o[2].forEach((function(e){var t=e[0],n=e[1];l.addColorStop(t,n)}));else if("radial"===o[0]){var d=o[1][0],f=o[1][1],p=[d,f,0,d,f,o[1][2]];l=u.createRadialGradient.apply(u,p),o[2].forEach((function(e){var t=e[0],n=e[1];l.addColorStop(t,n)}))}else if("pattern"===o[0]){return c.checkImageLoaded(o[1],e.slice(t+1),(function(e){e&&(u[s]=u.createPattern(e,o[2]))}))?"continue":"break"}u[s]=l}else if("globalAlpha"===s)u[s]=o[0]/255;else if("shadow"===s){var h=["shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor"];o.forEach((function(e,t){u[h[t]]=e}))}else"fontSize"===s?u.font=u.font.replace(/\d+\.?\d*px/,o[0]+"px"):"lineDash"===s?(u.setLineDash(o[0]),u.lineDashOffset=o[1]||0):"textBaseline"===s?("normal"===o[0]&&(o[0]="alphabetic"),u[s]=o[0]):u[s]=o[0]}else if("fillPath"===i||"strokePath"===i)i=i.replace(/Path/,""),u.beginPath(),o.forEach((function(e){u[e.method].apply(u,Object(r.default)(e.data))})),u[i]();else if("fillText"===i){var v=Object(a.default)(o),g=v[0],y=v.slice(1);y&&y.map&&(y=y.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u.fillText.apply(u,[g].concat(Object(r.default)(y)))}else if("drawImage"===i){var m=Object(a.default)(o),b=m[0],_=m.slice(1);if(c._images=c._images||{},_&&_.map&&(_=_.map((function(e){return"string"==typeof e?parseFloat(e):e}))),!c.checkImageLoaded(b,e.slice(t+1),(function(e){e&&u.drawImage.apply(u,[e].concat(Object(r.default)(_.slice(4,8)),Object(r.default)(_.slice(0,4))))})))return"break"}else if("clip"===i)o.forEach((function(e){u[e.method].apply(u,Object(r.default)(e.data))})),u.clip();else if("arcTo"===i||"rotate"===i){var O=o;o&&o.map&&(O=o.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u[i].apply(u,Object(r.default)(O))}else if("strokeText"===i){var I=Object(a.default)(o),S=I[0],E=I.slice(1);E&&E.map&&(E=E.map((function(e){return"string"==typeof e?parseFloat(e):e}))),u[i].apply(u,[S].concat(Object(r.default)(E)))}else u[i].apply(u,Object(r.default)(o))},f=0;f<e.length;f++){var p=d(f);if("break"===p)break}u.restore(),l.IS_ANDROID&&this.canvasView.present(),this._actionsWaiting||"function"==typeof n&&n()}}},{key:"getImageData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.context?this._getImageData(t):this._contextPromise.then((function(){return e._getImageData(t),null})).catch((function(){}))}},{key:"_getImageData",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var n=t||{},a=n.x,r=n.y,i=n.width,o=n.height;e=this.context.getImageData(a,r,i,o)}catch(e){return void Object(u.failWithMessage)(t,e)}if(e){var s={width:e.width,height:e.height,data:e.data};Object(u.successCallback)(t,s)}else Object(u.failWithMessage)("canvasGetImageData:fail")}},{key:"putImageData",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.context?this._putImageData(t):this._contextPromise.then((function(){return e._putImageData(t),null})).catch((function(){}))}},{key:"_putImageData",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var n,a=t||{},r=a.x,i=a.y,o=a.width,s=a.height,c=a.data;l.IS_IOS?n=new e.ImageData(c,o,s):l.IS_ANDROID&&(n=new SkiaImageData(c,o,s)),l.IS_ANDROID&&this.canvasView.prepareDraw(),this.context.putImageData(n,r,i),l.IS_ANDROID&&this.canvasView.present()}catch(e){return void Object(u.failWithMessage)(t,e)}Object(u.successWithMessage)(t,"canvasPutImageData:ok")}},{key:"replayActions",value:function(){var e=this,t=function(){};this._actionsQueue.forEach((function(n){e.draw(n.actions,n.reserve,t,e._webviewId,e._nodeId,e._pluginId)}))}},{key:"needsReplay",value:function(){return this._actionsQueue.length>0}},{key:"_flushQueue",value:function(){this._actionsQueue=[]}},{key:"_enqueue",value:function(e){this._actionsQueue.push(e)}}]),t}()}.call(this,n(64))},function(e,t,n){n.r(t);var a=n(10),r={},i={lastShareTicket:null,get:function(e){return r[e]},set:function(e,t){var n=Object(a.guid)();return r[n]={shareKey:e,shareName:t},n}};t.default=i},function(e,t,n){n.r(t),n.d(t,"onAppEnterBackground",(function(){return s}));var a=n(0),r=n(31),i=n(21),o=Object(i.getEventManager)("AppEnterBackground"),s=o.internalOnMethod;Object(r.onNativeEvent)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o.emit(e),Object(a.publish)("onAppEnterBackground",e)}))},function(e,t,n){n.r(t),n.d(t,"onAppRouteDone",(function(){return d})),n.d(t,"offAppRouteDone",(function(){return f}));var a=n(0),r=n(31),i=n(6),o=n(21),s=n(1),c=n(12),u=n(76),l=Object(o.getEventManager)("AppRouteDone"),d=l.internalOnMethod,f=l.internalOffMethod;function p(e,t){if(0===s.default.appType&&e&&t&&!i.default.navigationBarTitleMap[e]){var n="";s.default.page[t]&&s.default.page[t].window&&Object(c.isString)(s.default.page[t].window.navigationBarTitleText)?n=s.default.page[t].window.navigationBarTitleText:s.default.global&&s.default.global.window&&Object(c.isString)(s.default.global.window.navigationBarTitleText)&&(n=s.default.global.window.navigationBarTitleText),i.default.navigationBarTitleMap[e]=n}}Object(r.onNativeEvent)("onAppRouteDone",(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;u.webviewAnimation.appRoute=!1,u.webviewAnimation.appRouteDone=!0,Object(u.clearDelayedInvoke)();var n="";i.default.navigatorLock=!1,e.path&&(n=e.path,e.path=e.path.substring(0,e.path.length-5)),e.webviewId=void 0!==e.webviewId?e.webviewId:t,"dismissPip"!==i.default.lastOpenType&&(i.default.lastRoute=e.path||""),l.emit(e),Object(a.publish)("onAppRouteDone",{frameset:e.frameset},[t]),e.path,p(e.path,n)}))},function(e,t,n){n.r(t),n.d(t,"_fs",(function(){return P})),n.d(t,"getOpenDataDir",(function(){return L}));var a,r=n(26),i=n(90),o=n(147),s=n(128),c=n(0),u=["ascii","base64","binary","hex","ucs2","ucs-2","utf16le","utf-16le","utf8","utf-8","latin1"],l=n(46),d=n(1),f=n(2),p=f.IS_DEVTOOLS?"http://":"wxfile://",h=[],v=!1;f.IS_IOS?a=new RegExp("^"+p+"tmp_"):f.IS_ANDROID&&(a=new RegExp("^tmp_")),d.default.onReady((function(){f.IS_ANDROID||f.IS_IOS?Object(c.invokeMethod)("readdir",{dirPath:p,success:function(e){var t=e.files||[];h=t.filter((function(e){return a.test(e)})),v=!0}}):v=!0}));var g=function(e,t){if(/^wxfile:\/\/(tmp\/?)?$/.test(t)){var n=l.FakeTempFilePathMap.get();e.files=e.files.filter((function(e){return new RegExp("^"+t).test(e)||(e=""+t+e),-1===n.indexOf(e)})).filter((function(e){return v?-1===h.indexOf(e):!a.test(e)}))}};var y=n(4),m=n(5),b=function(){function e(t){var n=t.mode,a=t.size,r=t.lastAccessedTime,i=t.lastModifiedTime;Object(y.default)(this,e),this.mode=n,this.size=a,this.lastAccessedTime=r,this.lastModifiedTime=i}return Object(m.default)(e,[{key:"_checkModeProperty",value:function(e){return(61440&this.mode)===e}},{key:"isDirectory",value:function(){return this._checkModeProperty(16384)}},{key:"isFile",value:function(){return this._checkModeProperty(32768)}}]),e}(),_=function(e,t){var n=!0;if(["mode","size","lastAccessedTime","lastModifiedTime"].forEach((function(t){n=n&&void 0!==e[t]})),n)e.stats=new b(e),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime;else if(e.stats&&1===Object.keys(e.stats).length&&e.stats[""])e.stats=new b(e.stats[""]);else{var a=[],r=e.stats;f.IS_ANDROID&&(r=e,a.push({path:"/",stats:O(t)})),Object.keys(r).forEach((function(e){if("errMsg"!==e){var t=r[e];""===e&&(e="/"),a.push({path:e,stats:new b(t)}),delete r[e]}})),e.stats=a}},O=function(e){var t,n,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new Error("path must be a string");if(Object(c.invokeMethod)("statSync",{path:e,recursive:a,success:function(n){_(n,e),t=n.stats},fail:function(e){n=e.errMsg}}),n)throw new Error(n);return t},I=["a","ax","a+","ax+","as","as+","r","r+","w","wx","w+","wx+"],S=n(10),E=n(12),w=n(16),C=n(51);function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){Object(w.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=n(15),P={saveFile:i.saveFile,saveFileSync:i.saveFileSync,getSavedFileList:i.getSavedFileList,getSavedFileInfo:i.getSavedFileInfo,removeSavedFile:i.removeSavedFile,getFileInfo:o.getFileInfo,readFile:s.readFile,readFileSync:s.readFileSync,writeFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("writeFile",e,{filePath:""})&&(e.encoding&&-1===u.indexOf(e.encoding)?Object(c.beforeInvokeFail)("writeFile",e,'invalid encoding "'+e.encoding+'"'):Object(c.invokeMethod)("writeFile",e,{}))},writeFileSync:function(e,t,n){if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===u.indexOf(n))throw new Error('invalid encoding "'+n+'"');var a;if(Object(c.invokeMethod)("writeFileSync",{filePath:e,data:t,encoding:n,fail:function(e){a=e.errMsg}}),a)throw new Error(a)},mkdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("mkdir",e,{dirPath:""})&&Object(c.invokeMethod)("mkdir",e)},mkdirSync:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");if(Object(c.invokeMethod)("mkdirSync",{dirPath:e,recursive:n,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},rmdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("rmdir",e,{dirPath:""})&&Object(c.invokeMethod)("rmdir",e)},rmdirSync:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e||"string"!=typeof e)throw new Error("dirPath must be a string");if(Object(c.invokeMethod)("rmdirSync",{dirPath:e,recursive:n,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},readdir:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("readdir",e,{dirPath:""})&&Object(c.invokeMethod)("readdir",e,{beforeSuccess:function(t){g(t,e.dirPath)}})},readdirSync:function(e){if(!e||"string"!=typeof e)throw new TypeError("dirPath must be a string");var t,n;if(Object(c.invokeMethod)("readdirSync",{dirPath:e,success:function(e){t=e.files},fail:function(e){n=e.errMsg}},{beforeSuccess:function(t){g(t,e)}}),n)throw new Error(n);return t},access:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("access",e,{path:""})&&Object(c.invokeMethod)("access",e)},accessSync:function(e){if(!e||"string"!=typeof e)throw new TypeError("path must be a string");var t;if(Object(c.invokeMethod)("accessSync",{path:e,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},unlink:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("unlink",e,{filePath:""})&&Object(c.invokeMethod)("unlink",e)},unlinkSync:function(e){if(!e||"string"!=typeof e)throw new Error("filePath must be a string");var t;if(Object(c.invokeMethod)("unlinkSync",{filePath:e,fail:function(e){t=e.errMsg}}),t)throw new Error(t)},stat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("stat",e,{path:""})&&Object(c.invokeMethod)("stat",e,{beforeSuccess:function(t){_(t,e.path)}})},statSync:O,unzip:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("unzip",e,{zipFilePath:""})&&Object(c.invokeMethod)("unzip",Object.assign({},e,{targetDirectory:e.targetPath}))},copyFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("copyFile",e,{srcPath:"",destPath:""})&&Object(c.invokeMethod)("fs_copyFile",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^fs_/,"")}})},copyFileSync:function(e,t){if(!e||"string"!=typeof e)throw new Error("srcPath must be a string");if(!t||"string"!=typeof t)throw new Error("destPath must be a string");var n;if(Object(c.invokeMethod)("fs_copyFileSync",{srcPath:e,destPath:t,fail:function(e){n=e.errMsg.replace(/^fs_/,"")}}),n)throw new Error(n)},rename:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("rename",e,{oldPath:"",newPath:""})&&Object(c.invokeMethod)("fs_rename",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace(/^fs_/,"")}})},renameSync:function(e,t){if(!e||"string"!=typeof e)throw new Error("oldPath must be a string");if(!t||"string"!=typeof t)throw new Error("newPath must be a string");var n;if(Object(c.invokeMethod)("fs_renameSync",{oldPath:e,newPath:t,fail:function(e){n=e.errMsg.replace(/^fs_/,"")}}),n)throw new Error(n)},appendFile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("appendFile",e,{filePath:""})&&(e.encoding&&-1===u.indexOf(e.encoding)?Object(c.beforeInvokeFail)("appendFile",e,'invalid encoding "'+e.encoding+'"'):Object(c.invokeMethod)("fs_appendFile",e,{}))},appendFileSync:function(e,t,n){if(!e||"string"!=typeof e)throw new Error("path must be a string");if(n&&-1===u.indexOf(n))throw new Error('invalid encoding "'+n+'"');var a;if(Object(c.invokeMethod)("fs_appendFileSync",{filePath:e,data:t,encoding:n,fail:function(e){a=e.errMsg}}),a)throw new Error(a)},open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);Object(c.beforeInvoke)("open",e,{filePath:""})&&(void 0===e.flag||I.includes(e.flag)?(void 0===e.flag&&(t.flag="r"),Object(c.invokeMethod)("open",t)):Object(c.beforeInvokeFail)("open",e,'invalid flag "'+e.flag+'"'))},openSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.filePath,r=n.flag;if(!a||"string"!=typeof a)throw new TypeError("filePath must be a string");if(void 0!==r&&!I.includes(r))throw new S.ThirdScriptError("invalid flag: "+r);if(void 0===r&&(r="r"),Object(c.invokeMethod)("openSync",{filePath:a,flag:r,fail:function(e){t=e.errMsg},success:function(t){e=t.fd}}),t)throw new Error(t);return e},close:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("close",e,{fd:""})&&Object(c.invokeMethod)("close",e)},closeSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fd;if(!n||"string"!=typeof n)throw new TypeError("fd must be a string");if(Object(c.invokeMethod)("closeSync",{fd:n,fail:function(t){e=t.errMsg}}),e)throw new Error(e)},fstat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("fstat",e,{fd:""})&&Object(c.invokeMethod)("fstat",e,{beforeSuccess:function(e){var t=e.mode,n=e.size,a=e.lastAccessedTime,r=e.lastModifiedTime;a>1617e9&&(a=Math.floor(a/1e3)),r>1617e9&&(r=Math.floor(r/1e3)),e.stats=new b({mode:t,size:n,lastAccessedTime:a,lastModifiedTime:r}),delete e.mode,delete e.size,delete e.lastAccessedTime,delete e.lastModifiedTime}})},fstatSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.fd;if(!a||"string"!=typeof a)throw new TypeError("fd must be a string");if(Object(c.invokeMethod)("fstatSync",{fd:a,fail:function(e){t=e.errMsg},success:function(t){var n=t.mode,a=t.size,r=t.lastAccessedTime,i=t.lastModifiedTime;r>1617e9&&(r=Math.floor(r/1e3)),i>1617e9&&(i=Math.floor(i/1e3)),e=new b({mode:n,size:a,lastAccessedTime:r,lastModifiedTime:i})}}),t)throw new Error(t);return e},write:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);if(Object(c.beforeInvoke)("write",t,{fd:""}))if(t.encoding&&-1===u.indexOf(t.encoding))Object(c.beforeInvokeFail)("write",t,'invalid encoding "'+t.encoding+'"');else{if(Object(E.isArrayBuffer)(t.data)){if(t.data.byteLength>10485760)return void Object(c.beforeInvokeFail)("write",t,"ArrayBuffer exceed size limit (10M)");("number"!=typeof t.offset||t.offset<0)&&(t.offset=0),("number"!=typeof t.length||t.length<0)&&(t.length=t.data.byteLength-t.offset)}else if(!Object(E.isString)(t.data))return void Object(c.beforeInvokeFail)("write",t,"data must be a string or ArrayBuffer");"number"!=typeof t.position&&(t.position=void 0),Object(c.invokeMethod)("write",t)}},writeSync:function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=n.fd,r=n.data,i=n.offset,o=n.length,s=n.encoding,l=n.position;if(!a||"string"!=typeof a)throw new TypeError("fd must be a string");if(s&&-1===u.indexOf(s))throw new S.ThirdScriptError('invalid encoding "'+s+'"');if(Object(E.isArrayBuffer)(r)){if(r.byteLength>10485760)throw new S.ThirdScriptError("ArrayBuffer exceed size limit (10M)");("number"!=typeof i||i<0)&&(i=0),("number"!=typeof o||o<0)&&(o=r.byteLength-i)}else if(!Object(E.isString)(r))throw new TypeError("data must be a string or ArrayBuffer");if("number"!=typeof l&&(l=void 0),Object(c.invokeMethod)("writeSync",{fd:a,data:r,offset:i,length:o,encoding:s,position:l,fail:function(t){e=t.errMsg},success:function(e){t={bytesWritten:e.bytesWritten}}}),e)throw new Error(e);return t},read:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(c.beforeInvoke)("read",e,{fd:""}))if(Object(E.isArrayBuffer)(e.arrayBuffer)){var t=Object.assign({},e);f.IS_IOS&&C.default&&C.default.trace&&(t.arrayBufferId=C.default.trace(t.arrayBuffer,"rw"),delete t.arrayBuffer),Object(E.isNumber)(t.position)&&t.position<0?t.position=0:Object(E.isUndefined)(t.position)||Object(E.isNull)(t.position)?t.position=null:Object(E.isNumber)(t.position)||(t.position=0);var n=Number(t.length);Number.isNaN(n)?t.length=0:t.length=n;var a=Number(t.offset);Number.isNaN(a)?t.offset=0:t.offset=a,Object(c.invokeMethod)("read",t,{beforeSuccess:function(t){t.arrayBuffer=e.arrayBuffer},afterAll:function(){f.IS_IOS&&C.default&&C.default.untrace&&C.default.untrace(t.arrayBufferId)}})}else Object(c.beforeInvokeFail)("FileSystemManager.read",e,"arrayBuffer must be an ArrayBuffer")},readSync:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.fd,n=e.arrayBuffer;if(!t||"string"!=typeof t)throw new TypeError("fd must be a string");if(!Object(E.isArrayBuffer)(n))throw new TypeError("arrayBuffer must be an ArrayBuffer");var a=Object.assign({},e);f.IS_IOS&&C.default&&C.default.trace&&(a.arrayBufferId=C.default.trace(a.arrayBuffer,"rw"),delete a.arrayBuffer),Object(E.isNumber)(a.position)&&a.position<0?a.position=0:Object(E.isUndefined)(a.position)||Object(E.isNull)(a.position)?a.position=null:Object(E.isNumber)(a.position)||(a.position=0);var r=Number(a.length);Number.isNaN(r)?a.length=0:a.length=r;var i,o,s=Number(a.offset);if(Number.isNaN(s)?a.offset=0:a.offset=s,Object(c.invokeMethod)("readSync",T(T({},a),{},{fail:function(e){o=e.errMsg},success:function(e){i={bytesRead:e.bytesRead,arrayBuffer:n}}})),f.IS_IOS&&C.default&&C.default.untrace&&C.default.untrace(a.arrayBufferId),o)throw new Error(o);return i},truncate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("truncate",e,{filePath:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),Object(c.invokeMethod)("truncate",e,{}))},truncateSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.filePath,a=t.length;if(!n||"string"!=typeof n)throw new Error("filePath must be a string");if("number"!=typeof a&&(a=0),(a=Math.floor(a))<0&&(a=0),Object(c.invokeMethod)("truncateSync",{filePath:n,length:a,fail:function(t){e=t.errMsg}}),e)throw new Error(e)},ftruncate:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(c.beforeInvoke)("ftruncate",e,{fd:""})&&("number"!=typeof(e=Object.assign({},e)).length&&(e.length=0),e.length=Math.floor(e.length),e.length<0&&(e.length=0),Object(c.invokeMethod)("ftruncate",e))},ftruncateSync:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.fd,a=t.length;if(!n||"string"!=typeof n)throw new Error("fd must be a string");if("number"!=typeof a&&(a=0),(a=Math.floor(a))<0&&(a=0),Object(c.invokeMethod)("ftruncateSync",{fd:n,length:a,fail:function(t){e=t.errMsg}}),e)throw new Error(e)}},D="",x="";d.default.onReady((function(){try{D=d.default.env.USER_DATA_PATH,x=d.default.env.OPEN_DATA_PATH,delete d.default.env.OPEN_DATA_PATH}catch(e){}}));var R={saveFile:["filePath"],saveFileSync:[1],readFile:["filePath"],readFileSync:[0],writeFile:["filePath"],writeFileSync:[0],mkdir:["dirPath"],mkdirSync:[0],rmdir:["dirPath"],rmdirSync:[0],readdir:["dirPath"],readdirSync:[0],access:["path"],accessSync:[0],unlink:["filePath"],unlinkSync:[0],stat:["path"],statSync:[0],unzip:["zipFilePath","targetPath"],copyFile:["srcPath","destPath"],copyFileSync:[0,1],rename:["oldPath","newPath"],renameSync:[0,1],appendFile:["filePath"],appendFileSync:[0]},j=function(e){"string"==typeof e&&e.startsWith(D+"/__plugins__")&&Reporter.reportKeyValue({key:"Error",value:[1,"FrameworkError","Warning: MiniProgram is using reserved plugin path",e,__libVersionInfo__.version,0,"","",__libVersionInfo__.updateTime,"",0,"",0].map(encodeURIComponent).join(",")})},M=function(e,t){return"string"!=typeof e||!e.startsWith("wxfile://ad")&&((!Object(A.isSinglePageMode)()||!e.startsWith("wxfile://usr")&&!e.startsWith("http://usr"))&&!e.startsWith("opendata"===t?D:x))},N=function(e){var t={};return Object.keys(P).forEach((function(n){var a=P[n];t[n]=function(){for(var t=arguments.length,i=new Array(t),o=0;o<t;o++)i[o]=arguments[o];if(!R[n])return a.apply(void 0,Object(r.default)(i));R[n].forEach((function(e){var t=n.endsWith("Sync")?i:i[0];j(t[e])}));var s=R[n].every((function(t){var a=n.endsWith("Sync")?i:i[0];return M(a[t],e)}));if(s)return a.apply(void 0,Object(r.default)(i));if(n.endsWith("Sync"))throw new Error(n+":fail permission denied");i=i[0]||{},Object(c.beforeInvokeFail)(n,i,"permission denied")}})),t};t.default={app:N("app"),game:N("game"),opendata:N("opendata")};function L(){return x}},function(e,t,n){n.r(t),n.d(t,"invoke",(function(){return r}));var a=n(102);function r(e,t,n,r){"navigateToMiniProgram"!==e&&"openUrl"!==e&&"private_openUrl"!==e||(t.adUxInfo=t.adUxInfo||Object(a.getAdUxInfo)()),__safeway__.bridge.invoke(e,t,n,r)}},function(e,t,n){n.r(t),n.d(t,"temporarilyPatchContext",(function(){return r}));var a=n(18);function r(e){if(!e)return e;var t=e.fill.bind(e),n=e.putImageData.bind(e);return e.fill=function(e){return e?t(e,e):t()},e.putImageData=function(e){if(0===e||"object"!==Object(a.default)(e))return null;for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return n.apply(void 0,[e].concat(r))},e}},function(e,t,n){n.r(t),n.d(t,"downloadFile",(function(){return be})),n.d(t,"_downloadFileSkipCheckDomain",(function(){return me}));var a=n(0),r=n(19),i=n(2),o=n(1),s=n(107),c=n(32),u=n(5),l=n(4),d=n(14),f=n(17),p=n(8),h=n(36),v=n(18),g=n(16),y=n(29),m=n(47),b=n(15),_=n(122),O=0,I=[],S=function(){var e=JSON.stringify({business:"mmbizwxaservicequality",dataArray:I,appType:Reporter.getAppType()},null,2);Object(a.invokeMethod)("reportRealtimeAction",{actionData:e}),I=[]},E=function(e){var t="";return Object.keys(e).forEach((function(n,a){try{var r=encodeURIComponent(n)+"="+encodeURIComponent(e[n]);0!==a&&(t+="&"),t+=r}catch(e){}})),t},w=n(56),C=n(12),k=n(84),T=(n(90),k.default.app),A=(T.saveFile,T.saveFileSync,T.getSavedFileList,T.getSavedFileInfo,T.removeSavedFile,T.getFileInfo,T.readFile,T.readFileSync,T.writeFile,T.writeFileSync,T.mkdir,T.mkdirSync,T.rmdir,T.rmdirSync,T.readdir,T.readdirSync,T.access,T.accessSync,T.unlink,T.unlinkSync,T.stat);T.statSync,T.unzip,T.copyFile,T.copyFileSync,T.rename,T.renameSync,T.appendFile,T.appendFileSync;var P=n(150),D=Object(b.promisify)(A),x=0,R=new WeakMap,j=new WeakMap,M=new WeakMap,N=new WeakMap,L=new WeakMap,B=new WeakMap,F=new WeakMap,W=new WeakMap,V=new WeakMap,U=new WeakMap,G={},H=new w.Emitter("Network",!0),Y=wxNativeConsole.createLogger("NetworkTask"),q=function(){function e(t,n){var a=this,r=n.taskType,s=n.beforeSend,c=n.beforeSuccess,u=n.beforeFail;Object(l.default)(this,e);var d=x++;R.set(this,d),M.set(this,"waiting"),N.set(this,t),L.set(this,r),F.set(this,s),W.set(this,c),Object(C.isFunction)(u)&&V.set(this,u);var f=!1;i.IS_ANDROID&&o.default.clientVersion>=654315008&&("Download"!==r&&"Request"!==r||Object.keys(o.default.gamePlugins||o.default.plugins||{}).forEach((function(e){var t=(o.default.gamePlugins||o.default.plugins)[e];!t||"wx20afc706a711eefc"!==t.provider&&"wx4d5893418b75cb20"!==t.provider||(f=!0)}))),U.set(this,f),this.promise=new P.WxPromise((function(e,t){a.resolve=e,a.reject=t}));var p=function(){$.call(a)?G[r].taskQueue.push({id:d,item:a}):K.call(a)};Object(C.isFunction)(t.customCheck)?t.customCheck(t,(function(e){e?z(r,t,e):p()})):p()}return Object(u.default)(e,[{key:"abort",value:function(){var e=this;if(Y.info("["+L.get(this)+"]["+R.get(this)+"]abort()"),"waiting"===M.get(this)){Y.info("["+L.get(this)+"]["+R.get(this)+"] waiting=true");var t=G[L.get(this)].taskQueue.findIndex((function(t){return t.id===R.get(e)}));t>-1&&(G[L.get(this)].taskQueue.splice(t,1),Object(y.beforeInvokeFail)(G[L.get(this)].functionName,N.get(this),"abort")),M.set(this,"done")}else this.promise.then((function(){var t;Object(y.invokeMethod)("operate"+L.get(e)+"Task",(t={},Object(g.default)(t,L.get(e).toLowerCase()+"TaskId",j.get(e)),Object(g.default)(t,"operationType","abort"),t))}))}},{key:"onProgressUpdate",value:function(e){var t=this;this.promise.then((function(){H.on(""+L.get(t)+j.get(t)+"progressUpdate",e)}))}},{key:"offProgressUpdate",value:function(e){var t=this;this.promise.then((function(){H.off(""+L.get(t)+j.get(t)+"progressUpdate",e)}))}},{key:"onHeadersReceived",value:function(e){var t=this;this.promise.then((function(){H.on(""+L.get(t)+j.get(t)+"headersReceived",e)}))}},{key:"offHeadersReceived",value:function(e){var t=this;this.promise.then((function(){H.off(""+L.get(t)+j.get(t)+"headersReceived",e)}))}}]),e}();function z(e,t,n){Object(y.beforeInvokeCallback)({name:G[e].functionName,args:{success:t.success,fail:t.fail,complete:t.complete},success:!1,errMsg:n})}function K(){var e=this,t=N.get(this),n=L.get(this),a=U.get(this);M.set(this,"sending"),B.set(this,Date.now());var r=X.call(this);a?this.promise.then((function(){Z.call(e)})).catch((function(e){z(n,t,e)})):r?z(n,t,r):Z.call(this)}function X(){var e,t=this,n=L.get(this),a=N.get(this);G[n].currentTaskCount++;var r={data:a.data,url:a.url,header:a.header,method:a.method,timeout:Object(C.isNumber)(a.timeout)?a.timeout:0,enableHttp2:!!Object(C.isBoolean)(a.enableHttp2)&&a.enableHttp2,enableQuic:!!Object(C.isBoolean)(a.enableQuic)&&a.enableQuic,enableCache:!!Object(C.isBoolean)(a.enableCache)&&a.enableCache,enableProfile:!Object(C.isBoolean)(a.enableProfile)||a.enableProfile,__skipDomainCheck__:a.__skipDomainCheck__,success:function(e){var a=e[n.toLowerCase()+"TaskId"];j.set(t,a),G[n].taskIdMap[a]=t,t.resolve()},fail:function(r){G[n].currentTaskCount--;var i=r[n.toLowerCase()+"TaskId"];e=r.errMsg,J.call(t,{taskType:n,options:a,errMsg:e,success:!1}),t.reject(e),Y.error("["+n+"][createTask][Fail] taskId="+i)},complete:function(){M.set(t,"done")}},i=U.get(this),o="create"+n+"Task"+(i?"Async":"");return Object(y.invokeMethod)(o,F.get(this)(r)),e}function Z(){var e=this,t=j.get(this),n=N.get(this),a=L.get(this),r=G[a].functionName;H.on(""+a+t+"success",(function(t){W.get(e).call(e,t),Object(y.beforeInvokeCallback)({name:r,args:{success:n.success,fail:n.fail,complete:n.complete},res:t})})),H.on(""+a+t+"fail",(function(t){var a=V.get(e);a&&a.call(e,t),Object(y.beforeInvokeCallback)({name:r,args:{success:n.success,fail:n.fail,complete:n.complete},success:!1,errMsg:t.errMsg})}))}function J(e){var t=e.taskType,n=e.options,a=e.errMsg,r=e.success,i=void 0===r||r,o=e.dataLength,s=void 0===o?0:o,c=e.statusCode,u=void 0===c?"":c,l=e.responseDataLength,d=void 0===l?0:l,f=e.profile,p=void 0===f?{}:f,h=n.url,v=i?1:2,g=Date.now()-B.get(this),y=n.__skipDomainCheck__;g>=6e4&&Y.error("reportTask costTime too long: "+g+"ms, taskId="+j.get(this)),function(e,t,n,a,r,i,o){var s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:{},l="",d="";Object(b.isGame)()&&(d=E(_.default.query));var f=[e,t,n,a,r,Reporter.getAppType(),i,s,Object(m._getCurrentNetworkType)(),l,d,c,E(u)].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"NetworkAPI",value:f}),Reporter.reportIDKey({key:e+"_"+(1===n?"ok":"fail")}),I.push([e,t,n,i||"",a,r,Object(m._getCurrentNetworkType)(),o?"1":"0",Reporter.getAppType(),s].map((function(e){var t;try{t=encodeURIComponent(e)}catch(n){t=e}return t})).join(",")),Date.now()-O>=6e4&&(O=Date.now(),setTimeout(S,6e4))}(G[t].functionName,h,v,g,a,u,y,s,d,p)}function Q(e,t){var n,a=t.toLowerCase()+"TaskId",r=e[a],i=e.state,o=e.header;if(delete e.state,delete e[a],e.cookies=o&&(n=o["Set-Cookie"]||o["set-cookie"])?Array.isArray(n)?n:n.split(",").reduce((function(e,t){return/^\s*\S+=/.test(t)?e.push(t):e.length&&(e[e.length-1]+=t),e}),[]).map((function(e){return e.trim()})):[],H.emit(""+t+r+i,e),"success"===i||"fail"===i){var s=G[t].taskIdMap[r],c=N.get(s);if(!s)return;G[t].currentTaskCount-=1,G[t].taskQueue.length>0&&K.call(G[t].taskQueue.shift().item);var u=Promise.resolve(Object(b.getDataLength)(c.data));if("Upload"===t){var l=0;"object"===Object(v.default)(c.formData)&&null!==c.formData&&(l=JSON.stringify(c.formData).length),u=D({path:c.filePath}).then((function(e){return l+e.stats.size})).catch((function(){return l}))}var d=Promise.resolve(Object(b.getDataLength)(e.data));if("Download"===t){var f=e.dataLength;d="number"==typeof f?Promise.resolve(f):D({path:e.filePath||e.tempFilePath||""}).then((function(e){return e.stats.size})).catch((function(){return 0}))}Promise.all([u,d]).then((function(n){var a=Object(h.default)(n,2),r=a[0],o=a[1];J.call(s,{taskType:t,options:c,errMsg:e.errMsg,statusCode:e.statusCode,success:"success"===i,dataLength:r,responseDataLength:o,profile:e.profile})})),ee.call(s)}}function $(){var e=L.get(this);return G[e].currentTaskCount>=G[e].maxTaskCount}function ee(){var e=L.get(this),t=j.get(this);delete G[e].taskIdMap[t],H.removeAllListeners(""+e+t+"success"),H.removeAllListeners(""+e+t+"fail"),H.removeAllListeners(""+e+t+"complete")}function te(e,t){var n=this,a=G[e]?G[e]:{currentTaskCount:0,maxTaskCount:10,taskQueue:[],functionName:"",taskIdMap:{}};Object(y.onMethod)("on"+e+"TaskStateChange",(function(t){Q.call(n,t,e)})),G[e]=Object.assign(a,t)}function ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(p.default)(e);if(t){var r=Object(p.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(f.default)(this,n)}}te("Download",{maxTaskCount:10,functionName:"downloadFile"}),o.default.onReady((function(){try{"number"==typeof o.default.wxAppInfo.maxDownloadConcurrent&&te("Download",{maxTaskCount:o.default.wxAppInfo.maxDownloadConcurrent})}catch(e){}}));var ae=function(e){Object(d.default)(n,e);var t=ne(n);function n(e){return Object(l.default)(this,n),t.call(this,e,{taskType:"Download",beforeSend:function(t){return t.filePath=e.filePath,t},beforeSuccess:function(e){return delete e.timeInterval,e}})}return Object(u.default)(n)}(q),re=n(34),ie=r.default.Download,oe=new WeakMap,se=new WeakMap,ce=new WeakMap,ue=[],le=0,de=10;function fe(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(e&&(oe.delete(e),se.delete(e),ce.delete(e),le--);ue.length>0&&le<de;){var t=ue.shift(),n=oe.get(t),a=se.get(t);n&&a&&(n.start(a),le++)}}o.default.onReady((function(){o.default.wxAppInfo&&o.default.wxAppInfo.maxDownloadConcurrent&&(de=o.default.wxAppInfo.maxDownloadConcurrent)}));var pe=function(){function e(t){var n=this;Object(l.default)(this,e);var r,i,o,s=new ie,c=new re.default;oe.set(this,s),ce.set(this,c),se.set(this,Object(b.filterObject)(t,["url","header","filePath","enableProfile"])),s.onfail=function(e){Object(a.beforeInvokeFail)("downloadFile",t,e),fe(!0)},s.onsuccess=function(e){Object(a.beforeInvokeCallback)({name:"downloadFile",args:t,res:e}),fe(!0)},s.onheader=function(e){return c.emit("header",{header:e})},s.onprogress=function(e,t,n){return c.emit("progress",{progress:e,totalBytesWritten:t,totalBytesExpectedToWrite:n})},(r={api:"downloadFile",url:t.url},i=r.api,o=r.url,Object(b.skipURLCheck)()?Promise.resolve({isInDomainList:!0,isLocalHost:!1,isInLAN:!1}):new Promise((function(e,t){Object(a.invokeMethod)("checkNetworkAPIURL",{api:i,url:o,success:e,fail:t})}))).then((function(e){t.__skipDomainCheck__||e.isInDomainList||e.isInLAN&&!e.isLocalHost?(ue.push(n),fe()):Object(a.beforeInvokeFail)("downloadFile",t,"invalid url")})).catch((function(){Object(a.beforeInvokeFail)("downloadFile",t,"url validate error")}))}return Object(u.default)(e,[{key:"abort",value:function(){var e=oe.get(this);e&&e.abort()}},{key:"onHeadersReceived",value:function(e){var t=ce.get(this);t&&t.on("header",e)}},{key:"onProgressUpdate",value:function(e){var t=ce.get(this);t&&t.on("progress",e)}},{key:"offHeadersReceived",value:function(e){var t=ce.get(this);t&&t.off("header",e)}},{key:"offProgressUpdate",value:function(e){var t=ce.get(this);t&&t.off("progress",e)}}]),e}(),he=!1;function ve(e){return he?new pe(e):new ae(e)}r.default.Download&&o.default.onReady((function(){var e=!1,t=i.IS_IOS?"clicfg_appbrand_ios_native_download":"clicfg_appbrand_native_download";Object(s._getABTestConfig)({experimentId:t,experimentType:"Expt",success:function(t){t&&1===Number(t.testConfig)&&(e=!0)},fail:function(e){}});var n=Object(c.checkPermissionSync)("bindingDownload");he=e||n}));var ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e=Object.assign({__skipDomainCheck__:!1},e),function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.beforeInvoke)("downloadFile",t,{url:""})){t.__skipDomainCheck__=e.__skipDomainCheck__;try{var n=new ve(t);return n}catch(e){return void Object(a.beforeInvokeFail)("downloadFile",t,e.message)}}}},ye=ge(),me=ge({__skipDomainCheck__:!0}),be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if("string"!=typeof e.filePath||!e.filePath.startsWith(Object(k.getOpenDataDir)()))return ye(e);Object(a.beforeInvokeFail)("downloadFile",e,"permission denied")}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return i}));var a=n(104);function r(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function i(e,t,n){return(i=r()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var i=new(Function.bind.apply(e,r));return n&&Object(a.default)(i,n.prototype),i}).apply(null,arguments)}},function(e,t,n){n.r(t),n.d(t,"SDKVersion",(function(){return a}));var a="undefined"==typeof __libVersionInfo__||"develop"===__libVersionInfo__.version?"9.9.9":__libVersionInfo__.version},function(e,t,n){n.r(t),n.d(t,"saveFile",(function(){return r})),n.d(t,"saveFileSync",(function(){return i})),n.d(t,"getSavedFileList",(function(){return s})),n.d(t,"getSavedFileInfo",(function(){return c})),n.d(t,"removeSavedFile",(function(){return u})),n.d(t,"openDocument",(function(){return o}));var a=n(0),r=function(e){Object(a.beforeInvoke)("saveFile",e,{tempFilePath:""})&&Object(a.invokeMethod)("saveFile",e)},i=function(e,t){if(!e||"string"!=typeof e)throw new Error("tempFilePath must be a string");if(void 0!==t&&"string"!=typeof t)throw new Error("filePath must be a string");var n,r;if(Object(a.invokeMethod)("saveFileSync",{tempFilePath:e,filePath:t,success:function(e){r=e.savedFilePath},fail:function(e){n=e.errMsg}}),n)throw new Error(n);return r},o=function(e){Object(a.beforeInvoke)("openDocument",e,{filePath:""})&&(e.showMenu=e.showMenu||!1,Object(a.invokeMethod)("openDocument",e))},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.invokeMethod)("getSavedFileList",e)},c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.beforeInvoke)("getSavedFileInfo",e,{filePath:""})&&Object(a.invokeMethod)("getSavedFileInfo",e)},u=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(a.beforeInvoke)("removeSavedFile",e,{filePath:""})&&Object(a.invokeMethod)("removeSavedFile",e)}},function(e,t,n){n.r(t),n.d(t,"reportAdMonitorData",(function(){return E})),n.d(t,"reportMMData",(function(){return S}));var a=n(18),r=n(148),i=n(15),o=n(37),s=n(24),c=n(42),u=n(2),l=n(23),d=n(1),f=Object(s.promisify)(Object(o.constructOperateWXData)(!1,"advert_report")),p="",h=u.PLATFORM,v="",g="",y="",m="",b="",_="",O=!0,I="";d.default.onReady((function(){p=Object(l.getInitDeviceOrientation)()||"";var e=Object(c.getStableSystemInfo)();v=e.system,g=e.version,y=e.SDKVersion,b=e.model,_=e.brand,O=Object(i.isGame)();try{I=d.default.accountInfo.appId,m=__libVersionInfo__.updateTime}catch(e){}}));var S=function(e,t){var n=Object(r.getMMDataProto)(e);if(n&&0!==n.length)return t=Object.assign({publisher_appid:I,appid:I,orig_weapp_id:"",network_type:"",wechat_version:g,platform:h,system_version:v,device_orientation:p,wxapp_lib_version:y,wxapp_lib_time:m,machine_type:b,ad_platform:O?1:0},t),t=Object.assign({DeviceModel:b,DeviceBrand:_,OsName:h,OsVersion:v},t),n=n.map((function(e){return{type:e.type,value:(t[e.key]||e.value).toString()}})),f({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:JSON.stringify({logid:e,items:n})}}).catch((function(e){}))},E=function(e,t,n){!function(e){var t=e.key,n=e.id;"object"===Object(a.default)(t)&&(!n&&(n=t.idKeyGroup),t=t.idKey),0===t&&(t="0"),Reporter.reportIDKeyDirectly({id:n||924,key:t,force:!0})}({key:e}),function(e){var t=e.key,n=e.id,r=e.extInfo,i=e.reportData;if("object"===Object(a.default)(t)&&(!n&&(n=t.idKeyGroup),t=t.idKey),0===t&&(t="0"),i=i||{},r&&"string"!=typeof r)try{r=JSON.stringify(r)}catch(e){r=r.toString()}S(16295,{id_key:t,id_key_group:n||924,report_time:+new Date,ad_pos_type:i.ad_pos_type||0,source_url:i.source_url||"",expand_feild:i.reportAdData||"",expand_feild2:r,aid:i.aid||0,traceid:i.traceid||"",ad_unit_id:i.ad_unit_id})}({key:e,extInfo:t,reportData:n})}},function(e,t,n){n.r(t),function(e){function a(){return e.WeixinCanvas}n.d(t,"getWeixinCanvas",(function(){return a}))}.call(this,n(64))},function(e,t,n){n.r(t),n.d(t,"checkNeedAppEnterForegroundPatch",(function(){return o})),n.d(t,"checkNeedInsertImageViewPatch",(function(){return s})),n.d(t,"checkNeedPreserveDrawingBufferPatch",(function(){return c}));var a,r=n(1),i=n(2),o=(a=!1,(i.IS_IOS||i.IS_ANDROID&&r.default.clientVersion>=637865520)&&(a=!0),function(){return a}),s=function(){var e=!1;return i.IS_IOS&&r.default.clientVersion>=385877248&&(e=!0),function(){return e}}(),c=function(){var e=!1;return i.IS_IOS&&r.default.clientVersion>=385878314&&(e=!0),function(){return e}}()},function(e,t,n){n.r(t),n.d(t,"generateFunctionalPagePath",(function(){return u})),n.d(t,"isFunctionalPagePath",(function(){return l})),n.d(t,"parseCompletePath",(function(){return f})),n.d(t,"getFunctionalPageEnterParams",(function(){return p})),n.d(t,"getFunctionalPageEnterParamsString",(function(){return h})),n.d(t,"generateShareDataFromFunctionalPage",(function(){return v})),n.d(t,"mapPageTypeToCardSubType",(function(){return g})),n.d(t,"isAtFunctionalPage",(function(){return y})),n.d(t,"generateGameIndexPath",(function(){return b}));var a=n(16),r=n(18),i=n(125),o={},s=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";return o[e]},c=n(49);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.pageType,n=void 0===t?"":t,a=e.query,i="";return"string"==typeof a?i=a:a&&"object"===Object(r.default)(a)&&(i=m(a)),c.PREFIX+"/"+n+"?"+i.replace(/^\?/,"")}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new RegExp("^"+c.PREFIX+"/("+d()+")").test(e)}function d(){return Object.keys(c.PAGE_TYPE).map((function(e){return c.PAGE_TYPE[e]})).join("|")}function f(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.indexOf("?"),n="",a="";t>=0?(n=e.slice(0,t),a=e.slice(t+1)):n=e;var r=new RegExp("^"+c.PREFIX+"/("+d()+")"),i=e.match(r),o="";return i&&(o=i[1]),{path:n,query:a,functionalPageType:o,isFunctionalPage:!!o}}function p(){var e=Object(i._getEnterOptionsSync)().referrerInfo,t=e&&e.messageExtraData,n={};return"object"===Object(r.default)(t)&&null!==t&&(n=t),n}function h(){var e=Object(i._getEnterOptionsSync)().referrerInfo,t=e&&e.messageExtraData,n="";return"object"===Object(r.default)(t)&&null!==t&&(n=JSON.stringify(t)),n}function v(e){var t={},n=s();if(n.pageType===c.PAGE_TYPE.PLAY_PAGE_IMAGE){var a=u({pageType:c.PAGE_TYPE.PLAY_PAGE_IMAGE,query:n.query});t={title:n.params.title||e.title,path:a,imageUrl:n.params.imageUrl||n.params.fileUrl,messageExtraData:Object.assign({},n.params,{pageType:c.PAGE_TYPE.PLAY_PAGE_IMAGE}),cardSubType:g(c.PAGE_TYPE.PLAY_PAGE_IMAGE)}}else if(n.pageType===c.PAGE_TYPE.PLAY_PAGE_VIDEO){var r=u({pageType:c.PAGE_TYPE.PLAY_PAGE_VIDEO,query:n.query});t={title:n.params.title||e.title,path:r,imageUrl:n.params.thumbUrl,messageExtraData:Object.assign({},n.params,{pageType:c.PAGE_TYPE.PLAY_PAGE_VIDEO}),cardSubType:g(c.PAGE_TYPE.PLAY_PAGE_VIDEO)}}return t}function g(e){var t;return(t={},Object(a.default)(t,c.PAGE_TYPE.PLAY_PAGE_IMAGE,0),Object(a.default)(t,c.PAGE_TYPE.PLAY_PAGE_VIDEO,1),t)[e]}function y(){return!!s()}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.keys(e).reduce((function(t,n){return""+t+n+"="+e[n]+"&"}),"");return t=t.replace(/&$/,"")}function b(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"index.html",n="";"string"==typeof e?n=e:e&&"object"===Object(r.default)(e)&&(n=m(e));var a=t+"?"+n;return a}},function(e,t,n){n.r(t),n.d(t,"WebView",(function(){return _})),n.d(t,"getWebViewIdList",(function(){return O}));var a=n(26),r=n(4),i=n(5),o=n(9),s=n(14),c=n(17),u=n(8),l=n(54),d=n(0),f=n(31),p=n(1);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var v=new Map,g=new WeakMap,y=new WeakMap,m=new WeakMap;function b(e){var t=this;return new Promise((function(n,a){var r=y.get(t);Object(d.invokeMethod)("insertHTMLWebView",{htmlId:t.id,position:r,src:g.get(t),zIndex:m.get(t),backgroundColor:r.backgroundColor,__skipDomainCheck__:e,success:n,fail:a})}))}var _=function(e){Object(s.default)(n,e);var t=h(n);function n(e){var a,i=e.src,s=e.zIndex,c=e.style,u=void 0===c?{}:c,l=e.__skipDomainCheck__;return Object(r.default)(this,n),a=t.call(this,{style:u}),v.set(a.id,Object(o.default)(a)),g.set(Object(o.default)(a),i),y.set(Object(o.default)(a),u),m.set(Object(o.default)(a),s),b.call(Object(o.default)(a),l),a}return Object(i.default)(n,[{key:"src",get:function(){return g.get(this)},set:function(e){g.set(this,e),Object(d.invokeMethod)("updateHTMLWebView",{htmlId:this.id,src:e})}},{key:"style",get:function(){return y.get(this)},set:function(e){this.style||y.set(this,{});var t=Object.assign(this.style,e);Object(d.invokeMethod)("updateHTMLWebView",{htmlId:this.id,position:t,backgroundColor:t.backgroundColor})}},{key:"zIndex",get:function(){return m.get(this)},set:function(e){m.set(this,e),Object(d.invokeMethod)("updateHTMLWebView",{htmlId:this.id,zIndex:e})}},{key:"destroy",value:function(){v.delete(this.id),Object(d.invokeMethod)("removeHTMLWebView",{htmlId:this.id})}}]),n}(l.Element);function O(){return Object(a.default)(v.keys())}function I(e){var t=e.htmlId,n=v.get(t);n&&n.onload&&setTimeout(n.onload)}function S(e){var t=e.name,n=e.arg,a=e.htmlId;"postMessage"===t&&v.forEach((function(e,t){var r=e.onmessage;a&&a!==t||r&&setTimeout((function(){return r(n)}))}))}p.default.onReady((function(){4===p.default.appType&&(Object(f.onNativeEvent)("onWebviewFinishLoad",I),Object(f.onNativeEvent)("onWebInvokeAppService",S),Object(f.onNativeEvent)("WEB_INVOKE_APPSERVICE",S))}))},function(e,t,n){n.r(t),n.d(t,"getAccountInfoSync",(function(){return R})),n.d(t,"getLaunchOptionsSync",(function(){return j.getLaunchOptionsSync})),n.d(t,"_getLaunchOptionsSync",(function(){return j._getLaunchOptionsSync})),n.d(t,"onAppEnterBackground",(function(){return a.onAppEnterBackground})),n.d(t,"onAppEnterForeground",(function(){return r.onAppEnterForeground})),n.d(t,"onAppRunningStatusChange",(function(){return N})),n.d(t,"_onAppUnhang",(function(){return h})),n.d(t,"onAppUnhang",(function(){return v})),n.d(t,"onAppHide",(function(){return c})),n.d(t,"offAppHide",(function(){return u})),n.d(t,"_onAppHide",(function(){return l})),n.d(t,"emitIsloatedAppHide",(function(){return d})),n.d(t,"onAppShow",(function(){return i.onAppShow})),n.d(t,"offAppShow",(function(){return i.offAppShow})),n.d(t,"_onAppShow",(function(){return i._onAppShow})),n.d(t,"emitIsloatedAppShow",(function(){return i.emitIsloatedAppShow})),n.d(t,"onError",(function(){return F})),n.d(t,"offError",(function(){return W})),n.d(t,"onUnhandledRejection",(function(){return V})),n.d(t,"offUnhandledRejection",(function(){return U})),n.d(t,"onAppRoute",(function(){return G.onAppRoute})),n.d(t,"offAppRoute",(function(){return G.offAppRoute})),n.d(t,"onAppRouteDone",(function(){return H.onAppRouteDone})),n.d(t,"offAppRouteDone",(function(){return H.offAppRouteDone})),n.d(t,"onAppRouteResized",(function(){return K})),n.d(t,"offAppRouteResized",(function(){return X})),n.d(t,"onPageNotFound",(function(){return ee})),n.d(t,"offPageNotFound",(function(){return te})),n.d(t,"saveExitState",(function(){return ie})),n.d(t,"loadExitState",(function(){return oe})),n.d(t,"_onThemeChange",(function(){return ue})),n.d(t,"onThemeChange",(function(){return ce})),n.d(t,"offThemeChange",(function(){return le})),n.d(t,"getEnterOptionsSync",(function(){return de.getEnterOptionsSync})),n.d(t,"getInnerEnterOptionsSync",(function(){return de.getInnerEnterOptionsSync})),n.d(t,"onCopyUrl",(function(){return w})),n.d(t,"offCopyUrl",(function(){return C})),n.d(t,"_onTapAnyWhere",(function(){return pe})),n.d(t,"_offTapAnyWhere",(function(){return he}));var a=n(82),r=n(53),i=n(101),o=n(21),s=Object(o.getEventManager)("AppHide"),c=s.onMethod,u=s.offMethod,l=s.internalOnMethod;function d(){s.emitGlobal()}Object(a.onAppEnterBackground)((function(e){s.emitInternal(e)}));var f=n(0),p=Object(o.getEventManager)("AppUnhang"),h=p.internalOnMethod,v=p.onMethod;Object(f.onMethod)("onAppUnhang",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p.emit(e)}));var g=n(69),y=n(6);y.default.appStatus=g.AppStatus.FORE_GROUND,y.default.hanged=!1,Object(i._onAppShow)((function(e){Date.now()})),l((function(e){Date.now()})),Object(r.onAppEnterForeground)((function(){y.default.appStatus=g.AppStatus.FORE_GROUND})),Object(a.onAppEnterBackground)((function(e){"hide"===e.mode?y.default.appStatus=g.AppStatus.LOCK:y.default.appStatus=g.AppStatus.BACK_GROUND,"close"===e.mode?y.default.hanged=!1:"hang"===e.mode&&(y.default.hanged=!0)})),v((function(){y.default.hanged=!1}));var m=n(25),b=n(39),_=n(15),O=n(1),I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.keyPath="WxaAppVersionInfo.AppVersion",Object(f.invokeMethod)("getAppContact",e,{beforeSuccess:function(e){e.data=JSON.parse(e.data)}})},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.keyPath="WxaAppVersionInfo.VersionState",Object(f.invokeMethod)("getAppContact",e,{beforeSuccess:function(e){e.data=JSON.parse(e.data),1===e.data&&(e.data=0)}})},E=null,w=function(e){E=e},C=function(){E=null},k=Object(_.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=["release","develop","trial"],n=Object(m.default)("CreateWxaShortLink","webapi_createwxashortlink",{},{},(function(e){return{wxa_appid:e.appid,wxa_path:e.path,page_title:e.title,version:e.version,version_type:t.indexOf(e.envVersion)}}),(function(e){delete e.rawData,e.shortLink=e.short_link,delete e.short_link}));n(e)})),T=Object(_.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};I({success:function(t){Object(f.beforeInvokeCallback)({name:"getAppContact",args:e,res:t})},fail:function(t){S({success:function(t){Object(f.beforeInvokeCallback)({name:"getAppContact",args:e,res:t})},fail:function(t){Object(f.beforeInvokeCallback)({name:"getAppContact",args:e,res:t,success:!1})}})}})})),A=function(e){return Object(b.showToast)({icon:"none",title:e})},P=new Map,D="请检查网络后重试",x=0;Object(f.onMethod)("onCopyUrl",(function(e){if(!Object(_.isGame)()&&e.webviewId!==y.default.currentWebviewId)return console.warn("[onCopyUrl] error: webviewId loss"),void A("请检查网络后重试");var t=e.shortLinkEnable||!1,n=y.default.lastRoute,a=y.default.lastOpenType,r=JSON.parse(JSON.stringify(y.default.lastRawQuery||{}));if("appLaunch"!==a&&"autoReLaunch"!==a)try{Object.keys(r).forEach((function(e){r[e]=decodeURIComponent(r[e])}))}catch(e){return void A(D)}var i=Object(_.isGame)()?t?"":"index.html":n+".html",o=Object.entries(r).map((function(e){return e.join("=")})).join("&");if(t&&"function"==typeof E)try{o=(E()||{}).query||""}catch(e){console.warn("[onCopyUrl] error",e)}var s=o?i+"?"+o:i;if(t){P.has(x)&&P.set(x,!1);var c=++x,u=!1;P.set(c,!0);var l=function(e){!!P.get(c)&&(A(e),e===D&&Object(f.invokeMethod)("returnCopyUrl",{url:"",shortLinkEnable:t}),P.set(c,!1))};setTimeout((function(){u=!0,l(D)}),1500);var d=O.default.page[n+".html"],p=d&&d.window||{},h=O.default.global&&O.default.global.window||{},v=p.navigationBarTitleText||h.navigationBarTitleText||"";T().then((function(e){var n=e.data;return k({appid:O.default.accountInfo.appId,envVersion:O.default.envVersion,path:s,title:Object(_.isGame)()?"":v,version:n}).then((function(e){return console.log("createWxaShortLinkAsync, ",e),!!P.get(c)&&!u&&(Object(f.invokeMethod)("returnCopyUrl",{url:e.shortLink,shortLinkEnable:t,success:function(){A("已复制")},fail:function(){A(D)}}),P.set(c,!1)),null})).catch((function(e){l(D),console.log("[onCopyUrl]:",e)})),null})).catch((function(e){l(D),console.log("[onCopyUrl]: ",e)}))}else Object(f.invokeMethod)("returnCopyUrl",{url:s,shortLinkEnable:t,success:function(){A("已复制")},fail:function(){A(D)}})}));var R=function(){return{miniProgram:{appId:O.default.accountInfo&&O.default.accountInfo.appId||"",envVersion:O.default.envVersion||"release",version:O.default.appContactInfo&&O.default.appContactInfo.user_version||""}}},j=n(138),M=Object(o.getEventManager)("AppRunningStatusChange"),N=M.internalOnMethod;Object(f.onMethod)("onAppRunningStatusChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y.default.runningStatus=e.status,M.emit(e)}));var L=Object(o.getEventManager)("AppService-Error"),B=Object(o.getEventManager)("AppService-UnhandledRejection"),F=L.onMethod,W=L.offMethod,V=B.onMethod,U=B.offMethod;Reporter.registerThirdErrorListener((function(e){L.emit(e)})),Reporter.registerThirdUnhandledRejectionListener((function(e,t){B.emit({reason:e,promise:t})}));var G=n(41),H=n(83),Y=n(18),q=n(141),z=Object(o.getEventManager)("AppRouteResized"),K=z.internalOnMethod,X=z.internalOffMethod;Object(f.onMethod)("onAppRouteResized",(function(e){"object"===Object(Y.default)(e)&&null!==e&&Object(q.updateWindowSizeStatus)(e),z.emit({})}));var Z=n(10),J=n(153),Q=n(48),$=Object(o.getEventManager)("PageNotFound"),ee=$.onMethod,te=$.offMethod;function ne(e){for(var t={},n=e.split("&"),a=0;a<n.length;a++){var r=n[a].split("=");if(r.length>1)try{t[r[0]]=decodeURIComponent(r[1])}catch(e){}}return t}var ae={page:void 0,time:Date.now(),count:0};Object(f.onMethod)("onPageNotFound",(function(){Q.nativeConsole.info("Ignored onPageNotFound.")})),Object(J.onAppRoutePageNotFound)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;Q.nativeConsole.info("Page not found, webviewId="+t),y.default.lastRoute="",e&&"string"==typeof e.path&&e.path.endsWith(".html")&&(e.path=Object(Z.removeHtmlSuffixFromUrl)(e.path)),e&&"string"==typeof e.query&&(e.query=ne(e.query)),ae.page&&ae.page===e.path?ae.count++:ae={page:e.path,time:Date.now(),count:1};var n=!0;Date.now()-ae.time<=3e3&&ae.count>3?(n=!1,console.error('onPageNotFound error: page "'+e.path+'" is not found.')):$.emit(e);var a=$.getGlobalListeners().length>0&&n;a||Reporter.thirdErrorReport({error:new Error('onPageNotFound error: page "'+e.path+'" is not found.'),extend:" at onPageNotFound"}),Object(f.invokeMethod)("pageNotFoundCallback",{hasHandler:a,webviewId:t})}));var re=n(45),ie=function(e,t,n){var a=O.default.global&&O.default.global.window&&O.default.global.window.restartStrategy,r=O.default.page&&O.default.page[e+".html"]&&O.default.page[e+".html"].window&&O.default.page[e+".html"].window.restartStrategy,i=String(r||a||"");if(i){var o={type:i,path:t,extraData:n?n.data:void 0,expireTimeStamp:(n?n.expireTimeStamp:0)||Date.now()+864e5};O.default.accountInfo.appId,Object(re.invokeWebviewMethod)("saveExitState",{appId:O.default.accountInfo.appId,data:o},[y.default.currentWebviewId],(function(e){}))}},oe=function(e){Object(re.invokeWebviewMethod)("loadExitState",{appId:O.default.accountInfo.appId},[y.default.currentWebviewId],(function(t){return t&&t.expireTimeStamp>Date.now()?e(t.type,t.path,t.extraData):e()}))},se=Object(o.getEventManager)("ThemeChange"),ce=se.onMethod,ue=se.internalOnMethod,le=se.offMethod;Object(f.onMethod)("onThemeChange",(function(e){void 0!==O.default.theme&&(O.default.theme=e.theme,se.emit({theme:e.theme}))}));var de=n(67),fe=Object(o.getEventManager)("tapAnyWhere");Object(f.subscribe)("tapAnyWhere",fe.emitInternal);var pe=fe.internalOnMethod,he=fe.internalOffMethod},function(e,t,n){n.r(t),n.d(t,"onWxAdUserCaptureScreen",(function(){return w})),n.d(t,"reportShareAppMessage",(function(){return C})),n.d(t,"onWeappTouchEvent",(function(){return A})),n.d(t,"offWeappTouchEvent",(function(){return P})),n.d(t,"onceWeappTouchEvent",(function(){return D}));var a=n(0),r=n(21),i=Object(r.getEventManager)("userCaptureScreen"),o=i.onMethod,s=(i.offMethod,null);Object(a.onMethod)("onUserCaptureScreen",(function(e){"function"==typeof s&&s(e),i.emit(e)}));var c=n(1),u=n(102),l=n(120),d=n(41),f=n(15),p=n(43),h=n(37),v=n(24),g=n(73),y=Object(v.promisify)(Object(h.constructOperateWXData)(!1,"advertReport")),m="",b=0,_="index.html",O=new f.EventEmitter,I="_onWxAdUserCaptureScreen",S={shareAppMessage:0,shareTimeline:3};c.default.onReady((function(){m=Object(u.getAdUxInfo)()}));var E={};try{Object(d.onAppRoute)((function(e){b=e.webviewId,E[b]||(E[b]=!0,_=e.path,Object(p.onBeforeUnloadPage)(b,(function(e){T(e)})))}))}catch(e){}o((function(){var e=+new Date;m&&Object(l.reportUserCaptureScreen)({eventTimeStamp:e,scene:7,uxinfo:m,url:_}),b&&Object(a.publish)(I,{eventTimeStamp:e,path:_},[b]),O.emit(I,{eventTimeStamp:e,webviewId:b,path:_})}));var w=function(e){"function"==typeof e&&O.on("_onWxAdUserCaptureScreen",e)},C=function(e,t){if(m){var n="",a=S[e]?S[e]:0;"shareAppMessage"===e&&t.shareInfos&&(a=t.shareInfos.length>0?2:1,n=t.shareInfos.length>0&&t.shareInfos[0].shareName||""),0===a&&"shareAppMessage"===e&&t.shareTickets&&(a=t.shareTickets.length>0?2:1),Object(l.reportLandingPageShare)({eventTimeStamp:+new Date,shareType:a,tousername:n,uxinfo:m,url:_})}},k={};Object(a.subscribe)("wxAdDelayReport",(function(e,t){k[t]||(k[t]={}),e.key&&e.value&&(k[t][e.key]=e.value)}));var T=function(e){if(k[e]){for(var t in k[e]){var n=k[e][t];y({apiName:"advert_report",reqData:{report_action:"comm_mmdata_report",report_data_json:n}}).catch((function(e){}))}delete k[e]}};Object(a.subscribe)("checkWxAdFetchLog",(function(e){Object(g.handleSplashAdFetchLog)(e)})),Object(a.subscribe)("weappTouchEvent",(function(e){O.emit("_onWeappTouchEvent",e)}));var A=function(e,t){if("function"==typeof e){var n=function(n){e(n,t)};return O.on("_onWeappTouchEvent",n),n}return null},P=function(e){O.off("_onWeappTouchEvent",e)},D=function(e,t){var n=!1;if("function"==typeof e){var a=function(a){!n&&e(a,t),n=!0};return O.on("_onWeappTouchEvent",a),a}return null}},function(e,t,n){n.r(t),n.d(t,"OffscreenCanvas",(function(){return k})),n.d(t,"createOffscreenCanvas",(function(){return T}));var a=n(14),r=n(17),i=n(8),o=n(16),s=n(18),c=n(4),u=n(5),l=n(19),d=n(92),f=n(0),p=n(2),h=n(6),v=n(20),g=n(162),y=n(163),m=n(28),b=n(110),_=n(50);function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(i.default)(e);if(t){var o=Object(i.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(r.default)(this,n)}}var I=function(e){Object(a.default)(n,e);var t=O(n);function n(){return Object(c.default)(this,n),t.apply(this,arguments)}return Object(u.default)(n,[{key:"_initCanvasInstance",value:function(){var e=document.createElement("canvas");return e.style.position="absolute",e.style.top=this._top+"px",e.style.left=this._left+"px",e.style.width=this._width+"px",e.style.height=this._height+"px",e.width=this._width,e.height=this._height,e._canvasId=this.id,e}},{key:"getContext",value:function(e,t){return Object(v.pipe)(_.decorateContextForImageProxy)(Object(m.default)(Object(i.default)(n.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=this;if("function"==typeof window.__global.createCustomImage)return window.__global.createCustomImage((function(t){return Object(v.getImageRealPathForDevtools)(t,e.nodeId,e.pluginId,h.default.currentWebviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}));console.warn("开发工具暂不支持 createImage")}}]),n}(b.OffscreenSkiaCanvas),S=n(123);function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(i.default)(e);if(t){var o=Object(i.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(r.default)(this,n)}}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){Object(o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var k=function(){function e(t){var n=t.id,a=t.width,r=t.height,i=t.nodeId,o=t.pluginId;Object(c.default)(this,e),this._id=n,this._width=a,this._height=r,this._nodeId=i,this._pluginId=o}return Object(u.default)(e,[{key:"id",get:function(){return this._id}},{key:"_offscreenCanvasId",get:function(){return null}},{key:"createImage",value:function(){}},{key:"getContext",value:function(){}},{key:"width",get:function(){},set:function(e){}},{key:"height",get:function(){},set:function(e){}}]),e}();function T(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a="object"===Object(s.default)(e)?e:{width:e,height:t,compInst:n},r=C({type:"webgl",width:1,height:1,compInst:null,pluginId:""},a),i=r.type,o=r.width,c=r.height,u=r.compInst,l=r.pluginId;switch(i){case"2d":return A(o,c,u,l);case"webgl":return P(o,c,u,l);default:throw new Error('unknown type "'+i+'"')}}function A(e,t,n,a){var r=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return p.IS_IOS?function(e,t,n,a){var r=-1*x();return new j({id:r,width:e,height:t,nodeId:n,pluginId:a})}(e,t,r,a):p.IS_ANDROID?function(e,t,n,a){var r=-1*x();return new N({id:r,width:e,height:t,nodeId:n,pluginId:a})}(e,t,r,a):p.IS_DEVTOOLS?function(e,t,n,a){if(!document.createElement)return void console.warn("createOffscreenCanvas: 开发者工具暂不支持创建离屏 Canvas");var r=-1*x();return new B({id:r,width:e,height:t,nodeId:n,pluginId:a})}(e,t,r,a):void 0}function P(e,t,n,a){var r=n&&n.__wxExparserNodeId__?n.__wxExparserNodeId__:"";return p.IS_IOS?function(e,t,n,a){var r=-1*x();return new R({id:r,width:e,height:t,nodeId:n,pluginId:a})}(e,t,r,a):p.IS_ANDROID?function(e,t,n,a){var r=-1*x();return new M({id:r,width:e,height:t,nodeId:n,pluginId:a})}(e,t,r,a):p.IS_DEVTOOLS?function(e,t,n,a){if(!document.createElement)return void console.warn("createOffscreenCanvas: 开发者工具暂不支持创建离屏 Canvas");var r=-1*x();return new L({id:r,width:e,height:t,nodeId:n,pluginId:a})}(e,t,r,a):void 0}var D={},x=function(){for(;;){var e=Math.floor(32767*Math.random());if(!D[e])return D[e]=!0,e}},R=function(e){Object(a.default)(n,e);var t=E(n);function n(e){var a,r=e.id,i=e.width,o=e.height,s=e.nodeId,u=e.pluginId;Object(c.default)(this,n),(a=t.call(this,{id:r,width:i,height:o,nodeId:s,pluginId:u})).__id=-h.default.currentWebviewId||a.id,Object(f.invokeMethod)("insertWebGLCanvas",{position:{top:-100,left:-100,width:1,height:1},canvasId:a.__id,keepAlive:!0,fail:function(){}});var l=Object(d.getWeixinCanvas)();return a.canvas=l.createOffscreenCanvas(a.__id,i,o),a}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return(t=this.canvas).getContext.apply(t,[e].concat(a))}}},{key:"createImage",value:function(){var e=Object(d.getWeixinCanvas)().createImage(this.__id);return Object(v.wrapImageObject)(e,{nodeId:this.nodeId,pluginId:this.pluginId})}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}},{key:"_offscreenCanvasId",get:function(){return this.canvas.__id}}]),n}(k),j=function(e){Object(a.default)(n,e);var t=E(n);function n(e){var a,r=e.id,i=e.width,o=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(a=t.call(this,{id:r,width:i,height:o,nodeId:s,pluginId:u})).canvas=Object(v.shouldUseOldCanvas)()?new S.SkiaCanvasFake(h.default.currentWebviewId,r):new g.OffscreenSkiaCanvasIOS({id:r,width:i,height:o,nodeId:s,pluginId:u}),a}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return(t=this.canvas).getContext.apply(t,[e].concat(a))}console.warn("can only create 2d context")}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(k);var M=function(e){Object(a.default)(n,e);var t=E(n);function n(e){var a,r=e.id,i=e.width,o=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(a=t.call(this,{id:r,width:i,height:o,nodeId:s,pluginId:u})).canvas=new l.default.OffscreenCanvas(i,o),a}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return(t=this.canvas).getContext.apply(t,[e].concat(a))}}},{key:"createImage",value:function(){var e=new l.default.Image;return Object(v.wrapImageObject)(e,{nodeId:this.nodeId,pluginId:this.pluginId})}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}},{key:"_offscreenCanvasId",get:function(){return this.canvas.__id}}]),n}(k),N=function(e){Object(a.default)(n,e);var t=E(n);function n(e){var a,r=e.id,i=e.width,o=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(a=t.call(this,{id:r,width:i,height:o,nodeId:s,pluginId:u})).canvas=Object(v.shouldUseOldCanvas)()?new S.SkiaCanvasFake(h.default.currentWebviewId,r):new y.OffscreenSkiaCanvasAndroid({id:r,width:i,height:o,nodeId:s,pluginId:u}),a}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return(t=this.canvas).getContext.apply(t,[e].concat(a))}}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(k);var L=function(e){Object(a.default)(n,e);var t=E(n);function n(e){var a,r=e.id,i=e.width,o=e.height,s=e.nodeId,u=e.pluginId;Object(c.default)(this,n),a=t.call(this,{id:r,width:i,height:o,nodeId:s,pluginId:u});var l=document.createElement("canvas");return l.width=i,l.height=o,a.canvas=l,a}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("webgl"===e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return(t=this.canvas).getContext.apply(t,[e].concat(a))}}},{key:"createImage",value:function(){var e=this;if("function"==typeof window.__global.createCustomImage)return window.__global.createCustomImage((function(t){return Object(v.getImageRealPathForDevtools)(t,e.nodeId,e.pluginId,h.default.currentWebviewId)}),(function(e){return e.replace(/^\/__pageframe__\//,"")}));console.warn("开发工具暂不支持 createImage")}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(k),B=function(e){Object(a.default)(n,e);var t=E(n);function n(e){var a,r=e.id,i=e.width,o=e.height,s=e.nodeId,u=e.pluginId;return Object(c.default)(this,n),(a=t.call(this,{id:r,width:i,height:o,nodeId:s,pluginId:u})).canvas=new I({id:r,width:i,height:o,nodeId:s,pluginId:u}),a}return Object(u.default)(n,[{key:"getContext",value:function(e){var t;if("2d"===e){for(var n=arguments.length,a=new Array(n>1?n-1:0),r=1;r<n;r++)a[r-1]=arguments[r];return(t=this.canvas).getContext.apply(t,[e].concat(a))}}},{key:"createImage",value:function(){return this.canvas.createImage()}},{key:"width",get:function(){return this.canvas.width},set:function(e){this.canvas.width=e}},{key:"height",get:function(){return this.canvas.height},set:function(e){this.canvas.height=e}}]),n}(k)},function(e,t,n){n.r(t),n.d(t,"pick",(function(){return c})),n.d(t,"omit",(function(){return u})),n.d(t,"isObject",(function(){return l})),n.d(t,"mergeDeep",(function(){return d})),n.d(t,"getMembers",(function(){return f})),n.d(t,"get",(function(){return p})),n.d(t,"flatten",(function(){return h})),n.d(t,"cloneDeep",(function(){return v}));var a=n(26),r=n(16),i=n(18);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw i}}}}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var c=function(e,t){return t.reduce((function(t,n){return t[n]=e[n],t}),{})},u=function(e,t){return c(e,Object.keys(e).filter((function(e){return!t.includes(e)})))},l=function(e){return e&&"object"===Object(i.default)(e)&&!Array.isArray(e)};function d(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];if(!n.length)return e;var i=n.shift();if(l(e)&&l(i))for(var o=0,s=Object.keys(i);o<s.length;o++){var c=s[o];l(i[c])?(e[c]||Object.assign(e,Object(r.default)({},c,{})),d(e[c],i[c])):Object.assign(e,Object(r.default)({},c,i[c]))}return d.apply(void 0,[e].concat(n))}var f=function(e){for(var t=new Set,n=e;n;){var r,i=o(Object.getOwnPropertyNames(n));try{for(i.s();!(r=i.n()).done;){var s=r.value;t.add(s)}}catch(e){i.e(e)}finally{i.f()}n=Object.getPrototypeOf(n)}return Object(a.default)(t)},p=function(e,t,n){for(var a="string"==typeof t?t.split("."):t,r=e,i=0;r&&i<a.length;)r=r[a[i]],i+=1;return r||n},h=function e(t){return t.reduce((function(t,n){return Array.isArray(n)?t.push.apply(t,Object(a.default)(e(n))):t.push(n),t}),[])},v=function(e){return JSON.parse(JSON.stringify(e))}},function(e,t,n){n.r(t),n.d(t,"onShow",(function(){return v})),n.d(t,"offShow",(function(){return g})),n.d(t,"_onShow",(function(){return y})),n.d(t,"_offShow",(function(){return m})),n.d(t,"emitGameOnshow",(function(){return O})),n.d(t,"_onBaseFrameShow",(function(){return b})),n.d(t,"_offBaseFrameShow",(function(){return _}));var a=n(18),r=n(77),i=n(21),o=n(1),s=n(117),c=n(2),u=n(31),l=n(122),d=n(94),f=n(12),p=Object(i.getEventManager)("Show"),h=Object(i.getEventManager)("BaseFrameShow"),v=p.onMethod,g=p.offMethod,y=p.internalOnMethod,m=p.internalOffMethod,b=h.internalOnMethod,_=h.internalOffMethod;function O(e,t){e=e||Object(r.getLaunchOptionsSync)(),t=t||Object(r._getLaunchOptionsSync)(),Reporter.__query__=e.query,l.default.query=e.query,p.emitInternal(t),p.emitGlobal(e)}function I(e){wxNativeConsole.info("[emitBaseFrameOnShow]",e),h.emitInternal(e)}function S(e){var t=e.split("?")[1],n={};if(t)try{n=t.split("&").reduce((function(e,t){var n=t.split("="),a=n[0],r=n.slice(1).join("=");return e[a]=r,e}),{})}catch(e){n={}}return n}Object(u.onNativeEvent)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.path;c.IS_ANDROID&&Object(f.isObject)(e.query)&&Object.keys(e.query).length>0||t&&(e.query=S(t));var n=Object(r.formatLaunchInfo)(e),i=n.publicLaunchInfo,o=n.appLaunchInfo,u=o.shareInfo;I(o),setTimeout((function(){Object(d.isAtFunctionalPage)()||O(i,o),"object"===Object(a.default)(u)&&null!==u&&Object(s.showUpdatableMessageSubscribeButton)(u.shareKey)}),0)})),o.default.onReady((function(){var e=Object(r.getLaunchOptionsSync)(),t=Object(r._getLaunchOptionsSync)();Reporter.__query__=e.query,l.default.query=e.query,c.IS_DEVTOOLS||(I(t),setTimeout((function(){Object(d.isAtFunctionalPage)()||O(e,t)}),0))}))},function(e,t,n){n.r(t),n.d(t,"onAppShow",(function(){return c})),n.d(t,"offAppShow",(function(){return u})),n.d(t,"_onAppShow",(function(){return l})),n.d(t,"emitIsloatedAppShow",(function(){return d}));var a=n(53),r=n(21),i=n(138),o=n(41),s=Object(r.getEventManager)("AppShow"),c=s.onMethod,u=s.offMethod,l=s.internalOnMethod;function d(e){s.emitGlobal(e)}Object(a.onAppEnterForeground)((function(e){s.emitInternal(e)})),Object(o.onAppRoute)((function e(t){if("appLaunch"===t.openType){var n=Object(i._getLaunchOptionsSync)();s.emitInternal(n),Object(o.offAppRoute)(e)}}))},function(e,t,n){n.r(t),n.d(t,"getAdUxInfo",(function(){return u}));var a=n(31),r=n(1),i=n(131),o=n(133),s="",c=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{s=e.transitExtraData.adUxInfo}catch(e){s=""}};"undefined"!=typeof __safeway__&&(r.default.onReady((function(){c(r.default.appLaunchInfo)})),Object(a.onNativeEvent)("onAppEnterForeground",(function(e){c(e)})),Object(a.onNativeEvent)("onAppEnterBackground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"back"!==e.mode&&"close"!==e.mode||(s="")})),Object(o.subscribe)("getAdUxInfo",(function(e,t){Object(i.publish)("adUxInfoGot",{adUxInfo:s,callbackId:e.callbackId},[t])})));var u=function(){return s}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return r}));var a=n(119);function r(e,t){if(e){if("string"==typeof e)return Object(a.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(n):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Object(a.default)(e,t):void 0}}},function(e,t,n){function a(e,t){return(a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){n.r(t),n.d(t,"reportRecycledAPI",(function(){return r}));var a=n(6),r=function(e){var t,n=e.name,r=e.scene,i=e.strategy,o=e.timeDiffToLastTap,s=void 0===o?0:o;"undefined"!=typeof __appServiceEngine__&&(t=__appServiceEngine__.getCurrentPagesByDomain("").find((function(e){return e.__wxWebviewId__===a.default.currentWebviewId}))||{});var c=[n,r,Reporter.getAppType(),t?t.route:"",i||0,s].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"RecycledAPI",value:c})}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return o}));var a=n(4),r=n(5),i=n(34),o=function(){function e(){Object(a.default)(this,e),this.emitter=new i.default({maxListeners:2e3}),this.callbackMap=new WeakMap,this.originalCallbackMap=new WeakMap}return Object(r.default)(e,[{key:"emit",value:function(e,t){this.emitter.emit(e,t)}},{key:"on",value:function(e,t){if(t&&"function"==typeof t){var n=__errorTracer__.surroundThirdByTryCatch(t,"at "+e+" callback function");this.callbackMap.set(t,n),this.originalCallbackMap.set(n,t),this.emitter.on(e,n)}}},{key:"off",value:function(e,t){var n=this;if(t&&"function"==typeof t){var a=this.callbackMap.get(t);"function"==typeof a&&(this.emitter.off(e,a),this.callbackMap.delete(t),this.originalCallbackMap.delete(a))}else this.emitter.listeners(e).forEach((function(e){var t=n.originalCallbackMap.get(e);n.callbackMap.delete(t),n.originalCallbackMap.delete(e)})),this.emitter.removeAllListeners(e)}}]),e}()},function(e,t,n){n.r(t),n.d(t,"_getABTestConfig",(function(){return i})),n.d(t,"getABTestConfig",(function(){return o}));var a=n(1),r=n(0),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(r.invokeMethod)("getABTestConfig",e)},o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};7===a.default.appType?Object(r.invokeMethod)("getABTestConfig",e):Object(r.beforeInvokeFail)("getABTestConfig",e,"permission denied",1)}},function(e,t,n){var a,r,i,o,s,c,u,l,d;n.r(t),n.d(t,"COMMON_EVENT",(function(){return a})),n.d(t,"ROOT_EVENT",(function(){return r})),n.d(t,"BUTTON_EVENT",(function(){return i})),n.d(t,"TEXT_EVENT",(function(){return o})),n.d(t,"VIDEO_EVENT",(function(){return s})),n.d(t,"FEEDBACK_EVENT",(function(){return c})),n.d(t,"ENDPAGE_EVENT",(function(){return u})),n.d(t,"CAROUSEL_EVENT",(function(){return l})),n.d(t,"REWARDEDVIDEO_EVENT",(function(){return d})),function(e){e.TAP="tap",e.ANIMATIONEND="animationend"}(a||(a={})),function(e){e.APPENTERFOREGROUND="appEnterForeground",e.APPENTERBACKGROUND="appEnterBackground",e.CONTAINERTAP="containerTap",e.ADBUTTONTAP="adButtonTap",e.VIEWABLEEXPOSURE="viewableExposure",e.EXPOSURE="exposure",e.SHOWHALF="showhalf",e.HIDEHALF="hidehalf",e.SPLASHADFIRSTRENDER="splashAdFirstRender",e.SPLASHADMENUVIEW="splashAdMenuView"}(r||(r={})),function(e){e.BUTTONTAP="buttonTap"}(i||(i={})),function(e){e.RELATIONFETCHED="relationFetched"}(o||(o={})),function(e){e.VIDEOENDED="videoEnded",e.VIDEOPAUSE="videoPause",e.VIDEOPLAY="videoPlay",e.VIDEOTIMEUPDATE="videoTimeUpdate",e.MUTEDCHANGE="mutedChange",e.VIDEOLOADEDMETADATA="videoLoadedMetaData"}(s||(s={})),function(e){e.FEEDBACKBTNTAP="feedbackBtnTap",e.TAGTAP="tagTap",e.DISLIKETAP="dislikeTap",e.DISLIKEREASONTAP="dislikeReasonTap"}(c||(c={})),function(e){e.REPLAY="replay",e.SHOW="show",e.HIDE="hide",e.VIDEODISLIKE="videodislike"}(u||(u={})),function(e){e.SHOWCHANGE="showChange",e.UNITTAP="unitTap"}(l||(l={})),function(e){e.REWARDEDVIDEOPLAY="rewardedVideoPlay",e.REWARDEDVIDEOEND="rewardedVideoEnd",e.REWARDEDVIDEOTIMEUPDATE="rewardedVideoTimeUpdate",e.REWARDEDVIDEOSHOWFLOORINGPAGE="rewardedVideoShowFlooringPage",e.REWARDEDVIDEOHANDLEDYNAMICDONE="rewardedVideoHandleDynamicDone"}(d||(d={}))},function(e,t,n){n.r(t),n.d(t,"CanvasInterface",(function(){return i}));var a=n(4),r=n(5),i=function(){function e(){Object(a.default)(this,e)}return Object(r.default)(e,[{key:"_init",value:function(){}},{key:"_onReady",value:function(){}},{key:"_initCanvasInstance",value:function(){}},{key:"getContext",value:function(){}},{key:"createImage",value:function(){}},{key:"requestAnimationFrame",value:function(){}},{key:"cancelAnimationFrame",value:function(){}},{key:"width",get:function(){},set:function(e){}},{key:"height",get:function(){},set:function(e){}}]),e}()},function(e,t,n){n.r(t),n.d(t,"canvasMap",(function(){return p})),n.d(t,"OffscreenSkiaCanvas",(function(){return h}));var a=n(16),r=n(4),i=n(5),o=n(14),s=n(17),c=n(8),u=n(109);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var p=new WeakMap,h=function(e){Object(o.default)(n,e);var t=f(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.default)(this,n);var i=d({id:-1,width:1,height:1,top:0,left:0,nodeId:"",pluginId:""},a),o=i.id,s=i.width,c=i.height,u=i.top,l=i.left,f=i.nodeId,p=i.pluginId;return(e=t.call(this)).id=o,e._top=u,e._left=l,e._width=s,e._height=c,e._nodeId=f,e._pluginId=p,e._onReady(),e}return Object(i.default)(n,[{key:"_init",value:function(){if(this.id){var e=this._initCanvasInstance();e.width=this._width,e.height=this._height,p.set(this,e)}else console.error("Canvas node cannot be found")}},{key:"_onReady",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n=function(){p.get(e)||e._init(),t()};n()}},{key:"getContext",value:function(e,t){if("2d"===e){var n=p.get(this);if(!n)return void console.error("Canvas getContext failed due to missing canvas instance");if(this._ctx)return this._ctx;var a=n.getContext("2d",t);return Object.defineProperty(this,"_ctx",{enumerable:!1,configurable:!1,writable:!1,value:a}),a}"webgl"===e?console.error("Canvas: current node only supports 2d context"):console.error("Invalid context type ["+e+"] for Canvas#getContext")}},{key:"width",get:function(){var e=p.get(this);return e&&e.width},set:function(e){var t=p.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=p.get(this);return e&&e.height},set:function(e){var t=p.get(this);t&&(t.height=e)}},{key:"createImage",value:function(){}},{key:"createImageData",value:function(){}}]),n}(u.CanvasInterface)},function(e,t,n){n.r(t),n.d(t,"login",(function(){return dn})),n.d(t,"logout",(function(){return pn})),n.d(t,"checkSession",(function(){return fn})),n.d(t,"authorize",(function(){return gn})),n.d(t,"_authorize",(function(){return yn})),n.d(t,"getUserInfo",(function(){return mn})),n.d(t,"getUserProfile",(function(){return bn})),n.d(t,"_getNativeUserInfo",(function(){return _n})),n.d(t,"chooseAddress",(function(){return On})),n.d(t,"_chooseAddressForPlugin",(function(){return In})),n.d(t,"_requestPaymentForPlugin",(function(){return Sn})),n.d(t,"getSetting",(function(){return Pn})),n.d(t,"transformGetSettingResponse",(function(){return An})),n.d(t,"openSetting",(function(){return jn})),n.d(t,"_openSetting",(function(){return Rn})),n.d(t,"_openSettingForPlugin",(function(){return Mn})),n.d(t,"getWeRunData",(function(){return Nn})),n.d(t,"uploadWeRunData",(function(){return Ln})),n.d(t,"addWeRunData",(function(){return Bn})),n.d(t,"chooseInvoiceTitle",(function(){return Fn})),n.d(t,"operateWXData",(function(){return A.operateWXData})),n.d(t,"_operateWXData",(function(){return A._operateWXData})),n.d(t,"constructOperateWXData",(function(){return A.constructOperateWXData})),n.d(t,"_pluginOperateWXData",(function(){return A._pluginOperateWXData})),n.d(t,"getOpenDeviceId",(function(){return Wn})),n.d(t,"getUserGameLabel",(function(){return Vn})),n.d(t,"reportUserBehaviorBranchAnalytics",(function(){return Un.reportUserBehaviorBranchAnalytics})),n.d(t,"reportUserBehaviorBranchAnalyticsForDebug",(function(){return Un.reportUserBehaviorBranchAnalyticsForDebug})),n.d(t,"shareToWeRun",(function(){return Jn})),n.d(t,"sendGroupMessage",(function(){return Qn})),n.d(t,"reportGroupShare",(function(){return $n})),n.d(t,"payment",(function(){return a})),n.d(t,"share",(function(){return r})),n.d(t,"card",(function(){return i})),n.d(t,"soter",(function(){return o})),n.d(t,"redPacket",(function(){return s})),n.d(t,"facialRecognition",(function(){return c})),n.d(t,"trafficCard",(function(){return u})),n.d(t,"favorites",(function(){return l})),n.d(t,"checkIsUserAdvisedToRest",(function(){return ta})),n.d(t,"chooseInvoice",(function(){return aa})),n.d(t,"faceVerifyForPay",(function(){return ra})),n.d(t,"openOfficialAccountProfile",(function(){return ia})),n.d(t,"openMiniProgramProfile",(function(){return oa})),n.d(t,"openUserProfile",(function(){return sa})),n.d(t,"preventApplePayUI",(function(){return ca})),n.d(t,"getWxSecData",(function(){return ua})),n.d(t,"requestSubscribeMessage",(function(){return pa})),n.d(t,"openMiniProgramSearch",(function(){return ya})),n.d(t,"openMiniProgramHistoryList",(function(){return ma})),n.d(t,"openMiniProgramStarList",(function(){return ba})),n.d(t,"batchGetContactDirectly",(function(){return _a})),n.d(t,"preloadMiniProgramEnvDirectly",(function(){return Oa})),n.d(t,"predownloadMiniProgramPackageDirectly",(function(){return Ia})),n.d(t,"requestBizSplitBillPayment",(function(){return Sa})),n.d(t,"getGroupEnterInfo",(function(){return Ta}));var a={};n.r(a),n.d(a,"bindPaymentCard",(function(){return f})),n.d(a,"loadPaySpeechDialectConfig",(function(){return p})),n.d(a,"phoneBindCardVerifySms",(function(){return y})),n.d(a,"requestMallPayment",(function(){return m})),n.d(a,"requestVerifyUserIdentity",(function(){return b})),n.d(a,"getWCPayOverseaPrepayRequest",(function(){return _})),n.d(a,"openOfflinePayView",(function(){return O})),n.d(a,"requestEntrustAuthorization",(function(){return I})),n.d(a,"requestOrderPayment",(function(){return ke})),n.d(a,"requestVirtualPayment",(function(){return Te})),n.d(a,"handleWCPayOverseaWalletBuffer",(function(){return Ae})),n.d(a,"openSelectPayment",(function(){return Pe})),n.d(a,"requestFacetoFacePayment",(function(){return De})),n.d(a,"setCurrentPaySpeech",(function(){return xe})),n.d(a,"openWCPayCardList",(function(){return Re})),n.d(a,"requestH5Transaction",(function(){return je})),n.d(a,"requestPaymentToBank",(function(){return Me})),n.d(a,"verifyPaymentPassword",(function(){return Ne})),n.d(a,"requestQueryCashier",(function(){return Le})),n.d(a,"openWCPayOverseaPaymentReceive",(function(){return Be})),n.d(a,"requestJointPayment",(function(){return Fe})),n.d(a,"requestPersonalPay",(function(){return We})),n.d(a,"requestPayment",(function(){return ae}));var r={};n.r(r),n.d(r,"getShareInfo",(function(){return Ge})),n.d(r,"showShareMenu",(function(){return Ye})),n.d(r,"hideShareMenu",(function(){return qe})),n.d(r,"updateShareMenu",(function(){return Ze})),n.d(r,"showUpdatableMessageSubscribeButton",(function(){return Qe})),n.d(r,"shareAppMessageForFakeNative",(function(){return nt})),n.d(r,"shareFileMessage",(function(){return ot})),n.d(r,"shareVideoMessage",(function(){return ut})),n.d(r,"ShareInfoStorage",(function(){return Ve.default})),n.d(r,"authPrivateMessage",(function(){return pt})),n.d(r,"userShareMenuState",(function(){return He})),n.d(r,"showShareImageMenu",(function(){return Ct}));var i={};n.r(i),n.d(i,"addCard",(function(){return xt})),n.d(i,"openCard",(function(){return Rt}));var o={};n.r(o),n.d(o,"checkIsSupportSoterAuthentication",(function(){return jt})),n.d(o,"startSoterAuthentication",(function(){return Mt})),n.d(o,"checkIsSoterEnrolledInDevice",(function(){return Nt}));var s={};n.r(s),n.d(s,"openGoldenRedPacketDetail",(function(){return Lt})),n.d(s,"sendGoldenRedPacket",(function(){return Bt})),n.d(s,"sendBizRedPacket",(function(){return Wt})),n.d(s,"sendRedPacket",(function(){return Vt})),n.d(s,"openRedPacket",(function(){return Ut})),n.d(s,"showRedPackage",(function(){return Yt}));var c={};n.r(c),n.d(c,"checkIsSupportFacialRecognition",(function(){return qt})),n.d(c,"startFacialRecognitionVerify",(function(){return Kt})),n.d(c,"startCustomFacialRecognitionVerify",(function(){return Xt})),n.d(c,"startFacialRecognitionVerifyAndUploadVideo",(function(){return Zt})),n.d(c,"startCustomFacialRecognitionVerifyAndUploadVideo",(function(){return Jt}));var u={};n.r(u),n.d(u,"checkTrafficCardConditions",(function(){return Qt})),n.d(u,"queryTrafficCardInfo",(function(){return $t})),n.d(u,"issueTrafficCard",(function(){return en})),n.d(u,"rechargeTrafficCard",(function(){return tn})),n.d(u,"setDefaultTrafficCard",(function(){return nn}));var l={};n.r(l),n.d(l,"addFileToFavorites",(function(){return on})),n.d(l,"addVideoToFavorites",(function(){return ln}));var d=n(0),f=function(e){Object(d.invokeMethod)("bindPaymentCard",e)},p=function(e){Object(d.invokeMethod)("loadPaySpeechDialectConfig",e)},h=n(2),v=n(15),g=n(1),y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.IS_ANDROID&&Object(v.compareClientVersion)(g.default.clientVersion,"7.0.15")>=0||h.IS_IOS&&Object(v.compareClientVersion)(g.default.clientVersion,"7.0.13")>=0?Object(d.invokeMethod)("phoneBindCardVerifySms",e):Object(d.beforeInvokeFail)("phoneBindCardVerifySms",e,"not yet supported")},m=function(e){Object(d.invokeMethod)("requestMallPayment",e)},b=function(e){Object(d.invokeMethod)("requestVerifyUserIdentity",e)},_=function(e){Object(d.invokeMethod)("getWCPayOverseaPrepayRequest",e)},O=function(e){Object(d.invokeMethod)("openOfflinePayView",e)},I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("requestEntrustAuthorization",e)},S=n(116),E=n(16),w=n(30),C=n(13),k=n.n(C),T=n(66),A=n(37),P=n(12),D=n(38),x=n(53),R=n(42),j=n(45),M=n(79);function N(e){var t=g.default.accountInfo&&g.default.accountInfo.appId||"noAppId";Object(j.invokeWebviewMethod)("getRequestPaymentFromGlobalStorage",{appId:t},void 0,e)}function L(e,t){var n=g.default.accountInfo&&g.default.accountInfo.appId||"noAppId";e&&Object(j.invokeWebviewMethod)("setRequestPaymentToGlobalStorage",{requestPayment:e,appId:n},void 0,t)}var B=n(39),F=n(102);function W(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?W(Object(n),!0).forEach((function(t){Object(E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var U=!1,G=500,H=!1,Y=0,q=1,z=2,K=3,X=4,Z=function(){var e,t,n;return{shouldCheck:null!==(e=U)&&void 0!==e&&e,timeout:null!==(t=G)&&void 0!==t?t:500,deprecated:null!==(n=H)&&void 0!==n&&n}},J=function(){var e=Object(w.default)(k.a.mark((function e(t){var n,a,r,i,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,oe({apiName:"webapi_openproduct_bizaccount",reqData:{path:t.path,query:JSON.stringify(t.query||{})}});case 3:n=e.sent,a=n.respData,void 0!==(r=JSON.parse(a.data)).openproduct_checkticket&&(U=!!r.openproduct_checkticket),void 0!==r.openproduct_checktickettimeout&&(G=parseInt(r.openproduct_checktickettimeout,10)),void 0!==r.openproduct_checkticket_deprecated&&(H=!!r.openproduct_checkticket_deprecated),void 0!==r.openleague_cookie&&(i=[],Object(T.parseCookies)(r.openleague_cookie||"",!1,i),(o=Object(T.setCookiesWithoutPermission)({cookies:i}))&&wxNativeConsole.error("[set openleague_cookie]",o)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}();g.default.onReady((function(){setTimeout((function(){return J(g.default.appLaunchInfo||{})}),1e3)})),Object(x.onAppEnterForeground)((function(e){(e.reLaunch||e.isLaunch)&&J(e)}));var Q,$,ee,te,ne=(Object(x.onAppEnterForeground)((function(e){Q=+e.scene||0,$=e.scene_note||e.sceneNote||"",ee=+e.prescene||0,te=e.prescene_note||e.presceneNote||""})),g.default.onReady((function(){var e;e=g.default.appLaunchInfo||{},Q=e.scene||0,$=e.scene_note||e.sceneNote||"",ee=e.prescene||0,te=e.prescene_note||e.presceneNote||""})),function(){return{scene:Q,scene_note:$,prescene:ee,prescene_note:te}}),ae=Object(D.async2Invoke)("requestPayment",function(){var e=Object(w.default)(k.a.mark((function e(t){var n,a,r,i,o,s,c,u,l,d,f,p,h;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=Object(P.paramCheck)(t,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""}))){e.next=3;break}throw new Error("parameter error: "+n);case 3:if(t=Object.assign({},t),a=Z(),r=a.deprecated,i=a.shouldCheck,o=!1,!(o="develop"===g.default.envVersion||"trial"===g.default.envVersion?g.default.usingShopPlugin||!1:i||!1)){e.next=35;break}if(console.log("wx.requestPayment is deprecated for shop plugin. Please use wx.requestOrderPayment."),!r){e.next=11;break}throw new Error("deprecated for shop plugin");case 11:return s=Y,c=t.ticket||"",e.prev=13,u=Z().timeout||500,e.prev=15,e.next=18,Promise.race([se(V({ticket:c,prepay_id:t.package.replace("prepay_id=","")},ne())),ce("timeout",u)]);case 18:l=e.sent,d=l.is_authorized,s=d?K:X,e.next=29;break;case 24:e.prev=24,e.t0=e.catch(15),e.t0,wxNativeConsole.error("[paymentCheckTicket] fail",e.t0),s=e.t0&&"timeout"===e.t0.message?z:q;case 29:if(s!==X){e.next=31;break}throw new Error("check ticket rejected");case 31:return e.prev=31,ue({ticket:c,checkTicketStatus:s}),e.finish(31);case 35:return f=de.NONE,e.prev=36,e.next=39,le(t);case 39:return h=e.sent,f=de.SUCCESS,e.abrupt("return",h);case 44:throw e.prev=44,e.t1=e.catch(36),f=de.FAILED,p=e.t1.message,e.t1;case 49:return e.prev=49,o&&fe({prepayId:(t.package||"").replace("prepay_id=",""),requestPaymentStatus:f,requestPaymentErrmsg:p}),e.finish(49);case 52:case"end":return e.stop()}}),e,null,[[13,,31,35],[15,24],[36,44,49,52]])})));return function(t){return e.apply(this,arguments)}}()),re=function(){var e=Object(w.default)(k.a.mark((function e(){var t,n,a,r,i;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){N((function(t){var n=!1,a="",r=g.default&&g.default.appContactInfo&&g.default.appContactInfo.operationInfo&&g.default.appContactInfo.operationInfo.jsonInfo&&g.default.appContactInfo.operationInfo.jsonInfo.warning_info&&g.default.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];r&&r.forEach((function(e){"requestPayment"===e.jsapi_name&&e.wording&&(n=!0,a=e.wording)})),e({time:t,isRistWarning:n,wording:a})}))}));case 2:if(t=e.sent,n=t.time,a=t.isRistWarning,r=t.wording,i=(+new Date-(n||0))/1e3/60,!(a&&i>30)){e.next=10;break}return e.next=10,new Promise((function(e,t){Object(B._showModal)({content:r,confirmText:"继续支付",cancelText:"取消",success:function(n){n.confirm?(L(+new Date),e()):t(new Error("cancel"))}})}));case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ie=Object(D.invoke2Async)(d.invokeMethod.bind(null,"requestPayment")),oe=Object(D.invoke2Async)(A._operateWXData),se=function(){var e=Object(w.default)(k.a.mark((function e(){var t,n,a,r=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},e.next=3,oe({apiName:"webapi_openproductcheckticket",reqData:V({},t)});case 3:return n=e.sent,a=n.respData,e.abrupt("return",JSON.parse(a.data));case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ce=function(e,t){return new Promise((function(n,a){return setTimeout((function(){return a(new Error(e))}),t)}))},ue=function(e){var t=e.ticket,n=e.checkTicketStatus,a=g.default.appLaunchInfo||{},r=ne(),i=[a.sessionid||a.sessionId||"",r.scene,r.scene_note,r.prescene,r.prescene_note,n||0,t||""].join(",");Reporter.reportKeyValue({key:"RequestPaymentCheckTicket",value:i})},le=function(){var e=Object(w.default)(k.a.mark((function e(t){var n,a,r;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,re();case 2:return n=Object(T.getPayCookieString)(),t.passCookies&&"string"==typeof t.passCookies?t.cookie=n?t.passCookies+";; "+n:t.passCookies:n?t.cookie=n:delete t.cookie,delete t.passCookies,t.cookie,a=Object(F.getAdUxInfo)(),e.next=9,ie(V(V({adUxInfo:a},t),{},{grantMessageQuota:!0}));case 9:return r=e.sent,Object(A._operateWXData)({apiName:"webapi_reportpayrecord",reqData:{prepay_id:t.package.replace("prepay_id=","")}}),Object(j.invokeWebviewMethod)("reportPaymentFormId",{packageStr:t.package}),Object(M._setWxIsInvokeInTapForNavToMiniProgram)(),e.abrupt("return",r);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),de={NONE:0,SUCCESS:1,FAILED:2},fe=function(){var e=Object(w.default)(k.a.mark((function e(t){var n,a,r,i,o,s,c,u,l,d;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.extUserUin,a=t.addOrderStatus,r=t.requestPaymentStatus,i=t.requestPaymentErrmsg,o=t.prepayId,s=t.outOrderId,c=Object(R.getSystemInfoSync)(),u=g.default.appLaunchInfo||{},e.next=5,oe({apiName:"webapi_openproductreportorder",reqData:{ext_info:V(V({ext_useruin:n,ext_appid:g.default.host&&g.default.host.appId,session_id:u.sessionid||u.sessionId||""},ne()),{},{add_order_status:a,request_payment_status:r,request_payment_errmsg:i,model:c.model,brand:c.brand,version:c.version,system:c.system,platform:c.platform,sdk_version:c.SDKVersion}),prepay_id:o,order_info:{out_order_id:s}}});case 5:return l=e.sent,d=l.respData,e.abrupt("return",JSON.parse(d.data));case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=["orderInfo","extUserUin"];function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){Object(E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ge=Object(D.invoke2Async)(A._operateWXData),ye=function(e,t){return new Promise((function(n,a){return setTimeout((function(){return a(new Error(e))}),t)}))},me=0,be=1,_e=2,Oe=3,Ie=4,Se=0,Ee=1,we=2,Ce=function(){var e=Object(w.default)(k.a.mark((function e(){var t,n,a,r,i,o,s,c=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=c.length>0&&void 0!==c[0]?c[0]:{},n=t.extUserUin,a=t.prepayId,r=t.orderInfo,i=g.default.appLaunchInfo||{},e.next=4,ge({apiName:"webapi_openproductaddorder",reqData:{ext_info:ve({ext_useruin:n,ext_appid:g.default.host&&g.default.host.appId,session_id:i.sessionid||i.sessionId||""},ne()),prepay_id:a,order_info:r}});case 4:return o=e.sent,s=o.respData,e.abrupt("return",JSON.parse(s.data));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ke=Object(D.async2Invoke)("requestOrderPayment",Object(w.default)(k.a.mark((function e(){var t,n,a,r,i,o,s,c,u,l,d,f,p,h,v,g,y,m,b,_,O,I=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=I.length>0&&void 0!==I[0]?I[0]:{},!(n=Object(P.paramCheck)(t,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""}))){e.next=4;break}throw new Error("parameter error: "+n);case 4:return a=t.orderInfo,r=void 0===a?{}:a,i=t.extUserUin,o=Object(S.default)(t,pe),s=(t.package||"").replace("prepay_id=",""),c=Z().timeout,u=(t.orderInfo||{}).out_order_id,l=me,p=Se,e.prev=10,e.prev=11,e.next=14,Promise.race([Ce({extUserUin:i,prepayId:s,orderInfo:r}),ye("timeout",c)]);case 14:v=e.sent,g=v.errcode,y=v.errmsg,m=v.cookie,l=0===g?be:Ie,f=y,d=g,0===g&&void 0!==m&&(b=[],Object(T.parseCookies)(m||"",!1,b),(_=Object(T.setCookiesWithoutPermission)({cookies:b}))&&wxNativeConsole.error("[set openleague_cookie]",_)),e.next=29;break;case 25:e.prev=25,e.t0=e.catch(11),e.t0,l=e.t0&&"timeout"===e.t0.message?Oe:_e;case 29:if(l!==Ie){e.next=31;break}throw new D.InvokeError(f||"addOrder failed",{addOrderErrCode:d});case 31:return e.prev=31,O=Object(T.transCookieObjectToString)({key:"prepay_id",value:s,busid:"mmbiz_wxa_related_order"}),o.passCookies&&"string"==typeof o.passCookies?o.passCookies=O+";;"+o.passCookies:o.passCookies=O,e.next=36,le(o);case 36:p=Ee,e.next=44;break;case 39:throw e.prev=39,e.t1=e.catch(31),h=e.t1.message||"unknown",p=we,e.t1;case 44:return e.prev=44,fe({extUserUin:i,addOrderStatus:l,requestPaymentStatus:p,requestPaymentErrmsg:h,prepayId:s,outOrderId:u}),e.finish(44);case 47:case"end":return e.stop()}}),e,null,[[10,,44,47],[11,25],[31,39]])})))),Te=function(e){Object(d.invokeMethod)("requestVirtualPayment",e)},Ae=function(e){Object(d.invokeMethod)("handleWCPayOverseaWalletBuffer",e)},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("openSelectPayment",e)},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("requestFacetoFacePayment",e)},xe=function(e){Object(d.invokeMethod)("setCurrentPaySpeech",e)},Re=function(e){Object(d.invokeMethod)("openWCPayCardList",e)},je=function(e){Object(d.invokeMethod)("requestH5Transaction",e)},Me=function(e){Object(d.invokeMethod)("requestPaymentToBank",e)},Ne=function(e){Object(d.invokeMethod)("verifyPaymentPassword",e)},Le=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.beforeInvoke)("requestQueryCashier",e,{timeStamp:0,nonceStr:"",package:"",signType:"",paySign:""})&&Object(d.invokeMethod)("requestQueryCashier",e)},Be=function(e){Object(d.invokeMethod)("openWCPayOverseaPaymentReceive",e)},Fe=function(e){Object(d.invokeMethod)("requestJointPayment",e)},We=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("requestPersonalPay",e)},Ve=n(81),Ue=n(10),Ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ve.default.get(e.shareTicket);t?Object(d.baseOperateWXData)(Object(Ue.assign)({data:{api_name:"webapi_getshareinfo",data:{share_key:t.shareKey,share_name:t.shareName}}},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getShareInfo")},beforeSuccess:function(e){h.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{var t=JSON.parse(e.data.data);t.roomTopic&&(e.roomTopic=t.roomTopic)}catch(e){}e.iv=e.data.iv,e.encryptedData=e.data.encryptedData,e.data.cloud_id&&(e.cloudID=e.data.cloud_id),delete e.data}}):Object(d.beforeInvokeFail)("getShareInfo",e,"invalid shareTicket")},He={showShareAppMessageMenu:!1,showShareTimelineMenu:!1,withShareTicket:!1,isPrivateMessage:!1},Ye=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Array.isArray(e.menus)?e.menus:["shareAppMessage"],n=[];if(t.includes("shareAppMessage")){He.showShareAppMessageMenu=!0;var a=new Promise((function(t,n){!0===e.withShareTicket?(He.withShareTicket=!0,Object(d.invokeMethod)("showShareMenuWithShareTicket",{withShareTicket:!0,success:t,fail:n,beforeAll:function(e){e.errMsg=e.errMsg.replace("showShareMenuWithShareTicket","showShareMenu")},beforeFail:function(e){e.errMsg+=", with arg withShareTicket: true"}})):(He.withShareTicket=!1,Object(d.invokeMethod)("showShareMenu",{success:t,fail:n}))}));n.push(a)}if(t.includes("shareAppMessage")&&t.includes("shareTimeline")){He.showShareTimelineMenu=!0;var r=new Promise((function(e,t){Object(d.invokeMethod)("showShareTimelineMenu",{success:e,fail:t})}));n.push(r)}Promise.all(n).then((function(){Object(d.beforeInvokeCallback)({name:"showShareMenu",args:e})})).catch((function(t){var n=t.errMsg.replace("showShareMenu:fail","").replace("showShareTimelineMenu:fail","");Object(d.beforeInvokeFail)("showShareMenu",e,n,t.errCode)}))},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Array.isArray(e.menus)?e.menus:["shareAppMessage","shareTimeline"],n=[];function a(){return new Promise((function(e,t){Object(d.invokeMethod)("hideShareTimelineMenu",{success:e,fail:t})}))}if(t.includes("shareTimeline")&&(He.showShareTimelineMenu=!1,n.push(a())),t.includes("shareAppMessage")){He.showShareAppMessageMenu=!1,0===n.length&&n.push(a());var r=new Promise((function(e,t){Object(d.invokeMethod)("hideShareMenu",{success:e,fail:t})}));n.push(r)}Promise.all(n).then((function(){Object(d.beforeInvokeCallback)({name:"hideShareMenu",args:e})})).catch((function(t){var n=t.errMsg.replace("hideShareMenu:fail","").replace("hideShareTimelineMenu:fail","");Object(d.beforeInvokeFail)("hideShareMenu",e,n,t.errCode)}))};function ze(e){return new Promise((function(t,n){"boolean"==typeof e.withShareTicket?Object(d.invokeMethod)("updateShareMenuShareTicket",{withShareTicket:e.withShareTicket,success:t,fail:n},{beforeAll:function(e){e.errMsg=e.errMsg.replace("updateShareMenuShareTicket","updateShareMenu")},beforeFail:function(e){e.errMsg+=', with arg "withShareTicket": true'}}):t({errMsg:"updateShareMenu:ok"})}))}function Ke(e){return new Promise((function(t,n){if("boolean"==typeof e.isUpdatableMessage||"boolean"==typeof e.isPrivateMessage){var a=JSON.stringify({activity_id:e.activityId,template_id:e.templateInfo&&e.templateInfo.templateId,parameter_list:e.templateInfo&&e.templateInfo.parameterList});Object(d.invokeMethod)("updateShareMenuUpdatable",{isPrivateMessage:e.isPrivateMessage,updatable:e.isUpdatableMessage,templateId:a,success:t,fail:n}),!0===e.isPrivateMessage?He.isPrivateMessage=!0:!1===e.isPrivateMessage&&(He.isPrivateMessage=!1)}else t({errMsg:"updateShareMenu:ok"})}))}function Xe(e){return new Promise((function(t,n){"string"==typeof e.toDoActivityId?(Object(d.invokeMethod)("updateShareMenuUpdatable",{updatable:!0,success:function(e){},fail:function(e){wxNativeConsole.error("updateShareMenuToDo updateShareMenuUpdatable fail",e)}}),Object(d.invokeMethod)("updateShareMenuShareTicket",{withShareTicket:!0,success:function(e){},fail:function(e){wxNativeConsole.error("updateShareMenuToDo updateShareMenuShareTicket fail",e)}}),Object(d.invokeMethod)("updateShareMenuToDo",{toDoActivityId:e.toDoActivityId,isToDoMessage:"boolean"!=typeof e.isToDoMessage||e.isToDoMessage,success:function(e){wxNativeConsole.info("updateShareMenuToDo success",e),t(e)},fail:function(e){wxNativeConsole.error("updateShareMenuToDo fail",e),n(e)}})):t({errMsg:"updateShareMenu:ok"})}))}var Ze=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wxNativeConsole.info("wx.updateShareMenu",e),Promise.all([ze(e),Ke(e),Xe(e)]).then((function(t){"function"==typeof e.success&&__errorTracer__.surroundThirdByTryCatch(e.success,"at api updateShareMenu success callback function")(t[0]),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t[0])})).catch((function(t){void 0===t.errMsg&&(t.errMsg="updateShareMenu:fail "+t.message),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api updateShareMenu fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api updateShareMenu complete callback function")(t)}))},Je=n(59),Qe=function(){Object(Je.reportDeprecatedAPI)("showUpdatableMessageSubscribeButton"),console.warn("wx.showUpdatableMessageSubscribeButton 此接口已废弃")},$e=n(6),et=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return Object(Ue.getRealRoute)($e.default.lastRoute,e,t)},tt=function(e){if("string"!=typeof e)return e;var t=e.split("?")[0],n=e.split("?")[1];return t+=".html",void 0!==n?t+"?"+n:t},nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(d.beforeInvoke)("shareAppMessageForFakeNative",e,{title:"",bizType:0})){var t=Object.assign({useDefaultSnapshot:!0,disableForward:!1},e);if(e.path&&"string"==typeof e.path)t.path=tt(__appServiceEngine__.convertComponentAliasToRoute(e.path));else{var n=Object.keys($e.default.query).map((function(e){return e+"="+$e.default.query[e]})).join("&"),a=$e.default.lastRoute+"?"+n;t.path=tt(__appServiceEngine__.convertComponentAliasToRoute(a))}e.imageUrl&&"string"==typeof e.imageUrl&&(/^(http|https|wxfile):\/\//.test(e.imageUrl)?t.imageUrl=e.imageUrl:t.imageUrl=et(e.imageUrl,!1));var r=g.default.accountInfo.appId;"wx60422b707e49ff2e"!==r&&(delete t.bizSourceName,delete t.bizSourceIconUrl),Object(d.invokeMethod)("shareAppMessageForFakeNative",t)}},at=function(e){if(e&&"string"==typeof e)if(/^\w+:\/\//.test(e)){if(!/^wxfile:\/\//.test(e)&&!/^http:\/\/tmp\//.test(e))throw new Error("invalid path")}else if(e)return et(e,!1);return e};function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function it(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){Object(E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ot=Object(D.async2Invoke)("shareFileMessage",Object(w.default)(k.a.mark((function e(){var t,n,a=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:{},Object(d.beforeInvokePromise)(t,{filePath:""}),n=at(t.filePath),e.prev=3,e.next=6,Object(d.invokeMethodAsync)("shareFileMessage",it(it({},t),{},{filePath:n}));case 6:e.next=12;break;case 8:if(e.prev=8,e.t0=e.catch(3),"cancel"===e.t0.message){e.next=12;break}throw e.t0;case 12:case"end":return e.stop()}}),e,null,[[3,8]])}))));function st(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function ct(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?st(Object(n),!0).forEach((function(t){Object(E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):st(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ut=Object(D.async2Invoke)("shareVideoMessage",Object(w.default)(k.a.mark((function e(){var t,n,a,r=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{},Object(d.beforeInvokePromise)(t,{videoPath:""}),n=at(t.videoPath),a=at(t.thumbPath),e.prev=6,e.next=9,Object(d.invokeMethodAsync)("shareVideoMessage",ct(ct({},t),{},{videoPath:n,thumbPath:a}));case 9:e.next=15;break;case 11:if(e.prev=11,e.t0=e.catch(6),"cancel"===e.t0.message){e.next=15;break}throw e.t0;case 15:case"end":return e.stop()}}),e,null,[[6,11]])})))),lt=n(32),dt="authPrivateMessage",ft=Object(A.constructOperateWXData)(!1,dt);function pt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Ve.default.get(e.shareTicket);t&&t.shareKey?Object(lt.checkPermissionSync)("authShareRelationship")?ft({apiName:"webapi_authmgr",reqData:{share_key:t.shareKey},success:function(t){wxNativeConsole.info("webapi_authmgr res",t);var n=JSON.parse(t.respData.data),a={};a.iv=n.iv,a.encryptedData=n.encrypt_activity_id,a.valid=1===n.res,Object(d.beforeInvokeCallback)({name:dt,args:e,res:a})},fail:e.fail}):Object(d.beforeInvokeFail)(dt,e,"no permission"):Object(d.beforeInvokeFail)(dt,e,"invalid shareTicket")}var ht=n(29),vt=n(142),gt=n(44),yt=Object(D.invoke2Async)(vt.getImageInfo),mt=1,bt=3,_t=4,Ot=5,It=6,St=7,Et=function(e){var t=e.action,n=g.default.appLaunchInfo||{},a=[g.default.appType+1e3,t,n.sessionid||n.sessionId||""].join(",");Reporter.reportKeyValue({key:"ShareImageMenu",value:a})},wt=function(){var e=Object(w.default)(k.a.mark((function e(t){var n,a,r,i,o;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise((function(e){return __sclEngine__.initScl((function(t){return e(t.mainRoot)}))}));case 2:return n=e.sent,a=n.append("share-image",{imgPath:t.imgPath,height:t.height,width:t.width,actions:JSON.stringify([{action:"shareToFriend",text:"发送给朋友",imageSrc:"https://res.wx.qq.com/op_res/2uoxkoDR1eSqqVos0C1sjp6O1Y0jhQYHSJZFkNBXZMrA5HaEVtR1iBAEXOejBJxWV-ULARe-VXRVYozusJicDA",imageDarkSrc:"https://res.wx.qq.com/op_res/2uoxkoDR1eSqqVos0C1sjp6O1Y0jhQYHSJZFkNBXZMrA5HaEVtR1iBAEXOejBJxWV-ULARe-VXRVYozusJicDA"},{action:"addToFavorites",text:"收藏",imageSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng",imageDarkSrc:"https://res.wx.qq.com/op_res/UbamEkuHzZDPCFQqhA85ckRvMsATv5uZhqjM2cvJpBJr5Rcv_XUNOkYBJJZGzJkgxqSygrF92hgA4Bthvzb8ng"},{action:"saveToAlbum",text:"保存到相册",imageSrc:"https://res.wx.qq.com/op_res/BgIIq_VgA_b30mPKYKb4CmnQemMBJMujsqfe6REw4MSf3i_ql8KU-FywDJLSRGRnxQOWW5VphGdXW0Yr2-Z-0g",imageDarkSrc:"https://res.wx.qq.com/op_res/G0_niEOxSlL24rHxfWQRrYEhHlR548A2lETw0Se_jFtJt3ZpHTIaPZPeINUGM3--cFoO5adG9q8jjhNfUzKUxA"}])}),r=Object(gt.setNavigateBackInterception)((function(e){[gt.NavigationBackTypes.BottomBackButton,gt.NavigationBackTypes.NavigationBackInterceptionType,gt.NavigationBackTypes.NavigateBackCall].includes(e.type)&&a.handleClose()})),e.next=7,new Promise((function(e){["shareToFriend","addToFavorites","saveToAlbum","cancel"].forEach((function(t){a.addListener(t,(function(){return e({action:t})}))}))}));case 7:return i=e.sent,o=i.action,Object(gt.stopNavigateBackInterception)(r),e.abrupt("return",{action:o});case 11:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ct=Object(D.async2Invoke)("showShareImageMenu",Object(w.default)(k.a.mark((function e(){var t,n,a,r,i,o,s,c=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:{},Object(lt.checkPermissionSync)("showShareImageMenu")){e.next=3;break}throw new Error("no permission");case 3:if(Object(ht.beforeInvokePromise)(t,{path:""}),n=t.path,!/^\w+:\/\//.test(n)){e.next=10;break}if(/^wxfile:\/\//.test(n)||/^http:\/\/tmp\//.test(n)){e.next=8;break}throw new Error("invalid path");case 8:e.next=11;break;case 10:n="/"+et(n,!1);case 11:return e.next=13,yt({src:n});case 13:return a=e.sent,r=a.height,i=a.width,e.next=18,wt({imgPath:n,height:r,width:i});case 18:o=e.sent,s=o.action,Et({action:mt}),e.t0=s,e.next="shareToFriend"===e.t0?24:"addToFavorites"===e.t0?37:"saveToAlbum"===e.t0?41:(e.t0,46);break;case 24:return e.prev=24,e.next=27,Object(ht.invokeMethodAsync)("shareImageMessage",{imagePath:n});case 27:Et({action:bt}),e.next=36;break;case 30:if(e.prev=30,e.t1=e.catch(24),"cancel"!==e.t1.message){e.next=35;break}return Et({action:_t}),e.abrupt("return");case 35:throw e.t1;case 36:return e.abrupt("return");case 37:return Et({action:Ot}),e.next=40,Object(ht.invokeMethodAsync)("addImageToFavorites",{url:n});case 40:return e.abrupt("return");case 41:return Et({action:It}),e.next=44,Object(ht.invokeMethodAsync)("saveImageToPhotosAlbum",{filePath:n});case 44:return h.IS_IOS&&Object(B.showToast)({icon:"success",title:"已保存"}),e.abrupt("return");case 46:throw Et({action:St}),new Error("cancel");case 48:case"end":return e.stop()}}),e,null,[[24,30]])})))),kt=n(83),Tt=n(41),At=!1,Pt=null,Dt=null;Object(Tt.onAppRoute)((function(){At=!0})),Object(kt.onAppRouteDone)((function(){At=!1,Pt&&(xt(Pt),Pt=null),Dt&&(Rt(Dt),Dt=null)}));var xt=function(e){Object(d.beforeInvoke)("addCard",e,{cardList:[]})&&(At?Pt=e:Object(d.invokeMethod)("addCard",e))},Rt=function(e){Object(d.beforeInvoke)("openCard",e,{cardList:[]})&&(At?Dt=e:Object(d.invokeMethod)("openCard",e))},jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("checkIsSupportSoterAuthentication",e,{})},Mt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(d.beforeInvoke)("startSoterAuthentication",e,{challenge:""})){var t=e.success;Object(d.invokeMethod)("startSoterAuthentication",Object.assign({},e,{success:function(n){0!==n.errCode?"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api startSoterAuthentication fail callback function")(n):"function"==typeof t&&__errorTracer__.surroundThirdByTryCatch(t,"at api startSoterAuthentication success callback function")(n)}}),{beforeSuccess:function(e){"number"==typeof e.errCode&&0!==e.errCode&&(e.errMsg="startSoterAuthentication:fail")}})}},Nt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.beforeInvoke)("checkIsSoterEnrolledInDevice",e,{checkAuthMode:""})&&Object(d.invokeMethod)("checkIsSoterEnrolledInDevice",e,{})},Lt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("openGoldenRedPacketDetail",e,{})},Bt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("sendGoldenRedPacket",e,{})},Ft=n(67),Wt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(lt.checkPermissionSync)("sendBizRedPacketForOpen")){var t=Object(Ft.getEnterOptionsSync)().scene;if(1047!==t&&1124!==t&&1011!==t&&1025!==t){var n="sendBizRedPacket:fail scene "+t+" not support.";return e.fail&&e.fail({errMsg:n}),void(e.complete&&e.complete({errMsg:n}))}}Object(d.invokeMethod)("sendBizRedPacket",e,{})},Vt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("sendRedPacket",e,{})},Ut=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("openRedPacket",e,{})},Gt=Object.assign,Ht="https://support.weixin.qq.com/cgi-bin/mmsupport-bin/showredpacket",Yt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(d.beforeInvoke)("showRedPackage",e,{url:""}))if(0===e.url.indexOf(Ht)){var t=Gt({isNativeStyle:!0},e);Object(d.invokeMethod)("private_openUrl",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("private_openUrl","showRedPackage")}})}else Object(d.beforeInvokeFail)("showRedPackage",e,"url is invalid")},qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("checkIsSupportFacialRecognition",e,{})},zt=function(e){return JSON.stringify({name:e.name,id_card_number:e.idCardNumber,mobile:e.mobile,outer_verify_id:e.outerVerifyId,user_id_key:e.userIdKey})},Kt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=zt(e);Object(d.invokeMethod)("startFacialRecognitionVerify",Object(Ue.assign)(e,{requestVerifyPreInfo:t}),{})},Xt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=zt(e);Object(d.invokeMethod)("startCustomFacialRecognitionVerify",Object(Ue.assign)(e,{requestVerifyPreInfo:t}),{})},Zt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=zt(e);Object(d.invokeMethod)("startFacialRecognitionVerifyAndUploadVideo",Object(Ue.assign)(e,{requestVerifyPreInfo:t}),{})},Jt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=zt(e);Object(d.invokeMethod)("startCustomFacialRecognitionVerifyAndUploadVideo",Object(Ue.assign)(e,{requestVerifyPreInfo:t}),{})},Qt=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.IS_ANDROID&&Object(v.compareClientVersion)(g.default.clientVersion,"7.0.18")>=0?Object(d.invokeMethod)("checkTrafficCardConditions",e):Object(d.beforeInvokeFail)("checkTrafficCardConditions",e,"not yet supported")},$t=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.IS_ANDROID&&Object(v.compareClientVersion)(g.default.clientVersion,"7.0.18")>=0?Object(d.invokeMethod)("queryTrafficCardInfo",e):Object(d.beforeInvokeFail)("queryTrafficCardInfo",e,"not yet supported")},en=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.IS_ANDROID&&Object(v.compareClientVersion)(g.default.clientVersion,"7.0.18")>=0?Object(d.invokeMethod)("issueTrafficCard",e):Object(d.beforeInvokeFail)("issueTrafficCard",e,"not yet supported")},tn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.IS_ANDROID&&Object(v.compareClientVersion)(g.default.clientVersion,"7.0.18")>=0?Object(d.invokeMethod)("rechargeTrafficCard",e):Object(d.beforeInvokeFail)("rechargeTrafficCard",e,"not yet supported")},nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h.IS_ANDROID&&Object(v.compareClientVersion)(g.default.clientVersion,"7.0.18")>=0?Object(d.invokeMethod)("setDefaultTrafficCard",e):Object(d.beforeInvokeFail)("setDefaultTrafficCard",e,"not yet supported")};function an(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?an(Object(n),!0).forEach((function(t){Object(E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):an(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var on=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(d.beforeInvoke)("addFileToFavorites",e,{filePath:""})){var t=at(e.filePath);Object(d.invokeMethod)("addFileToFavorites",rn(rn({},e),{},{filePath:t}))}};function sn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sn(Object(n),!0).forEach((function(t){Object(E.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var un,ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(d.beforeInvoke)("addVideoToFavorites",e,{videoPath:""})){var t=at(e.videoPath),n=at(e.thumbPath);Object(d.invokeMethod)("addVideoToFavorites",cn(cn({},e),{},{videoPath:t,thumbPath:n}))}},dn=function(e){Object(d.invokeMethod)("login",Object(Ue.assign)(e,{requestInQueue:!1}))},fn=function(e){un&&clearTimeout(un),Object(d.invokeMethod)("refreshSession",e,{beforeSuccess:function(e){un=setTimeout((function(){Object(d.invokeMethod)("refreshSession")}),1e3*e.expireIn),delete e.err_code,delete e.expireIn},beforeAll:function(e){e.errMsg=e.errMsg.replace("refreshSession","checkSession")}})},pn=function(){Object(d.invokeMethod)("logout",{})};function hn(e){return"scope.userInfo"!==e||(Object(v.checkAPIAvailable)("getUserInfo")||Object(v.checkAPIAvailable)("authorize"))}var vn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.innerContext,n=void 0===t?{}:t,a=e.args,r=void 0===a?{}:a;Object(d.beforeInvoke)("authorize",r,{scope:""})&&(hn(r.scope)?Object(d.invokeMethod)("authorize",Object(Ue.assign)(r,{scope:[r.scope],requestInQueue:!n.hasOwnProperty("requestInQueue")||Boolean(n.requestInQueue)}),{beforeAll:function(e){delete e.body,void 0!==e.err_code&&(e.errCode=e.err_code,delete e.err_code)}}):Object(d.beforeInvokeFail)("authorize",r,"scope unauthorized"))},gn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};vn({args:e})},yn=vn,mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=wx&&wx.version&&wx.version.version||"",n=!0===Object(v.checkAPIAvailable)("getUserInfo")||"unknown"===Object(v.checkAPIAvailable)("getUserInfo");Object(d.baseOperateWXData)(Object(Ue.assign)({},e,{isImportant:!0,data:{api_name:"webapi_getuserinfo",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",version:t}}}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getUserInfo"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:function(e){h.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})},bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(d.beforeInvoke)("getUserProfile",e,{desc:""})){var t=e.desc.replace(/[^\x00-\xff]/g,"##").length;if(t>30||t<2)Object(d.beforeInvokeFail)("getUserProfile",e,"desc length does not meet the requirements");else{var n=!0===Object(v.checkAPIAvailable)("getUserProfile")||"unknown"===Object(v.checkAPIAvailable)("getUserProfile");Object(d.baseOperateWXData)(Object(Ue.assign)({},e,{isImportant:!0,data:{api_name:"webapi_getuserprofile",with_credentials:"boolean"!=typeof e.withCredentials||e.withCredentials,show_confirm:n,data:{lang:e.lang||"en",desc:e.desc}}}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getUserProfile"),e.errMsg=e.errMsg.replace(/fail:scope unauthorized|fail auth denied/,"fail auth deny")},beforeSuccess:function(e){h.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data||(e.data={}),void 0!==e.data.data&&(e.rawData=e.data.data);try{e.userInfo=JSON.parse(e.data.data),e.signature=e.data.signature,e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}catch(e){}}})}}},_n=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return function(){var r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(r.apiName="webapi_getuserinfo",Object(d.beforeInvoke)("operateWXData",r,{apiName:""})){var i=wx&&wx.version&&wx.version.version||"",o={api_name:r.apiName,from_component:!0,data:r.reqData||{},operate_directly:e};o.data.version=i,n&&(o.plugin_appid=r.pluginId);var s={data:o,isImportant:!0===a,requestInQueue:!r.hasOwnProperty("requestInQueue")||Boolean(r.requestInQueue)};new Date,new Date,Object(d.baseOperateWXData)(Object.assign({},s,r),{beforeAll:function(e){void 0!==t&&(e.errMsg=e.errMsg.replace("operateWXData",t))},beforeSuccess:function(e){new Date,new Date,h.IS_ANDROID&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),e.respData=e.data,delete e.data}})}}}(!1,void 0,!0),On=function(e){Object(d.invokeMethod)("openAddress",e,{beforeSuccess:function(e){Object(Ue.renameProperty)(e,"addressPostalCode","postalCode"),Object(Ue.renameProperty)(e,"proviceFirstStageName","provinceName"),Object(Ue.renameProperty)(e,"addressCitySecondStageName","cityName"),Object(Ue.renameProperty)(e,"addressCountiesThirdStageName","countyName"),Object(Ue.renameProperty)(e,"addressDetailInfo","detailInfo")},beforeAll:function(e){e.errMsg=e.errMsg.replace("openAddress","chooseAddress"),delete e.err_msg}})},In=function(e){Object(d.invokeMethod)("openAddress",e,{beforeSuccess:function(e){Object(Ue.renameProperty)(e,"addressPostalCode","postalCode"),Object(Ue.renameProperty)(e,"proviceFirstStageName","provinceName"),Object(Ue.renameProperty)(e,"addressCitySecondStageName","cityName"),Object(Ue.renameProperty)(e,"addressCountiesThirdStageName","countyName"),Object(Ue.renameProperty)(e,"addressDetailInfo","detailInfo")},beforeAll:function(e){e.errMsg=e.errMsg.replace("openAddress","chooseAddressForPlugin"),delete e.err_msg}})},Sn=function(e){N((function(t){var n=(+new Date-(t||0))/1e3/60,a=!1,r="",i=g.default&&g.default.appContactInfo&&g.default.appContactInfo.operationInfo&&g.default.appContactInfo.operationInfo.jsonInfo&&g.default.appContactInfo.operationInfo.jsonInfo.warning_info&&g.default.appContactInfo.operationInfo.jsonInfo.warning_info.jsapi_alter||[];i&&i.forEach((function(e){"requestPayment"===e.jsapi_name&&e.wording&&(a=!0,r=e.wording)})),a&&n>30?Object(B._showModal)({content:r,confirmText:"继续支付",cancelText:"取消",success:function(t){t.confirm&&(L(+new Date),En(e))}}):En(e)}))},En=function(e){if(Object(d.beforeInvoke)("requestPayment",e,{timeStamp:"",nonceStr:"",package:"",signType:"",paySign:""})){e=Object.assign({},e);var t=Object(T.getPayCookieString)();e.passCookies&&"string"==typeof e.passCookies?e.cookie=t?e.passCookies+";; "+t:e.passCookies:t?e.cookie=t:delete e.cookie,delete e.passCookies,e.cookie,Object(d.invokeMethod)("requestPayment",Object.assign({},e,{grantMessageQuota:!0}),{beforeSuccess:function(){Object(j.invokeWebviewMethod)("reportPaymentFormId",{packageStr:e.package}),Object(M._setWxIsInvokeInTapForNavToMiniProgram)()}})}},wn=n(25),Cn={SYS_MSG_TYPE_INTERACTIVE:1,SYS_MSG_TYPE_RANK:2},kn=function(e){var t={};for(var n in e)t[e[n]]=n;return t}(Cn);var Tn=wxNativeConsole.createLogger("getSetting");function An(e){if(Tn.info("webapi_getuserallappauth res",e),e.auth_item?e.authSetting=e.auth_item.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{}):e.authSetting={},void 0!==e.sub_msg_switch){var t={mainSwitch:1===e.sub_msg_switch};if(e.sub_msg_list){Tn.info("sub_msg_list",e.sub_msg_list);var n=e.sub_msg_list.reduce((function(e,t){var n,a=t.template_id;return t.sys_msg_type>0&&(n=t.sys_msg_type,a=kn[n]),t.ban_flag?e[a]="ban":e[a]=t.setting_status?"accept":"reject",e}),{});Tn.info("itemSettings",n),t.itemSettings=n,Object.assign(t,n)}e.subscriptionsSetting=t}return delete e.rawData,delete e.signature,delete e.auth_item,delete e.sub_msg_list,delete e.sub_msg_switch,e}var Pn=Object(wn.default)("getSetting","webapi_getuserallappauth",{},{},(function(e){var t=wx&&wx.version&&wx.version.version||"",n=Object.assign({with_sub_msg:"boolean"==typeof e.withSubscriptions&&e.withSubscriptions,version:t},e);return delete n.withSubscriptions,n}),An),Dn=n(115),xn=function(e){return{2116:"SYS_MSG_TYPE_INTERACTIVE",4668:"SYS_MSG_TYPE_RANK"}[e]},Rn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("openSetting",e,{beforeSuccess:function(e){var t=e.authSetting||[];if(e.authSetting=t.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{}),e.subscriptionsSetting){var n={};if(n.mainSwitch=e.subscriptionsSetting.mainSwitch,e.subscriptionsSetting.templatesInfo){var a=e.subscriptionsSetting.templatesInfo;n.itemSettings=a.reduce((function(e,t){var n=xn(t.tid),a={"-1":"ban",0:"reject",1:"accept"};return n?e[n]=a[t.status]:e[t.templateId]=a[t.status],e}),{})}e.subscriptionsSetting=n}}})},jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(Dn.isHalfPageMode)()&&Object(Dn.isFromChannels)())return Object(d.beforeInvokeFail)("openSetting",e,"not supported"),void Object(B.showToast)({icon:"none",title:"暂不支持当前功能"});Rn(e)},Mn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("openSetting",e,{beforeSuccess:function(e){var t=e.authSetting||[];e.authSetting=t.reduce((function(e,t){return e[t.scope]=1===t.state,e}),{})}})},Nn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("openWeRunSetting",{checkSupport:!0,success:function(){Object(d.baseOperateWXData)(Object(Ue.assign)({data:{api_name:"webapi_getwerunstep_history"}},e),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateWXData","getWeRunData")},beforeSuccess:function(e){h.IS_ANDROID&&"string"==typeof e.data&&(e.data=JSON.parse(e.data)),void 0!==e.data.data&&(e.rawData=e.data.data),e.data.encryptedData&&(e.encryptedData=e.data.encryptedData,e.iv=e.data.iv,e.data.cloud_id&&(e.cloudID=e.data.cloud_id)),delete e.data}})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","getWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api getWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api getWeRunData fail callback function")(t)}})},Ln=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"number"!=typeof e.step||e.step<0?Object(d.beforeInvokeFail)("uploadWeRunData",e,"parameter error: step should be number and greater or equal to 0"):Object(d.invokeMethod)("openWeRunSetting",{checkSupport:!1,success:function(){Object(d.invokeMethod)("uploadWeRunData",e,{})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","uploadWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api uploadWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api uploadWeRunData fail callback function")(t)}})},Bn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"number"!=typeof e.step||e.step<0?Object(d.beforeInvokeFail)("addWeRunData",e,"parameter error: step should be number and greater or equal to 0"):Object(d.invokeMethod)("openWeRunSetting",{checkSupport:!1,success:function(){Object(d.invokeMethod)("addWeRunData",e,{})},fail:function(t){t.errMsg=t.errMsg.replace("openWeRunSetting","addWeRunData"),"function"==typeof e.fail&&__errorTracer__.surroundThirdByTryCatch(e.fail,"at api addWeRunData fail callback function")(t),"function"==typeof e.complete&&__errorTracer__.surroundThirdByTryCatch(e.complete,"at api addWeRunData fail callback function")(t)}})},Fn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("chooseInvoiceTitle",e,{beforeSuccess:function(e){var t=e.invoiceTitleInfo||e.choose_invoice_title_info;if(t)try{var n=JSON.parse(t);delete e.invoiceTitleInfo,delete e.choose_invoice_title_info,e=Object.assign(e,n)}catch(e){}}})},Wn=Object(wn.default)("getOpenDeviceId","webapi_getdeviceinfo"),Vn=Object(wn.default)("getUserGameLabel","webapi_getgameplayerlabel",{},{},(function(){}),(function(e){return delete e.rawData,e})),Un=n(143),Gn=n(96),Hn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.map((function(e){return{sport_type_id:e.typeId,sport_time:e.time||0,sport_distance:e.distance||0,sport_number:e.number||0,sport_calorie:e.calorie||0,sport_url:e.url||""}}))},Yn=Object(v.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(wn.default)("checkWxaSportRecord","webapi_checkwxasportrecord",{},{},(function(e){return{sport_record_list:Hn(e.recordList)}}),(function(e){delete e.rawData}));t(e)})),qn=Object(v.promisify)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(wn.default)("reportWxaSportRecord","webapi_reportwxasportrecord",{},{},(function(e){return{sport_record_list:Hn(e.recordList)}}),(function(e){delete e.rawData}));t(e)})),zn=function(e){var t=e.show,n=void 0===t?0:t,a=e.statusCancel,r=void 0===a?0:a,i=e.statusConfirm,o=void 0===i?0:i,s=e.clickMoreCount,c=[n,r,o,void 0===s?0:s];Reporter.reportKeyValue({key:"ShareToWeRun",value:c.join(","),immediately:!0})},Kn=null;Object(Gn.onThemeChange)((function(e){var t=e.theme;Kn&&Kn.setData({theme:t})}));var Xn=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n={};return t.forEach((function(t){e.hasOwnProperty(t)&&(n[t]=e[t])})),n},Zn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0,n=Object(gt.setNavigateBackInterception)((function(e){[gt.NavigationBackTypes.BottomBackButton,gt.NavigationBackTypes.NavigationBackInterceptionType,gt.NavigationBackTypes.NavigateBackCall].includes(e.type)&&Kn&&(Kn.handleCancel(),Kn=null)}));__sclEngine__.initScl((function(a){var r=a.mainRoot.append("werun",{input:e});Kn=r,r.addListener("confirm",(function(e){var a=e.detail.clickMoreCount;zn({show:1,statusCancel:0,statusConfirm:1,clickMoreCount:a}),Object(gt.stopNavigateBackInterception)(n),qn({recordList:t.recordList}).then((function(){return Object(d.beforeInvokeCallback)({name:"shareToWeRun",args:t})})).catch((function(e){return Object(d.beforeInvokeFail)("shareToWeRun",t,e.errMsg,+e.err_code)}))})),r.addListener("cancel",(function(e){var a=e.detail.clickMoreCount;zn({show:1,statusCancel:1,statusConfirm:0,clickMoreCount:a}),Object(d.beforeInvokeFail)("shareToWeRun",t,"cancel"),Object(gt.stopNavigateBackInterception)(n)}))}))},Jn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.beforeInvoke)("shareToWeRun",e,{recordList:[]})&&(Object(lt.checkPermissionSync)("shareDataToWeRun")?Yn({recordList:e.recordList}).then((function(t){var n=t.wording||{},a=Xn(n,["title","sport_name","note_title","note_detail"]);a.theme=Object(R.getSystemInfoSync)().theme||"light";var r=JSON.stringify(a);Zn(r,e)}),(function(t){zn({show:0,statusCancel:0,statusConfirm:0,clickMoreCount:0}),Object(d.beforeInvokeFail)("shareToWeRun",e,t.errMsg,+t.err_code)})):Object(d.beforeInvokeFail)("shareToWeRun",e,"has no permission",-100004))},Qn=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(Je.reportDeprecatedAPI)("sendGroupMessage"),Object(d.beforeInvokeFail)("sendGroupMessage",e,"sendGroupMessage 接口已废弃")},$n=function(e){Object(A._operateWXData)({apiName:"webapi_reportgroupshare",reqData:e})},ea=Object(wn.default)("checkIsUserAdvisedToRest ","webapi_getplaytimelimit",{},{},(function(e){var t=e.todayPlayedTime;return{today_played_seconds:void 0===t?0:t}}),(function(e){e.result=!e.is_healthy,delete e.is_healthy})),ta=function(e){Object(d.beforeInvoke)("checkIsUserAdvisedToRest",e,{todayPlayedTime:0})&&ea(e)},na=parseInt(Date.now()/1e3,10),aa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("chooseInvoice",Object.assign({},e,{timeStamp:na,nonceStr:na+""}),{beforeSuccess:function(){}})},ra=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("faceVerifyForPay",e)},ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e,{scene:151});delete t.profileReportInfo,Object(d.invokeMethod)("openBizProfile",t,{beforeAll:function(e){e.errMsg=e.errMsg.replace("openBizProfile","openOfficialAccountProfile")}})},oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("openWeAppProfile",e)},sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);delete t.profileReportInfo,Object(d.invokeMethod)("openUserProfile",t)},ca=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ht.invokeMethod)("preventApplePayUI",e)},ua=Object(wn.default)("getWxSecData","getWxSecData",{},{},(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e}),(function(e){return e})),la=n(149),da=Object(A.constructOperateWXData)(!1,"requestSubscribeMessage"),fa=!1;Object(Gn.onAppRoute)((function(){fa=!1})),Object(Gn.onAppEnterBackground)((function(){fa=!1}));var pa=function(e){if(fa)Object(d.beforeInvokeFail)("requestSubscribeMessage",e,"last call has not ended");else{if(!Object(d.beforeInvoke)("requestSubscribeMessage",e,{tmplIds:[]}))return;fa=!0,h.IS_IOS&&g.default.clientVersion<385877504||h.IS_ANDROID&&g.default.clientVersion<654313216||h.IS_DEVTOOLS?va(e):ha(e)}},ha=function(e){Reporter.reportIDKey({key:"requestSubscribeMessageWithNative",force:!0});var t=Object.assign({},e);t.tmplIds=Array.from(new Set(e.tmplIds)),Object(d.invokeMethod)("requestSubscribeMessage",t,{beforeAll:function(){fa=!1},beforeSuccess:function(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeSuccess",force:!0}),fa=!1},beforeFail:function(){Reporter.reportIDKey({key:"requestSubscribeMessageWithNativeFail",force:!0})}})},va=function(e){var t,n,a=e.tmplIds||[];if(0===a.length?(t="TmplIds can't be empty",n=10001):a.length>=4?(t="Templates count out of max bounds",n=20003):""===a[0]?(t="No template data return, verify the template id exist",n=20001):"string"!=typeof a[0]&&(t="Invalid template id",n=10004),t)return fa=!1,void Object(d.beforeInvokeFail)("requestSubscribeMessage",e,t,n);var r=a.map((function(e){return{TemplateId:e}}));da({apiName:"webapi_subscribe_msg",reqData:{AppId:g.default.accountInfo.appId,ActionType:1,ItemList:r},success:function(t){var n=(JSON.parse(t.respData.data).InfoList||[])[0]||{};if(n.TemplateId!==a[0])return fa=!1,void Object(d.beforeInvokeCallback)({name:"requestSubscribeMessage",args:e,res:Object(E.default)({},a[0],"ban")});var r="订阅一次以下消息通知";3===n.TemplateType&&(r="长期订阅以下消息通知"),Object(B.showModal)({title:r,content:n.Title||"",confirmText:"允许",cancelText:"取消",success:function(t){fa=!1,ga(e,t)},fail:function(t){fa=!1,Object(d.beforeInvokeFail)("requestSubscribeMessage",e,t.errMsg)}})},fail:function(t){var n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();Object(d.beforeInvokeFail)("requestSubscribeMessage",e,n,+t.err_code),fa=!1}})},ga=function(e,t){var n=e.tmplIds[0];da({apiName:"webapi_subscribe_msg",reqData:{AppId:g.default.accountInfo.appId,ActionType:2,UIData:{OpType:t.confirm?1:2,UIItem:[{TemplateId:n,ChooseStatus:1}]}},success:function(){var a={};a[""+n]=t.confirm?"accept":"reject",Object(d.beforeInvokeCallback)({name:"requestSubscribeMessage",args:e,res:a}),Object(la.reportApiUse)({name:"requestSubscribeMessage",data:{templateCount:1,templateType:0,operationType:t.confirm?1:2}})},fail:function(t){var n=t.errMsg.replace("requestSubscribeMessage:fail","").trim();Object(d.beforeInvokeFail)("requestSubscribeMessage",e,n,+t.err_code)}})},ya=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("openWeAppSearch",e)},ma=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("openWeAppHistoryList",e)},ba=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(d.invokeMethod)("openWeAppStarList",e)},_a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(lt.checkPermissionSync)("batchGetContactDirectly"))Object(d.invokeMethod)("batchGetContact",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("batchGetContact","batchGetContactDirectly")}});else{var t="batchGetContactDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},Oa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(lt.checkPermissionSync)("preloadMiniProgramEnvDirectly"))Object(d.invokeMethod)("preloadMiniProgramEnv",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("preloadMiniProgramEnv","preloadMiniProgramEnvDirectly")}});else{var t="preloadMiniProgramEnvDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},Ia=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(lt.checkPermissionSync)("predownloadMiniProgramPackageDirectly"))Object(d.invokeMethod)("predownloadMiniProgramPackage",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("predownloadMiniProgramPackage","predownloadMiniProgramPackageDirectly")}});else{var t="predownloadMiniProgramPackageDirectly:fail no permission";"function"==typeof e.fail&&e.fail({errMsg:t}),"function"==typeof e.complete&&e.complete({errMsg:t})}},Sa=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(ht.beforeInvoke)("requestBizSplitBillPayment",e,{orderNo:""})&&Object(ht.invokeMethod)("requestBizSplitBillPayment",e)},Ea=n(31),wa="";g.default.onReady((function(){wa=g.default.appLaunchInfo.chatroomUsername,wxNativeConsole.info("chatroomUsername",wa)})),Object(Ea.onNativeEvent)("onAppEnterForeground",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wa=e.chatroomUsername,wxNativeConsole.info("onAppEnterForeground chatroomUsername",wa)}));var Ca="getGroupEnterInfo",ka=Object(A.constructOperateWXData)(!1,Ca),Ta=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};wa?Object(lt.checkPermissionSync)("getGroupToolbarInfo")?ka({apiName:"webapi_swapopengid",reqData:{chatroom_name:wa},success:function(t){wxNativeConsole.info("webapi_swapopengid res",t);var n=t.respData,a={};a.iv=n.iv,a.encryptedData=n.encryptedData,n.cloud_id&&(a.cloudID=n.cloud_id),Object(d.beforeInvokeCallback)({name:Ca,args:e,res:a})},fail:e.fail}):Object(d.beforeInvokeFail)(Ca,e,"no permission"):Object(d.beforeInvokeFail)(Ca,e,"invalid scene")}},function(e,t,n){n.r(t),n.d(t,"getPluginId",(function(){return o})),n.d(t,"getPluginVersion",(function(){return s})),n.d(t,"getPluginInfo",(function(){return c})),n.d(t,"getPluginInfoForWebview",(function(){return u})),n.d(t,"checkDomains",(function(){return l})),n.d(t,"parsePluginInfo",(function(){return d})),n.d(t,"replaceErrMsgApiName",(function(){return f}));var a=n(159),r={emitter:new(n(34).default),puidToPluginWX:{},pluginIDs:{},pluginVersions:{},pluginInfos:{}},i=function(e){for(var t in r.puidToPluginWX)if(r.puidToPluginWX[t]===e)return t},o=function(e){return r.pluginIDs[i(e)]},s=function(e){return r.pluginVersions[i(e)]},c=function(e){var t=o(e);if(void 0!==t)return r.pluginInfos[t]},u=function(e){e.success(r.pluginInfos[e.pluginId])},l=function(e,t){if(void 0===t||void 0===e)return!1;for(var n=Object(a.parse)(e||""),r=0;r<t.length;r++){var i=t[r]||"",o=Object(a.parse)(i);if(o.protocol===n.protocol&&o.hostname===n.hostname&&o.port===n.port)return!0}return!1},d=function(e){return null==e?{}:{id:e.plugin_id,hostSign:{noncestr:e.noncestr||"",timestamp:e.timestamp||"",signature:e.host_sign||""},domains:{request:e.request_domain||[],uploadFile:e.upload_domain||[],downloadFile:e.download_domain||[]}}},f=function(e,t,n){var a=new RegExp("^"+t+":"),r={};return["success","fail","complete"].forEach((function(t){"function"==typeof e[t]&&(r[t]=function(r){r.errMsg=r.errMsg.replace(a,n+":"),e[t](r)})})),Object.assign({},e,r)}},function(e,t,n){n.r(t),n.d(t,"getOAID",(function(){return v})),n.d(t,"getDeviceInfo",(function(){return g})),n.d(t,"getWaid",(function(){return y}));var a=n(16),r=n(2),i=n(1),o=n(0);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u="",l="",d="{}",f="",p="",h="{}";function v(e){u?e&&e(u):r.IS_ANDROID&&i.default.clientVersion<654315827?Object(o.invokeMethod)("getOAID",{success:function(t){/:ok/.test(t.errMsg)?(u=t.result||"",e&&e(u)):e&&e("")},fail:function(){e&&e("")}}):e&&e("")}function g(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){r.IS_ANDROID&&i.default.clientVersion>=654315827||r.IS_IOS&&i.default.clientVersion>=385879808?Object(o.invokeMethod)("getDeviceInfo",{waidPkg:e,success:function(e){u=e.oaid||"",l=e.imei||"",p=e.waid||"",f=e.ua||"",h=e.devIdInfo||"{}";try{d=JSON.stringify(c(c({},JSON.parse(h)),f?{ua:f}:{}))}catch(e){n(e)}t({oaid:u,imei:l,commonid:d,waid:p})},fail:function(e){n(e)}}):t({oaid:u,imei:l,commonid:d,waid:p})}))}function y(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return new Promise((function(t,n){var a="",s="";r.IS_ANDROID&&i.default.clientVersion>=654316032?Object(o.invokeMethod)("getDeviceInfo",{waidPkg:e,success:function(e){a=e.waid||"",s=e.imei||"",t({waid:a,imei:s})},fail:function(e){n(e)}}):t({waid:a,imei:s})}))}},function(e,t,n){n.r(t),n.d(t,"default",(function(){return s}));var a=n(145),r=n(144),i=n(103),o=n(146);function s(e){return Object(a.default)(e)||Object(r.default)(e)||Object(i.default)(e)||Object(o.default)()}},function(e,t,n){n.r(t),n.d(t,"isHalfPageMode",(function(){return i})),n.d(t,"isFromChannels",(function(){return o}));var a=n(1),r=n(53),i=function(){var e,t=function(t){e="halfPage"===t.mode};return Object(r.onAppEnterForeground)((function(e){return t(e)})),a.default.onReady((function(){return t(a.default.appLaunchInfo||{})})),function(){return e}}(),o=function(){var e,t=[1175,1177],n=function(n){e=t.includes(n.scene)};return Object(r.onAppEnterForeground)((function(e){return n(e)})),a.default.onReady((function(){return n(a.default.appLaunchInfo||{})})),function(){return e}}()},function(e,t,n){function a(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){n.r(t),n.d(t,"_shareAppMessage",(function(){return U})),n.d(t,"_beforeShareAppMessageSuccessFactory",(function(){return V})),n.d(t,"_doShareAppMessage",(function(){return G})),n.d(t,"shareAppMessage",(function(){return H})),n.d(t,"onShareMessageToFriend",(function(){return Y})),n.d(t,"showUpdatableMessageSubscribeButton",(function(){return W})),n.d(t,"getMessageExtraData",(function(){return B})),n.d(t,"shareVideoAppMessage",(function(){return q}));var a=n(16),r=n(34),i=n(0),o=n(111),s=n(46),c=(n(6),n(2)),u=function(e){Object(i.baseOperateWXData)(Object.assign({},e,{data:{api_name:"webapi_reportgroupshare",data:{path:e.path,share_key:e.shareKey}},success:function(t){c.IS_ANDROID&&"string"==typeof t.data&&(t.data=JSON.parse(t.data));var n=JSON.parse(t.data.data);0===n.errcode?(t.expiresIn=n.expires_in,t.groupMsgTicket=n.group_msg_ticket,delete t.data,Object(i.beforeInvokeCallback)({name:"getGroupMsgTicket",args:e,res:t})):Object(i.beforeInvokeFail)("getGroupMsgTicket",e,n.errmsg,n.errcode)},fail:function(t){Object(i.beforeInvokeFail)("getGroupMsgTicket",e,t.errMsg,-1)}}))},l=n(15),d=n(105),f=n(1),p=n(39),h=n(25),v=Object(h.default)("getIAPInfo","webapi_getiapinfo");var g=n(47),y=n(18),m={};function b(e){var t=e.result,n=e.shareType,a=e.canUseCustomImageUrl,r=e.imageUrlId,i=void 0===r?"":r,o=e.transformedImageUrl,s=void 0===o?"":o,c=m.query,u=[],l=f.default.accountInfo&&f.default.accountInfo.nickname||"";if(c&&"object"===Object(y.default)(c))for(var d in c)u.push(encodeURIComponent(d)+"="+encodeURIComponent(c[d]));var p=[m.scene,m.scene_note,m.sessionid,"",l,Reporter.getAppType(),t,0,u.join("&"),n,a?1:2,i,s,f.default.host?f.default.host.appId:""].map(encodeURIComponent).join(",");Reporter.reportKeyValue({key:"Share",value:p}),Reporter.submit()}var _=n(52),O=n(32),I=n(61),S=n(125);function E(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.filePath,n=e.thumbFilePath,a=e.fileType,r=e.appType;return new Promise((function(e,o){if(!/wxfile:\/\//.test(t)&&!/http:\/\//.test(t)){var c=s.FakeTempFilePathMap.get(t);t=c}Object(i.invokeMethod)("uploadToCommonCDN",{filePath:t,thumbFilePath:n,fileType:a,appType:r,isStorageMode:!0,snsUploadVersion:0,directReturnInDevtools:!0,success:e,fail:o})}))}var w=n(94),C=n(49),k=n(97),T=(n(147),!0),A={};f.default.onReady((function(){Object(l.checkAPIAvailable)("shareCustomImageUrl")||(Object(h.default)("getShareConfig","webapi_getshareconf")({success:function(e){Array.isArray(e.share_link_list)&&(A=e.share_link_list.reduce((function(e,t){return e[t.id]=t.url,e}),{}))},fail:function(e){}}),T=!1)}));var P=function(){return A},D=function(){return T};var x=n(143);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var M=new r.default,N=null,L=null,B=function(){return L};f.default.onReady((function(){Object(l.isGame)()&&n(100)._onShow((function(e){if(L={},e.referrerInfo&&e.referrerInfo.messageExtraData){var t=L=e.referrerInfo.messageExtraData,n=t.userInfo,a=t.shareType;if(a&&n){var r=[Reporter.getAppType(),a,n.openID,e.path||"",Object(g._getCurrentNetworkType)()].join(",");Reporter.reportKeyValue({key:"ShareCardClick",value:r})}}}))}));var F=o.share.ShareInfoStorage,W=function(e){Object(i.invokeMethod)("showUpdatableMessageSubscribeButton",{shareKey:e})},V=function(e){return function(t,n){var a=t.shareInfos;if(delete t.shareInfos,void 0!==a&&a.length>0)if(a=a.filter((function(e){return e.shareKey&&e.shareName})),t.shareTickets=a.map((function(e){return W(e.shareKey),F.set(e.shareKey,e.shareName)})),c.IS_DEVTOOLS)delete t.shareTickets,delete t.shareInfos,n();else{if(e.getGroupMsgTicket)return void Promise.all(a.map((function(e){return new Promise((function(t){!function(e){u(e)}({shareKey:e.shareKey,success:function(e){t({groupMsgTicket:e.groupMsgTicket,expiresIn:e.expiresIn})},fail:function(){t({groupMsgTicket:""})}})}))}))).then((function(e){return t.groupMsgInfos=e,n()})).catch((function(){}));n()}else n()}},U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=D(),o=P(),u="string"==typeof e.path?e.path:"",f="string"==typeof e.query?e.query:"",h="",v=0;switch(t){case"shareAppMessage":v=1;break;case"shareAppMessageDirectly":v=2;break;case"shareAppMessageToSpecificContactDirectly":v=3}if(f.length>2e3&&(console.warn('shareAppMessage: query exceed max length limit 2000: "'+f.length+'"'),f=f.substr(0,2e3)),f&&(u=u+"?"+f),e.imageUrl=s.FakeTempFilePathMap.get(e.imageUrl)||e.imageUrl,Array.isArray(e.imageUrl)&&(e.imageUrl=""),!r){if(!o[e.imageUrlId])return e.imageUrlId,Object(p.showToast)({icon:"none",title:"由于小程序违规，分享功能暂时无法使用"}),void g(2);h=e.imageUrl=o[e.imageUrlId]}function g(t){b({result:t,shareType:v,canUseCustomImageUrl:r,imageUrlId:e.imageUrlId,transformedImageUrl:h})}Object(i.invokeMethod)(t,Object.assign(n,e,{path:u,useDefaultSnapshot:!0,messageExtraData:Object.assign({shareType:v,userInfo:N},e.extra),success:function(t){Object(k.reportShareAppMessage)("shareAppMessage",t),(a||!c.IS_DEVTOOLS&&Object(l.checkAPIAvailable)("share"))&&Object(i.beforeInvokeCallback)({name:"shareAppMessage",args:e,res:t}),g(1),setTimeout((function(){Object(_.reportCanvasData)(_.ReportCanvasDataEventType.EVENT_CANVAS_AFTER_SHARE_SUCCESS)}),500)},fail:function(t){var n=t.errMsg.replace("shareAppMessage:fail","");(a||!c.IS_DEVTOOLS&&Object(l.checkAPIAvailable)("share"))&&Object(i.beforeInvokeFail)("shareAppMessage",e,n),g(-1!==n.indexOf("cancel")?3:2)},cancel:function(){setTimeout((function(){Object(_.reportCanvasData)(_.ReportCanvasDataEventType.EVENT_CANVAS_AFTER_SHARE_CANCEL)}),500)},complete:function(t){var n=(t.errMsg||"").replace(/^[^:]+/,"shareMessageToFriend"),a=!n||"shareMessageToFriend:ok"===n;Object(O.checkPermissionSync)("shareCallback")&&3===v&&(M.emit("callback",{errMsg:n,success:a}),Object(i.beforeInvokeCallback)({name:"shareMessageToFriend",errMsg:n,success:a,args:e}))}}),{beforeSuccess:V(e),beforeAll:function(e){e.errMsg=e.errMsg.replace("shareAppMessageDirectly","shareAppMessage"),e.errMsg=e.errMsg.replace("shareAppMessageToSpecificContactDirectly","shareAppMessage")}}),["success","fail","cancel","complete"].some((function(t){return"function"==typeof e[t]}))&&Object(d.reportRecycledAPI)({name:t,strategy:1}),Object(_.reportCanvasData)(_.ReportCanvasDataEventType.EVENT_CANVAS_BEFORE_SHARE)},G=function(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];var r=function(){var e=t[0].imageUrl;Object(I.getCloudFileUrl)([e],"image",(function(a){/^(cloud):\/\//.test(e)&&(e=a.data[0].url),t[0].imageUrl=e,Object(l.isGame)()?n(178).addLabelToShareArgs(t[0]).catch(wxConsole.warn).then((function(){return U.apply(void 0,t)})):U.apply(void 0,t)}))};N?r():v({success:function(e){N=e},complete:function(){return r()}})},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={title:e.title||f.default.accountInfo.nickname,imageUrl:e.imageUrl,query:e.query,imageUrlId:e.imageUrlId,path:e.path},n=Object(S._getEnterOptionsSync)(),a=n.scene,r=n.chatroomUsername,i="shareAppMessageDirectly",o=e.toCurrentGroup;(o=1158===a?"boolean"!=typeof o||o:"boolean"==typeof o&&o)&&1158===a&&(t.chatroomUsername=r,i="shareAppMessageToSpecificContactDirectly"),G(t,i),Object(x.reportUserBehaviorBranchAnalyticsForDebug)({reportType:8,query:e.query})},Y=function(e){M.on("callback",e)};function q(e){return Object(p.showLoading)({title:"请稍等"}),E({filePath:e.filePath,thumbFilePath:e.thumbFilePath,fileType:20302,appType:213}).then((function(e){return Object(p.hideLoading)(),e})).then((function(t){var n=Object(w.generateFunctionalPagePath)({pageType:C.PAGE_TYPE.PLAY_PAGE_VIDEO,query:e.query});return function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(r,o){var s={title:t.title,path:t.path,imageUrl:e.thumbUrl,cardSubType:Object(w.mapPageTypeToCardSubType)(n),messageExtraData:j({title:t.title,imageUrl:e.fileUrl,pageType:n,thumbUrl:e.thumbUrl,fileUrl:e.fileUrl},a)};Object(i.invokeMethod)("shareAppMessageDirectly",j(j({},s),{},{success:r,fail:o}))}))}(t,{title:e.title,path:n,imageUrl:t.thumbUrl},C.PAGE_TYPE.PLAY_PAGE_VIDEO,e)})).catch((function(e){Object(p.hideLoading)(),wxNativeConsole.error("fail",e)}))}},function(e,t,n){n.r(t),n.d(t,"getSurroundedCallbacks",(function(){return b})),n.d(t,"callbackInvoke",(function(){return O})),n.d(t,"mainInvokeMethod",(function(){return S})),n.d(t,"invokeMethod",(function(){return E})),n.d(t,"invokeMethodAsync",(function(){return w})),n.d(t,"invokeMethodWithPlugin",(function(){return C})),n.d(t,"_invokeMethod",(function(){return T}));var a=n(85),r=n(0),i={},o={},s={},c=0,u=function(e,t){return Object.keys(t).map((function(n){return Object.keys(t[n]).map((function(a){return{func:n,result:e,errMsg:a,count:t[n][a]}}))}))},l=function(){var e=u(1,i),t=u(2,o),n=u(3,s),a=[].concat(e,t,n);0!==a.length&&Object(r.invokeMethod)("reportRealtimeAction",{actionData:JSON.stringify({business:"mmbizwxajsapi",dataType:1,dataArray:a,appType:Reporter.getAppType()})}),i={},o={},s={}},d=n(38),f=n(72),p=n(1),h=n(12),v=n(76),g=n(2),y=["open","openSync","close","closeSync","fstat","fstatSync","write","writeSync","read","readSync","truncate","truncateSync","ftruncate","ftruncateSync"],m=function(e){return g.IS_ANDROID&&y.includes(e)};function b(e,t){return Object.keys(e).reduce((function(n,a){return"function"==typeof e[a]&&(n[a]=__errorTracer__.surroundThirdByTryCatch(e[a],"at api "+t+" "+a+" callback function"),delete e[a]),n}),{})}function _(e,t){return Object.keys(e).reduce((function(n,a){return"function"==typeof e[a]&&(n[a]=Object(d.surroundByTryCatchFactory)(e[a],"at api "+t+" "+a+" callback function"),n[a]._argumentsLength=e[a].length),n}),{})}function O(e,t,n,a){e.errMsg=e.errMsg||t+":ok";var r=0===e.errMsg.indexOf(t+":ok"),u=new RegExp(t+":(fail |fail:)?cancel").test(e.errMsg),d=0===e.errMsg.indexOf(t+":fail");"function"==typeof a.beforeAll&&a.beforeAll(e),r?function(e,t,n){var a=function(){"function"==typeof e.success&&e.success(t),"function"==typeof n.afterSuccess&&n.afterSuccess(t)};"function"==typeof n.beforeSuccess?2===n.beforeSuccess._argumentsLength?n.beforeSuccess(t,a):(n.beforeSuccess(t),a()):a()}(n,e,a):u?function(e,t,n,a){var r=new RegExp(t+":(fail |fail:)?cancel");e.errMsg=e.errMsg.replace(r,t+":fail cancel"),"function"==typeof n.fail&&n.fail(e),"function"==typeof a.beforeCancel&&a.beforeCancel(e),"function"==typeof n.cancel&&n.cancel(e),"function"==typeof a.afterCancel&&a.afterCancel(e)}(e,t,n,a):d&&function(e,t,n,a){"function"==typeof e.beforeFail&&e.beforeFail(n),"function"==typeof a.fail&&a.fail(n),"function"==typeof e.afterFail&&e.afterFail(n),Object(h.isFunction)(e.checkNeedReportFail)&&!1===e.checkNeedReportFail(n)||Reporter.reportIDKey({key:t+"_fail"})}(a,t,e,n),"function"==typeof n.complete&&n.complete(e),"function"==typeof a.afterAll&&a.afterAll(e),function(e,t,n,a,r){var u;(u=t?i:n?o:s)[e]=u[e]||{},u[e][r]=(u[e][r]||0)+1,Date.now()-c>=6e4&&(c=Date.now(),setTimeout(l,6e4))}(t,r,d,0,e.errMsg)}function I(e){return function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"/";Object(h.isObject)(n)||(n={}),"operateWXData"===t&&n._isFromBaseOperateWXData;var o=b(n,t);if(n=Object.assign({},n),r=_(r,t),Reporter.reportIDKey({key:t}),!e){if(0===p.default.appType&&f.banAPISet.has(t)&&!Object(f.checkAPIAvailableForCurrentPage)(t))return void O({errMsg:t+":fail API has been banned"},t,o,r);delete n.pluginId,delete n.permissionBytes,"/"!==i&&(n.pluginId=i)}var s=m(t);Object(a.invoke)(t,n,(function(e){O(e,t,o,r)}),s)}}var S=I(!1),E=function(e,t,n){v.UI_JSAPI.indexOf(e)<0?S(e,t,n):Object(v.registerDelayedInvoke)(e,t,n)},w=function(e,t,n){return Object(d.invoke2Async)((function(t){return E(e,t,n)}))(t)},C=function(e){return e?function(t,n,a){S(t,n,a,e)}:E},k=I(!0),T=function(e,t,n){k(e,t,n)}},function(e,t,n){function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){n.r(t),n.d(t,"reportUserCaptureScreen",(function(){return r})),n.d(t,"reportLandingPageShare",(function(){return i}));var a=n(91),r=function(e){return Object(a.reportMMData)(19213,e)},i=function(e){return Object(a.reportMMData)(19214,e)}},function(e,t,n){n.r(t),n.d(t,"deviceInfo",(function(){return c})),n.d(t,"deviceReady",(function(){return u}));var a=n(1),r=n(15),i=n(23),o=n(42),s=!1,c={},u=function(){return s?Promise.resolve(c):new Promise((function(e){a.default.onReady((function(){s=!0,c.deviceOrientation=Object(i.getInitDeviceOrientation)();var t=Object(o.getInitScreenSize)();c.screenWidth=t.screenWidth||0,c.screenHeight=t.screenHeight||0,c.isWaGame=Object(r.isGame)(),e(c)}))}))}},function(e,t,n){n.r(t),t.default={query:{}}},function(e,t,n){n.r(t),n.d(t,"FakeImage",(function(){return _})),n.d(t,"SkiaCanvasFake",(function(){return E}));var a=n(14),r=n(17),i=n(8),o=n(4),s=n(5),c=n(0),u=n(20),l=n(35),d=n(50),f=n(129),p=n(43),h=n(87),v=n(1);function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(i.default)(e);if(t){var o=Object(i.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(r.default)(this,n)}}var y={};function m(e,t){var n=Object(u.concatId)(t,e.canvasNumber),a=y[n];delete y[n],a&&a.dispose()}v.default.onReady((function(){Object(u.shouldUseOldCanvas)()&&(Object(c.subscribe)("skiaCanvasInsert",(function(e,t){Object(l.skiaCanvasInsert)(e,t),Object(p.onBeforeUnloadPage)(t,(function(){m(e,t)}))})),Object(c.subscribe)("skiaCanvasRemove",(function(e,t){Object(l.skiaCanvasRemove)(e,t),m(e,t),Object(c.publish)("skiaCanvasRemoved_"+e.canvasNumber)})),Object(c.subscribe)("skiaCanvasSizeChangedBinding",(function(e,t){var n=Object(u.concatId)(t,e.canvasNumber),a=l.canvasRefMapById[n];a&&(a._top=e.position.top,a._left=e.position.left,a._width=e.position.width,a._height=e.position.height)})))}));var b=function(){function e(){Object(o.default)(this,e)}return Object(s.default)(e,[{key:"width",get:function(){return this._w},set:function(e){this._w=e}},{key:"height",get:function(){return this._h},set:function(e){this._h=e}}]),e}(),_=function(){function e(){Object(o.default)(this,e),this._src=null,this._referrerPolicy=""}return Object(s.default)(e,[{key:"setSrc",value:function(e){var t=this;this._src=e,/^(http|https):\/\//.test(e)?Object(h._downloadFileSkipCheckDomain)({url:e,success:function(e){t._src=e.tempFilePath,"function"==typeof t.onload&&t.onload()},fail:this.onerror||function(){}}):"function"==typeof this.onload&&this.onload()}},{key:"getSrc",value:function(){return this._src}},{key:"getReferrerPolicy",value:function(){return this._referrerPolicy}},{key:"setReferrerPolicy",value:function(e){this._referrerPolicy=e}}]),e}(),O=function(){function e(){Object(o.default)(this,e)}return Object(s.default)(e,[{key:"sync",value:function(e){var t=this;this.t=setTimeout((function n(){e(),t.t=setTimeout(n,1e3/60)}),1e3/60)}},{key:"dispose",value:function(){clearInterval(this.t)}}]),e}(),I={offset:Date.now(),now:function(){return Date.now()-this.offset}},S=function(){function e(t){var n=this;Object(o.default)(this,e),this.id=0,this.canvasView=t,this.callbacks=new Map,this.vSync=new O,this.vSync.sync((function(){var e=new Map(n.callbacks);if(n.callbacks.clear(),e.forEach((function(e){"function"==typeof e&&e.apply(null,[I.now()])})),n.canvasView.actions.length>0){for(var t=!0,a=n.canvasView.actions,r=0;r<a.length;r++)"clearRect"===a[r].method&&(t=!1);n.canvasView.draw(t)}}))}return Object(s.default)(e,[{key:"requestAnimationFrame",value:function(e){var t=this.id++;return this.callbacks.set(t,e),t}},{key:"cancelAnimationFrame",value:function(e){this.callbacks.delete(e)}},{key:"dispose",value:function(){this.vSync.dispose(),this.callbacks.clear()}}]),e}(),E=function(e){Object(a.default)(n,e);var t=g(n);function n(){return Object(o.default)(this,n),t.apply(this,arguments)}return Object(s.default)(n,[{key:"_initCanvasInstance",value:function(){return this._context=new f.Context(this._webviewId,this._nodeCanvasId,this._nodeId,""),this._scheduler=new S(this._context),y[this._canvasId]=this._scheduler,new b}},{key:"getContext",value:function(){return Object(u.pipe)(d.decorateContextForImageProxy)(this._context,this.id)}},{key:"width",get:function(){var e=l.canvasMap.get(this);return e&&e.width},set:function(e){e!==this._width&&(this._context._ignoreScale=!0);var t=l.canvasMap.get(this);t&&(t.width=e)}},{key:"height",get:function(){var e=l.canvasMap.get(this);return e&&e.height},set:function(e){e!==this._height&&(this._context._ignoreScale=!0);var t=l.canvasMap.get(this);t&&(t.height=e)}},{key:"createImage",value:function(){var e=new _,t=Object(u.wrapImageObject)(e,l.skiaCanvasMappings[this._canvasId]);return new d.SkiaImageProxy(t)}},{key:"createImageData",value:function(){return null}},{key:"createPath2D",value:function(){return null}},{key:"requestAnimationFrame",value:function(e){return this._scheduler.requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){this._scheduler.cancelAnimationFrame(e)}}]),n}(l.SkiaCanvas)},function(e,t,n){var a;function r(e){a=e}function i(){return a}n.r(t),n.d(t,"setLastOnHideMode",(function(){return r})),n.d(t,"getLastOnHideMode",(function(){return i}))},function(e,t,n){n.r(t),n.d(t,"_getEnterOptionsSync",(function(){return u})),n.d(t,"getEnterOptionsSync",(function(){return l}));var a=n(1),r=n(15),i=n(100),o=n(77),s={},c=null;function u(){return s}function l(){return c||Object(o.getLaunchOptionsSync)()}a.default.onReady((function(){s=a.default.appLaunchInfo,Object(r.isGame)()&&(Object(i._onBaseFrameShow)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object.assign({},e);s.referrerInfo=Object.assign({},s.referrerInfo,t.referrerInfo),delete t.referrerInfo,s=Object.assign({},s,t)})),Object(i.onShow)((function(e){c=e})))}))},function(e,t,n){n.r(t),n.d(t,"EventEmitter",(function(){return u}));var a=n(5),r=n(4),i=n(14),o=n(17),s=n(8);function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.default)(e);if(t){var r=Object(s.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.default)(this,n)}}var u=function(e){Object(i.default)(n,e);var t=c(n);function n(){return Object(r.default)(this,n),t.apply(this,arguments)}return Object(a.default)(n)}(n(106).default)},function(e,t,n){n.r(t),n.d(t,"adInit",(function(){return r}));var a=n(22),r=function(e,t,n){return a.init.call(this,e,function(e){for(var t={},n=0,a=Object.keys(e||{});n<a.length;n++){var r=a[n];e[r]&&(t[r]=Object.assign({},e[r]),e[r].landscape&&!e[r].landscapeLeft&&(t[r].landscapeLeft=Object.assign({},e[r].landscape)),e[r].landscape&&!e[r].landscapeRight&&(t[r].landscapeRight=Object.assign({},e[r].landscape)))}return t}(t),n)}},function(e,t,n){n.r(t),n.d(t,"readFile",(function(){return y})),n.d(t,"readFileSync",(function(){return m}));var a=n(0),r=n(32),i=n(19),o=n(2),s=n(1),c=n(107),u=n(31),l=(n(47),n(12));var d="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.version:"unknown",f="undefined"!=typeof __libVersionInfo__&&__libVersionInfo__?__libVersionInfo__.updateTime:"unknown";Object(l.isString)(d)&&(d=d.replace(" ","")),Object(l.isString)(f)&&(f=f.replace(" ","-")),s.default.onReady((function(){s.default.appLaunchInfo.scene,s.default.appLaunchInfo.sessionid||s.default.appLaunchInfo.sessionId,Object(u.onNativeEvent)("onAppEnterForeground",(function(e){e&&e.scene&&e.scene,e&&(e.sessionid||e.sessionId)&&(e.sessionid||e.sessionId)}))}));new WeakSet;var p=[];Map,Math.random;var h=n(10),v=i.default.fs,g=!1;v&&v.FileReader&&s.default.onReady((function(){var e=!1,t=o.IS_IOS?"clicfg_appbrand_ios_native_readfile":"clicfg_appbrand_native_readfile";Object(c._getABTestConfig)({experimentId:t,experimentType:"Expt",success:function(t){var n,a;t&&1===Number(t.testConfig)&&(n=/readFile(?:Sync)?$/,a=1,p.push({match:n,version:a}),e=!0)},fail:function(e){}});var n=Object(r.checkPermissionSync)("bindingReadFile");g=e||n}));var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.beforeInvoke)("readFile",e,{filePath:""}))if(Object(l.isUndefined)(e.encoding)||Object(l.isString)(e.encoding))if(Object(l.isUndefined)(e.position)||Object(l.isNumber)(e.position))if(Object(l.isUndefined)(e.length)||Object(l.isNumber)(e.length))if(g){var t=new v.FileReader;t.onerror=function(t){return Object(a.beforeInvokeFail)("readFile",e,t)},t.onread=function(t){return Object(a.beforeInvokeCallback)({name:"readFile",args:e,res:{data:t}})},t.read(e.filePath,e.encoding)}else Object(a.invokeMethod)("readFile",e);else Object(a.beforeInvokeFail)("readFile",e,"invalid length: "+e.length);else Object(a.beforeInvokeFail)("readFile",e,"invalid position: "+e.position);else Object(a.beforeInvokeFail)("readFile",e,"invalid encoding: "+e.encoding)},m=function(e,t,n,r){if(!e||!Object(l.isString)(e))throw new h.ThirdScriptError("invalid filePath: "+e);if(!Object(l.isUndefined)(t)&&!Object(l.isString)(t))throw new h.ThirdScriptError("invalid encoding: "+t);if(!Object(l.isUndefined)(n)&&!Object(l.isNumber)(n))throw new h.ThirdScriptError("invalid position: "+n);if(!Object(l.isUndefined)(r)&&!Object(l.isNumber)(r))throw new h.ThirdScriptError("invalid length: "+r);if(g)try{return v.readFileSync(e,t)}catch(o){throw new Error(o)}var i,o;if(Object(a.invokeMethod)("readFileSync",{filePath:e,encoding:t,position:n,length:r,success:function(e){i=e.data},fail:function(e){o=e.errMsg}}),o)throw new Error(o);return i}},function(e,t,n){n.r(t),n.d(t,"Context",(function(){return S}));var a=n(4),r=n(5),i=n(18),o=n(0),s=n(10),c=n(58),u=n(57),l={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgrey:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",grey:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32",transparent:"#00000000"},d=n(6),f=n(20),p=n(2),h={},v={};function g(e){return"number"==typeof e}function y(e){var t=null;if(null!=(t=/^#([0-9|A-F|a-f]{6})$/.exec(e)))return[parseInt(t[1].slice(0,2),16),parseInt(t[1].slice(2,4),16),parseInt(t[1].slice(4),16),255];if(null!=(t=/^#([0-9|A-F|a-f]{3})$/.exec(e))){var n=t[1].slice(0,1),a=t[1].slice(1,2),r=t[1].slice(2,3);return[n=parseInt(n+n,16),a=parseInt(a+a,16),r=parseInt(r+r,16),255]}if(null!=(t=/^rgb\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e){return Math.min(255,parseInt(e.trim(),10))})).concat(255);if(null!=(t=/^rgba\((.+)\)$/.exec(e)))return t[1].split(",").map((function(e,t){return 3===t?Math.floor(255*parseFloat(e.trim())):Math.min(255,parseInt(e.trim(),10))}));var i=e.toLowerCase();if(Object(c.hasOwnProperty)(l,i)){t=/^#([0-9|A-F|a-f]{6,8})$/.exec(l[i]);var o=parseInt(t[1].slice(0,2),16),s=parseInt(t[1].slice(2,4),16),u=parseInt(t[1].slice(4,6),16),d=parseInt(t[1].slice(6,8),16);return[o,s,u,d=d>=0?d:255]}return console.group("非法颜色: "+e),console.error("不支持颜色："+e),console.groupEnd(),[0,0,0,255]}function m(e){if(Array.isArray(e)){var t=[];return e.forEach((function(e){t.push(m(e))})),t}if("object"===Object(i.default)(e)){var n={};for(var a in e)n[a]=m(e[a]);return n}return e}function b(e,t){if(!(p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA||/wxfile:\/\//.test(t)))if(e.pluginId||e.nodeId){var n=e.pluginId.split("/")[0],a=__virtualDOM__.getNodeById(e.nodeId,e.webviewId),r=a&&a.is||"";t=n?0===t.indexOf("/")?__virtualDOM__.getPluginRoutePrefix(n)+Object(s.getRealRoute)(r,t,!1).replace(/\.html$/,""):Object(s.getRealRoute)(__virtualDOM__.convertComponentAliasToRoute(r),t,!1).replace(/\.html$/,""):Object(s.getRealRoute)(r,t,!1).replace(/\.html$/,"")}else t=Object(s.getRealRoute)(d.default.lastRoute,t,!1).replace(/.html$/,"");return t}var _=function(){function e(t,n){Object(a.default)(this,e),this.type=t,this.data=n,this.colorStop=[]}return Object(r.default)(e,[{key:"addColorStop",value:function(e,t){u.SKIA_CANVAS_ENABLED?this.colorStop.push([e,t]):this.colorStop.push([e,y(t)])}}]),e}(),O=Object(r.default)((function e(t){Object(a.default)(this,e),this.width=t})),I=Object(r.default)((function e(t,n){Object(a.default)(this,e),this.image=t,this.repetition=n})),S=function(){function e(t,n,r,i){if(Object(a.default)(this,e),this.actions=[],this.path=[],this.subpath=[],this.webviewId=t,this.canvasId=n,this.pluginId=i,this.useHardwareAccelerate=!0,this.nodeId=r,this._id=Object(f.concatId)(t,n,i,r),this.drawingState=h[this._id]=h[this._id]||[],this.state=v[this._id]=v[this._id]||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:u.SKIA_CANVAS_ENABLED?"#000000":p.IS_IOS?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"},this._transform={a:1,b:0,c:0,d:1,e:0,f:0},p.IS_DEVTOOLS||p.IS_PC){var o=document.createElement("canvas");this._context=o.getContext("2d")}}return Object(r.default)(e,[{key:"getActions",value:function(){var e=m(this.actions);return this.actions=[],this.path=[],this.subpath=[],e}},{key:"clearActions",value:function(){this.actions=[],this.path=[],this.subpath=[]}},{key:"draw",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1?arguments[1]:void 0,n=this.canvasId,a=m(this.actions),r=this.useHardwareAccelerate;this.actions=[],this.path=[],this.useHardwareAccelerate=!0,this.isWidgetCanvas?Object(u.drawCanvasImpl)({isWidgetCanvas:!0,actions:a,reserve:e}):Object(u.drawCanvasImpl)({canvasId:n,actions:a,reserve:e,useHardwareAccelerate:r,complete:t},this.webviewId,this.pluginId,this.nodeId)}},{key:"createLinearGradient",value:function(e,t,n,a){return new _("linear",[e,t,n,a])}},{key:"createCircularGradient",value:function(e,t,n){return new _("radial",[e,t,n])}},{key:"createPattern",value:function(e,t){if(void 0!==t){if(-1!==["repeat","repeat-x","repeat-y","no-repeat"].indexOf(t))return e=e._src?e._src:b(this,e),new I(e,t);console.error("Failed to execute 'createPattern' on 'CanvasContext': The provided type ('"+t+"') is not one of 'repeat', 'no-repeat', 'repeat-x', or 'repeat-y'.")}else console.error("Failed to execute 'createPattern' on 'CanvasContext': 2 arguments required, but only 1 present.")}},{key:"measureText",value:function(e){var t;return p.IS_DEVTOOLS||p.IS_PC?(this._context.font=this.state.font,t=this._context.measureText(e)):Object(o.invokeMethod)("measureText",{text:e,fontSize:this.state.fontSize,fontFamily:this.state.fontFamily,fontWeight:this.state.fontWeight,fontStyle:this.state.fontStyle,complete:function(e){t={width:e.width||0}}}),new O(t.width||0)}},{key:"save",value:function(){this.actions.push({method:"save",data:[]}),this.drawingState.push(this.state)}},{key:"restore",value:function(){this.actions.push({method:"restore",data:[]}),this.state=v[this._id]=this.drawingState.pop()||{lineDash:[0,0],shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:u.SKIA_CANVAS_ENABLED?"#000000":p.IS_IOS?[]:[0,0,0,0],font:"10px sans-serif",fontSize:10,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif"}}},{key:"getLineDash",value:function(){return this.state.lineDash}},{key:"beginPath",value:function(){this.path=[],this.subpath=[],(p.IS_DEVTOOLS||u.SKIA_CANVAS_ENABLED)&&this.path.push({method:"beginPath",data:[]})}},{key:"moveTo",value:function(e,t){this.path.push({method:"moveTo",data:[e,t]}),this.subpath=[[e,t]]}},{key:"closePath",value:function(){this.path.push({method:"closePath",data:[]}),this.subpath.length&&(this.subpath=[this.subpath.shift()])}},{key:"lineTo",value:function(e,t){0===this.path.length&&0===this.subpath.length?this.path.push({method:"moveTo",data:[].slice.apply(arguments)}):this.path.push({method:"lineTo",data:[].slice.apply(arguments)}),this.subpath.push([e,t])}},{key:"quadraticCurveTo",value:function(e,t,n,a){this.path.push({method:"quadraticCurveTo",data:[e,t,n,a]}),this.subpath.push([n,a])}},{key:"bezierCurveTo",value:function(e,t,n,a,r,i){this.path.push({method:"bezierCurveTo",data:[e,t,n,a,r,i]}),this.subpath.push([r,i])}},{key:"arc",value:function(e,t,n,a,r){var i=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(!p.IS_ANDROID||u.SKIA_CANVAS_ENABLED)return this.path.push({method:"arc",data:[e,t,n,a,r,i]}),void this.subpath.push([e,t]);var o=e+Math.cos(a)*n,s=t+Math.sin(a)*n;if(this.subpath.push([o,s]),i&&a-r>=2*Math.PI||!i&&r-a>=2*Math.PI)this.subpath.push([o,s]);else{var c=e+Math.cos(r)*n,l=t+Math.sin(r)*n;this.subpath.push([c,l])}this.path.push({method:"arc",data:[e,t,n,a,r,i]})}},{key:"rect",value:function(e,t,n,a){this.path.push({method:"rect",data:[e,t,n,a]}),this.subpath=[[e,t]],p.IS_ANDROID&&!u.SKIA_CANVAS_ENABLED&&this.path.push({method:"closePath",data:[]})}},{key:"arcTo",value:function(e,t,n,a,r,i){if((!p.IS_ANDROID||u.SKIA_CANVAS_ENABLED)&&!i)return this.path.push({method:"arcTo",data:[e,t,n,a,r]}),void this.subpath.push([n,a]);var o=this.subpath[this.subpath.length-1],s=o[0],c=o[1];if(s===e&&c===t||e===n&&t===a||0===r)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);if(s===e&&s===n||c===t&&c===a)return this.actions.push({method:"lineTo",data:[e,t]}),void this.subpath.push([e,t]);var l,d,f,h,v,g,y=Math.sqrt,m=Math.acos,b=Math.sin,_=Math.tan,O=Math.atan,I=Math.PI,S=function(e){return Math.pow(e,2)},E=s-e,w=c-t,C=n-e,k=a-t,T=m((E*C+w*k)/(y(S(E)+S(w))*y(S(C)+S(k))))/2,A=Math.round(r/b(T)*1e6)/1e6,P=Math.round(r/_(T)*1e6)/1e6;if(s-e==0)l=e,d=c-t>0?t+P:t-P;else if(c-t==0)l=s-e>0?e+P:e-P,d=t;else{var D=(c-t)/(s-e),x=c-D*s;d=D*(l=(y(S(E)+S(w))*P+E*e+w*t-x*w)/(E+D*w))+x}if(n-e==0)f=e,h=a-t>0?t+P:t-P;else if(a-t==0)f=n-e>0?e+P:e-P,h=t;else{var R=(a-t)/(n-e),j=a-R*n;h=R*(f=(y(S(C)+S(C))*P+C*e+k*t-j*k)/(C+R*k))+j}var M=(l+f)/2-e,N=(d+h)/2-t;if(0===N)v=e,g=N>0?t+A:t-A;else{var L=N/M,B=t-L*e;g=L*(v=(y(S(M)+S(N))*A+e*M+t*N-B*N)/(M+L*N))+B}v=Math.round(1e6*v)/1e6;var F=d-(g=Math.round(1e6*g)/1e6),W=l-v,V=I-2*T,U=O(F/W);0===F&&W<0&&(U=Math.PI);var G=(l-v)*(h-g)-(d-g)*(f-v);this.path.push({method:"arc",data:[v,g,r,U,G>0?U+V:U-V,G<0]}),this.subpath.push([f,h])}},{key:"getTransform",value:function(){return this._transform}},{key:"clip",value:function(){this.actions.push({method:"clip",data:m(this.path)})}},{key:"lineDashOffset",set:function(e){if(p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA)this.actions.push({method:"setLineDashOffset",data:[e]});else{var t=this.state.lineDash||[0,0];this.actions.push({method:"setLineDash",data:[t,e]})}}},{key:"globalCompositeOperation",set:function(e){this.actions.push({method:"setGlobalCompositeOperation",data:[e]})}},{key:"shadowBlur",set:function(e){p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowBlur",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,e,this.state.shadowColor]}),this.state.shadowBlur=e)}},{key:"shadowColor",set:function(e){var t;p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowColor",data:[e]}):(t=u.SKIA_CANVAS_ENABLED?e:p.IS_IOS&&0===this.state.shadowBlur?[]:y(e),this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,this.state.shadowOffsetY,this.state.shadowBlur,t]}),this.state.shadowColor=t)}},{key:"shadowOffsetX",set:function(e){p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowOffsetX",data:[e]}):(this.actions.push({method:"setShadow",data:[e,this.state.shadowOffsetY,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetX=e)}},{key:"shadowOffsetY",set:function(e){p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA?this.actions.push({method:"setShadowOffsetY",data:[e]}):(this.actions.push({method:"setShadow",data:[this.state.shadowOffsetX,e,this.state.shadowBlur,this.state.shadowColor]}),this.state.shadowOffsetY=e)}},{key:"font",get:function(){return this.state.font},set:function(e){var t=this;this.state.font=e;var n=e.match(/^(([\w\-]+\s)*)(\d+r?px)(\/(\d+\.?\d*(r?px)?))?\s+(.*)/);if(n){var a=n[1].trim().split(/\s/),r=parseFloat(n[3]),i=n[7],o=[],s="",c=this;if(a.forEach((function(e,n){["italic","oblique","normal"].indexOf(e)>-1?(o.push({method:"setFontStyle",data:[e]}),t.state.fontStyle=e):["bold","normal"].indexOf(e)>-1?(o.push({method:"setFontWeight",data:[e]}),t.state.fontWeight=e):0===n?(o.push({method:"setFontStyle",data:["normal"]}),c.state.fontStyle="normal"):1===n&&u()})),1===a.length&&u(),s=o.map((function(e){return e.data[0]})).join(" "),this.state.fontSize=r,this.state.fontFamily=i,p.IS_DEVTOOLS||p.IS_PC||p.IS_MINA)return s=s+" "+r+"px "+i,void this.actions.push({method:"setFont",data:[s]});this.actions.push.apply(this.actions,o),this.actions.push({method:"setFontSize",data:[r]},{method:"setFontFamily",data:[i]})}else console.warn("Failed to set 'font' on 'CanvasContext': invalid format.");function u(){o.push({method:"setFontWeight",data:["normal"]}),c.state.fontWeight="normal"}}},{key:"fillStyle",set:function(e){E(this,"setFillStyle",e)}},{key:"strokeStyle",set:function(e){E(this,"setStrokeStyle",e)}},{key:"globalAlpha",set:function(e){e=Math.floor(255*parseFloat(e)),this.actions.push({method:"setGlobalAlpha",data:[e]})}},{key:"textAlign",set:function(e){this.actions.push({method:"setTextAlign",data:[e]})}},{key:"lineCap",set:function(e){this.actions.push({method:"setLineCap",data:[e]})}},{key:"lineJoin",set:function(e){this.actions.push({method:"setLineJoin",data:[e]})}},{key:"lineWidth",set:function(e){this.actions.push({method:"setLineWidth",data:[e]})}},{key:"miterLimit",set:function(e){this.actions.push({method:"setMiterLimit",data:[e]})}},{key:"textBaseline",set:function(e){this.actions.push({method:"setTextBaseline",data:[e]})}}]),e}();function E(e,t,n){"string"==typeof n?u.SKIA_CANVAS_ENABLED?e.actions.push({method:t,data:["normal",n]}):e.actions.push({method:t,data:["normal",y(n)]}):"object"===Object(i.default)(n)&&n instanceof _?e.actions.push({method:t,data:[n.type,n.data,n.colorStop]}):n instanceof I&&e.actions.push({method:t,data:["pattern",n.image,n.repetition]})}[].concat(["scale","rotate","translate","setTransform","transform"],["drawImage","fillText","fill","stroke","fillRect","strokeRect","clearRect","strokeText"]).forEach((function(e){S.prototype[e]="fill"===e||"stroke"===e?function(){this.actions.push({method:e+"Path",data:m(this.path)})}:"fillRect"===e?function(e,t,n,a){this.actions.push({method:"fillPath",data:[{method:"rect",data:[e,t,n,a]}]})}:"strokeRect"===e?function(e,t,n,a){this.actions.push({method:"strokePath",data:[{method:"rect",data:[e,t,n,a]}]})}:"fillText"===e||"strokeText"===e?function(t,n,a,r){var i=[t.toString(),n,a];"number"==typeof r&&i.push(r),this.actions.push({method:e,data:i})}:"drawImage"===e?function(t,n,a,r,i,o,s,c,u){var l;t=t._src?t._src:b(this,t),void 0===u&&(o=n,s=a,c=r,u=i,n=void 0,a=void 0,r=void 0,i=void 0),l=g(n)&&g(a)&&g(r)&&g(i)?[t,o,s,c,u,n,a,r,i]:g(c)&&g(u)?[t,o,s,c,u]:[t,o,s],this.actions.push({method:e,data:l})}:"clearRect"===e?function(){this.useHardwareAccelerate=!1,this.actions.push({method:e,data:[].slice.apply(arguments)})}:"transform"===e||"setTransform"===e?function(t,n,a,r,i,o){this._transform={a:t,b:n,c:a,d:r,e:i,f:o},this.actions.push({method:e,data:[t,n,a,r,i,o]})}:function(){this._ignoreScale&&"scale"===e?this._ignoreScale=!1:this.actions.push({method:e,data:[].slice.apply(arguments)})}})),["setFillStyle","setTextAlign","setStrokeStyle","setGlobalAlpha","setShadow","setFontSize","setLineCap","setLineJoin","setLineWidth","setMiterLimit","setTextBaseline","setLineDash"].forEach((function(e){"setFillStyle"===e||"setStrokeStyle"===e?S.prototype[e]=function(){var t=arguments[0];E(this,e,t)}:"setGlobalAlpha"===e?S.prototype[e]=function(){var t=[].slice.apply(arguments,[0,1]);t[0]=Math.floor(255*parseFloat(t[0])),this.actions.push({method:e,data:t})}:"setShadow"===e?S.prototype[e]=function(){var t=[].slice.apply(arguments,[0,4]);u.SKIA_CANVAS_ENABLED||(t[3]=p.IS_IOS&&0===t[2]?[]:y(t[3])),this.actions.push({method:e,data:t}),this.state.shadowBlur=t[2],this.state.shadowColor=t[3],this.state.shadowOffsetX=t[0],this.state.shadowOffsetY=t[1]}:"setLineDash"===e?S.prototype[e]=function(){var t=[].slice.apply(arguments,[0,2]);t[0]=t[0]&&t[0].length?t[0]:[0,0],t[1]=t[1]||0,this.actions.push({method:e,data:t}),this.state.lineDash=t[0]}:"setFontSize"===e?S.prototype.setFontSize=function(e){this.state.font=this.state.font.replace(/\d+\.?\d*px/,e+"px"),this.state.fontSize=e,this.actions.push({method:"setFontSize",data:[e]})}:S.prototype[e]=function(){this.actions.push({method:e,data:[].slice.apply(arguments,[0,1])})}}))},function(e,t,n){n.r(t),n.d(t,"encodeIdKey",(function(){return r})),n.d(t,"IDKEY_GROUP",(function(){return a})),n.d(t,"IDKEY",(function(){return o})),n.d(t,"SPLASHAD_IDKEY",(function(){return c})),n.d(t,"CUSTOMAD_IDKEY",(function(){return l}));var a,r=function(e,t){return{idKey:e,idKeyGroup:t}};!function(e){e[e.COMMON=924]="COMMON",e[e.SPLASHAD=1288]="SPLASHAD",e[e.CUSTOMAD=1390]="CUSTOMAD"}(a||(a={}));var i=function(e){return r(e,a.COMMON)},o={AD_BANNER_LOAD_ERROR:i(5),AD_VIDEO_LOAD_ERROR:i(10),REWARDED_VIDEO_PARSE_ERROR:i(11),REWARDED_VIDEO_RENDER_ERROR:i(12),REWARDED_VIDEO_LOAD_ERROR:i(13),REWARDED_VIDEO_FOLLOW_SUCCESS:i(14),OPEN_URL_ERROR:i(21),OPEN_WXAPP_ERROR:i(22),OPEN_CANVAS_ERROR:i(23),ADD_CONTACT_ERROR:i(24),LAUNCH_APP_ERROR:i(25),OPEN_WEBAPPSTORE_ERROR:i(26),ADD_DOWNLOAD_TASK_ERROR:i(28),CLICK_REPORT_ERROR:i(32),EXPOSURE_REPORT_ERROR:i(33),FOLLOW_REPORT_ERROR:i(34),REWARDED_VIDEO_ANIMATE_ERROR:i(35),AD_FOLLOWED:i(37),AD_INSTALLED:i(38),AD_INTERSTITIAL_LOAD_ERROR:i(39),REWARDED_VIDEO_INSTANCE_BROKEN:i(50),PRELOAD_MINIENV_SUCCESS:i(86),PRELOAD_MINIENV_ERROR:i(87),AD_GRID_LOAD_SUCCESS:i(88),AD_GRID_LOAD_COUNT_ERROR:i(89),AD_GRID_LOAD_ERROR:i(90),PREDOWNLOAD_SUCCESS:i(96),PREDOWNLOAD_ERROR:i(97),REWARDED_VIDEO_OTHER_SHOW_ERROR:i(105),BATCHLOAD_SUCCESS:i(112),BATCHLOAD_ERROR:i(113),REWARDED_VIDEO_BUTTON_WIDTH_ERROR:i(114),REWARDED_VIDEO_FULLSCREEN_SHOW_ERROR:i(115),BIND_GUIDE_SUCCESS:i(119),BIND_GUIDE_ERROR:i(120),REWARDED_VIDEO_FULLSCREEN_HIDE_ERROR:i(121),RIGHTBUTTON_HIDE_ERROR:i(127),REWARDED_VIDEO_RELATION_FETCH_ERROR:i(128),GET_DEVICEINFO_ERROR:i(129),THIRD_ERROR:i(130),GET_DEVICEINFO_SUCCESS:i(131),GET_WAID_SUCCESS:i(132),GET_WAID_ERROR:i(133),READ_ADINFOS_ERROR:i(134),AD_FETCH_SUCCESS:i(135),REWARDED_VIDEO_PRELOAD_ERROR:i(136),REWARDED_VIDEO_PRELOAD_SUCCESS:i(137),READ_ADINFOS_SUCCESS:i(138),ANALYSE_DEBUG_REPORT_ERROR:i(139),PRELOAD_CALL_ERROR:i(140),PRELOAD_LOAD_ERROR:i(141),PRELOAD_LOAD_SUCCESS:i(142),PRELOAD_USE_SUCCESS:i(143),PRELOAD_USE_ERROR:i(144),PRELOAD_DOWNLOAD_SUCCESS:i(145),PRELOAD_DOWNLOAD_ERROR:i(146),REPORT_VIDEO_FAILED:i(147),REWARD_GAUSS_EXISTS:i(148),REWARD_USE_GAUSS:i(149),REWARD_USE_EXPAND_STYLE:i(150),REWARD_USE_GAUSS_AND_EXPAND_STYLE:i(151),REWARDED_VIDEO_KEEP_ALIVE:i(152),REWARDED_VIDEO_END:i(154),OPEN_CHANNELS_ACTIVITY_SUCCESS:i(156),OPEN_CHANNELS_ACTIVITY_FAILED:i(157),OPEN_CHANNELS_LIVE_SUCCESS:i(158),OPEN_CHANNELS_LIVE_FAILED:i(159),OPEN_CHANNELS_USER_PROFILE_SUCCESS:i(160),OPEN_CHANNELS_USER_PROFILE_FAILED:i(161),REWARD_CHANNELS_CALLBACK_SUCCESS:i(162),REWARD_CHANNELS_CALLBACK_FAILED:i(163),H5_PRELOAD_CARD_CLICKED:i(164),H5_PRELOAD_BUTTON_CLICKED:i(165),H5_PRELOAD_SUCCESS:i(166),H5_PRELOAD_FAILED:i(167),H5_PRELOAD_PLAYABLE_CLICKED:i(168),GET_CHANNELS_LIVE_STATUS_SUCCESS:i(169),GET_CHANNELS_LIVE_STATUS_FAILED:i(170),REWARDED_VIDEO_DURATION_ZERO:i(171)},s=function(e){return r(e,a.SPLASHAD)},c={dataLoadSuccess:s(0),dataLoadFail:s(1),dataPreloadSuccess:s(2),dataPreloadFail:s(3),handleDataFail:s(4),launchAcceptShouldShow:s(5),menuAcceptShouldShow:s(6),readFileFail:s(7),launchShowSplashAdSuccess:s(8),menuShowSplashAdSuccess:s(9),showSplashAdFail:s(10),firstRenderFail:s(11),firstInsertFail:s(12),secondRenderFail:s(13),secondInsertFail:s(14),iosThirdInsertFail:s(15),checkAdStateFail:s(16),adOfflineClose:s(17),readFileDataFail:s(18),firstShowSuccess:s(19),showSplashAdMenuSuccess:s(20),showSplashAdMenuFail:s(21),secondShowSuccess:s(22),removeFileDataFail:s(23),landingPageFail:s(24),frequencyControlFail:s(25),frequencyControlReturn:s(26),bulkCopyFileFail:s(27),getAdInfosFail:s(28),getAidFail:s(29),setExposureTagFail:s(30),NO_ADINFOS:s(31),NO_AID:s(32),MATERIAL_NOT_READY:s(33),CHECK_AD_STATUS_ERROR:s(34),CRT_ORIENTATION_NOT_SURE:s(35),EXPOSURE_TIMES_LIMIT:s(36),START_CHECK_AD_STATUS:s(37),CHECK_AD_STATUS_SUCCESS:s(38),OTHER_ADS_EMIT_FETCH:s(39),WRITE_ADINFOS_SUCCESS:s(40),WRITE_ADINFOS_FAIL:s(41)},u=function(e){return r(e,a.CUSTOMAD)},l={LOAD_FAILED:u(1),PRELOAD_SUCCESS:u(2),PRELOAD_FAILED:u(3),PARSE_FAILED:u(4),TPL_RENDER_SUCCESS:u(5),TPL_PARSE_FAILED:u(6),TPL_LOAD_FAILED:u(7),AD_LIMIT_TIME:u(8),AD_LIMIT_BOUNDARY:u(9),RELATION_FETCH_ERROR:u(10),SHOW_FAILED1:u(11),SHOW_FAILED2:u(12),AD_VIDEO_LOAD_FAILED:u(13),FOLLOW_SUCCESS:u(14),FOLLOW_FAILED:u(15),RENDER_SUCCESS:u(16),RENDER_FAILED:u(17),REFETCH_SUCCESS:u(18),REFETCH_FAILED:u(19),LOAD_SUCCESS:u(20),WIDTH_GET_ERROR:u(21)}},function(e,t,n){n.r(t),n.d(t,"publish",(function(){return r}));var a=n(132);function r(e,t,n){var r={data:t,options:{timestamp:Date.now()}};Object(a.publish)(e,r,n)}},function(e,t,n){function a(e,t,n){__safeway__.bridge.publish(e,t,n)}n.r(t),n.d(t,"publish",(function(){return a}))},function(e,t,n){n.r(t),n.d(t,"subscribe",(function(){return r}));var a=n(134);function r(e,t){Object(a.subscribe)(e,(function(e,n){var a=e.data,r=e.options,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=r&&r.timestamp||0,s=Date.now();Reporter.speedReport({key:"webview2AppService",data:a||{},timeMark:{startTime:o,endTime:s,nativeTime:i.nativeTime||0}}),"function"==typeof t&&t(a,n)}))}},function(e,t,n){function a(e,t){__safeway__.bridge.subscribe(e,t)}n.r(t),n.d(t,"subscribe",(function(){return a}))},function(e,t,n){n.r(t),n.d(t,"onMethod",(function(){return i}));var a=n(136),r=n(38);function i(e,t){Object(a.on)(e,Object(r.surroundByTryCatchFactory)(t,"at api "+e+" callback function"))}},function(e,t,n){function a(e,t){__safeway__.bridge.on(e,t)}n.r(t),n.d(t,"on",(function(){return a}))},function(e,t,n){n.r(t),n.d(t,"nativeFontAssets",(function(){return b})),n.d(t,"loadFontFace",(function(){return S})),n.d(t,"fontFaceRecords",(function(){return f}));var a=n(16),r=n(21),i=n(46),o=n(0),s=n(6),c=n(149),u=n(87);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){Object(a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=[],p=new Map,h=0,v=/url\((.*)\)/i,g=/([^.]*)(\..*)?/i;Object(o.subscribe)("loadedFontFace",(function(e){var t=e.callbackId,n=e.errMsg,a=void 0===n?"":n;if(p.has(t)){var r=p.get(t);p.delete(t);var i=r.success,o=r.fail,s=r.complete,c=0===a.indexOf("loadFontFace:ok"),u={status:c?"loaded":"error",errMsg:a};c?"function"==typeof i&&i(u):"function"==typeof o&&o(u),"function"==typeof s&&s(u)}}));var y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h++;var t=e.success,n=e.fail,a=e.complete;delete e.success,delete e.fail,delete e.complete,e.callbackId=h,p.set(h,{success:t,fail:n,complete:a});var r=e.global||!1;if(r){var i=encodeURIComponent(JSON.stringify(e));f.indexOf(i)<0&&f.push(i),Object(o.publish)("loadFontFace",e)}else Object(o.publish)("loadFontFace",e,[s.default.currentWebviewId])},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise((function(t,n){y(d(d({},e),{},{success:function(e){t(e)},fail:function(e){n(e)}}))}))},b=[],_=Object(r.getEventManager)("skiaCanvasLoadFontFace");function O(e){b.push(e),_.emit({nativeFontAssets:b})}var I=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="",n=e.source.match(v);return n.length>=2&&(t=(t=n[1]).substring(1,t.length-1)),new Promise((function(n,a){Object(u._downloadFileSkipCheckDomain)({url:t,timeout:2e4,success:function(t){O({originalSrc:e.source,src:t.tempFilePath,family:e.family,style:e.desc&&e.desc.style,weight:e.desc&&e.desc.weight,variant:e.desc&&e.desc.variant});var a=(t.tempFilePath||"").replace(g,(function(){return arguments.length<=1?void 0:arguments[1]}));i.FakeTempFilePathMap.set(a),n()},fail:function(){a()}})}))},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(o.beforeInvoke)("loadFontFace",e,{family:"",source:""})){var t="";if(""===e.family&&(t="parameter error: family can not be empty string"),""===e.source&&(t="parameter error: source can not be empty string"),t)Object(o.beforeInvokeFail)("loadFontFace",e,t);else{v.test(e.source)||(e.source='url("'+e.source+'")'),e.scopes||(e.scopes=["webview"]),Object(c.reportApiUse)({name:"loadFontFace",data:{family:e.family,source:encodeURIComponent(e.source),global:Boolean(e.global),scopes:e.scopes}});var n=[];if(e.scopes.indexOf("webview")>=0){var a=m(e);n.push(a)}if(e.scopes.indexOf("native")>=0){var r=I(e);n.push(r)}Promise.all(n).then((function(){Object(o.beforeInvokeCallback)({name:"loadFontFace",args:e,success:!0,errMsg:"",res:{status:"loaded"}})})).catch((function(){Object(o.beforeInvokeCallback)({name:"loadFontFace",args:e,success:!1,errMsg:"",res:{status:"error"}})}))}}}},function(e,t,n){n.r(t),n.d(t,"getLaunchOptionsSync",(function(){return f})),n.d(t,"_getLaunchOptionsSync",(function(){return p}));var a,r,i=n(0),o=n(60),s=n(71),c=n(67),u=n(1),l=n(112),d=n(15);function f(){if(!a)throw new Error("getLaunchOptionsSync:fail get launch options");var e=Object(l.getPluginId)(this)||"";return Object(s.isolateInfo)(a||{},e)}function p(){if(!r)throw new Error("getLaunchOptionsSync:fail get launch options");return r||{}}Object(i.subscribe)("getLaunchAppInfo",(function(e,t){var n=e.callbackId;Object(i.publish)("appLaunchInfoGot",{res:{sceneHistory:o.default.sceneHistory,appId:o.default.appId},callbackId:n},[t])})),u.default.onReady((function(){if(!Object(d.isGame)()){var e=u.default.appLaunchInfo||{};Object.assign(e,u.default.debugLaunchInfo||{}),o.default.appLaunchInfo=e,o.default.appLaunchShareInfo=e.shareInfo,Object(c.setInnerEnterOptions)(e),r=Object(s.filterInfo)(e,!0),a=Object(s.filterPublicInfo)(r,u.default.preloadType),r.__public=Object(s.isolateInfo)(a,""),Object(c.setEnterOptions)(a)}}))},function(e,t,n){n.r(t),n.d(t,"openUrl",(function(){return s})),n.d(t,"privateOpenUrl",(function(){return c}));var a=n(0),r=n(10),i=n(6),o=function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!0!==i.default.openUrlLock)if(t.url=t.url||"",Object(r.validateUrl)(t.url))i.default.openUrlLock=!0,Object(a.invokeMethod)(e,t,{afterAll:function(){i.default.openUrlLock=!1}});else{console.error("invalid url",t.url);var n={errMsg:e+': invalid url "'+t.url+'"'};"function"==typeof t.fail&&t.fail(n),"function"==typeof t.complete&&t.complete(n)}}},s=o("openUrl"),c=o("private_openUrl")},function(e,t,n){n.r(t),n.d(t,"onDomReady",(function(){return f})),n.d(t,"onWebviewEvent",(function(){return p}));var a=n(0),r=n(10),i=n(6),o=n(2),s=n(21),c=Object(s.getEventManager)("XWebTextareaSupportedEvent"),u=!1;Object(a.subscribe)("xWebTextareaSupported",(function(e){var t=e.canInsert2XWeb;u=t,c.emit({canInsert2XWeb:t})})),(o.IS_DEVTOOLS||o.IS_WINDOWS||o.IS_MAC||o.IS_ANDROID||o.IS_MINA)&&Object(a.subscribe)("SPECIAL_PAGE_EVENT",(function(e){var t=e.data,n=e.eventName,s=e.ext,c=e.nodeId,l=e.instanceId,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if((!o.IS_ANDROID||u)&&(t&&"input"===t.type&&s&&s.modelValueName&&__virtualDOM__.setModelValueData(t.detail.value,s.modelValueName,d,c),t&&"input"===t.type&&"function"==typeof i.default.webviewEventCallback)){var f=i.default.webviewEventCallback({data:t,eventName:n,webviewId:d,nodeId:c}),p=t.detail.value;if(s&&s.setKeyboardValue)if(void 0===f);else if("Object"===Object(r.getDataType)(f)){var h={};l&&(h.instanceId=l),p!==f.value&&(h.value=f.value+""),Number.isNaN(parseInt(f.cursor,10))||(h.cursor=parseInt(f.cursor,10)),Object(a.publish)("setKeyboardValue",h,[d])}else p!==f&&Object(a.publish)("setKeyboardValue",{value:f+"",cursor:-1,instanceId:l},[d])}}));var l="__DOMReady",d=Object(s.getEventManager)("DomReady"),f=d.internalOnMethod,p=function(e){i.default.webviewEventCallback=e,Object(a.subscribe)("PAGE_EVENT",(function(t){var n=t.data,a=t.eventName,r=t.nodeId,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;a===l&&d.emit({data:n,eventName:a,webviewId:i,nodeId:r}),e({data:n,eventName:a,webviewId:i,nodeId:r})}))}},function(e,t,n){n.r(t),n.d(t,"updateWindowSizeStatus",(function(){return p})),n.d(t,"onWindowResize",(function(){return h})),n.d(t,"offWindowResize",(function(){return v}));var a=n(0),r=[],i=null,o=null,s=!1,c=[],u=!1,l="",d=0,f=0,p=function(e){e.deviceOrientation&&(l=e.deviceOrientation),d=e.size.windowWidth,f=e.size.windowHeight};Object(a.onMethod)("onViewDidResize",(function(e){!function(e){i=e;var t=!1,n=!0;e.deviceOrientation!==l&&(t=!0),e.size.windowWidth!==d&&(t=!0),e.size.windowHeight!==f&&(t=!0),p(e),e.pageOrientation&&(e.pageOrientation.setPageOrientation&&(u=!0),"auto"===e.pageOrientation.originalPageOrientation||u||(t=!1,n=!1)),"undefined"!=typeof __appServiceEngine__&&__appServiceEngine__.isFramesetMode()&&(n=!1),t&&(s=!0);var a=e.changedWebviewIds;n&&a&&a.forEach((function(e){c.indexOf(e)<0&&c.push(e)})),o||(o=setTimeout((function(){o=null;var e=s;s=!1;var t=c;c=[];var n={deviceOrientation:i.deviceOrientation,size:i.size};e&&r.forEach((function(e){__errorTracer__.surroundThirdByTryCatch(e,"at onWindowResize callback function")(n)})),t.forEach((function(e){var t="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getPageByWebviewId(e):null;t&&__errorTracer__.surroundThirdByTryCatch((function(){t.__callPageLifeTime__("onResize",n)}),"at Resize callback function")()}))}),16))}(e)}));var h=function(e){r.push(e)},v=function(e){r.splice(r.indexOf(e),1)}},function(e,t,n){n.r(t),n.d(t,"chooseImage",(function(){return p})),n.d(t,"previewImage",(function(){return h})),n.d(t,"_getImageInfoWithDownloadFile",(function(){return g})),n.d(t,"getImageInfo",(function(){return v})),n.d(t,"saveImageToPhotosAlbum",(function(){return y})),n.d(t,"compressImage",(function(){return m}));var a=n(26),r=n(0),i=n(10),o=n(6),s=n(87),c=n(46),u=n(61),l=n(1);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(r.invokeMethod)("chooseImage",Object(i.assign)({count:9,sizeType:["original","compressed"],sourceType:["album","camera"]},e),{beforeSuccess:function(e){e.tempFileSizes?e.tempFiles=(e.tempFilePaths||[]).filter((function(e){return e})).map((function(t,n){return{path:t,size:e.tempFileSizes[n]}})):e.tempFiles=(e.tempFiles||[]).filter((function(e){return e.path&&"number"==typeof e.size})),delete e.tempFileSizes}})},h=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(r.beforeInvoke)("previewImage",e,{urls:[""]})){var t,n=l.default.version,i=l.default.system,o="7.0.12"===n&&i.indexOf("iOS 13.4")>=0,s=d(e.urls);try{for(s.s();!(t=s.n()).done;){var f=t.value;if(/^\s*data:image\//.test(f)&&o)return void Object(r.beforeInvokeFail)("previewImage",e,"url can not be base64 on iOS 13.4")}}catch(e){s.e(e)}finally{s.f()}var p=Object.assign({},e);p.urls=p.urls.slice(),p.referrerPolicy=p.referrerPolicy||"origin",Object(u.getCloudFileUrl)(p.urls,"image",(function(e){var t=p.urls;if(p.urls=Object(a.default)(e.data.map((function(e){return e.url}))),p.current){var n=t.indexOf(p.current);n>=0&&(p.current=p.urls[n])}p.urls&&(p.urls=p.urls.map((function(e){return c.FakeTempFilePathMap.get(e)||e}))),Object(r.invokeMethod)("previewImage",p)}))}},v=function(e){var t=Object.assign({},e),n=[t.src];Object(u.getCloudFileUrl)(n,"image",(function(e){return t.src=e.data[0].url,g(t,s.downloadFile)}))},g=function(e,t){Object(r.beforeInvoke)("getImageInfo",e,{src:""})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/tmp\//.test(e.src)?Object(r.invokeMethod)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}}):/^(http|https):\/\//.test(e.src)?t({url:e.src,success:function(t){404!==t.statusCode?(e.src=t.tempFilePath,Object(r.invokeMethod)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}})):Object(r.beforeInvokeFail)("getImageInfo",e,"image not found (404)")},fail:function(t){Object(r.beforeInvokeFail)("getImageInfo",e,"download image fail. reason: "+t.errMsg)}}):(e.src=Object(i.getRealRoute)(o.default.lastRoute,e.src,!1),Object(r.invokeMethod)("getImageInfo",e,{beforeSuccess:function(t){t.path=e.src}})))},y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.filePath=c.FakeTempFilePathMap.get(e.filePath)||e.filePath,Object(r.invokeMethod)("saveImageToPhotosAlbum",e,{})},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={src:"",quality:80};t=Object(i.extend)(t,e),Object(r.beforeInvoke)("compressImage",t,{src:"",quality:80})&&(/^wxfile:\/\//.test(e.src)||/^http:\/\/(tmp|store)\//.test(e.src)||(t.src=Object(i.getRealRoute)(o.default.lastRoute,t.src,!1)),Object(r.invokeMethod)("compressImage",t))}},function(e,t,n){n.r(t),n.d(t,"reportUserBehaviorBranchAnalytics",(function(){return u})),n.d(t,"reportUserBehaviorBranchAnalyticsForDebug",(function(){return c}));var a=n(25),r=n(0),i=n(1),o=Object(a.default)("reportUserBehaviorBranchAnalytics","webapi_reportbranchanalytics",{},{},(function(e){return{itemList:[{branchId:e.branchId,branchDim:e.branchDim,eventType:e.eventType}]}})),s=Object(a.default)("reportUserBehaviorBranchAnalyticsForDebug","webapi_reportbranchanalyticsfordebugtool",{},{},(function(e){return{itemList:[{branchId:e.branchId,branchDim:e.branchDim,reportType:e.reportType,query:e.query}]}}));function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"release"!==i.default.envVersion&&s(e)}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"!=typeof e.branchId?Object(r.beforeInvokeFail)("reportUserBehaviorBranchAnalytics",e,"branchId must be a string"):e.branchDim&&"string"!=typeof e.branchDim?Object(r.beforeInvokeFail)("reportUserBehaviorBranchAnalytics",e,"branchDim is an optional string"):1!==e.eventType&&2!==e.eventType?Object(r.beforeInvokeFail)("reportUserBehaviorBranchAnalytics",e,"eventType must be 1 or 2"):(o(e),c({branchId:e.branchId,branchDim:e.branchDim,reportType:e.eventType}))}},function(e,t,n){function a(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){function a(e){if(Array.isArray(e))return e}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){function a(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.r(t),n.d(t,"default",(function(){return a}))},function(e,t,n){n.r(t),n.d(t,"getFileInfo",(function(){return i}));var a=n(0),r=n(12),i=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(Object(a.beforeInvoke)("getFileInfo",e,{filePath:""})){if(void 0!==e.digestAlgorithm){var t=Object(r.paramCheck)(e,{digestAlgorithm:""});if(t)return void Object(a.beforeInvokeFail)("getFileInfo",e,"parameter error: "+t);if(-1===["md5","sha1"].indexOf(e.digestAlgorithm))return void Object(a.beforeInvokeFail)("getFileInfo",e,'parameter error: invalid digestAlgorithm "'+e.digestAlgorithm+'"')}Object(a.invokeMethod)("getFileInfo",e,{})}}},function(e,t,n){n.r(t),n.d(t,"getMMDataProto",(function(){return r}));var a={20299:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"is_reward",value:"0"},{type:"uint32",key:"is_cancel",value:"0"},{type:"uint32",key:"ad_platform",value:"0"}],18988:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"button_type",value:"0"}],16743:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint32",key:"close_type",value:"0"},{type:"uint64",key:"exposure_duration",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"close_time",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16139:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"appid",value:"0"},{type:"string",key:"weapppath",value:"0"},{type:"string",key:"adunit_id",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"traceid",value:"0"},{type:"uint64",key:"TimeMs",value:"0"},{type:"string",key:"useragent",value:"0"},{type:"uint32",key:"type",value:"0"},{type:"uint32",key:"diaphaneity",value:"0"},{type:"uint32",key:"PageX",value:"0"},{type:"uint32",key:"PageY",value:"0"},{type:"uint32",key:"ScreenHeight",value:"0"},{type:"uint32",key:"ScreenWidth",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"orig_weapp_id",value:""}],17045:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"weapp_path",value:""},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"device_type",value:""},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"screen_height",value:"0"},{type:"uint32",key:"screen_width",value:"0"},{type:"uint32",key:"ad_pos_x",value:"0"},{type:"uint32",key:"ad_pos_y",value:"0"},{type:"uint32",key:"exp_time",value:"0"},{type:"uint32",key:"clk_complaint_button",value:"0"},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"service_type",value:"0"},{type:"uint32",key:"first_grade_id",value:"0"},{type:"string",key:"first_grade_desc",value:""},{type:"uint64",key:"first_grade_time",value:"0"},{type:"uint32",key:"second_grade_id",value:"0"},{type:"string",key:"second_grade_desc",value:""},{type:"uint64",key:"second_grade_time",value:"0"},{type:"uint32",key:"is_finish_complaint",value:"0"},{type:"uint32",key:"is_click_ad",value:"0"},{type:"uint64",key:"click_ad_time",value:"0"},{type:"uint64",key:"click_ad_time_ms",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"feedback_reason",value:"0"}],16487:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"click_time",value:"0"},{type:"uint32",key:"click_cnt",value:"0"},{type:"uint32",key:"start_pos_x",value:"0"},{type:"uint32",key:"start_pos_y",value:"0"},{type:"uint32",key:"end_pos_x",value:"0"},{type:"uint32",key:"end_pos_y",value:"0"},{type:"uint32",key:"ad_width",value:"0"},{type:"uint32",key:"ad_height",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"uint32",key:"block_click",value:"0"},{type:"uint64",key:"start_posx",value:"0"},{type:"uint64",key:"start_posy",value:"0"},{type:"uint64",key:"end_posx",value:"0"},{type:"uint64",key:"end_posy",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16e3:[{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"uint64",key:"play_duration",value:"0"},{type:"uint64",key:"click_close_ts",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"uint64",key:"video_first_play_ts",value:"0"},{type:"uint64",key:"card_first_show_ts",value:"0"},{type:"uint64",key:"click_card_ts",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"current_play_url",value:""},{type:"string",key:"last_fetch_url",value:""},{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint64",key:"video_duration",value:"0"},{type:"uint32",key:"is_ended",value:"0"}],15730:[{type:"uint64",key:"load_begin_time",value:"0"},{type:"uint64",key:"load_end_time",value:"0"},{type:"uint64",key:"load_cost_time",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"report_type",value:"0"},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"load_departure_time",value:"0"},{type:"uint32",key:"preload_video",value:"0"},{type:"uint32",key:"preload_video_success",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],15979:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"lastclkperiod",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"uint32",key:"pagestaytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"string",key:"orig_weapp_id",value:""}],15980:[{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"uint64",key:"opentime",value:"0"},{type:"uint64",key:"closetime",value:"0"},{type:"uint64",key:"staytime",value:"0"},{type:"string",key:"jsapiname",value:""},{type:"uint32",key:"clkcnt",value:"0"},{type:"uint32",key:"retcode",value:"0"},{type:"uint32",key:"costtime",value:"0"},{type:"string",key:"act_type",value:""},{type:"string",key:"act_type_str",value:""},{type:"uint32",key:"act_type_int",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],16295:[{type:"string",key:"ClientIPV6",value:""},{type:"string",key:"id_key",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"string",key:"source_url",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"expand_feild",value:""},{type:"string",key:"expand_feild2",value:""},{type:"string",key:"orig_weapp_id",value:""},{type:"uint32",key:"id_key_group",value:"924"},{type:"string",key:"ad_unit_id",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint32",key:"scene",value:"0"}],17035:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"click_button",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"touch_start_x",value:"0"},{type:"uint32",key:"touch_start_y",value:"0"},{type:"uint32",key:"touch_end_x",value:"0"},{type:"uint32",key:"touch_end_y",value:"0"},{type:"uint64",key:"touch_duration",value:"0"},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""}],18072:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"last_clicks",value:""},{type:"uint32",key:"banner_x",value:"0"},{type:"uint32",key:"banner_y",value:"0"},{type:"uint32",key:"banner_width",value:"0"},{type:"uint32",key:"banner_height",value:"0"},{type:"uint32",key:"exp_ms",value:"0"},{type:"uint32",key:"clk_ms",value:"0"},{type:"uint32",key:"banner_clk_screen_x",value:"0"},{type:"uint32",key:"banner_clk_screen_y",value:"0"},{type:"string",key:"machine_type",value:""},{type:"uint32",key:"last_show_time",value:"0"},{type:"uint64",key:"slotid",value:"0"}],18517:[{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"action",value:"0"},{type:"string",key:"traceid",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"publisher_appid",value:""},{type:"uint32",key:"row_number",value:"0"},{type:"uint32",key:"column_number",value:"0"},{type:"uint32",key:"box_index",value:"0"},{type:"uint64",key:"action_timems",value:"0"},{type:"uint32",key:"clk_x",value:"0"},{type:"uint32",key:"clk_y",value:"0"},{type:"uint32",key:"press_interval",value:"0"},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint32",key:"screenheight",value:"0"},{type:"uint32",key:"screenwidth",value:"0"},{type:"string",key:"orig_weapp_id",value:""},{type:"string",key:"machine_type",value:""}],19429:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint32",key:"is_game",value:"0"},{type:"uint64",key:"start_time",value:"0"},{type:"uint64",key:"show_time",value:"0"},{type:"uint64",key:"end_time",value:"0"},{type:"uint64",key:"show_delay_duration",value:"0"},{type:"uint64",key:"fetch_duration",value:"0"}],19213:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"scene",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19214:[{type:"string",key:"DeviceModel",value:""},{type:"string",key:"DeviceBrand",value:""},{type:"string",key:"OsName",value:""},{type:"string",key:"OsVersion",value:""},{type:"string",key:"LanguageVersion",value:""},{type:"uint32",key:"StartTime",value:"0"},{type:"uint32",key:"EndTime",value:"0"},{type:"uint32",key:"Count",value:"0"},{type:"string",key:"ClientIPV6",value:""},{type:"uint32",key:"eventTimeStamp",value:"0"},{type:"uint32",key:"shareType",value:"0"},{type:"uint32",key:"tousername",value:"0"},{type:"string",key:"uxinfo",value:""},{type:"string",key:"appid",value:""},{type:"string",key:"mid",value:""},{type:"string",key:"idx",value:""},{type:"string",key:"url",value:""}],19837:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"slotid",value:""},{type:"uint32",key:"costtype",value:"0"},{type:"string",key:"ext_info",value:""},{type:"uint64",key:"p1",value:"0"},{type:"uint64",key:"p2",value:"0"},{type:"uint64",key:"p3",value:"0"},{type:"uint64",key:"p4",value:"0"},{type:"uint64",key:"p5",value:"0"},{type:"uint64",key:"p6",value:"0"},{type:"uint64",key:"p7",value:"0"},{type:"uint64",key:"p8",value:"0"},{type:"uint64",key:"p9",value:"0"},{type:"uint64",key:"p10",value:"0"},{type:"uint64",key:"p11",value:"0"},{type:"uint64",key:"p12",value:"0"},{type:"uint64",key:"p13",value:"0"},{type:"uint64",key:"p14",value:"0"},{type:"uint64",key:"p15",value:"0"},{type:"uint64",key:"p16",value:"0"},{type:"string",key:"instance_id",value:""},{type:"uint32",key:"scene",value:"0"},{type:"uint32",key:"error_code",value:"0"},{type:"uint64",key:"p17",value:"0"},{type:"uint64",key:"p18",value:"0"},{type:"uint64",key:"p19",value:"0"},{type:"string",key:"crt_size",value:""},{type:"uint64",key:"p20",value:"0"},{type:"uint64",key:"p21",value:"0"}],20480:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"uint32",key:"costtype",value:"0"},{type:"uint64",key:"currenttime",value:"0"},{type:"string",key:"click_pos",value:""}],20317:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"branch_id",value:""},{type:"string",key:"branch_dim",value:""}],21644:[{type:"string",key:"ClientIPV6",value:""},{type:"uint64",key:"report_time",value:"0"},{type:"uint32",key:"ad_pos_type",value:"0"},{type:"uint32",key:"ad_platform",value:"0"},{type:"uint64",key:"aid",value:"0"},{type:"string",key:"traceid",value:""},{type:"string",key:"publisher_appid",value:""},{type:"string",key:"network_type",value:""},{type:"string",key:"wechat_version",value:""},{type:"string",key:"platform",value:""},{type:"string",key:"system_version",value:""},{type:"string",key:"device_orientation",value:""},{type:"uint32",key:"crt_size",value:""},{type:"string",key:"wxapp_lib_version",value:""},{type:"string",key:"wxapp_lib_time",value:""},{type:"uint64",key:"slotid",value:"0"},{type:"string",key:"ad_unit_id",value:""},{type:"uint32",key:"use_gauss_video",value:"0"},{type:"string",key:"video_url",value:""},{type:"string",key:"gauss_video_url",value:""},{type:"uint32",key:"use_expand_style",value:"0"},{type:"uint32",key:"exp_use_gauss_video",value:"0"},{type:"uint32",key:"exp_use_expand_style",value:"0"}]},r=function(e){var t=a[e.toString()];return t?t.concat([]):[]}},function(e,t,n){n.r(t),n.d(t,"reportApiUse",(function(){return u})),n.d(t,"WHITELIST",(function(){return c}));var a=n(1),r=n(47),i=0,o={};a.default.onReady((function(){i=a.default.appType,o=a.default.appLaunchInfo}));var s=function(e,t){var n=[];return t.forEach((function(t){var a=e[t];"boolean"==typeof a&&(a=a?1:0),n.push(t+":"+a)})),n.join("|")},c=["getAccountInfoSync","getLaunchOptionsSync","arrayBufferToBase64","base64ToArrayBuffer","getExtConfig","getExtConfigSync","canIUse","setPageStyle","onError","offError"],u=function(e){var t=e.name,n=e.data,a="undefined"!=typeof __appServiceEngine__?__appServiceEngine__.getCurrentPagesByDomain(""):[],c=a.length>0&&a[a.length-1].__route__||"",u=Object(r._getCurrentNetworkType)(),l=wx&&wx.version&&wx.version.version||"",d="";switch(t){case"loadFontFace":d=s(n,["family","source","global","scopes"]);break;case"requestSubscribeMessage":d=s(n,["templateCount","templateType","operationType"])}var f=[Math.round(Date.now()/1e3),o.scene,o.sessionid||o.sessionId,c,u,l,t,d,i,1,""].join(",");Reporter.reportKeyValue({key:"APIUse",value:f,immediately:!0})}},function(e,t,n){n.r(t),n.d(t,"WxPromise",(function(){return i}));var a=n(4),r=n(5),i=function(){function e(t){var n=this;if(Object(a.default)(this,e),this._status="pending",this._return=void 0,this._processors=[],"function"!=typeof t)throw new TypeError("Promise resolver is not a function");try{t((function(e){"pending"===n._status&&(n._status="then",n._return=e,n._consume())}),(function(e){"pending"===n._status&&(n._status="catch",n._return=e,n._consume())}))}catch(e){this._status="catch",this._return=e,this._consume()}}return Object(r.default)(e,[{key:"_consume",value:function(){if("pending"!==this._status){var e;do{e=this._processors.shift()}while(e&&e.type!==this._status);if(e)try{this._return=e.func(this._return),this._status="then"}catch(e){this._return=e,this._status="catch"}finally{this._consume()}}}},{key:"then",value:function(e){return this._processors.push({func:e,type:"then"}),this._consume(),this}},{key:"catch",value:function(e){return this._processors.push({func:e,type:"catch"}),this._consume(),this}}],[{key:"resolve",value:function(t){return new e((function(e){return e(t)}))}},{key:"reject",value:function(t){return new e((function(){throw t}))}}]),e}()},function(e,t,n){n.r(t),function(e){n.d(t,"CanvasFontManagerIOS",(function(){return m})),n.d(t,"SkiaCanvasIOS",(function(){return b}));var a=n(88),r=n(4),i=n(5),o=n(28),s=n(14),c=n(17),u=n(8),l=n(0),d=n(20),f=n(2),p=n(35),h=n(50),v=n(86),g=n(92);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}f.IS_IOS&&(Object(l.subscribe)("skiaCanvasInsert",(function(e,t){Object(p.skiaCanvasInsert)(e,t)})),Object(l.subscribe)("skiaCanvasRemove",(function(e,t){Object(p.skiaCanvasRemove)(e,t),Object(l.publish)("skiaCanvasRemoved_"+e.canvasNumber)})),Object(l.subscribe)("skiaCanvasSizeChangedBinding",(function(e,t){var n=Object(d.concatId)(t,e.canvasNumber),a=p.canvasRefMapById[n];a&&(a._top=e.position.top,a._left=e.position.left,a._width=e.position.width,a._height=e.position.height)})));var m=function(t){Object(s.default)(a,t);var n=y(a);function a(){return Object(r.default)(this,a),n.apply(this,arguments)}return Object(i.default)(a,[{key:"loadFontFace",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(o.default)(Object(u.default)(a.prototype),"loadFontFace",this).call(this,t);var n=e.skiacanvasLoadNewFont;if("function"==typeof n){var r=t.map((function(e){return e.src=e.src||"",e.family=e.family||"",e.style=e.style||"",e.weight=e.weight||"",e.variant=e.variant||"",e}));n(r)}}}]),a}(p.CanvasFontManager),b=function(t){Object(s.default)(c,t);var n=y(c);function c(){return Object(r.default)(this,c),n.apply(this,arguments)}return Object(i.default)(c,[{key:"_initCanvasInstance",value:function(){return p.CanvasFontManager.initialize(m),new e.Canvas(this.id)}},{key:"getContext",value:function(e,t){return Object(d.pipe)(h.decorateContextForImageProxy,v.temporarilyPatchContext)(Object(o.default)(Object(u.default)(c.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var t=new e.Image,n=Object(d.wrapImageObject)(t,p.skiaCanvasMappings[this._canvasId]);return new h.SkiaImageProxy(n)}},{key:"createImageData",value:function(t,n,a){return t?(n=parseFloat(n),a=parseFloat(a),new e.ImageData(t,n,a)):null}},{key:"createPath2D",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?new Path2D:1===t.length?Object(a.default)(Path2D,t):null}},{key:"requestAnimationFrame",value:function(e){return Object(g.getWeixinCanvas)().requestAnimationFrame(e)}},{key:"cancelAnimationFrame",value:function(e){return Object(g.getWeixinCanvas)().cancelAnimationFrame(e)}}]),c}(p.SkiaCanvas)}.call(this,n(64))},function(e,t,n){n.r(t),function(e){n.d(t,"CanvasFontManagerAndroid",(function(){return w})),n.d(t,"SkiaCanvasAndroid",(function(){return C}));var a=n(88),r=n(28),i=n(14),o=n(17),s=n(8),c=n(4),u=n(5),l=n(1),d=n(19),f=n(0),p=n(2),h=n(20),v=n(35),g=n(50),y=n(86),m=n(43);function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(s.default)(e);if(t){var r=Object(s.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(o.default)(this,n)}}var _={};function O(e,t){var n=Object(h.concatId)(t,e.canvasNumber),a=_[n];delete _[n],a&&a.dispose()}p.IS_ANDROID&&(Object(f.subscribe)("skiaCanvasInsert",(function(e,t){Object(v.skiaCanvasInsert)(e,t),Object(m.onBeforeUnloadPage)(t,(function(){O(e,t)}))})),Object(f.subscribe)("skiaCanvasRemove",(function(e,t){Object(v.skiaCanvasRemove)(e,t),O(e,t),Object(f.publish)("skiaCanvasRemoved_"+e.canvasNumber)})),Object(f.subscribe)("skiaCanvasSizeChangedBinding",(function(e,t){var n=Object(h.concatId)(t,e.canvasNumber),a=v.canvasRefMapById[n];a&&(a._top=e.position.top,a._left=e.position.left,a._width=e.position.width,a._height=e.position.height)})),Object(f.onMethod)("onXWebCanvasSurfaceChange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n=Object(h.concatId)(t,e.viewId),a=v.canvasRefMapById[n];a&&"function"==typeof a._swap&&a._swap()})));var I=function(){function e(){Object(c.default)(this,e)}return Object(u.default)(e,[{key:"sync",value:function(e){this.t=setInterval((function(){e()}),1e3/60)}},{key:"dispose",value:function(){clearInterval(this.t)}}]),e}(),S={offset:Date.now(),now:function(){return Date.now()-this.offset}},E=function(){function e(t){var n=this;Object(c.default)(this,e),this.id=0,this.canvasView=t,this.callbacks=new Map,this.vSync=new I,this.vSync.sync((function(){var e=new Map(n.callbacks);n.callbacks.clear(),e.forEach((function(e){"function"==typeof e&&e.apply(null,[S.now()])})),n.canvasView.present()}))}return Object(u.default)(e,[{key:"requestAnimationFrame",value:function(e){var t=this.id++;return this.callbacks.set(t,e),t}},{key:"cancelAnimationFrame",value:function(e){this.callbacks.delete(e)}},{key:"dispose",value:function(){this.vSync.dispose(),this.callbacks.clear()}}]),e}(),w=function(t){Object(i.default)(a,t);var n=b(a);function a(){return Object(c.default)(this,a),n.apply(this,arguments)}return Object(u.default)(a,[{key:"loadFontFace",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];Object(r.default)(Object(s.default)(a.prototype),"loadFontFace",this).call(this,t);var n=d.default.SkiaCanvasLoadNewFont||e.SkiaCanvasLoadNewFont;if("function"==typeof n){var i=t.map((function(e){return e.src=e.src||"",e.family=e.family||"",e.style=e.style||"",e.weight=e.weight||"",e.variant=e.variant||"",e}));n(i)}}}]),a}(v.CanvasFontManager),C=function(t){Object(i.default)(o,t);var n=b(o);function o(){return Object(c.default)(this,o),n.apply(this,arguments)}return Object(u.default)(o,[{key:"_initCanvasInstance",value:function(){v.CanvasFontManager.initialize(w);var t=(d.default.HTMLCanvasView||e.HTMLCanvasView).createView(this.id),n=(d.default.HTMLCanvasElement||e.HTMLCanvasElement).createElement(t);return this._scheduler=new E(t),_[this._canvasId]=this._scheduler,this._swap=function(){t.swapSurface()},n}},{key:"getContext",value:function(e,t){return Object(h.pipe)(g.decorateContextForImageProxy,y.temporarilyPatchContext)(Object(r.default)(Object(s.default)(o.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=new(d.default.SkiaImages||SkiaImage),t=Object(h.wrapImageObject)(e,v.skiaCanvasMappings[this._canvasId]);return new g.SkiaImageProxy(t)}},{key:"createImageData",value:function(t,n,a){return t?(n=parseFloat(n),a=parseFloat(a),new(d.default.SkiaImageData||e.SkiaImageData)(t,n,a)):null}},{key:"createPath2D",value:function(){for(var t=d.default.SkiaPath2D||e.SkiaPath2D,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return 0===r.length?new t:1===r.length?Object(a.default)(t,r):null}},{key:"requestAnimationFrame",value:function(t){return l.default.useSkiaCanvasRaf?(d.default.SkiaCanvasRequestAnimationFrame||e.SkiaCanvasRequestAnimationFrame)(t):this._scheduler.requestAnimationFrame(t)}},{key:"cancelAnimationFrame",value:function(t){l.default.useSkiaCanvasRaf?(d.default.SkiaCanvasCancelAnimationFrame||e.SkiaCanvasCancelAnimationFrame)(t):this._scheduler.cancelAnimationFrame(t)}}]),o}(v.SkiaCanvas)}.call(this,n(64))},function(e,t,n){n.r(t),n.d(t,"handleRewriteRoute",(function(){return g})),n.d(t,"handlePluginProtocol",(function(){return v})),n.d(t,"onAppRoutePageNotFound",(function(){return u})),n.d(t,"offAppRoutePageNotFound",(function(){return l})),n.d(t,"emitAppRoutePageNotFound",(function(){return d}));var a=n(118),r=n(21),i=n(10),o=n(48),s=Object.hasOwnProperty,c=Object(r.getEventManager)("AppRouteNotFound"),u=c.onMethod,l=c.offMethod,d=c.emit,f=function(e,t){o.nativeConsole.info("[rewriteRoute] (webviewId="+t+") "+e)},p={},h=function(e,t){var n=0;if(s.call(e,"originalWebviewId"))n=e.originalWebviewId,f("Found originalWebviewId="+n,t);else{if(1!==Object.keys(p).length)return f("No originalWebviewId found and we have "+Object.keys(p).length+" backup data, guess failed, cleaning backups and giving up",t),p={},e;n=Object.keys(p)[0],f("No originalWebviewId found and guess it="+n,t)}var a=p[n];return delete p[n],["openType","wxMaterial","location","prerender"].forEach((function(t){e[t]=a[t]})),e},v=function(e,t){var n=t.needHtmlSuffix,a=e.replace(/\.html(\?|$)/i,(function(e){return e.slice(5)})),r=Object(i.convertProtocolPath)(a);if("/"===r[0]&&(r=r.slice(1)),!n)return r;var o=r.indexOf("?");return o<0&&(o=r.length),r.slice(0,o)+".html"+r.slice(o)},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(["dismissPip","navigateBack"].includes(e.openType))return!1;if("rewriteRoute"===e.openType&&(e=h(e,t)),!e.notFound)return!1;for(var n=!1,r=e.rawPath;/^[-_+a-z]+:\/\//i.test(r);){f(r+" has protocol, try rewriting",t);try{r=v(r,{needHtmlSuffix:!0}),n=!0}catch(e){return"AppServiceSdkKnownError"===e.type&&console.error(e.message),Object(a.invokeMethod)("pageNotFoundCallback",{hasHandler:!1,webviewId:t}),!1}}return n?(p[t]=e,f('rewriteRoute from "'+e.rawPath+'" to "'+r+'"',t),Object(a.invokeMethod)("rewriteRoute",{url:r,webviewId:t}),!0):(d(e,t),!1)}},function(e,t,n){var a=n(174)("xml-parser");e.exports=function(e){return e=(e=e.trim()).replace(/<!--[\s\S]*?-->/g,""),function(){return{declaration:t(),root:n()}}();function t(){if(i(/^<\?xml\s*/)){for(var e={attributes:{}};!o()&&!s("?>");){var t=r();if(!t)return e;e.attributes[t.name]=t.value}return i(/\?>\s*/),e}}function n(){a("tag %j",e);var t=i(/^<([\w-:.]+)\s*/);if(t){for(var c,u={name:t[1],attributes:{},children:[]};!(o()||s(">")||s("?>")||s("/>"));){var l=r();if(!l)return u;u.attributes[l.name]=l.value}if(i(/^\s*\/>\s*/))return u;for(i(/\??>\s*/),u.content=function(){a("content %j",e);var t=i(/^([^<]*)/);return t?t[1]:""}();c=n();)u.children.push(c);return i(/^<\/[\w-:.]+>\s*/),u}}function r(){a("attribute %j",e);var t,n=i(/([\w:-]+)\s*=\s*("[^"]*"|'[^']*'|\w+)\s*/);if(n)return{name:n[1],value:(t=n[2],t.replace(/^['"]|['"]$/g,""))}}function i(t){var n=e.match(t);if(n)return e=e.slice(n[0].length),n}function o(){return 0==e.length}function s(t){return 0==e.indexOf(t)}}},function(e,t,n){n.r(t),n.d(t,"run",(function(){return _}));var a=n(18),r=n(4),i=n(5),o=n(99);function s(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var u={type:"EOF"},l=function(){function e(){Object(r.default)(this,e),this.token=[],this.tokens=[],this.state=null,this.state=this.start}return Object(i.default)(e,[{key:"isEOF",value:function(e){var t=e;return t&&"object"===Object(a.default)(t)&&"EOF"===t.type}},{key:"start",value:function(e){return this.isEOF(e)?(this.emmitToken("EOF",u),this.start):"#"===e?(this.token.push(e),this.inTplFunc):"$"===e?(this.token.push(e),this.inTplStr):"&"===e||"|"===e?(this.token.push(e),this.inLogic):/^[0-9]/.test(e)?(this.token.push(e),this.inNumber):"'"===e?this.inQuoteStr:-1!==[">","<","=","!"].indexOf(e)?(this.token.push(e),this.inCompare):"?"===e?(this.emmitToken("QUESTION",e),this.start):":"===e?(this.emmitToken("COLON",e),this.start):","===e?(this.emmitToken("COMMA",e),this.start):/^\s/.test(e)?this.start:null}},{key:"inLogic",value:function(e){return this.isEOF(e)||"&"!==e&&"|"!==e?this.start(e):(this.token.push(e),this.emmitToken("LOGIC",this.token.join("")),this.token=[],this.start)}},{key:"inNumber",value:function(e){return!this.isEOF(e)&&/^[0-9.]/.test(e)?(this.token.push(e),this.inNumber):(this.emmitToken("NUMBER",this.token.join("")),this.token=[],this.start(e))}},{key:"inTplFunc",value:function(e){var t=this;return this.isEOF(e)?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),")"===e&&function(){for(var e=0,n=0,a=0,r=t.token.length;a<r;a++){var i=t.token[a];"("===i?e+=1:")"===i&&(n+=1)}return e===n}()?(this.emmitToken("TPLFUNC",this.token.join("")),this.token=[],this.start):this.inTplFunc)}},{key:"inTplStr",value:function(e){return!this.isEOF(e)&&/^[a-zA-Z0-9.-_$]/.test(e)?(this.token.push(e),this.inTplStr):(this.emmitToken("TPLSTR",this.token.join("")),this.token=[],this.start(e))}},{key:"inCompare",value:function(e){return this.isEOF(e)||"="!==e?(this.emmitToken("COMPARE",this.token.join("")),this.token=[],this.start(e)):(this.token.push(e),this.inCompare)}},{key:"inQuoteStr",value:function(e){return this.isEOF(e)||"'"!==e?(this.token.push(e),this.inQuoteStr):(this.emmitToken("STR",this.token.join("")),this.token=[],this.start)}},{key:"emmitToken",value:function(e,t){this.tokens.push({type:e,value:t})}},{key:"push",value:function(e){this.state&&(this.state=this.state(e))}},{key:"end",value:function(){this.state&&this.state(u)}}]),e}(),d=function(e){for(var t=new l,n=0,a=e.length;n<a;){var r=e[n];n+=1,t.push(r)}return t.end(),t.tokens},f=function(e){return"ROOT"===e.type?{type:"ROOT",maxChildren:0,children:[],priority:-9999}:"TPLFUNC"===e.type?{type:"TPLFUNC",children:[e.value],maxChildren:1,priority:40}:"TPLSTR"===e.type?{type:"TPLSTR",children:[e.value],maxChildren:1,priority:40}:"NUMBER"===e.type?{type:"NUMBER",children:[e.value],maxChildren:1,priority:40}:"STR"===e.type?{type:"STR",children:[e.value],maxChildren:1,priority:40}:"COMPARE"===e.type?{type:"COMPARE",operator:e.value,children:[],maxChildren:2,priority:30,isSign:!0}:"LOGIC"===e.type?{type:"LOGIC",operator:e.value,children:[],maxChildren:2,priority:20,isSign:!0}:"QUESTION"===e.type?{type:"QUESTION",operator:e.value,children:[],maxChildren:3,priority:10,isSign:!0}:"COLON"===e.type?{type:"COLON",operator:e.value,children:[],maxChildren:0,priority:10,isSign:!0}:"EOF"===e.type?{type:"ROOT_END",children:[],maxChildren:0,priority:-9999}:null},p=function(e){return 0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length>=e.maxChildren)},h=function(e){return 0!==e.maxChildren&&((null==e?void 0:e.children)&&e.children.length<e.maxChildren)},v=function(e){var t;t="string"==typeof e?d(e):e;for(var n=[f({type:"ROOT"})],a=function(e){for(var t=e.priority;p(n[n.length-1])&&h(n[n.length-2])&&t<=n[n.length-1].priority&&t<=n[n.length-2].priority;){var a=n[n.length-2].children;null==a||a.push(n.pop())}},r=function(e){var t=f(e),r=n[n.length-1];if("STR"===t.type||"TPLSTR"===t.type||"NUMBER"===t.type||"TPLFUNC"===t.type){if(p(r))return;h(r)?r.children.push(t):n.push(t)}else"COMPARE"===t.type||"LOGIC"===t.type||"QUESTION"===t.type?p(r)&&(t.priority>r.priority?function(e,t){var a=t.children.pop();a&&e.children.push(a),n.push(e)}(t,r):(a(t),function(e){var t=n.pop();t&&e.children.push(t),n.push(e)}(t))):"ROOT_END"===t.type&&(a(t),n.push(t))},i=0,o=t.length;i<o;i++)r(t[i]);return n},g=function(e,t){var n=e.split("."),a="";return n.forEach((function(e){""===a?a=t[e]:("string"==typeof a&&(a=JSON.parse(a)),a=a[e])})),a},y=function(e,t,n){var a=e.indexOf("("),r=e.substring(0,a),i=e.substring(a+1,e.length-1);if(!n[r])return null;for(var o=d(i),s=[],c=[],u=0,l=o.length;u<l;u++){var f=o[u];"COMMA"===f.type||"EOF"===f.type?(s.push(c),c=[]):c.push(f)}var p=[];return s.forEach((function(e){p.push(_(e,t,n))})),n[r].apply(null,p)},m=function e(t,n){var a=t.type,r=t.children,i=t.operator,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=function(t){return e(r[t],n,o)};if("COMPARE"===a){var c={">":function(){return s(0)>s(1)},"<":function(){return s(0)<s(1)},">=":function(){return s(0)>=s(1)},"<=":function(){return s(0)<=s(1)},"==":function(){return s(0)==s(1)},"!=":function(){return s(0)!=s(1)},"===":function(){return s(0)===s(1)}},u=i&&c[i];return u?u():null}if("LOGIC"===a){var l={"&&":function(){return s(0)&&s(1)},"||":function(){return s(0)||s(1)}},d=i&&l[i];return d?d():null}var f={NUMBER:function(){return Number(r[0])},STR:function(){return r[0]},TPLSTR:function(){return g(r[0],n)},QUESTION:function(){return s(0)?s(1):s(2)},TPLFUNC:function(){return y(r[0],n,o)}},p=f[a]||null;return p?p():null},b={"#scope":function(e){return e},"#no":function(e){return!e},"#add":function(e,t){return e+t},"#sub":function(e,t){return e-t},"#multi":function(e,t){return e*t},"#division":function(e,t){return e/t},"#negative":function(e){return-e},"#toNumber":function(e){return Number(e)},"#toString":function(e){return String(e)},"#toArray":function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t},"#ceil":function(e){return Math.ceil(e)},"#floor":function(e){return Math.floor(e)},"#round":function(e){return Math.round(e)},"#substring":function(e,t,n){return e.substring(t,n)},"#like":function(e,t){return-1!==e.indexOf(t)},"#toFixed":function(e,t){return parseFloat(e).toFixed(t)},"#toLowerCase":function(e){return e.toLowerCase()},"#toUpperCase":function(e){return e.toUpperCase()},"#len":function(e){return e.length},"#hansLen":function(e){var t,n=0,a=s(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n+=/[\u4e00-\u9fa5]/.test(r)?2:1}}catch(e){a.e(e)}finally{a.f()}return n/2},"#parse":function(e){try{return JSON.parse(e)}catch(e){return{}}},"#value":function(e,t){return e[t]||{}},"#truncate":function(e,t){var n,a="",r=0,i=s(e);try{for(i.s();!(n=i.n()).done;){var o=n.value;if((r+=/[\u4e00-\u9fa5]/.test(o)?2:1)>t){a+="...";break}a+=o}}catch(e){i.e(e)}finally{i.f()}return a},"#concat":function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.join("")},"#split":function(e,t,n){return null==e?void 0:e.split(t,n)},"#abbrNum":function(e){return e<1e4?e.toString():(e/1e4).toFixed(1)+"万"},"#trimDigit":function(e){var t=e.toString().split(".");if(t.length<2)return e;for(var n=t.slice(-1)[0];"0"===n[n.length-1];)n=n.slice(0,-1);return t.slice(0,-1).concat(n?[n]:[]).join(".")},"#append":function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n&&e.indexOf(t)>-1||e.push(t),e},"#remove":function(e,t){return e.filter((function(e){return e!==t}))},"#include":function(e,t){return e.indexOf(t)>-1},"#mod":function(e,t){return e%t},"#indexedArray":function(e){if(e<=0)return[];for(var t=[],n=0;n<e;n+=1)t.push(n);return t},"#get":o.get,"#slice":function(e,t,n){return e.slice(t,n)}},_=function(e,t,n){try{var a=v(e);return m(a[1],t,Object.assign({},b,n))}catch(e){}return null}},function(e,t,n){n.r(t),n.d(t,"CustomRoot",(function(){return j})),n.d(t,"CustomLayout",(function(){return L})),n.d(t,"CustomText",(function(){return G})),n.d(t,"CustomImage",(function(){return Y})),n.d(t,"CustomButton",(function(){return K})),n.d(t,"CustomVideo",(function(){return Q})),n.d(t,"CustomFeedback",(function(){return ee})),n.d(t,"CustomEnd",(function(){return ne})),n.d(t,"CustomItem",(function(){return D})),n.d(t,"CustomFor",(function(){return re})),n.d(t,"CustomCarousel",(function(){return he})),n.d(t,"CustomCountdown",(function(){return ge}));var a=n(4),r=n(5),i=n(9),o=n(28),s=n(14),c=n(17),u=n(8),l=n(36),d=n(16),f=n(13),p=n.n(f),h=n(0),v=n(62),g=n(155),y=n(23),m=n(2),b=n(24),_=n(7),O=n(78),I=n(3);function S(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return E(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function E(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var C=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))},k={},T=m.PLATFORM,A=function(e){Object(s.default)(n,e);var t=w(n);function n(e){var r,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=i.autoRegister,s=void 0===o||o;Object(a.default)(this,n),(r=t.call(this,e)).ratio=1,r.tplConfig=null,r.adCustomListener=null,r.clickCallbackMap=new WeakMap,r.handleCommonClick=function(e){r.doActions(r.events.tap,{event:e})},r.handleAdCustomAction=function(e){e.targetid===r.id&&r.doCommonAction(e)},r.adCustomId=e.adCustomId,r.adProxy=e.adProxy,r.adData=e.adData,r.adDatas=e.adDatas,r.manager=e.manager,r.reporter=e.reporter,r.emitter=e.emitter,r.idPrefix=e.idPrefix||"",r.forType=e.forType||_.FOR_TYPES.NONE,r.forItem=e.forItem,r.forIndex=e.forIndex,e.ratio&&(r.ratio=e.ratio),r.checkSize();var c=e.template||{};r.template=c,r.id=r.adCustomId+"-"+r.idPrefix+r.template.id;var u=c.options||{};r.options=u,r.data=u.data||{},r.events=u.events||{},r.lifecycle=u.lifecycle||{},r.innerStyles=u.innerStyles||{},r.animations=u.animations||{},r.bubbleEvent=void 0===u.bubbleEvent||u.bubbleEvent;var l=r.getDataValue("_bubbleEvent");return void 0!==l&&(r.bubbleEvent=l),s&&r.bindCommonEvents(),r}return Object(r.default)(n,[{key:"ready",value:function(e){this.emitComponentLifeCycle("onInit"),e&&(e.adId=this.id)}},{key:"updatedProps",value:function(){this.updateBubbleEvent()}},{key:"destroy",value:function(){this.emitComponentLifeCycle("onDestroy"),this.offClick("container",this.handleCommonClick),this.emitter.off("adCustomAction",this.handleAdCustomAction),this.removeAdCustomListener()}},{key:"bindCommonEvents",value:function(){this.onClick("container",this.handleCommonClick),this.emitter.on("adCustomAction",this.handleAdCustomAction)}},{key:"getCommonSubComponentProps",value:function(){return{template:this.template,adCustomId:this.adCustomId,emitter:this.emitter,adProxy:this.adProxy,reporter:this.reporter,adData:this.adData,adDatas:this.adDatas,adPosition:this.props.adPosition,systemInfo:this.props.systemInfo,manager:this.manager,idPrefix:this.idPrefix||"",forType:this.forType,forIndex:this.forIndex,forItem:this.forItem,ratio:this.ratio,scope:this.props.scope}}},{key:"getDataValue",value:function(e,t,n){var a=t||this.data,r=a[e+"Expr"];return r?this.run(r,null==n?void 0:n.args):a[e]}},{key:"getDataValueWithDefault",value:function(e,t,n,a){var r=n?this.getDataValue(e,n,a):this.getDataValue(e);return void 0===r?t:r}},{key:"getAdData",value:function(){return this.forType===_.FOR_TYPES.ADS&&null!=this.forIndex?this.getAdDatas()[this.forIndex]||{}:this.adData}},{key:"getAdDatas",value:function(){return this.adDatas||[]}},{key:"addAdCustomListener",value:function(e){var t=this;this.removeAdCustomListener(),this.adCustomListener=function(n){n.adCustomId===t.adCustomId&&(null==e||e(n))},this.emitter.on("adCustomEvent",this.adCustomListener)}},{key:"removeAdCustomListener",value:function(){this.adCustomListener&&this.emitter.off("adCustomEvent",this.adCustomListener)}},{key:"setRatio",value:function(e){this.ratio=e}},{key:"checkSize",value:function(){var e,t,n,a,r,i=this.template;if(!i||"root"===i.type){this.tplConfig=(null===(e=i)||void 0===e?void 0:e.tplConfig)||{};var o=this.props.adPosition||{};if(this.tplConfig){var s=this.tplConfig,c=(this.props.adPosition||{}).width;null==c&&(c=(null===(n=null===(t=this.props)||void 0===t?void 0:t.systemInfo)||void 0===n?void 0:n.screenWidth)||I.deviceInfo.screenWidth),c=Number(c);var u=s.minWidth||0,l=s.maxWidth||0,d=s.baseWidth||375,f=Math.min((null===(r=null===(a=this.props)||void 0===a?void 0:a.systemInfo)||void 0===r?void 0:r.screenWidth)||I.deviceInfo.screenWidth,Math.max(u,c));l&&(f=Math.min(f,l)),0===f&&this.setRatio(d/d),o.width=f,this.setRatio(f/d)}}}},{key:"emitAdCustomEvent",value:function(e,t){this.emitter.emit("adCustomEvent",{adCustomId:this.adCustomId,action:e,value:t})}},{key:"emitComponentEvent",value:function(e,t){var n=this.events[e];(null==n?void 0:n.length)&&this.doActions(n,t||{})}},{key:"emitComponentLifeCycle",value:function(e,t){var n=this.lifecycle[e];(null==n?void 0:n.length)&&this.doActions(n,t)}},{key:"doActions",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=S(t);try{for(a.s();!(e=a.n()).done;){var r=e.value;r.force&&!r.targetid?this.doCommonAction({args:n,payload:r}):this.emitter.emit("adCustomAction",{fromid:this.id,targetid:r.targetid?this.adCustomId+"-"+r.targetid:this.id,args:n,payload:r})}}catch(e){a.e(e)}finally{a.f()}}},{key:"doCommonAction",value:function(e){var t=this,n=e.payload,a=e.args,r=n.delay,i=void 0===r?0:r,o=n.expr,s=void 0===o?void 0:o,c=function(){var r;if(!s||t.run(s,a))switch(n.action){case _.ACTIONS.SETSTYLE:var i=n.value;if(i.styleExpr)for(var o=0,c=Object.keys(i.styleExpr);o<c.length;o++){var u=c[o];i.style[u]=t.run(i.styleExpr[u],a)}t.setStyle(i.id,i.style);break;case _.ACTIONS.SETEXPRVARS:var l=n.value.key,d=t.getDataValue("value",n.value);t.getExprInnerVars()[l]=d;break;case _.ACTIONS.REPORTIDKEY:break;case _.ACTIONS.TRIGGEREVENT:var f=n.value,p=f.detail,h=void 0===p?{}:p,v=f.eventName;try{if((null==a?void 0:a.event)&&(h.rawDetail=JSON.stringify(a.event)),n.value.detailExpr)for(var g=0,y=Object.keys(n.value.detailExpr);g<y.length;g++){var m=y[g],b=n.value.detailExpr[m];h[m]=t.run(b,a)}}catch(e){}t.emitAdCustomEvent(_.CUSTOM_EVENT.TRIGGEREVENT,{eventName:v,detail:h});break;case _.ACTIONS.REPORTMMDATA:var O=n.value,I=O.data,S=O.dataExpr,E=O.id;if(S)for(var w=0,C=Object.keys(S);w<C.length;w++){var k=C[w],T=S[k];I[k]=t.run(T,a)}t.emitAdCustomEvent(_.CUSTOM_EVENT.REPORTMMDATA,{id:E,data:I});break;case _.ACTIONS.ANIMATE:var A=n.value,P=A.id,D=A.animation;t.doAnimation({id:P,animationName:D});break;case _.ACTIONS.TRIGGERBTNCLICK:var x=null==a?void 0:a.event;x&&t.emitAdCustomEvent(_.CUSTOM_EVENT.BTNTAP,{event:x,isHandleDownload:(null===(r=n.value)||void 0===r?void 0:r.isHandleDownload)||!1});break;case _.ACTIONS.LANDAD:var R=null==a?void 0:a.event;R&&t.emitAdCustomEvent(_.CUSTOM_EVENT.LANDAD,{index:t.getDataValueWithDefault("index",0,n.value,{args:a}),event:R});break;case _.ACTIONS.SPLASHSKIPAD:var j=null==a?void 0:a.event;j&&t.emitAdCustomEvent(_.CUSTOM_EVENT.SPLASHSKIPAD,{event:j});break;case _.ACTIONS.REPORTADMONITORDATA:var M=n.value,N=M.id,L=M.key,B=t.getDataValue("extInfo",n.value,{args:a});t.emitAdCustomEvent(_.CUSTOM_EVENT.REPORTADMONITORDATA,{id:N,key:L,extInfo:B});break;case _.ACTIONS.REWARDEDVIDEODYNAMIC:var F=n.value.list;t.emitAdCustomEvent(_.CUSTOM_EVENT.REWARDEDVIDEODYNAMIC,{list:F});break;default:"doAction"in t&&"function"==typeof t.doAction&&t.doAction(e)}};i?setTimeout(c,i):c()}},{key:"run",value:function(e,t){var n=this.getInnerFunction(),a=Object.assign(Object.assign({},this.getScope()),n);return Object(g.run)(e,t?Object.assign({$args:t},a):a,n)}},{key:"getElementById",value:function(e){var t,a;if(!e){var r=null!==(a=null===(t=this.getRootElement())||void 0===t?void 0:t.parent)&&void 0!==a?a:null;return r===v.Layout?this.getRootElement():r}return"$$"===e?this.getRootElement():Object(o.default)(Object(u.default)(n.prototype),"getElementById",this).call(this,e)}},{key:"doAnimation",value:function(e){var t=e.id,a=e.emitEvent,r=void 0===a||a,i=e.animationName,o=e.animation;return C(this,void 0,void 0,p.a.mark((function e(){var a,s,c,u,l,d,f,h,g,y,m,b,O,I,S,E,w,C,k,T;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=!o&&i?this.animations[i]:o,s=this.getElementById(t),a&&s){e.next=4;break}return e.abrupt("return");case 4:if(c=a.keys,u=a.duration,l=a.easing,!(((null==c?void 0:c.length)||0)<2)){e.next=8;break}return e.abrupt("return");case 8:d=0,f=0,h=Object.keys(c);case 10:if(!(f<h.length)){e.next=30;break}if(g=h[f],y=c[+g],m=y.offset,b=y.opacity,O=y.left,I=y.top,S=y.rotate,E=y.scaleX,w=y.scaleY,C=u*m,k=Object(v.convertStyle)({opacity:b,left:O,top:I,rotate:S,scaleWidth:E,scaleHeight:w}),!(C<=0)){e.next=21;break}return e.next=19,this.setStyle(t,k);case 19:e.next=27;break;case 21:return(T=Object.assign(Object.assign({},k),{easing:l,duration:C-d})).left=k.left,T.top=k.top,e.next=26,n.animate(s,T);case 26:d=C;case 27:f++,e.next=10;break;case 30:if(!i||!r){e.next=33;break}return e.next=33,this.emitComponentEvent(_.COMMON_EVENT.ANIMATIONEND,{animation:i});case 33:case"end":return e.stop()}}),e,this)})))}},{key:"updateInnerStyle",value:function(){if(this.innerStyles)for(var e=0,t=Object.keys(this.innerStyles);e<t.length;e++){var n=t[e],a=this.innerStyles[n];a.expr&&!this.run(a.expr)||this.updateStyle(a.style,n)}}},{key:"setStyle",value:function(e,t){var a,r,i=this,s=Object.create(null,{setStyle:{get:function(){return Object(o.default)(Object(u.default)(n.prototype),"setStyle",i)}}});return C(this,void 0,void 0,p.a.mark((function n(){var i,o,c,u,l;return p.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(i=this.getDataValue("_useApx")?this.convertToApxRatio(t):t,"$$"===(o=e)&&(o=null===(a=this.getRootElement())||void 0===a?void 0:a.name),!i){n.next=11;break}for(c=0,u=Object.keys(i);c<u.length;c++)l=u[c],i[l]=this.convertApxStyle(i[l]);if(!o){n.next=10;break}return n.next=8,s.setStyle.call(this,o,i);case 8:n.next=11;break;case 10:null===(r=this.parent)||void 0===r||r.setStyle("container",i);case 11:case"end":return n.stop()}}),n,this)})))}},{key:"convertApxStyle",value:function(e){var t=this;return e&&"string"==typeof e?e.replace(/([+-]?\d+(?:\.\d+)?)apx/g,(function(e,n){return Number(n*t.ratio)+"px"})):e}},{key:"updateStyle",value:function(e,t){if(e)for(var n=0,a=Object.keys(e);n<a.length;n++){var r=a[n],i=r,o=e[r];if(r.includes("Expr")){var s=r.split("Expr");if(2===s.length)i=Object(l.default)(s,1)[0],o=this.run(o)}this.setStyle(t,Object(d.default)({},i,o))}}},{key:"removeInnerStyle",value:function(){if(this.innerStyles)for(var e=0,t=Object.keys(this.innerStyles);e<t.length;e++){var n=t[e],a=this.innerStyles[n];this.removeStyle(a.style,n)}}},{key:"removeStyle",value:function(e,t){if(e)for(var n=0,a=Object.keys(e);n<a.length;n++){var r=a[n];this.setStyle(t,Object(d.default)({},r,null))}}},{key:"getScope",value:function(){var e,t;return{$ad:this.getAdData(),$ads:this.getAdDatas(),$const:{true:!0,false:!1,isGame:!0,openParen:"(",closeParen:")",systemInfo:(null===(e=this.props)||void 0===e?void 0:e.systemInfo)||{},ua:"",ratio:this.ratio,time:Date.now()},$for:{index:this.forIndex,item:this.forItem},$scope:(null===(t=this.props)||void 0===t?void 0:t.scope)||{}}}},{key:"getExprInnerVars",value:function(){return void 0===k[this.adCustomId]&&(k[this.adCustomId]={}),k[this.adCustomId]}},{key:"getInnerFunction",value:function(){var e=this.getExprInnerVars();return{"#getVar":function(t){return e[t]},"#measureText":function(e,t){return O.default.getTextWidth(e,t)}}}},{key:"updateBubbleEvent",value:function(){var e=this.getRootElement();e&&Object(y.traverseElement)(e,(function(e){if(!e.isBubbleEventSet)if(e.isRootElementOfComponent){var t=e.referComponent;e.bubbleEvent=!t||t.bubbleEvent}else e.bubbleEvent=!0}))}},{key:"onClick",value:function(e,t){var a=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.handleTriggerClick,s=void 0===i||i,c=r.handleClickLimit,l=void 0===c||c,d=r.isReport,f=void 0!==d&&d,p=r.clickType,h=void 0===p?0:p,v=function(e){null!==a.reporter&&(s&&!a.reporter.judgeTriggerClick(e,f)||l&&a.reporter.isClickLimit(e,h))||t(e)};return this.clickCallbackMap.set(t,v),Object(o.default)(Object(u.default)(n.prototype),"onClick",this).call(this,e,v)}},{key:"offClick",value:function(e,t){return this.clickCallbackMap.has(t)?Object(o.default)(Object(u.default)(n.prototype),"offClick",this).call(this,e,this.clickCallbackMap.get(t)):Object(o.default)(Object(u.default)(n.prototype),"offClick",this).call(this,e,t)}},{key:"checkUseApx",value:function(){if(this.getDataValue("_useApx"))for(var e=0,t=Object.keys(this.style);e<t.length;e++){var n=t[e];this.style[n]=this.convertToApxRatio(this.style[n])}}},{key:"convertToApxRatio",value:function(e){for(var t=this.ratio,n=/(\d+)px/g,a={},r=0,i=Object.keys(e);r<i.length;r++){var o=i[r];if(null===_.scalableStyles||void 0===_.scalableStyles?void 0:_.scalableStyles.includes(o)){var s=e[o],c=s;"number"==typeof s?c=s*t:"string"==typeof s?c=s.replace(n,(function(e,n){var a=Number(n);return Number.isNaN(a)?e:a*t+"px"})):Array.isArray(s)&&(null==s?void 0:s.every((function(e){return"number"==typeof e})))&&(c=s.map((function(e){return e*t}))),a[o]=c}else a[o]=e[o]}return a}}],[{key:"animate",value:function(e,t){var n=t.left,a=t.top,r=t.scaleWidth,i=t.scaleHeight,o=t.opacity,s=t.rotate,c=void 0===s?0:s,u=t.easing,l=void 0===u?"ease-in":u,d=t.duration,f=void 0===d?500:d,p=new Promise((function(t,s){Object(h.invokeMethod)("animateCoverView",{dest:e.dest,viewId:e.id,easing:l,duration:f,finalStyle:{left:n,top:a,opacity:o,rotate:c,scaleX:r,scaleY:i},success:t,fail:s})}));return"devtools"===T&&(p=Promise.all([p,Object(b.timeout)(f)])),p}}]),n}(v.Component);function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var D=function(e){Object(s.default)(n,e);var t=P(n);function n(e){var r,i;if(Object(a.default)(this,n),(r=t.call(this,e,{autoRegister:!1})).style={blank:{width:0,height:0},linearGradient:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},".reverse":{rotate:180}},r.isLinearGradient=!1,r.isLinearGradientReverse=!1,r.linearGradientSrc="https://wxa.wxs.qq.com/images/wxapp/linear_gradient.png",r.linearGradientRe=/^linear-gradient\(rgba\(0,0,0,([\d.]+)\),rgba\(0,0,0,([\d.]+)\)\)$/,r.isShow=r.getDataValueWithDefault("_isShow",!0),r.isShow&&("feedback"===r.template.type?r.setStyle("container",{display:"inline-block"}):"end"===r.template.type&&r.setStyle("container",{display:"none"}),r.updateStyle(r.template.style||{},"container"),null===(i=r.template.style)||void 0===i?void 0:i.background)){var o=r.linearGradientRe.exec(r.template.style.background.replace(/ /g,""));if(o){var s=o.slice(1),c=Object(l.default)(s,2),u=c[0],d=c[1];r.isLinearGradient=!0,Number(u)>Number(d)&&(r.isLinearGradientReverse=!0)}}return r}return Object(r.default)(n,[{key:"getSubComponentProps",value:function(){return this.getCommonSubComponentProps()}},{key:"render",value:function(){var e=this.props.template,t=null;return"for"===e.type?"<CustomFor></CustomFor>":(["layout","image","text","button","video","feedback","end","carousel","countdown"].includes(e.type)&&(t="Custom"+e.type[0].toUpperCase()+e.type.slice(1)),this.isShow&&t?'\n      <view id="container">\n        '+(this.isLinearGradient?'\n          <image id="linear-gradient" class="'+(this.isLinearGradientReverse?"reverse":"")+'" src="'+this.linearGradientSrc+'"></image>\n        ':"")+"\n        <"+t+"></"+t+">\n      </view>\n    ":'<view id="blank"></view>')}}]),n}(A);D.subComponents=function(){return{CustomLayout:L,CustomText:G,CustomImage:Y,CustomButton:K,CustomVideo:Q,CustomFeedback:ee,CustomEnd:ne,CustomFor:re,CustomCarousel:he,CustomCountdown:ge}};var x=n(63);function R(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var j=function(e){Object(s.default)(n,e);var t=R(n);function n(e){var r,o,s,c;Object(a.default)(this,n),(r=t.call(this,e)).style={body:{zIndex:1,position:"absolute",hidden:!0,opacity:0,flexDirection:"column",alignItems:"center",justifyContent:"center"},".full-size":{width:"100%",height:"100%"},".full":{position:"absolute",left:0,right:0,top:0,bottom:0},".tip-container":{position:"absolute",top:0,left:0,width:"100%",height:"100%",justifyContent:"center",alignItems:"center",hidden:!0},".video-close-tip":{position:"relative",zIndex:1e3,height:48,width:122,lineHeight:48,backgroundColor:"#4C4C4C",borderRadius:12,fontSize:17,color:"#fff",textAlign:"center"},".empty":{width:"100%",height:"100%",justifyContent:"center",alignContent:"center",alignItems:"center",backgroundColor:"#dcdcdc",color:"#888",textAlign:"center",fontSize:12,minHeight:50}},r.state={hidden:!0},r.multiShowList=void 0,r.show=function(){r.setStyle("body",{hidden:!1,opacity:1}),r.emitAdCustomEvent(_.CUSTOM_EVENT.CHECKEXPOSURE)},r.hide=function(){r.setStyle("body",{hidden:!0,opacity:0}),r.emitAdCustomEvent(_.CUSTOM_EVENT.CHECKEXPOSURE)},r.showFeedback=function(){Object(i.default)(r).useDefaultFeedback&&(r.setStyle("tipContainer",{hidden:!1}),setTimeout((function(){r.setStyle("tipContainer",{hidden:!0})}),3e3))},r.handleEnterForeground=function(){r.emitComponentEvent(_.ROOT_EVENT.APPENTERFOREGROUND),r.emitAdCustomEvent(_.CUSTOM_EVENT.APPENTERFOREGROUND)},r.handleEnterBackground=function(){r.emitComponentEvent(_.ROOT_EVENT.APPENTERBACKGROUND),r.emitAdCustomEvent(_.CUSTOM_EVENT.APPENTERBACKGROUND)},r.handleContainerClick=function(e){var t,n;(null===(t=r.manager)||void 0===t?void 0:t.isMulti)||(r.emitComponentEvent(_.ROOT_EVENT.CONTAINERTAP),null===(n=r.reporter)||void 0===n||n.handleClick(e,2))},r.isFullScreen=r.getDataValueWithDefault("isFullScreen",!1),r.enableTimer=r.getDataValueWithDefault("enableTimer",!0),r.useDefaultFeedback=r.getDataValueWithDefault("useDefaultFeedback",!0),r.exposureUntilVideoPlay=r.getDataValueWithDefault("exposureUntilVideoPlay",!1),r.hideAfterLanding=r.getDataValueWithDefault("hideAfterLanding",!1),r.exportAid=r.getDataValueWithDefault("exportAid",!1),r.isMulti=null!==(c=null===(s=null===(o=r.template)||void 0===o?void 0:o.tplConfig)||void 0===s?void 0:s.isMulti)&&void 0!==c&&c,r.isWidthRequired=r.getDataValueWithDefault("isWidthRequired",!1),r.multiShowList=r.getDataValue("multiShowList"),r.bindEvent(),r.updateInnerStyle(),r.updateStyle(r.template.style||{},"container");var u=["left","top"];return!I.deviceInfo.isWaGame&&u.push("fixed"),r.isWidthRequired&&u.push("width"),!r.isFullScreen&&e.adPosition&&r.setStyle("body",Object(y.pick)(e.adPosition,u)),r}return Object(r.default)(n,[{key:"destroy",value:function(){Object(o.default)(Object(u.default)(n.prototype),"destroy",this).call(this),this.unbindEvent()}},{key:"ready",value:function(e){Object(o.default)(Object(u.default)(n.prototype),"ready",this).call(this,e),this.isFullScreen&&(e.fullscreen=!0),this.updateBubbleEvent()}},{key:"getCustomItemProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.props.template.children[parseInt(t,10)]})}},{key:"bindEvent",value:function(){Object(x._onShow)(this.handleEnterForeground),Object(x._onHide)(this.handleEnterBackground),this.onClick("container",this.handleContainerClick)}},{key:"unbindEvent",value:function(){Object(x._offShow)(this.handleEnterForeground),Object(x._offHide)(this.handleEnterBackground),this.offClick("container",this.handleContainerClick)}},{key:"getRootData",value:function(e){switch(e){case"hidable":return this.getDataValueWithDefault("hidable",!0);case"refetchable":return this.getDataValueWithDefault("refetchable",!1)}}},{key:"doAction",value:function(e){var t,n,a,r=e.payload,i=e.args;r.action===_.ACTIONS.HIDEAD?"value"in r&&r.value.preventClose?null===(t=this.manager)||void 0===t||t.hide(!0):null===(n=this.manager)||void 0===n||n.hide():r.action===_.ACTIONS.RELOADAD?null===(a=this.manager)||void 0===a||a.reload():r.action===_.ACTIONS.CHANGEMULTISHOW&&(r.value.listExpr?this.emitAdCustomEvent(_.CUSTOM_EVENT.CHANGEMULTISHOW,{list:this.run(r.value.listExpr,i)}):r.value.list?this.emitAdCustomEvent(_.CUSTOM_EVENT.CHANGEMULTISHOW,{list:r.value.list}):(null==i?void 0:i.list)&&this.emitAdCustomEvent(_.CUSTOM_EVENT.CHANGEMULTISHOW,{list:i.list}))}},{key:"isShow",value:function(){var e,t=this.getElementById("body");return null!==(e=!(null==t?void 0:t.style.hidden))&&void 0!==e&&e}},{key:"render",value:function(){if(this.props.isEmpty)return'\n        <view id="body">\n          <view id="empty-container" class="empty">\n            <text id="empty-container-text" class="empty-info" value="暂无广告，具体指引查看小程序流量主功能"></text>\n          </view>\n        </view>\n      ';var e=this.props.template,t=this.isFullScreen,n=this.useDefaultFeedback;return'\n      <view id="body" class="'+(t?"full-size":"")+'">\n        '+(e?'\n          <view id="container" class="wx-ad-custom '+(t?"full full-size":"")+'">\n            '+e.children.map((function(e,t){return'\n              <CustomItem get-props="getCustomItemProps:'+t+'"></CustomItem>\n            '})).join("\n")+"\n          </view>\n          "+(n?'\n            <view id="tip-container" class="tip-container">\n              <text id="close-tip" class="video-close-tip" value="感谢反馈"></text>\n            </view>\n          ':"")+"\n        ":"")+"\n      </view>\n    "}}]),n}(A);j.subComponents={CustomItem:D};var M=n(26);function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var L=function(e){Object(s.default)(n,e);var t=N(n);function n(e){var r;return Object(a.default)(this,n),(r=t.call(this,e)).state={children:[]},r.style={".layout-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".layout-column":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".layout-proportion":{position:"absolute",width:"100%",height:"100%"}},r.classRow=!1,r.classColumn=!1,r.baseType=r.options.baseType||_.LAYOUT_TYPES.COMMON,r.baseType===_.LAYOUT_TYPES.ROW?r.classRow=!0:r.baseType===_.LAYOUT_TYPES.COLUMN?r.classColumn=!0:(r.baseType,_.LAYOUT_TYPES.PROPORTION),r.state.children=r.template.children||[],r.updateInnerStyle(),r}return Object(r.default)(n,[{key:"doAction",value:function(e){var t=e.payload;if(t.action===_.ACTIONS.ADDCHILDREN){var n=t.value,a=Array.isArray(n)?n:[n],r=[].concat(Object(M.default)(this.state.children),Object(M.default)(a));this.setState({children:r})}}},{key:"ready",value:function(e){Object(o.default)(Object(u.default)(n.prototype),"ready",this).call(this,e),this.initProportionComponent()}},{key:"initProportionComponent",value:function(){var e=this.getDataValue("mProportion");if(e){var t=this.getRootElement().layoutBox;if(t.width/t.height>e){var n=Math.round(t.height*e);this.setStyle("container",{width:n,left:(t.width-n)/2,top:0})}else{var a=Math.round(t.width/e);this.setStyle("container",{height:a,top:(t.height-a)/2,left:0})}}}},{key:"getSubComponentProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.state.children[parseInt(t,10)]})}},{key:"render",value:function(){var e=this.state.children,t=["layout"];return this.classRow&&t.push("layout-row"),this.classColumn&&t.push("layout-column"),'\n      <view\n        id="container"\n        class="'+t.join(" ")+'"\n      >\n      '+e.map((function(e,t){return'\n        <CustomItem get-props="getSubComponentProps:'+t+'"></CustomItem>\n      '})).join("\n")+"\n      </view>\n    "}}]),n}(A);L.subComponents=function(){return{CustomItem:D}};var B=n(11),F=n(74),W=n(40);function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var U=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))},G=function(e){Object(s.default)(n,e);var t=V(n);function n(e){var r;Object(a.default)(this,n),(r=t.call(this,e)).style={".text":{color:"#000",fontSize:14,wordBreak:"break-all"},".text-ellipsis":{lineBreak:"ellipsis",overflow:"hidden"}},r.state={text:""},r.classEllipsis=!1;var i=r.options.baseType||_.TEXT_TYPES.NICKNAME;return r.baseType=i,i===_.TEXT_TYPES.COMMON?r.initCommonComponent():i===_.TEXT_TYPES.NICKNAME?r.initNickNameComponent():i===_.TEXT_TYPES.DESC&&r.initDescComponent(),r.classEllipsis=r.getDataValueWithDefault("isEllipsis",!0),r.maxLen=r.getDataValueWithDefault("maxLen",null),r.updateInnerStyle(),r}return Object(r.default)(n,[{key:"ready",value:function(e){Object(o.default)(Object(u.default)(n.prototype),"ready",this).call(this,e),this.baseType===_.TEXT_TYPES.RELATION&&this.initRelationComponent()}},{key:"initCommonComponent",value:function(){this.state.text=this.getDataValueWithDefault("text","")}},{key:"initNickNameComponent",value:function(){var e=this.getAdData(),t=[B.PRODUCT_TYPE.APPLE_APP_STORE,B.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===B.CRT_SIZE.CRT_SIZE_GRID,a=[B.PRODUCT_TYPE.WE_CHAT_ARTICLE,B.PRODUCT_TYPE.GDT_WE_CHAT_ARTICLE].includes(e.product_type),r=[B.PRODUCT_TYPE.WE_CHAT_SHOP,B.PRODUCT_TYPE.JD_URL].includes(e.product_type),i=[{path:["extBackComm","nick_name"]},{path:["weapp_info","nick_name"],condition:n},{path:["crtInfo","0","wxgame_video_card","title"],condition:[B.CRT_SIZE.CRT_SIZE_REWARD_VEDIO169,B.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916,B.CRT_SIZE.CRT_SIZE_VERTICAL_VIDEO_NEW_916,B.CRT_SIZE.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size)},{path:["appInfo","appName"],condition:t},{path:["app","nickname"],condition:!t},{path:["crtInfo","0","card_info","title"]},{value:"品牌推广",condition:a},{value:"电商推广",condition:r},{value:"活动推广"}];this.state.text=Object(y.getDataFromPaths)(e,i)}},{key:"initDescComponent",value:function(){var e=this.getAdData(),t=[B.PRODUCT_TYPE.APPLE_APP_STORE,B.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=[B.CRT_SIZE.CRT_SIZE_REWARD_VEDIO169,B.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916,B.CRT_SIZE.CRT_SIZE_VERTICAL_VIDEO_NEW_916,B.CRT_SIZE.CRT_SIZE_MULTI_POS_VIDEO].includes(e.crt_size),a=e.product_type===B.PRODUCT_TYPE.MINI_GAME,r=e.product_type===B.PRODUCT_TYPE.WECHAT,i=[B.PRODUCT_TYPE.WE_CHAT_ARTICLE,B.PRODUCT_TYPE.GDT_WE_CHAT_ARTICLE].includes(e.product_type),o=[B.PRODUCT_TYPE.WE_CHAT_SHOP,B.PRODUCT_TYPE.JD_URL].includes(e.product_type),s=[{path:["extBackComm","desc_1"]},{path:["crtInfo","0","wxgame_video_card","desc"],condition:n},{path:["wording"],condition:[B.CRT_SIZE.CRT_SIZE_MULTI_POS_NEW_PIC,B.CRT_SIZE.CRT_SIZE_IN_TEXT_DESC_CARD].includes(e.crt_size)}];this.getDataValueWithDefault("useDefault",!1)?s.push({path:["extBackComm","default_desc"]},{value:"今日活动推荐",condition:i},{value:"今日商品推荐",condition:o},{value:"今日应用推荐",condition:t},{value:"今日公众号推荐",condition:r},{value:"今日小游戏推荐",condition:a},{value:"今日活动推荐"}):s.push({value:""}),this.state.text=Object(y.getDataFromPaths)(e,s)}},{key:"initRelationComponent",value:function(){var e;return U(this,void 0,void 0,p.a.mark((function t(){var n,a,r,i,o,s,c,u,l;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=this.getAdData(),8===Object(y.get)(n,["crtInfo","0","card_info","mp_tag_type"])){t.next=3;break}return t.abrupt("return");case 3:return a=n.aid,r=Date.now(),i=Object(y.get)(n,["button_action","button_text"],""),t.prev=6,t.next=9,Object(F.fetchRelationInfo)({aid:a,buttonText:i});case 9:o=t.sent,s=Date.now(),this.adProxy.reportRelationFetchDuration({startTime:r,endTime:s,showTime:(null===(e=this.manager)||void 0===e?void 0:e.showDetailTime)||0}),c="",o&&(u=o.count,l=o.descText,c=this.getDataValueWithDefault("text","",void 0,{args:{count:u,descText:l}}),this.emitComponentEvent(_.TEXT_EVENT.RELATIONFETCHED,{count:u,descText:l})),this.setState({text:c}),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(6),this.setState({text:""}),this.adProxy.reportAdMonitorData(_.IDKEY.RELATION_FETCH_ERROR,t.t0);case 21:case"end":return t.stop()}}),t,this,[[6,17]])})))}},{key:"doAction",value:function(e){var t=e.payload;t.action===_.ACTIONS.TEXTSETTEXT&&this.setState({text:this.getDataValue("text",t.value)})}},{key:"render",value:function(){var e=this.classEllipsis,t=this.state.text;return this.classEllipsis&&null!==this.maxLen&&t&&(t=Object(W.truncate)(t,2*this.maxLen)),'\n      <view id="container">\n        <text\n          id="text"\n          class="text '+(e?"text-ellipsis":"")+'"\n          value="'+t+'"\n        ></text>\n      </view>\n    '}}]),n}(A);function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var Y=function(e){Object(s.default)(n,e);var t=H(n);function n(e){var r;Object(a.default)(this,n),(r=t.call(this,e)).style={".image-img":{width:"100%",height:"100%"},".image-img-appicon":{borderRadius:5},".image-img-icon":{borderRadius:"50%"}},r.state={imgUrl:""},r.classAppIcon=!1,r.classIcon=!1,r.useBgMode=!1,r.useBgMode=r.getDataValueWithDefault("useBgMode",!1);var i=r.options.baseType||_.IMAGE_TYPES.ICON;switch(r.baseType=i,i){case _.IMAGE_TYPES.COMMON:r.initCommonComponent();break;case _.IMAGE_TYPES.AD:r.initADComponent();break;case _.IMAGE_TYPES.ICON:r.initIconComponent()}return r.useBgMode,r.updateInnerStyle(),r}return Object(r.default)(n,[{key:"initCommonComponent",value:function(){this.state.imgUrl=this.getDataValueWithDefault("imgUrl","")}},{key:"initIconComponent",value:function(){var e=this.getAdData(),t=[B.PRODUCT_TYPE.APPLE_APP_STORE,B.PRODUCT_TYPE.OPEN_PLATFORM_APP_MOB].includes(e.product_type),n=e.crt_size===B.CRT_SIZE.CRT_SIZE_GRID,a=[B.PRODUCT_TYPE.WE_CHAT_SHOP,B.PRODUCT_TYPE.JD_URL].includes(e.product_type),r=[B.CRT_SIZE.CRT_SIZE_REWARD_VEDIO169,B.CRT_SIZE.CRT_SIZE_REWARD_VEDIO916,B.CRT_SIZE.CRT_SIZE_VERTICAL_VIDEO_NEW_916].includes(e.crt_size);t?this.classAppIcon=!0:this.classIcon=!0;var i=[{path:["extBackComm","head_img"]},{path:["weapp_info","head_img"],condition:n},{path:["crtInfo","0","wxgame_video_card","thumb"],condition:r},{path:["appInfo","iconUrl"],condition:t},{path:["app","icon"],condition:!t},{path:["crtInfo","0","card_info","thumb"]},{value:"https://wxa.wxs.qq.com/images/wxapp/dianshang.png",condition:a},{value:"https://wxa.wxs.qq.com/images/wxapp/pinpai.png"}];this.state.imgUrl=Object(y.getDataFromPaths)(e,i)}},{key:"initADComponent",value:function(){var e=this.getAdData(),t=e.image_url;if(!t.startsWith("http"))try{t=e.crtInfo[0].image_url||t}catch(e){}this.state.imgUrl=this.getDataValue("imgUrl")||t}},{key:"doAction",value:function(e){var t=e.payload;t.action===_.ACTIONS.IMAGESETSRC&&this.setState({imgUrl:this.getDataValue("imgUrl",t.value)})}},{key:"render",value:function(){var e=this.classAppIcon,t=this.classIcon,n=this.baseType===_.IMAGE_TYPES.AD,a=this.state.imgUrl,r=["image-img"];return e&&r.push("image-img-appicon"),t&&r.push("image-img-icon"),'\n      <view id="container" class="image">\n        <image\n          id="img"\n          '+(n?'bubble-event="false"':"")+'\n          class="'+r.join(" ")+'"\n          src="'+a+'"\n        >\n      </view>\n    '}}]),n}(A),q=n(65);function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var K=function(e){Object(s.default)(n,e);var t=z(n);function n(e){var r;Object(a.default)(this,n),(r=t.call(this,e)).style={".button":{position:"relative",display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"center",backgroundColor:"#07c160",padding:"0 12px",borderRadius:3,overflow:"hidden"},".button-text":{textAlign:"center",color:"#fff",fontSize:16},".button-download-progress":{position:"absolute",left:0,top:0,width:0,height:"100%",overflow:"hidden"},".download-text-container":{position:"absolute",top:0,left:0,width:0,height:"100%",flexDirection:"row",alignItems:"center",justifyContent:"center"}},r.state={buttonText:""},r.downloadProgress=0,r.isHandleDownload=!1,r.handleAdCustomEvent=function(e){var t=e.action,n=e.value,a=void 0===n?{}:n;t===_.CUSTOM_EVENT.CHANGEADBTNTEXT&&a.text&&(r.setState({buttonText:a.text}),a.progress&&(r.downloadProgress=a.progress))},r.handleButtonClick=function(e){r.emitAdCustomEvent(_.CUSTOM_EVENT.BTNTAP,{event:e,isHandleDownload:r.isHandleDownload}),r.emitComponentEvent(_.BUTTON_EVENT.BUTTONTAP,{event:e})};var i=r.options.baseType||_.BUTTON_TYPES.LOGICCOMMON;return i===_.BUTTON_TYPES.COMMON?r.initCommonComponent():i===_.BUTTON_TYPES.LOGICCOMMON&&r.initLogicCommonComponent(),r.updateInnerStyle(),r.setStyle("downloadProgressBar",{width:r.downloadProgress+"%"}),r.setStyle("downloadTextContainer",{width:1e4/r.downloadProgress+"%"}),r.onClick("container",r.handleButtonClick,{isReport:!0,clickType:1}),r}return Object(r.default)(n,[{key:"destroy",value:function(){Object(o.default)(Object(u.default)(n.prototype),"destroy",this).call(this),this.offClick("container",this.handleButtonClick)}},{key:"getButtonText",value:function(){return this.state.buttonText}},{key:"initCommonComponent",value:function(){this.state.buttonText=this.getDataValueWithDefault("buttonText","")}},{key:"initLogicCommonComponent",value:function(){var e=this.getAdData(),t=this.getDataValue("buttonText");t?this.state.buttonText=t:e.product_type===q.ProductType.WE_CHAT?this.state.buttonText=e.app.isFollowed?"查看":e.button_action.button_text:this.state.buttonText=e.button_action.button_text,this.addAdCustomListener(this.handleAdCustomEvent),this.isHandleDownload=this.getDataValueWithDefault("isHandleDownload",!1)}},{key:"doAction",value:function(e){var t=e.payload;t.action===_.ACTIONS.BUTTONSETTEXT&&this.setText(t.value)}},{key:"setText",value:function(e){this.setState({buttonText:this.getDataValue("text",e)})}},{key:"render",value:function(){var e=this.isHandleDownload,t=this.state.buttonText;return'\n      <view id="container" class="button" bubbleEvent="false">\n        <text id="button-text" class="button-text" value="'+t+'"></text>\n        '+(e?'\n          <view\n            id="download-progress-bar"\n            class="button-download-progress"\n          >\n            <view id="download-text-container" class="download-text-container"\n              <text id="download-text" class="button-text" value="'+t+'"></text>\n            </view>\n          </view>\n        ':"")+"\n      </view>\n    "}}]),n}(A),X={videoDataMap:{}},Z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e&&(X.videoDataMap[e]=t)};function J(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var Q=function(e){Object(s.default)(n,e);var t=J(n);function n(e){var r;return Object(a.default)(this,n),(r=t.call(this,e)).style={".video-context":{zIndex:1000008},".click-mask":{position:"absolute",zIndex:1000008,borderRadius:6,width:"100%",height:"100%"},".video-voice-box":{zIndex:1000009,position:"absolute",width:24,height:24},".video-voice-box-topleft":{top:10,left:10},".video-voice-box-topright":{top:10,right:10},".video-voice-box-bottomleft":{bottom:10,left:10},".video-voice-box-bottomright":{bottom:10,right:10},".video-count-down":{zIndex:1000009,position:"absolute",color:"#fff",textAlign:"right",fontSize:12,width:32,height:16,lineHeight:16},".video-count-down-topleft":{top:10,left:10},".video-count-down-topright":{top:10,right:10},".video-count-down-bottomleft":{bottom:10,left:10},".video-count-down-bottomright":{bottom:10,right:10},".video-voice-icon":{width:"100%",height:"100%"},".video-progress":{position:"absolute",zIndex:9,bottom:0,left:0,right:0,height:3,backgroundColor:"#f2f2f2"},".video-progress-played":{width:0,height:3,backgroundColor:"#07c160"}},r.state={muted:!0,loop:!0,autoplay:!1,countDownNumber:null,isEndPageShowing:!1},r.src="",r.poster="",r.isShowVoice=!0,r.isShowProgress=!0,r.isShowCountDown=!1,r.isShowEndPage=!1,r.voicePlacement=null,r.countDownPlacement=null,r.voiceIconSrc="https://wxa.wxs.qq.com/images/wxapp/voice_icon.png",r.mutedIconSrc="https://wxa.wxs.qq.com/images/wxapp/muted_icon.png",r.currentTime=0,r.videoDuration=0,r.objectFit="contain",r.toggleMuted=function(){r.setState({muted:!r.state.muted}),r.emitComponentEvent(_.VIDEO_EVENT.MUTEDCHANGE,{muted:r.state.muted})},r.handleCustomEvent=function(e){var t=e.action,n=e.value,a=void 0===n?{}:n;switch(t){case _.CUSTOM_EVENT.ADSHOWHALF:r.state.isEndPageShowing||r.operateVideoPlay("play");break;case _.CUSTOM_EVENT.ADHIDEHALF:r.state.isEndPageShowing||r.operateVideoPlay("pause");break;case _.CUSTOM_EVENT.APPENTERBACKGROUND:var i=Math.min(r.currentTime,r.videoDuration);a.inAdDetail?r.reportVideoPlay("partial","exit",i):r.reportVideoPlay("partial","app_exit",i);break;case _.CUSTOM_EVENT.ENDPAGEINIT:r.isShowEndPage=r.getDataValueWithDefault("isShowEndPage",!1),r.isShowEndPage&&r.setState({loop:!1});break;case _.CUSTOM_EVENT.ENDPAGEHIDE:r.isShowEndPage&&(r.setState({isEndPageShowing:!1}),r.operateVideoPlay("play"));break;case _.CUSTOM_EVENT.ENDPAGESHOW:r.isShowEndPage&&r.setState({isEndPageShowing:!0});break;case _.CUSTOM_EVENT.BTNTAP:r.reportVideoPlay(r.currentTime<r.videoDuration?"partial":"complete","land",r.videoDuration)}},r.handleError=function(e){r.adProxy.reportAdMonitorData(_.IDKEY.AD_VIDEO_LOAD_FAILED,e)},r.handleTimeUpdate=function(e){var t,n=e.duration,a=e.position;if(null!=n&&null!=a){var i=Math.min(1,a/n);r.setStyle("videoProgressPlayed",{width:100*i+"%"}),r.isShowCountDown&&r.setState({countDownNumber:Math.ceil(n-a)+"s"}),r.emitComponentEvent(_.VIDEO_EVENT.VIDEOTIMEUPDATE,{event:e,rate:i}),r.currentTime=1e3*a,r.videoDuration||(r.videoDuration=1e3*n);var o={currentTime:r.currentTime,duration:r.videoDuration},s=(null===(t=r.manager)||void 0===t?void 0:t.adCustomId)||r.adCustomId;Z(s,o)}},r.handleEnded=function(e){var t;r.emitComponentEvent(_.VIDEO_EVENT.VIDEOENDED,{event:e}),r.emitAdCustomEvent(_.CUSTOM_EVENT.TRIGGEREVENT,{eventName:"videoended",detail:{baseType:r.baseType}}),r.reportVideoPlay("viewable","end",r.videoDuration),m.IS_IOS&&r.reportVideoPlay("partial","start");var n={currentTime:r.videoDuration,duration:r.videoDuration},a=(null===(t=r.manager)||void 0===t?void 0:t.adCustomId)||r.adCustomId;Z(a,n),r.currentTime=0,r.isShowEndPage&&r.emitAdCustomEvent(_.CUSTOM_EVENT.SHOWENDPAGE,{videoId:r.id}),r.setState({countDownNumber:null})},r.handlePlay=function(e){r.emitComponentEvent(_.VIDEO_EVENT.VIDEOPLAY,{event:e}),r.emitAdCustomEvent(_.CUSTOM_EVENT.ADVIDEOPLAY),r.reportVideoPlay("partial","start",Math.min(r.currentTime,r.videoDuration))},r.handlePause=function(e){r.emitComponentEvent(_.VIDEO_EVENT.VIDEOPAUSE,{event:e}),r.emitAdCustomEvent(_.CUSTOM_EVENT.ADVIDEOPAUSE),r.reportVideoPlay("partial","close",Math.min(r.currentTime,r.videoDuration))},r.baseType=r.options.baseType||_.VIDEO_TYPES.AD,r.baseType===_.VIDEO_TYPES.COMMON?r.initCommonComponent():r.baseType===_.VIDEO_TYPES.AD&&r.initADComponent(),r.isShowVoice=r.getDataValueWithDefault("isShowVoice",!0),r.voicePlacement=r.getDataValueWithDefault("voicePosition","bottomleft").toLowerCase(),r.state.muted=r.getDataValueWithDefault("muted",!0),r.state.loop=r.getDataValueWithDefault("loop",!0),r.isShowProgress=r.getDataValueWithDefault("isShowProgress",!0),r.isShowCountDown=r.getDataValueWithDefault("isShowCountDown",!1),r.countDownPlacement=r.getDataValueWithDefault("countDownPosition","topright").toLowerCase(),r.objectFit=r.getDataValueWithDefault("objectFit","contain"),r.updateInnerStyle(),r.bindEvent(),setTimeout((function(){r.emitComponentEvent(_.VIDEO_EVENT.MUTEDCHANGE,{muted:r.state.muted})}),0),r}return Object(r.default)(n,[{key:"destroy",value:function(){Object(o.default)(Object(u.default)(n.prototype),"destroy",this).call(this),this.unbindEvent(),this.removeAdCustomListener()}},{key:"bindEvent",value:function(){this.onTimeUpdate("video",this.handleTimeUpdate),this.onEnded("video",this.handleEnded),this.onPlay("video",this.handlePlay),this.onPause("video",this.handlePause),this.onError("video",this.handleError),this.onClick("videovoicebox",this.toggleMuted,{clickType:1})}},{key:"unbindEvent",value:function(){this.offTimeUpdate("video",this.handleTimeUpdate),this.offEnded("video",this.handleEnded),this.offPlay("video",this.handlePlay),this.offPause("video",this.handlePause),this.offError("video",this.handleError),this.offClick("videovoicebox",this.toggleMuted)}},{key:"initCommonComponent",value:function(){this.src=this.getDataValueWithDefault("src",""),this.poster=this.getDataValueWithDefault("poster","")}},{key:"initADComponent",value:function(){var e,t=this.getAdData();this.src=this.getDataValue("src")||Object(y.get)(t,["video_info","videoUrl"])||Object(y.get)(t,["short_video","video_url"]),this.poster=this.getDataValue("poster")||Object(y.get)(t,["video_info","thumbUrl"])||Object(y.get)(t,["short_video","trumb_url"]),this.addAdCustomListener(this.handleCustomEvent),this.videoDuration=Object(y.get)(t,["wx_game_video","short_video","video_duration"])||Object(y.get)(t,["crtInfo","0","short_video","video_duration"],0),this.videoDuration=1e3*this.videoDuration;var n={currentTime:0,duration:this.videoDuration},a=(null===(e=this.manager)||void 0===e?void 0:e.adCustomId)||this.adCustomId;Z(a,n),this.emitAdCustomEvent(_.CUSTOM_EVENT.REPORTTIMEPOINT,{key:"p8"})}},{key:"doAction",value:function(e){switch(e.payload.action){case _.ACTIONS.VIDEOTOGGLEMUTED:this.toggleMuted();break;case _.ACTIONS.VIDEOPLAY:this.operateVideoPlay("play");break;case _.ACTIONS.VIDEOPAUSE:this.operateVideoPlay("pause");break;case _.ACTIONS.VIDEOSTOP:this.operateVideoPlay("stop")}}},{key:"operateVideoPlay",value:function(e){if(["play","pause","stop","seek"].includes(e)){this.setState({autoplay:"play"===e});var t=this.getElementById("video");(null==t?void 0:t[e])&&t[e]()}}},{key:"reportVideoPlay",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.baseType===_.VIDEO_TYPES.AD&&this.emitAdCustomEvent(_.CUSTOM_EVENT.REPORTVIDEOPLAY,{playType:e,conditionType:t,videoInfo:{playDuration:n,videoDuration:this.videoDuration,isMuted:this.state.muted,isAutoPlay:this.state.autoplay}})}},{key:"render",value:function(){var e=this.src,t=this.poster,n=this.isShowVoice,a=this.mutedIconSrc,r=this.voiceIconSrc,i=this.voicePlacement,o=this.countDownPlacement,s=this.isShowProgress,c=this.isShowCountDown,u=this.objectFit,l=this.state,d=l.muted,f=l.loop,p=l.autoplay,h=l.countDownNumber,v=l.isEndPageShowing,g=["video-voice-box"],y=["video-count-down"];return g.push("video-voice-box-"+i),y.push("video-count-down-"+o),'\n      <view id="container" class="video">\n        <video\n          id="video"\n          class="video-context"\n          src="'+e+'"\n          poster="'+t+'"\n          controls="false"\n          muted="'+d+'"\n          loop="'+f+'"\n          autoplay="'+p+'"\n          auto-insert="false"\n          under-game-view="false"\n          show-progress="false"\n          show-play-btn="false"\n          show-center-play-btn="false"\n          show-fullscreen-btn="false"\n          enable-progress-gesture="false"\n          object-fit="'+u+'"\n        >\n          '+(!v&&n?'\n            <view id="videovoicebox" bubble-event="false" class="'+g.join(" ")+'">\n              <image\n                src="'+(d?a:r)+'"\n                id="videovoiceimg"\n                class="video-voice-icon"\n              ></image>\n            </view>\n          ':"")+"\n          "+(s?'\n            <view id="video-progress" class="video-progress">\n              <view id="video-progress-played" class="video-progress-played"></view>\n            </view>\n          ':"")+"\n          "+(!v&&c&&h?'\n            <text id="video-count-down" class="'+y.join(" ")+'" value="'+h+'"></text>\n          ':"")+"\n        </video>\n      </view>\n    "}}]),n}(A);function $(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var ee=function(e){Object(s.default)(n,e);var t=$(n);function n(e){var r;return Object(a.default)(this,n),(r=t.call(this,e)).style={".feedback-icon":{width:6,height:4,marginLeft:2,position:"relative"},".close-icon":{width:6,height:6,marginLeft:2,position:"relative"},".feedback":{position:"relative",zIndex:1000010,padding:6},".feedback-tag-container":{flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative",padding:"2px 4px",backgroundColor:"rgba(0, 0, 0, 0.2)",borderRadius:2},".feedback-hot-click":{position:"absolute",top:-10,left:-10,right:-10,bottom:-10},".feedback-tag-text":{fontSize:10,height:12,lineHeight:12,color:"#fff"},".feedback-list":{position:"absolute",width:134,flexDirection:"column",alignItems:"center",justifyContent:"center",backgroundColor:"#fff",borderWidth:1,borderColor:"rgba(0, 0, 0, 0.03)",borderRadius:4,zIndex:1000011},".feedback-list-bottomleft":{top:26,left:6},".feedback-list-bottomright":{top:26,right:6},".feedback-list-topleft":{bottom:26,left:6},".feedback-list-topright":{bottom:26,right:6},".feedback-btn":{position:"relative",width:132,height:32,lineHeight:32,color:"#566a97",fontSize:12,opacity:.9,textAlign:"center",zIndex:1000011},".feedback-title":{color:"#000",zIndex:1000011},".feedback-line":{width:100,height:1,opacity:.03,backgroundColor:"#000",zIndex:1000011}},r.state={isShowFeedback:!1,isShowFeedbackMenu:!1,position:null},r.feedbackIconSrc="https://wxa.wxs.qq.com/images/wxapp/feedback_icon.png",r.closeIconSrc="https://wxa.wxs.qq.com/images/wxapp/close.png",r.dislikeReasonHandlers={},r.handleTagClick=function(e){if(r.baseType===_.FEEDBACK_TYPES.SIMPLE)return r.handleSimpleTagClick(e);var t=r.state,n=t.isShowFeedback,a=t.isShowFeedbackMenu;n||a?r.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}):(r.setState({isShowFeedback:!0}),r.updateMenuPosition(),r.updateInnerStyle(),r.emitAdCustomEvent(_.CUSTOM_EVENT.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"广告角标"}),r.emitComponentEvent(_.FEEDBACK_EVENT.TAGTAP,{event:e}))},r.handleDislikeClick=function(e){r.setState({isShowFeedback:!1,isShowFeedbackMenu:!0}),r.updateMenuPosition(),r.updateInnerStyle(),r.emitComponentEvent(_.FEEDBACK_EVENT.DISLIKETAP,{event:e})},r.handleFeedbackBtnClick=function(e){r.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),r.emitComponentEvent(_.FEEDBACK_EVENT.FEEDBACKBTNTAP,{event:e}),r.emitAdCustomEvent(_.CUSTOM_EVENT.FEEDBACKREPORT,{firstGradeId:1,firstGradeDesc:"投诉"}),r.emitAdCustomEvent(_.CUSTOM_EVENT.FEEDBACKBTNTAP)},r.checkUseApx(),r.baseType=r.options.baseType||_.FEEDBACK_TYPES.COMMON,r.bindEvent(),r.updateInnerStyle(),r}return Object(r.default)(n,[{key:"destroy",value:function(){Object(o.default)(Object(u.default)(n.prototype),"destroy",this).call(this),this.unbindEvent()}},{key:"bindEvent",value:function(){this.onClick("feedbackTagContainer",this.handleTagClick),this.onClick("feedbackBtn",this.handleFeedbackBtnClick),this.onClick("dislike",this.handleDislikeClick),this.dislikeReasonHandlers={isdismatch:this.onClick("isdismatch",this.handleDislikeReasonClick.bind(this,1)),isduplicate:this.onClick("isduplicate",this.handleDislikeReasonClick.bind(this,5)),isbadad:this.onClick("isbadad",this.handleDislikeReasonClick.bind(this,4))}}},{key:"unbindEvent",value:function(){this.offClick("feedbackTagContainer",this.handleTagClick),this.offClick("feedbackBtn",this.handleFeedbackBtnClick),this.offClick("dislike",this.handleDislikeClick);for(var e=0,t=Object.keys(this.dislikeReasonHandlers);e<t.length;e++){var n=t[e],a=this.dislikeReasonHandlers[n];this.offClick(n,a)}}},{key:"updateMenuPosition",value:function(){this.setState({position:this.getDataValueWithDefault("menuPosition","bottomleft").toLowerCase()})}},{key:"handleSimpleTagClick",value:function(e){this.emitAdCustomEvent(_.CUSTOM_EVENT.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:6}),this.emitAdCustomEvent(_.CUSTOM_EVENT.HIDEAD),this.emitComponentEvent(_.FEEDBACK_EVENT.TAGTAP,{event:e})}},{key:"handleDislikeReasonClick",value:function(e,t){this.setState({isShowFeedback:!1,isShowFeedbackMenu:!1}),this.emitComponentEvent(_.FEEDBACK_EVENT.DISLIKEREASONTAP,{event:t}),this.emitAdCustomEvent(_.CUSTOM_EVENT.FEEDBACKREPORT,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:e});var n=this.getDataValueWithDefault("afterDislike","showTip");"showTip"===n?this.emitAdCustomEvent(_.CUSTOM_EVENT.SHOWFEEDBACK):"hide"===n&&this.emitAdCustomEvent(_.CUSTOM_EVENT.HIDEAD)}},{key:"render",value:function(){var e=this.state,t=e.isShowFeedback,n=e.isShowFeedbackMenu,a=e.position,r=["feedback-list"],i=["feedback-list"];a&&(r.push("feedback-list-"+a.toLowerCase()),i.push("feedback-list-"+a.toLowerCase()));var o=this.baseType===_.FEEDBACK_TYPES.SIMPLE?this.closeIconSrc:this.feedbackIconSrc;return'\n      <view id="container" class="feedback" bubble-event="false">\n        <view id="feedback-tag-container" class="feedback-tag-container">\n          <text id="feedback-tag" class="feedback-tag-text" value="广告"></text>\n          <image id="feedback-icon" class="'+(this.baseType===_.FEEDBACK_TYPES.SIMPLE?"close-icon":"feedback-icon")+'" src="'+o+'"></image>\n        </view>\n        '+(t?'\n          <view id="menu1" key="menu1" class="'+r.join(" ")+'">\n            <text class="feedback-btn feedback-title" value="由赞助商提供的内容"></text>\n            <view class="feedback-line"></view>\n            <text id="dislike" class="feedback-btn" value="不感兴趣"></text>\n            <view class="feedback-line"></view>\n            <text id="feedback-btn" class="feedback-btn" value="投诉"></text>\n          </view>\n        ':"")+"\n        "+(n?'\n          <view id="menu2" key="menu2" class="'+i.join(" ")+'">\n            <text id="isdismatch" class="feedback-btn" value="与我无关"></text>\n            <view class="feedback-line"></view>\n            <text id="isduplicate" class="feedback-btn" value="重复收到多次"></text>\n            <view class="feedback-line"></view>\n            <text id="isbadad" class="feedback-btn" value="内容太差"></text>\n          </view>\n        ':"")+"\n      </view>\n    "}}]),n}(A);function te(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var ne=function(e){Object(s.default)(n,e);var t=te(n);function n(e){var r;Object(a.default)(this,n),(r=t.call(this,e)).style={".end":{position:"absolute",top:0,right:0,bottom:0,left:0,zIndex:1000099,backgroundColor:"rgba(0, 0, 0, 0.8)",flexDirection:"column",justifyContent:"center",alignItems:"center",hidden:!0},".end-refresh":{position:"absolute",left:0,bottom:0,flexDirection:"row",alignItems:"center"},".end-refresh-text":{color:"#D8D8D8",opacity:.5}},r.state={isShowEndPage:!1},r.children=[],r.refreshIconSrc="https://wxa.wxs.qq.com/images/wxapp/refresh_icon.png",r.showTime=0,r.backgroundImage="",r.exposured=!1,r.viewableExposured=!1,r.viewableExposureTimer=null,r.handleAdCustomListener=function(e){switch(e.action){case _.CUSTOM_EVENT.SHOWENDPAGE:r.setState({isShowEndPage:!0}),r.emitAdCustomEvent(_.CUSTOM_EVENT.ENDPAGESHOW),r.showTime=Date.now(),!r.exposured&&r.reportEndPageExposure(),r.exposured=!0,r.viewableExposured||(r.viewableExposureTimer=setTimeout((function(){!r.viewableExposured&&r.reportEndPageExposure(!0)}),1e3)),r.emitComponentEvent(_.ENDPAGE_EVENT.SHOW);break;case _.CUSTOM_EVENT.APPENTERBACKGROUND:r.state.isShowEndPage&&r.reportEndPageDuration();break;case _.CUSTOM_EVENT.APPENTERFOREGROUND:r.state.isShowEndPage&&(r.showTime=Date.now());break;case _.CUSTOM_EVENT.ADSHOWHALF:r.state.isShowEndPage&&(r.showTime=Date.now(),r.viewableExposured||(r.viewableExposureTimer=setTimeout((function(){!r.viewableExposured&&r.reportEndPageExposure(!0)}),1e3)));break;case _.CUSTOM_EVENT.ADHIDEHALF:r.state.isShowEndPage&&(r.reportEndPageDuration(),r.viewableExposureTimer&&(clearTimeout(r.viewableExposureTimer),r.viewableExposureTimer=null))}},r.handleReplay=function(){r.setState({isShowEndPage:!1}),r.emitAdCustomEvent(_.CUSTOM_EVENT.ENDPAGEHIDE),r.emitComponentEvent(_.ENDPAGE_EVENT.HIDE),r.reportEndPage({act_type:1003}),r.emitComponentEvent(_.ENDPAGE_EVENT.REPLAY)},r.handleContainerClick=function(e){var t;r.reportEndPage({act_type:1002}),null===(t=r.reporter)||void 0===t||t.handleClick(e,2)};var i=r.getAdData();return r.cardInfo=Object(W.get)(i,["crtInfo",0,"card_info"],{}),r.cardInfo.end_page_type?(r.backgroundImage=r.cardInfo.head_bg_img,r.setStyle("refresh",{padding:"13apx 12apx"}),r.setStyle("refreshIcon",{height:"16apx",width:"16apx",marginRight:"4apx"}),r.setStyle("refreshText",{lineHeight:"18apx",fontSize:"14apx"}),r.children=r.getChildren(),r.bindEvent(),r.updateInnerStyle(),setTimeout((function(){r.emitAdCustomEvent(_.CUSTOM_EVENT.ENDPAGEINIT)}),0),r):Object(c.default)(r)}return Object(r.default)(n,[{key:"updateState",value:function(e){this.state.isShowEndPage!==e.isShowEndPage&&this.setStyle("container",{hidden:!e.isShowEndPage})}},{key:"getSubComponentProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.children[parseInt(t,10)]})}},{key:"bindEvent",value:function(){this.onClick("contiainer",this.handleContainerClick),this.onClick("refresh",this.handleReplay),this.addAdCustomListener(this.handleAdCustomListener)}},{key:"destroy",value:function(){Object(o.default)(Object(u.default)(n.prototype),"destroy",this).call(this),this.offClick("contiainer",this.handleContainerClick),this.offClick("refresh",this.handleReplay),this.removeAdCustomListener()}},{key:"reportEndPageDuration",value:function(){this.showTime&&(this.reportEndPage({act_type:1006,exposure_duration:Date.now()-this.showTime}),this.showTime=0)}},{key:"reportEndPageExposure",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=0;e&&(t=1,this.viewableExposured=!0),this.reportEndPage({act_type:t})}},{key:"reportEndPage",value:function(e){this.emitAdCustomEvent(_.CUSTOM_EVENT.REPORTENDPAGE,{data:e})}},{key:"doAction",value:function(e){e.payload.action===_.ACTIONS.ENDPAGEHIDE&&(this.setState({isShowEndPage:!1}),this.emitAdCustomEvent(_.CUSTOM_EVENT.ENDPAGEHIDE),this.emitComponentEvent(_.ENDPAGE_EVENT.HIDE))}},{key:"getChildren",value:function(){var e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];var t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},a={},r=this.template.id;a.feedBack={type:"feedback",id:r+"_endPageFeedback",style:{position:"absolute",zIndex:99,top:"2px",left:"2px"},options:{events:{tagTap:[{action:_.ACTIONS.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:_.ACTIONS.TRIGGEREVENT,value:{eventName:_.ENDPAGE_EVENT.VIDEODISLIKE}}]}}},a.iconBig={type:"image",id:r+"_endPageIconBig",style:{width:"40apx",height:"40apx",marginBottom:"7apx"},options:{baseType:2}},a.nickBig={type:"text",id:r+"_endPageNickBig",style:{marginBottom:"6apx"},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",height:"24apx",lineHeight:"24apx"}}}}},a.descSmall={type:"text",id:r+"_endPageDescSmall",style:{marginBottom:"23apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",opacity:.5,fontSize:"14apx",lineHeight:"20apx"}}}}},a.button={type:"button",id:r+"_endPageButton",style:{},options:{innerStyles:{container:{style:{height:"32apx",backgroundColor:"#07C160",borderRadius:"4apx",padding:"0 12.5apx",paddingBottomExpr:"#like($const.systemInfo.osVersion, 'Android') ? '1px' : '0'"}},buttonText:{style:{fontSize:"16apx",color:"#fff"}}},baseType:2,events:{buttonTap:[{action:_.ACTIONS.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1001},n)}}]}}},a.iconSmall={type:"image",id:r+"_endPageIconSmall",style:{width:"20apx",height:"20apx",marginRight:"8apx"},options:{baseType:2}},a.nickSmall={type:"text",id:r+"_endPageNickSmall",style:{},options:{baseType:2,data:{},innerStyles:{text:{style:{color:"#fff",fontSize:"15apx",height:"18apx",lineHeight:"18apx",opacity:".5"}}}}},a.layoutSmall={type:"layout",id:r+"_endPageLayoutSmall",style:{marginBottom:"16apx"},options:{baseType:2},children:[]},a.layoutSmall.children.push(a.iconSmall),a.layoutSmall.children.push(a.nickSmall),a.descBig={type:"text",id:r+"_endPageDescBig",style:{marginBottom:"32apx"},options:{baseType:1,data:{text:this.cardInfo.end_page_desc,isEllipsis:!1},innerStyles:{text:{style:{color:"#fff",fontSize:"17apx",lineHeight:"22apx"}}}}};var i=this.getDataValue("childrenConf");if(i)for(var o=0,s=Object.keys(i);o<s.length;o++){var c=s[o];a[c]&&Object(W.mergeDeep)(a[c],i[c])}var u=[];return u=2===this.cardInfo.end_page_type?[a.feedBack,a.layoutSmall,a.descBig,a.button]:[a.feedBack,a.iconBig,a.nickBig,a.descSmall,a.button],3===e?u.concat(this.template.children||[]):u}},{key:"render",value:function(){var e=this.backgroundImage,t=this.children,n=this.refreshIconSrc;return'\n      <view\n        id="container"\n        class="end"\n        bubble-event="false"\n      >\n        '+(e?'<image src="'+e+'"></image>':"")+"\n        "+t.map((function(e,t){return'\n          <CustomItem get-props="getSubComponentProps:'+t+'"></CustomItem>\n        '}))+'\n        <view id="refresh" class="end-refresh">\n          <image id="refresh-icon" class="end-refresh-icon" src='+n+"></image>\n        </view>\n      </view>\n    "}}]),n}(A);function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}ne.subComponents=function(){return{CustomItem:D}};var re=function(e){Object(s.default)(n,e);var t=ae(n);function n(e){var r;return Object(a.default)(this,n),(r=t.call(this,e,{autoRegister:!1})).forType=r.options.baseType||_.FOR_TYPES.COMMON,r.forArr=r.getDataValueWithDefault("forArr",[]),r.forType===_.FOR_TYPES.COMMON?r.forArr=r.getDataValueWithDefault("forArr",[]):r.forType===_.FOR_TYPES.ADS&&(r.forArr=r.getAdDatas()),r}return Object(r.default)(n,[{key:"getSubComponentProps",value:function(e,t,n){var a=this.template,r=this.forArr;return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{idPrefix:this.idPrefix+(a.id||"")+t,forType:this.forType,forItem:r[Number(t)],template:a.children[Number(n)],forIndex:Number(t)})}},{key:"render",value:function(){var e=this.props.template;return"<Fragment>"+this.forArr.map((function(t,n){return e.children.map((function(e,t){return'\n        <CustomItem get-props="getSubComponentProps:'+n+":"+t+'"></CustomItem>\n      '})).join("\n")})).join("\n")+"</Fragment>"}}]),n}(A);re.subComponents=function(){return{CustomItem:D}};var ie=n(121),oe=1,se=/([+-]?\d+(?:\.\d+)?)apx/g,ce=/([+-]?\d+(?:\.\d+)?)rpx/g,ue=function(e){return(null==e?void 0:e.replace)?e.replace(ce,(function(e,t){return function(e){if(0===e)return 0;var t=e/750*ie.deviceInfo.screenWidth;return t<0&&(t=-t),t=Math.floor(t+1e-4),e<0?-t:t}(Number(t))+"px"})):e};function le(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return de(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return de(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function de(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}var pe=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))},he=function(e){Object(s.default)(n,e);var t=fe(n);function n(e){var r;return Object(a.default)(this,n),(r=t.call(this,e)).style={".carousel":{overflow:"hidden",position:"relative"},".carousel-list":{position:"relative",zIndex:1},".carousel-row":{flexDirection:"row",alignItems:"center",justifyContent:"center"},".carousel-col":{flexDirection:"column",alignItems:"center",justifyContent:"center"},".carousel-mask":{position:"absolute",width:"100%",height:"100%",zIndex:2000001,backgroundColor:"rgba(0, 0, 0, 0)"}},r.isViewable=!1,r.isPlaying=!1,r.animated=!1,r.timerSet=new Set,r.handleMaskClick=function(e){var t,n=null!=r.moveTime?(Date.now()-r.moveTime)/r.duration*r.size:0;t=r.animated?-r.animateCount*r.size+n:-n;var a=(r.isCol?e.relativeY:e.relativeX)-t,i=Math.floor(a/r.size);r.emitComponentEvent(_.CAROUSEL_EVENT.UNITTAP,{index:i,event:e})},r.handleAdCustomEvent=function(e){var t=e.action;[_.CUSTOM_EVENT.ADSHOWHALF].includes(t)?(r.isViewable=!0,r.autoplay()):[_.CUSTOM_EVENT.ADHIDEHALF].includes(t)&&(r.isViewable=!1,r.clearTimers())},r.moveTime=null,r.baseType=r.options.baseType||_.CAROUSEL_TYPES.ROWLOOP,r.showCount=r.getDataValueWithDefault("showCount",0),r.allCount=r.getDataValueWithDefault("allCount",0),r.animateCount=r.allCount-r.showCount,r.size=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?e:ue(e);return t&&"string"==typeof t?t.replace(se,(function(e,t){return Number(t*oe)+"px"})):t}(r.getDataValueWithDefault("size","0px")).replace("px",""),r.duration=r.getDataValueWithDefault("duration",1500),r.disabled=r.getDataValueWithDefault("disabled",!1),r.allIndexList=Array.from({length:r.allCount}).map((function(e,t){return t})),r.isCol=r.baseType===_.CAROUSEL_TYPES.COLUMNLOOP,r.onClick("mask",r.handleMaskClick),r.baseType===_.CAROUSEL_TYPES.ROWLOOP?r.initCarousel("width"):r.baseType===_.CAROUSEL_TYPES.COLUMNLOOP&&r.initCarousel("height"),r.updateInnerStyle(),r}return Object(r.default)(n,[{key:"destroy",value:function(){Object(o.default)(Object(u.default)(n.prototype),"destroy",this).call(this),this.offClick("mask",this.handleMaskClick),this.clearTimers(),this.isViewable=!1}},{key:"initCarousel",value:function(e){this.setStyle("container",Object(d.default)({},e,this.showCount*this.size)),this.setStyle("list",Object(d.default)({},e,this.allCount*this.size)),this.addAdCustomListener(this.handleAdCustomEvent)}},{key:"clearTimers",value:function(){var e,t=le(this.timerSet);try{for(t.s();!(e=t.n()).done;){var n=e.value;clearTimeout(n)}}catch(e){t.e(e)}finally{t.f()}}},{key:"autoplay",value:function(){return pe(this,void 0,void 0,p.a.mark((function e(){var t,n,a,r,i=this;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isViewable&&!this.isPlaying){e.next=2;break}return e.abrupt("return");case 2:if(t=this.baseType===_.CAROUSEL_TYPES.ROWLOOP?"left":"top",!this.disabled){e.next=8;break}this.emitComponentEvent(_.CAROUSEL_EVENT.SHOWCHANGE,{list:this.allIndexList.slice(0,this.showCount)||[]}),this.isPlaying=!1,e.next=29;break;case 8:if(!(this.animateCount<=0)){e.next=13;break}this.emitComponentEvent(_.CAROUSEL_EVENT.SHOWCHANGE,{list:this.allIndexList||[]}),this.isPlaying=!1,e.next=29;break;case 13:for(this.isPlaying=!0,n=function(e){var t=i.animated,n=setTimeout((function(){i.timerSet.delete(n);var a=t?i.allIndexList.slice(i.allCount-e-i.showCount,i.allCount-e):i.allIndexList.slice(e,e+i.showCount);i.emitComponentEvent(_.CAROUSEL_EVENT.SHOWCHANGE,{list:a})}),e*i.duration);i.timerSet.add(n)},a=0;a<this.animateCount;a+=1)n(a);return this.moveTime=Date.now(),e.prev=17,e.next=20,this.doAnimation({id:"list",emitEvent:!1,animation:{keys:[Object(d.default)({offset:0},t,this.animated?-1*this.animateCount*this.size:0),Object(d.default)({offset:1},t,this.animated?0:-1*this.animateCount*this.size)],duration:this.duration*this.animateCount,easing:"linear"}});case 20:e.next=24;break;case 22:e.prev=22,e.t0=e.catch(17);case 24:this.animated=!this.animated,this.isPlaying=!1,this.moveTime=null,r=setTimeout((function(){i.timerSet.delete(r),i.autoplay()}),this.duration/4),this.timerSet.add(r);case 29:case"end":return e.stop()}}),e,this,[[17,22]])})))}},{key:"getCustomItemProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.props.template.children[parseInt(t,10)]})}},{key:"render",value:function(){var e=this.props.template.children,t=this.baseType,n=this.allCount,a=this.showCount;return e&&e.length&&n&&a?'\n      <view id="container" class="carousel">\n        <view id="mask" class="carousel-mask"></view>\n        <view id="list" class="'+["carousel-list",t===_.CAROUSEL_TYPES.ROWLOOP?"carousel-row":"carousel-col"].join(" ")+'">\n          '+e.map((function(e,t){return'\n            <CustomItem get-props="getCustomItemProps:'+t+'"></CustomItem>\n          '})).join("\n")+"\n        </view>\n      </view>\n    ":"<view></view>"}}]),n}(A);function ve(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(u.default)(e);if(t){var r=Object(u.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(c.default)(this,n)}}he.subComponents=function(){return{CustomItem:D}};var ge=function(e){Object(s.default)(n,e);var t=ve(n);function n(e){var r;return Object(a.default)(this,n),(r=t.call(this,e)).style={".countdown":{position:"relative",flexDirection:"row",height:32,alignItems:"center"},".countdown-background":{position:"absolute",top:0,bottom:0,left:0,right:0,height:32,background:"rgba(0, 0, 0, 0.15)",border:"0.5px solid rgba(255, 255, 255, 0.254048)",borderRadius:16},".countdown-right":{position:"relative",height:32,flexDirection:"row",alignItems:"center",alignSelf:"flex-start",paddingLeft:63,paddingRight:12,justifyContent:"center",background:"rgba(0, 0, 0, 0.15)",borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,borderRadius:16},".countdown-container":{height:32,flexDirection:"row",alignItems:"center",justifyContent:"center",position:"relative"},".countdown-text":{fontSize:14,height:20,lineHeight:20,width:14,color:"#fff",alignSelf:"center",position:"relative"},".countdown-value":{fontSize:14,height:20,lineHeight:20,width:11,color:"#fff",alignSelf:"center",position:"relative"},".split-line":{width:.5,height:18.5,marginRight:8.5,position:"relative",backgroundColor:"rgba(255, 255, 255, 0.25)"}},r.state={countdownValue:""},r.children=[],r.handleAdCustomEvent=function(e){var t=e.action,n=e.value,a=void 0===n?{}:n;if(t===_.CUSTOM_EVENT.CHANGECOUNTDOWN){var i=r.getElementById("countdownvalue"),o=2===a.value.toString().length?18:11;r.setStyle("countdownvalue",{width:o}),i&&(i.value=a.value)}},r.children=r.getChildren(),r.updateInnerStyle(),r.addAdCustomListener(r.handleAdCustomEvent),r}return Object(r.default)(n,[{key:"destroy",value:function(){Object(o.default)(Object(u.default)(n.prototype),"destroy",this).call(this)}},{key:"getSubComponentProps",value:function(e,t){return Object.assign(Object.assign({},this.getCommonSubComponentProps()),{template:this.children[parseInt(t,10)]})}},{key:"getChildren",value:function(){var e=this.getDataValueWithDefault("childType",1);if(2===e)return this.template.children||[];var t=this.getAdData(),n={pos_type:t.pos_type,costtype:t.is_cpm?1:2,slotid:"4071202390577885",is_game:0},a={};a.feedBack={type:"feedback",id:"Countdown-Feedback",style:{position:"absolute",height:32,display:"flex",alignItems:"center",justifyContent:"center",zIndex:1111999,left:12},options:{innerStyles:{container:{style:{height:32,padding:0}},feedbackTag:{style:{fontSize:14,width:28,height:20,lineHeight:20}},feedbackTagContainer:{style:{backgroundColor:"",borderRadius:0,padding:0,height:32,top:0,left:0}},feedbackIcon:{style:{marginLeft:4.5,width:9,height:6,marginTop:4}},menu1:{style:{top:40,left:0}},menu2:{style:{top:40,left:0}}},events:{tagTap:[{action:_.ACTIONS.REPORTMMDATA,value:{id:"19002",data:Object.assign({act_type:1004},n)}}],dislikeReasonTap:[{action:_.ACTIONS.TRIGGEREVENT,value:{eventName:_.ENDPAGE_EVENT.VIDEODISLIKE}}]},data:{}}};var r=this.getDataValue("childrenConf");if(r)for(var i=0,o=Object.keys(r);i<o.length;i++){var s=o[i];a[s]&&Object(W.mergeDeep)(a[s],r[s])}var c=[];return c=[a.feedBack],3===e?c.concat(this.template.children||[]):c}},{key:"render",value:function(){return'\n      <view id="container" class="countdown" bubble-event="false">\n        '+this.children.map((function(e,t){return'\n          <CustomItem get-props="getSubComponentProps:'+t+'"></CustomItem>\n        '}))+'\n        <view class="countdown-right">\n          <view id="split-line" class="split-line"></view>\n          <view id="countdown-container" class="countdown-container">\n            <text class="countdown-value" id="countdownvalue" value="5"></text>\n            <text class="countdown-text" value="秒"></text>\n          </view>\n        </view>\n      </view>\n    '}}]),n}(A);ge.subComponents=function(){return{CustomItem:D}};t.default=j},function(e,t,n){n.r(t),function(e){n.d(t,"wxSAB",(function(){return h})),n.d(t,"createSharedArrayBuffer",(function(){return g})),n.d(t,"getSharedArrayBuffer",(function(){return y})),n.d(t,"SharedArrayBuffer",(function(){return v})),n.d(t,"unpackSharedArrayBuffer",(function(){return m}));var a=n(4),r=n(5),i=n(12),o=n(10),s="function"==typeof wxNativeConsole?wxNativeConsole.createLogger("SharedArrayBuffer"):wxConsole,c=0,u=1,l=2,d=new WeakMap,f=new Map,p=ArrayBuffer,h="undefined"==typeof WeixinSharedBuffer?{}:WeixinSharedBuffer;"undefined"==typeof WeixinSharedBuffer&&("undefined"!=typeof __global?p=__global.SharedArrayBuffer:e.SharedArrayBuffer&&(p=e.SharedArrayBuffer));var v=function(){function e(t,n){if(Object(a.default)(this,e),s.log("constructor length="+t+", sabId="+n),!Object(i.isNumber)(t)||t<0)throw new o.ThirdScriptError("Invalid array buffer length "+t);if(Object(i.isNumber)(n)){var r;s.info("get buffer with sabId: "+n);try{r=h.get(n)}catch(e){throw s.error("WeixinSharedBuffer.get"+n+" fail: "+e.message),new Error("WeixinSharedBuffer.get"+n+" fail: "+e.message)}Object.defineProperty(this,"buffer",{value:r,writable:!1,enumerable:!0}),Object.defineProperty(this,"_sabId",{value:n,enumerable:!0,writable:!1})}else{s.info("new ArrayBuffer with length: "+t),Object.defineProperty(this,"buffer",{value:new p(t),writable:!1,enumerable:!0});var u=h.new(this.buffer);s.info("sabId: "+u),Object.defineProperty(this,"_sabId",{value:u,enumerable:!0,writable:!1})}var l={writeStatus:c,readStatus:c,writeLockCallbacks:[],readLockCallbacks:[],writeLockId:void 0,readLockId:void 0,destroyed:!1};d.set(this,l),f.set(this._sabId,this),s.log("["+this._sabId+"] created:",this.buffer)}return Object(r.default)(e,[{key:"destroy",value:function(){s.warn("["+this._sabId+"][destroy()]");var e=d.get(this);e.writeLockCallbacks=[],e.readLockCallbacks=[],f.delete(this._sabId),d.get(this).destroyed=!0,this.unlock(),h.destroy(this._sabId)}},{key:"lock",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=!0;var n=d.get(this),a=n.destroyed,r=n.writeStatus,c=n.readStatus,f=n.writeLockCallbacks,p=n.readLockCallbacks;if(a)throw new o.ThirdScriptError("SharedArrayBuffer has been destroyed");if(!Object(i.isFunction)(e))throw new o.ThirdScriptError("callback must be a function");if(r!==l)if(t)f.push(e),r===u||(n.writeStatus=u,n.writeLockId=h.Lock(this._sabId,(function(){f.forEach((function(e){return e()})),p.forEach((function(e){return e()})),n.writeStatus=l,n.writeLockCallbacks=[],n.readLockCallbacks=[]})));else{if(c===l)return s.info("["+this._sabId+"][lock()] readStatus is locked, callback immediately"),void e();p.push(e),c===u||r===u||(n.readLockId=h.Lock(this._sabId,(function(){p.forEach((function(e){return e()})),n.readStatus=l,n.readLockCallbacks=[]})),n.readStatus=u)}else e()}},{key:"unlock",value:function(){var e=d.get(this),t=e.writeLockId,n=e.readLockId,a=e.writeStatus,r=e.readStatus;e.destroyed?console.warn("unlock: SharedArrayBuffer has been destroyed"):(a!==u&&a!==l||(h.Unlock(this._sabId,t),e.writeStatus=c,e.writeLockId=void 0,e.writeLockCallbacks=[]),r!==u&&r!==l||(h.Unlock(this._sabId,n),e.readStatus=c,e.readLockId=void 0,e.readLockCallbacks=[]))}}]),e}(),g=function(e){return new v(e)},y=function(e){return s.info("[getSharedArrayBuffer] sabId="+e),f.has(e)?(s.info("[getSharedArrayBuffer] return existed object"),f.get(e)):(s.info("[getSharedArrayBuffer] return new object"),new v(0,e))},m=function e(t){return s.log("[unpackSharedArrayBuffer]",t),Object(i.isObject)(t)?(s.log("[unpackSharedArrayBuffer] isObject"),Object(i.isNumber)(t._sabId)?(s.info("[unpackSharedArrayBuffer] sabId is number"),y(t._sabId)):Object.keys(t).reduce((function(n,a){var r=t[a];return n[a]=e(r),n}),{})):Object(i.isArray)(t)?t.map(e):t}}.call(this,n(64))},function(e,t,n){n.r(t),n.d(t,"createVideoContext",(function(){return U})),n.d(t,"createSQVideoContext",(function(){return G})),n.d(t,"VideoContext",(function(){return N})),n.d(t,"getVideoElementByContext",(function(){return V})),n.d(t,"playerInfo",(function(){return D})),n.d(t,"pipInfo",(function(){return S}));var a=n(14),r=n(17),i=n(8),o=n(16),s=n(5),c=n(4),u=n(34),l=n(0),d=n(10),f=n(69),p=n(43),h=n(6),v=n(1),g=n(2);function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(i.default)(e);if(t){var o=Object(i.default)(this).constructor;n=Reflect.construct(a,arguments,o)}else n=a.apply(this,arguments);return Object(r.default)(this,n)}}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){Object(o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=g.IS_DEVTOOLS||g.IS_WINDOWS||g.IS_MAC||g.IS_MINA,O={},I={},S={},E=new u.EventEmitter2,w={},C=new WeakMap,k={},T={},A=["play","pause","stop","seek","sendDanmu","playbackRate","requestFullScreen","exitFullScreen","showStatusBar","hideStatusBar","exitPictureInPicture","requestBackgroundPlayback","exitBackgroundPlayback","hidePoster"],P={},D={},x=v.default.useXWebVideo,R=!0,j=Object.keys;function M(e){w[e]||(w[e]=!0,Object(p.onBeforeUnloadPage)(e,(function(e){delete w[e],j(O).concat(j(I)).forEach((function(t){new RegExp("^"+e).test(t)&&delete O[t]})),j(k).forEach((function(t){(new RegExp("^api_"+e).test(t)||new RegExp("^SQ_"+e).test(t))&&delete k[t]})),g.IS_MINA&&Object(l.invokeMethod)("setKeepScreenOn",{keepScreenOn:!1},{})})))}Object(l.subscribe)("updateVideoPictureInPicture",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;S.webviewId=t,S.playerId=e.playerId})),Object(l.subscribe)("videoAdPlay",(function(e,t){var n=e.videoPlayerId,a=e.type;T[t+"_"+n]=a})),Object(l.subscribe)("videoPlayerInsert",(function(e,t){var n=e.domId,a=e.videoPlayerId,r=e.pluginId,i=e.nodeId,o=e.nodeInfo,s=e.data,c=t+"_"+r+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(c+=i),O[c]=a,function(e,t,n){if(!g.IS_DEVTOOLS)return;var a=document.createElement("video");e.elem=a,I[n+"_"+t]=e,a.controls=!1,a.preload="auto",a.muted=!0,a.autoplay=e.autoplay,a.style.width=e.width+"px",a.style.height=e.height+"px"}(o,a,t),E.emit("videoPlayerInsert"),M(t),D[t+"_"+a]=s||{}})),Object(l.subscribe)("xWebVideoInserted",(function(e,t){var n=e.domId,a=e.viewId,r=e.pluginId,i=e.nodeId,o=e.data,s=t+"_"+r+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(s+=i),O[s]=a,D[t+"_"+a]=o||{},E.emit("videoPlayerInsert"),M(t)})),Object(l.subscribe)("videoPlayerUpdated",(function(e,t){var n=e.action,a=e.value;W({_videoId:e.videoPlayerId,_webviewId:t},n,a)})),Object(l.subscribe)("videoPlayerRemoved",(function(e,t){var n=e.domId,a=e.videoPlayerId,r=e.pluginId,i=e.nodeId,o=t+"_"+r+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(o+=i),delete O[o],function(e,t){delete I[t+"_"+e]}(a,t);var s="api_"+t+"_"+r+"_"+n+"_";i&&i!==__virtualDOM__.getRootNodeId(t)&&(s+=i);var c="SQ_"+t+"_"+a;delete k[s],delete k[c],delete D[t+"_"+a]})),Object(l.subscribe)("xWebVideoRemoved",(function(e,t){var n=e.domId,a=e.pluginId,r=e.nodeId,i=t+"_"+a+"_"+n+"_";r&&r!==__virtualDOM__.getRootNodeId(t)&&(i+=r);var o=O[i];delete O[i],delete D[t+"_"+o]})),Object(l.subscribe)("xWebVideoSupported",(function(e){var t=e.isXWebSupported;x=x&&t})),Object(l.subscribe)("insertVideoToWebLayerStateChanged",(function(e,t){var n=e.viewId,a=e.inserted;P[t+"_"+n]=a})),v.default.onReady((function(){v.default.global&&v.default.global.window&&"seperated"===v.default.global.window.renderingMode&&(R=!1,x=!1)}));var N=Object(s.default)((function e(){Object(c.default)(this,e)})),L=function(){function e(t,n){var a=this;Object(c.default)(this,e);var r=this.exportContext=new N;A.forEach((function(e){r[e]=a[e].bind(a)})),r._videoId=t,r._webviewId=n}return Object(s.default)(e,[{key:"play",value:function(){var e=this._getAppStatus();e===f.AppStatus.BACK_GROUND||e===f.AppStatus.LOCK||this._invokeMethod("play")}},{key:"pause",value:function(){this._invokeMethod("pause")}},{key:"stop",value:function(){this._invokeMethod("stop")}},{key:"seek",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"accurate";if("accurate"!==t&&"inaccurate"!==t)throw new d.ThirdScriptError("Parameter 2 must either be `accurate` or be `inaccurate`");this._invokeMethod("seek",[e,t])}},{key:"sendDanmu",value:function(e){var t=e.text,n=e.color;this._invokeMethod("sendDanmu",[t,n])}},{key:"playbackRate",value:function(e){.5!==(e=parseFloat(e.toFixed(2)))&&.8!==e&&1!==e&&1.25!==e&&1.5!==e&&2!==e||this._invokeMethod("playbackRate",[e])}},{key:"requestFullScreen",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.direction;[0,90,-90].indexOf(t)>-1?this._invokeMethod("requestFullScreen",[t]):this._invokeMethod("requestFullScreen"),C.set(this,!0)}},{key:"exitFullScreen",value:function(){this._invokeMethod("exitFullScreen"),this.showStatusBar(),C.set(this,!1)}},{key:"showStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(l.invokeMethod)("showStatusBar",e)}},{key:"hideStatusBar",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(g.IS_ANDROID){var t="hideStatusBar:ok";return"function"==typeof e.success&&e.success({errMsg:t}),void("function"==typeof e.complete&&e.complete({errMsg:t}))}if(!C.get(this)){var n="hideStatusBar:fail cannot be invoked but in fullscreen.";return"function"==typeof e.fail&&e.fail({errMsg:n}),void("function"==typeof e.complete&&e.complete({errMsg:n}))}Object(l.invokeMethod)("hideStatusBar",e)}},{key:"exitPictureInPicture",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(S){var t=S.playerId;g.IS_IOS?Object(l.invokeMethod)("operateVideoPlayer",b(b({},e),{},{videoPlayerId:t,type:"exitPictureInPicture"}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateVideoPlayer","exitPictureInPicture")}}):g.IS_ANDROID&&Object(l.invokeMethod)("operateXWebVideo",b(b({},e),{},{viewId:t,type:"exitPictureInPicture"}),{beforeAll:function(e){e.errMsg=e.errMsg.replace("operateXWebVideo","exitPictureInPicture")}})}}},{key:"requestBackgroundPlayback",value:function(){this._invokeMethod("requestBackgroundPlayback",[])}},{key:"exitBackgroundPlayback",value:function(){this._invokeMethod("exitBackgroundPlayback",[])}},{key:"hidePoster",value:function(){this._invokeMethod("hidePoster")}},{key:"_invokeMethodWithId",value:function(e,t,n){var a=this;"number"==typeof e?function(){if("begin"!==T[this.webviewId+"_"+e])if(R&&(g.IS_ANDROID&&x||g.IS_IOS&&P[this.webviewId+"_"+e])&&["requestFullScreen","exitFullScreen","sendDanmu","seek","stop","play"].indexOf(t)>-1)Object(l.publish)("video_"+this.webviewId+"_"+e+"_actionChanged",{method:t,data:n},[this.webviewId]);else{var a=this._getAppStatus();if(!_&&a===f.AppStatus.BACK_GROUND&&"stop"===t){var r="operateVideoPlayerBackground";return g.IS_ANDROID&&x&&(r="operateXWebVideoBackground"),void Object(l.invokeMethod)(r,{viewId:e,videoPlayerId:e,type:t})}_?(this._sendAction(e,{method:t,data:n}),["play","pause","stop","seek","playbackRate"].indexOf(t)>-1&&W(this.exportContext,t,n&&n[0])):g.IS_ANDROID&&x?Object(l.invokeMethod)("operateXWebVideo",{viewId:e,type:t,data:n}):Object(l.invokeMethod)("operateVideoPlayer",{data:n,videoPlayerId:e,type:t})}else console.error(t+":fail cannot operate video while ad playing.")}.apply(this):E.once("videoPlayerInsert",(function(){a._invokeMethod(t,n)}))}},{key:"_sendActionWithEvnetName",value:function(e,t){Object(l.publish)(e,t,[this.webviewId])}},{key:"_getAppStatus",value:function(){return h.default.appStatus}},{key:"_getHanged",value:function(){return h.default.hanged}}]),e}(),B=function(e){Object(a.default)(n,e);var t=y(n);function n(e,a,r,i){var o;if(Object(c.default)(this,n),o=t.call(this),"string"!=typeof e)throw new d.ThirdScriptError("Parameter 1 should be a string");return o.domId=e,o.webviewId=a,o.pluginId=i,o.nodeId=r,o}return Object(s.default)(n,[{key:"_invokeMethod",value:function(e,t){var n=this.webviewId+"_"+this.pluginId+"_"+this.domId+"_"+this.nodeId,a=O[n];this._invokeMethodWithId(a,e,t)}},{key:"_sendAction",value:function(e,t){this._sendActionWithEvnetName("video_"+this.webviewId+"_"+e+"_actionChanged",t)}}]),n}(L),F=function(e){Object(a.default)(n,e);var t=y(n);function n(e,a){var r;return Object(c.default)(this,n),(r=t.call(this,e,a)).videoPlayerId=e,r.webviewId=a,r}return Object(s.default)(n,[{key:"_invokeMethod",value:function(e,t){var n=this.videoPlayerId;this._invokeMethodWithId(n,e,t)}},{key:"_sendAction",value:function(e,t){this._sendActionWithEvnetName("video_"+this.webviewId+"_"+e+"_actionChanged",t)}}]),n}(L);function W(e,t,n){if(g.IS_DEVTOOLS&&void 0!==e._webviewId){var a=I[e._webviewId+"_"+e._videoId].elem;switch(t){case"setSrc":a.src=n;break;case"play":a.play();break;case"pause":case"stop":a.pause();break;case"seek":0===a.readyState||1===a.readyState?a.oncanplay=function(){a.currentTime=n,a.oncanplay=null}:a.currentTime=n;break;case"playbackRate":a.playbackRate=n}}}function V(e){return I[e._webviewId+"_"+e._videoId].elem}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",r="api_"+t+"_"+a+"_"+e+"_";if(n&&n!==__virtualDOM__.getRootNodeId(t)&&(r+=n),k[r])return k[r].exportContext;var i=new B(e,t,n,a);return k[r]=i,i.exportContext}function G(e,t){var n="SQ_"+t+"_"+e;if(k[n])return k[n].exportContext;var a=new F(e,t);return k[n]=a,a.exportContext}},function(e,t,n){var a=n(168),r=n(170);function i(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}t.parse=b,t.resolve=function(e,t){return b(e,!1,!0).resolve(t)},t.resolveObject=function(e,t){return e?b(e,!1,!0).resolveObject(t):t},t.format=function(e){r.isString(e)&&(e=b(e));return e instanceof i?e.format():i.prototype.format.call(e)},t.Url=i;var o=/^([a-z0-9.+-]+:)/i,s=/:[0-9]*$/,c=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,u=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),l=["'"].concat(u),d=["%","/","?",";","#"].concat(l),f=["/","?","#"],p=/^[+a-z0-9A-Z_-]{0,63}$/,h=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,v={javascript:!0,"javascript:":!0},g={javascript:!0,"javascript:":!0},y={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},m=n(171);function b(e,t,n){if(e&&r.isObject(e)&&e instanceof i)return e;var a=new i;return a.parse(e,t,n),a}i.prototype.parse=function(e,t,n){if(!r.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var i=e.indexOf("?"),s=-1!==i&&i<e.indexOf("#")?"?":"#",u=e.split(s);u[0]=u[0].replace(/\\/g,"/");var b=e=u.join(s);if(b=b.trim(),!n&&1===e.split("#").length){var _=c.exec(b);if(_)return this.path=b,this.href=b,this.pathname=_[1],_[2]?(this.search=_[2],this.query=t?m.parse(this.search.substr(1)):this.search.substr(1)):t&&(this.search="",this.query={}),this}var O=o.exec(b);if(O){var I=(O=O[0]).toLowerCase();this.protocol=I,b=b.substr(O.length)}if(n||O||b.match(/^\/\/[^@\/]+@[^@\/]+/)){var S="//"===b.substr(0,2);!S||O&&g[O]||(b=b.substr(2),this.slashes=!0)}if(!g[O]&&(S||O&&!y[O])){for(var E,w,C=-1,k=0;k<f.length;k++){-1!==(T=b.indexOf(f[k]))&&(-1===C||T<C)&&(C=T)}-1!==(w=-1===C?b.lastIndexOf("@"):b.lastIndexOf("@",C))&&(E=b.slice(0,w),b=b.slice(w+1),this.auth=decodeURIComponent(E)),C=-1;for(k=0;k<d.length;k++){var T;-1!==(T=b.indexOf(d[k]))&&(-1===C||T<C)&&(C=T)}-1===C&&(C=b.length),this.host=b.slice(0,C),b=b.slice(C),this.parseHost(),this.hostname=this.hostname||"";var A="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!A)for(var P=this.hostname.split(/\./),D=(k=0,P.length);k<D;k++){var x=P[k];if(x&&!x.match(p)){for(var R="",j=0,M=x.length;j<M;j++)x.charCodeAt(j)>127?R+="x":R+=x[j];if(!R.match(p)){var N=P.slice(0,k),L=P.slice(k+1),B=x.match(h);B&&(N.push(B[1]),L.unshift(B[2])),L.length&&(b="/"+L.join(".")+b),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),A||(this.hostname=a.toASCII(this.hostname));var F=this.port?":"+this.port:"",W=this.hostname||"";this.host=W+F,this.href+=this.host,A&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==b[0]&&(b="/"+b))}if(!v[I])for(k=0,D=l.length;k<D;k++){var V=l[k];if(-1!==b.indexOf(V)){var U=encodeURIComponent(V);U===V&&(U=escape(V)),b=b.split(V).join(U)}}var G=b.indexOf("#");-1!==G&&(this.hash=b.substr(G),b=b.slice(0,G));var H=b.indexOf("?");if(-1!==H?(this.search=b.substr(H),this.query=b.substr(H+1),t&&(this.query=m.parse(this.query)),b=b.slice(0,H)):t&&(this.search="",this.query={}),b&&(this.pathname=b),y[I]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var Y=this.search||"";this.path=F+Y}return this.href=this.format(),this},i.prototype.format=function(){var e=this.auth||"";e&&(e=(e=encodeURIComponent(e)).replace(/%3A/i,":"),e+="@");var t=this.protocol||"",n=this.pathname||"",a=this.hash||"",i=!1,o="";this.host?i=e+this.host:this.hostname&&(i=e+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(i+=":"+this.port)),this.query&&r.isObject(this.query)&&Object.keys(this.query).length&&(o=m.stringify(this.query));var s=this.search||o&&"?"+o||"";return t&&":"!==t.substr(-1)&&(t+=":"),this.slashes||(!t||y[t])&&!1!==i?(i="//"+(i||""),n&&"/"!==n.charAt(0)&&(n="/"+n)):i||(i=""),a&&"#"!==a.charAt(0)&&(a="#"+a),s&&"?"!==s.charAt(0)&&(s="?"+s),t+i+(n=n.replace(/[?#]/g,(function(e){return encodeURIComponent(e)})))+(s=s.replace("#","%23"))+a},i.prototype.resolve=function(e){return this.resolveObject(b(e,!1,!0)).format()},i.prototype.resolveObject=function(e){if(r.isString(e)){var t=new i;t.parse(e,!1,!0),e=t}for(var n=new i,a=Object.keys(this),o=0;o<a.length;o++){var s=a[o];n[s]=this[s]}if(n.hash=e.hash,""===e.href)return n.href=n.format(),n;if(e.slashes&&!e.protocol){for(var c=Object.keys(e),u=0;u<c.length;u++){var l=c[u];"protocol"!==l&&(n[l]=e[l])}return y[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(e.protocol&&e.protocol!==n.protocol){if(!y[e.protocol]){for(var d=Object.keys(e),f=0;f<d.length;f++){var p=d[f];n[p]=e[p]}return n.href=n.format(),n}if(n.protocol=e.protocol,e.host||g[e.protocol])n.pathname=e.pathname;else{for(var h=(e.pathname||"").split("/");h.length&&!(e.host=h.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),n.pathname=h.join("/")}if(n.search=e.search,n.query=e.query,n.host=e.host||"",n.auth=e.auth,n.hostname=e.hostname||e.host,n.port=e.port,n.pathname||n.search){var v=n.pathname||"",m=n.search||"";n.path=v+m}return n.slashes=n.slashes||e.slashes,n.href=n.format(),n}var b=n.pathname&&"/"===n.pathname.charAt(0),_=e.host||e.pathname&&"/"===e.pathname.charAt(0),O=_||b||n.host&&e.pathname,I=O,S=n.pathname&&n.pathname.split("/")||[],E=(h=e.pathname&&e.pathname.split("/")||[],n.protocol&&!y[n.protocol]);if(E&&(n.hostname="",n.port=null,n.host&&(""===S[0]?S[0]=n.host:S.unshift(n.host)),n.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(""===h[0]?h[0]=e.host:h.unshift(e.host)),e.host=null),O=O&&(""===h[0]||""===S[0])),_)n.host=e.host||""===e.host?e.host:n.host,n.hostname=e.hostname||""===e.hostname?e.hostname:n.hostname,n.search=e.search,n.query=e.query,S=h;else if(h.length)S||(S=[]),S.pop(),S=S.concat(h),n.search=e.search,n.query=e.query;else if(!r.isNullOrUndefined(e.search)){if(E)n.hostname=n.host=S.shift(),(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift());return n.search=e.search,n.query=e.query,r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!S.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var w=S.slice(-1)[0],C=(n.host||e.host||S.length>1)&&("."===w||".."===w)||""===w,k=0,T=S.length;T>=0;T--)"."===(w=S[T])?S.splice(T,1):".."===w?(S.splice(T,1),k++):k&&(S.splice(T,1),k--);if(!O&&!I)for(;k--;k)S.unshift("..");!O||""===S[0]||S[0]&&"/"===S[0].charAt(0)||S.unshift(""),C&&"/"!==S.join("/").substr(-1)&&S.push("");var A,P=""===S[0]||S[0]&&"/"===S[0].charAt(0);E&&(n.hostname=n.host=P?"":S.length?S.shift():"",(A=!!(n.host&&n.host.indexOf("@")>0)&&n.host.split("@"))&&(n.auth=A.shift(),n.host=n.hostname=A.shift()));return(O=O||n.host&&S.length)&&!P&&S.unshift(""),S.length?n.pathname=S.join("/"):(n.pathname=null,n.path=null),r.isNull(n.pathname)&&r.isNull(n.search)||(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=e.auth||n.auth,n.slashes=n.slashes||e.slashes,n.href=n.format(),n},i.prototype.parseHost=function(){var e=this.host,t=s.exec(e);t&&(":"!==(t=t[0])&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)}},function(e,t){var n,a,r=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{a="function"==typeof clearTimeout?clearTimeout:o}catch(e){a=o}}();var c,u=[],l=!1,d=-1;function f(){l&&c&&(l=!1,c.length?u=c.concat(u):d=-1,u.length&&p())}function p(){if(!l){var e=s(f);l=!0;for(var t=u.length;t;){for(c=u,u=[];++d<t;)c&&c[d].run();d=-1,t=u.length}c=null,l=!1,function(e){if(a===clearTimeout)return clearTimeout(e);if((a===o||!a)&&clearTimeout)return a=clearTimeout,clearTimeout(e);try{a(e)}catch(t){try{return a.call(null,e)}catch(t){return a.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||s(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},function(e,t,n){n.r(t),function(e){n.d(t,"createMediaRecorder",(function(){return R}));var a=n(4),r=n(5),i=n(16),o=n(30),s=n(13),c=n.n(s),u=n(34),l=n(0),d=n(55),f=n(1),p=n(98),h=n(2),v=n(19);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){Object(i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=new u.default,b=new WeakMap,_=new WeakMap,O=new WeakMap,I=new WeakMap,S=new Map,E=new Map,w=function(e){return new Promise((function(t){return setTimeout(t,e)}))};function C(e){return k.apply(this,arguments)}function k(){return(k=Object(o.default)(c.a.mark((function e(t){var n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=I.get(t),e.next=3,n;case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function T(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise((function(n,a){v.default.MediaToolKit[e](t,(function(t){if(t&&t.errCode&&0!==t.errCode){var r=new Error(t.errMsg||e+" failed");return Object.assign(r,t),void a(r)}n(t)}))}))}function A(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},a=_.get(e),r=a.id,i=0;return a instanceof p.OffscreenCanvas&&(r=a.__id,i=a._offscreenCanvasId),Object(l.invokeMethodAsync)("operateMediaRecorder",y(y({},n),{},{canvasId:r,offScreenCanvasId:i,operationType:t}))}Object(l.onMethod)("onMediaRecorderStateChange",(function(e){var t,n,a=e.state,r=e.canvasId<<0;if(r=S.has(r)?S.get(r):r,delete e.state,"timeUpdate"===a)m.emit(r,{event:"timeupdate",data:{currentTime:e.currentTime}});else if("error"===a){var i=(t=e.errCode,(n={101:{code:d.error.MediaRecorder_StartDurationInvalid,message:"MediaRecorder.start:fail duration invalid"},103:{code:d.error.MediaRecorder_StartWhileAlreadyStartRecording,message:"MediaRecorder.start:fail start while already start recording"},104:{code:d.error.MediaRecorder_StartWhilePaused,message:"MediaRecorder.start:fail start while paused"},106:{code:d.error.MediaRecorder_StartBitRateInvalid,message:"MediaRecorder.start:fail bitrate invalid"},107:{code:d.error.MediaRecorder_StartFPSInvalid,message:"MediaRecorder.start:fail fps invalid"},108:{code:d.error.MediaRecorder_StartGOPInvalid,message:"MediaRecorder.start:fail gop invalid"},201:{code:d.error.MediaRecorder_PauseWhileNotStartRecording,message:"MediaRecorder.pause:fail pause while not start recording"},202:{code:d.error.MediaRecorder_PauseWhileAlreadyPaused,message:"MediaRecorder.pause:fail pause while already paused"},301:{code:d.error.MediaRecorder_ResumeWhileNotStartRecording,message:"MediaRecorder.resume:fail resume while not start recording"},302:{code:d.error.MediaRecorder_ResumeWhileRecording,message:"MediaRecorder.resume:fail resume while recording"},401:{code:d.error.MediaRecorder_AbortWhileNotStartRecording,message:"MediaRecorder.abort:fail abort while not start recording"},501:{code:d.error.MediaRecorder_StopWhileNotStartRecording,message:"MediaRecorder.stop:fail stop while not start recording"},503:{code:d.error.Global_FileStorageNotEnough,message:"MediaRecorder.stop:fail file storage not enough"}})[t]?n[t]:[102,110,111,502,710,810].includes(t)?{code:d.error.MediaRecorder_InternalFailed,message:"MediaRecorder:fail internal failed"}:{code:d.error.MediaRecorder_UnknownError,message:"MediaRecorder:fail unknown error"});m.emit(r,{event:"error",data:{error:i}})}}));var P=!1;function D(){h.IS_ANDROID&&(P||(P=!0,v.default.MediaToolKit.addEventListener("onRecorderTimeUpdate",(function(e){if(E.has(e.containerId)){var t=E.get(e.containerId);m.emit(t,{event:"timeupdate",data:{currentTime:e.stamp}})}}))))}var x=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(a.default)(this,t),_.set(this,e);var i=new u.default;b.set(this,i),m.on(e.id,(function(e){var t=e.event,n=e.data;return i.emit(t,n)})),"number"==typeof r.duration?this.duration=Math.min(7200,Math.max(5,r.duration)):this.duration=7200,"number"==typeof r.videoBitsPerSecond?this.videoBitsPerSecond=Math.min(3e3,Math.max(600,r.videoBitsPerSecond)):this.videoBitsPerSecond=1e3,this.fps=r.fps||24,this.gop=r.gop||12,this.timeUpdateInterval=r.timeUpdateInterval||this.gop,this.audioPlayerId=r.audioPlayerId;var s=Object(o.default)(c.a.mark((function t(){var a;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!h.IS_ANDROID){t.next=9;break}return D(),t.next=4,T("recorderCreate",{});case 4:a=t.sent,n._containerId=a.containerId,E.set(n._containerId,e.id),t.next=12;break;case 9:return t.next=11,A(n,"create",{});case 11:e instanceof p.OffscreenCanvas&&S.set(e.__id,e.id);case 12:i.emit("create",{});case 13:case"end":return t.stop()}}),t)})))();I.set(this,s)}var n,i,s,d,g,y;return Object(r.default)(t,[{key:"pause",value:(y=Object(o.default)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(this);case 2:if(t=b.get(this),!h.IS_ANDROID){e.next=10;break}return e.next=6,T("recorderUpdate",{containerId:this._containerId,pause:!0});case 6:n=e.sent,t.emit("pause",n),e.next=13;break;case 10:return e.next=12,A(this,"pause",{});case 12:t.emit("pause");case 13:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"resume",value:(g=Object(o.default)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(this);case 2:if(t=b.get(this),!h.IS_ANDROID){e.next=10;break}return e.next=6,T("recorderUpdate",{containerId:this._containerId,pause:!1});case 6:n=e.sent,t.emit("resume",n),e.next=13;break;case 10:return e.next=12,A(this,"resume");case 12:t.emit("resume");case 13:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"start",value:(d=Object(o.default)(c.a.mark((function e(){var t,n,a,r,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(this);case 2:if(t=b.get(this),n=_.get(this),a={width:n.width,height:n.height,fps:this.fps,bitrate:this.videoBitsPerSecond,gop:this.gop,duration:this.duration,timeUpdateInterval:this.timeUpdateInterval,audioPlayerId:this.audioPlayerId,cumulativeStamp:!0},h.IS_IOS&&f.default.clientVersion<385879296?a.duration=Math.floor(this.duration):a.duration=Math.floor(1e3*this.duration),!h.IS_ANDROID){e.next=24;break}return e.next=9,Object(l.invokeMethodAsync)("private_fileSystemConvert",{operationType:"getWxFilePath",fileName:""+Date.now(),mimeType:"mp4",autoDeleteIfExists:!0});case 9:return r=e.sent,this.tempFilePath=r.localId,this._absoluteFilePath=r.filePath,i=n.id,n instanceof p.OffscreenCanvas&&(i=n._offscreenCanvasId),a.containerId=this._containerId,a.canvasId=i,a.notifyVideoKeyFrame=!0,a.filePath=r.filePath,e.next=20,T("recorderStart",a);case 20:o=e.sent,t.emit("start",o),e.next=27;break;case 24:return e.next=26,A(this,"start",a);case 26:t.emit("start");case 27:case"end":return e.stop()}}),e,this)}))),function(){return d.apply(this,arguments)})},{key:"stop",value:(s=Object(o.default)(c.a.mark((function e(){var t,n,a,r,i,o,s,u;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C(this);case 2:if(t=b.get(this),!h.IS_ANDROID){e.next=12;break}return e.next=6,T("recorderStop",{containerId:this._containerId});case 6:return e.next=8,T("analysis",{filePath:this._absoluteFilePath});case 8:a=e.sent,n={duration:a.duration,tempFilePath:this.tempFilePath,fileSize:a.size},e.next=20;break;case 12:return e.next=14,A(this,"stop");case 14:r=e.sent,i=r.tempFilePath,o=r.tempThumbPath,s=r.fileSize,u=r.duration,n={tempFilePath:i,tempThumbPath:o,fileSize:s,duration:u};case 20:return t.emit("stop",n),e.abrupt("return",n);case 22:case"end":return e.stop()}}),e,this)}))),function(){return s.apply(this,arguments)})},{key:"requestFrame",value:(i=Object(o.default)(c.a.mark((function t(){var n,a,r,i,o=this,s=arguments;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=s.length>0&&void 0!==s[0]?s[0]:function(){},t.next=3,C(this);case 3:if(a=_.get(this),!h.IS_ANDROID){t.next=18;break}return t.next=7,new Promise((function(e){v.default.MediaToolKit.recorderCapture({containerId:o._containerId},e)}));case 7:if(r=t.sent,i=1e3/this.fps,r.got){t.next=16;break}return t.next=12,w(i);case 12:return t.next=14,this.requestFrame(n);case 14:t.next=17;break;case 16:n();case 17:return t.abrupt("return");case 18:if(!(a instanceof p.OffscreenCanvas)){t.next=22;break}setTimeout((function(){n(),e.WeixinCanvas.recordFrame(a.__id,a._offscreenCanvasId)})),t.next=25;break;case 22:return t.next=24,new Promise((function(e){return a.requestAnimationFrame(e)}));case 24:n();case 25:case"end":return t.stop()}}),t,this)}))),function(){return i.apply(this,arguments)})},{key:"on",value:function(e,t){"timeUpdate"===e&&(e="timeupdate"),b.get(this).on(e,t)}},{key:"off",value:function(e,t){"timeUpdate"===e&&(e="timeupdate"),b.get(this).off(e,t)}},{key:"destroy",value:(n=Object(o.default)(c.a.mark((function e(){var t,n;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=_.get(this),m.removeAllListeners(t.id),(n=b.get(this)).eventNames().forEach((function(e){return n.removeAllListeners(e)})),!h.IS_ANDROID){e.next=12;break}return e.next=7,C(this);case 7:return E.delete(this._containerId),e.next=10,T("recorderRemove",{containerId:this._containerId});case 10:e.next=14;break;case 12:return e.next=14,A(this,"remove");case 14:case"end":return e.stop()}}),e,this)}))),function(){return n.apply(this,arguments)})}]),t}();function R(e,t){if(O.get(e))throw new Error("Already created by the same canvas node.");if(!e||"function"!=typeof e.getContext||!e.getContext("webgl"))throw new Error("Cannot get webgl context from target.");var n=new x(e,t);return O.set(e,n),n}}.call(this,n(64))},function(e,t,n){n.r(t),function(e){n.d(t,"OffscreenSkiaCanvasIOS",(function(){return v}));var a=n(4),r=n(5),i=n(28),o=n(14),s=n(17),c=n(8),u=n(20),l=n(35),d=n(151),f=n(50),p=n(86);function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var v=function(t){Object(o.default)(s,t);var n=h(s);function s(){return Object(a.default)(this,s),n.apply(this,arguments)}return Object(r.default)(s,[{key:"_initCanvasInstance",value:function(){return l.CanvasFontManager.initialize(d.CanvasFontManagerIOS),new e.Canvas(this.id)}},{key:"getContext",value:function(e,t){return Object(u.pipe)(f.decorateContextForImageProxy,p.temporarilyPatchContext)(Object(i.default)(Object(c.default)(s.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var t=new e.Image;return Object(u.wrapImageObject)(t,{nodeId:this.nodeId,pluginId:this.pluginId,webviewId:""})}}]),s}(n(110).OffscreenSkiaCanvas)}.call(this,n(64))},function(e,t,n){n.r(t),function(e){n.d(t,"OffscreenSkiaCanvasAndroid",(function(){return g}));var a=n(4),r=n(5),i=n(28),o=n(14),s=n(17),c=n(8),u=n(19),l=n(20),d=n(35),f=n(152),p=n(50),h=n(86);function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(c.default)(e);if(t){var r=Object(c.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(s.default)(this,n)}}var g=function(t){Object(o.default)(s,t);var n=v(s);function s(){return Object(a.default)(this,s),n.apply(this,arguments)}return Object(r.default)(s,[{key:"_initCanvasInstance",value:function(){d.CanvasFontManager.initialize(f.CanvasFontManagerAndroid);var t=(u.default.HTMLCanvasView||e.HTMLCanvasView).createView(this.id);return(u.default.HTMLCanvasElement||e.HTMLCanvasElement).createElement(t)}},{key:"getContext",value:function(e,t){return Object(l.pipe)(p.decorateContextForImageProxy,h.temporarilyPatchContext)(Object(i.default)(Object(c.default)(s.prototype),"getContext",this).call(this,e,t),this.id)}},{key:"createImage",value:function(){var e=new(u.default.SkiaImages||SkiaImage),t=Object(l.wrapImageObject)(e,{nodeId:this._nodeId,pluginId:this._pluginId,webviewId:""});return new p.SkiaImageProxy(t)}}]),s}(n(110).OffscreenSkiaCanvas)}.call(this,n(64))},function(e,t,n){var a=function(e){"use strict";var t,n=Object.prototype,a=n.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},i=r.iterator||"@@iterator",o=r.asyncIterator||"@@asyncIterator",s=r.toStringTag||"@@toStringTag";function c(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{c({},"")}catch(e){c=function(e,t,n){return e[t]=n}}function u(e,t,n,a){var r=t&&t.prototype instanceof g?t:g,i=Object.create(r.prototype),o=new T(a||[]);return i._invoke=function(e,t,n){var a=d;return function(r,i){if(a===p)throw new Error("Generator is already running");if(a===h){if("throw"===r)throw i;return P()}for(n.method=r,n.arg=i;;){var o=n.delegate;if(o){var s=w(o,n);if(s){if(s===v)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(a===d)throw a=h,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);a=p;var c=l(e,t,n);if("normal"===c.type){if(a=n.done?h:f,c.arg===v)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(a=h,n.method="throw",n.arg=c.arg)}}}(e,n,o),i}function l(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=u;var d="suspendedStart",f="suspendedYield",p="executing",h="completed",v={};function g(){}function y(){}function m(){}var b={};c(b,i,(function(){return this}));var _=Object.getPrototypeOf,O=_&&_(_(A([])));O&&O!==n&&a.call(O,i)&&(b=O);var I=m.prototype=g.prototype=Object.create(b);function S(e){["next","throw","return"].forEach((function(t){c(e,t,(function(e){return this._invoke(t,e)}))}))}function E(e,t){function n(r,i,o,s){var c=l(e[r],e,i);if("throw"!==c.type){var u=c.arg,d=u.value;return d&&"object"==typeof d&&a.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,o,s)}),(function(e){n("throw",e,o,s)})):t.resolve(d).then((function(e){u.value=e,o(u)}),(function(e){return n("throw",e,o,s)}))}s(c.arg)}var r;this._invoke=function(e,a){function i(){return new t((function(t,r){n(e,a,t,r)}))}return r=r?r.then(i,i):i()}}function w(e,n){var a=e.iterator[n.method];if(a===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,w(e,n),"throw"===n.method))return v;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return v}var r=l(a,e.iterator,n.arg);if("throw"===r.type)return n.method="throw",n.arg=r.arg,n.delegate=null,v;var i=r.arg;return i?i.done?(n[e.resultName]=i.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,v):i:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,v)}function C(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function k(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function T(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(C,this),this.reset(!0)}function A(e){if(e){var n=e[i];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function n(){for(;++r<e.length;)if(a.call(e,r))return n.value=e[r],n.done=!1,n;return n.value=t,n.done=!0,n};return o.next=o}}return{next:P}}function P(){return{value:t,done:!0}}return y.prototype=m,c(I,"constructor",m),c(m,"constructor",y),y.displayName=c(m,s,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===y||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,m):(e.__proto__=m,c(e,s,"GeneratorFunction")),e.prototype=Object.create(I),e},e.awrap=function(e){return{__await:e}},S(E.prototype),c(E.prototype,o,(function(){return this})),e.AsyncIterator=E,e.async=function(t,n,a,r,i){void 0===i&&(i=Promise);var o=new E(u(t,n,a,r),i);return e.isGeneratorFunction(n)?o:o.next().then((function(e){return e.done?e.value:o.next()}))},S(I),c(I,s,"Generator"),c(I,i,(function(){return this})),c(I,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var a=t.pop();if(a in e)return n.value=a,n.done=!1,n}return n.done=!0,n}},e.values=A,T.prototype={constructor:T,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(k),!e)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function r(a,r){return s.type="throw",s.arg=e,n.next=a,r&&(n.method="next",n.arg=t),!!r}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],s=o.completion;if("root"===o.tryLoc)return r("end");if(o.tryLoc<=this.prev){var c=a.call(o,"catchLoc"),u=a.call(o,"finallyLoc");if(c&&u){if(this.prev<o.catchLoc)return r(o.catchLoc,!0);if(this.prev<o.finallyLoc)return r(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return r(o.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return r(o.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var i=r;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var o=i?i.completion:{};return o.type=e,o.arg=t,i?(this.method="next",this.next=i.finallyLoc,v):this.complete(o)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),v},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),k(n),v}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var a=n.completion;if("throw"===a.type){var r=a.arg;k(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,a){return this.delegate={iterator:A(e),resultName:n,nextLoc:a},"next"===this.method&&(this.arg=t),v}},e}(e.exports);try{regeneratorRuntime=a}catch(e){"object"==typeof globalThis?globalThis.regeneratorRuntime=a:Function("r","regeneratorRuntime = r")(a)}},function(e,t,n){(function(a){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==a&&"env"in a&&(e=a.env.DEBUG),e}(t=e.exports=n(166)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),e.splice(i,0,a)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}).call(this,n(160))},function(e,t,n){var a;function r(e){function n(){if(n.enabled){var e=n,r=+new Date,i=r-(a||r);e.diff=i,e.prev=a,e.curr=r,a=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,a){if("%%"===n)return n;c++;var r=t.formatters[a];if("function"==typeof r){var i=o[c];n=r.call(e,i),o.splice(c,1),c--}return n})),t.formatArgs.call(e,o);var u=n.log||t.log||console.log.bind(console);u.apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,a=0;for(n in e)a=(a<<5)-a+e.charCodeAt(n),a|=0;return t.colors[Math.abs(a)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),a=n.length,r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,a;for(n=0,a=t.skips.length;n<a;n++)if(t.skips[n].test(e))return!1;for(n=0,a=t.names.length;n<a;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(167),t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,a=60*n,r=60*a,i=24*r,o=365.25*i;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*o;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*a;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?s(c=e,i,"day")||s(c,r,"hour")||s(c,a,"minute")||s(c,n,"second")||c+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=a)return Math.round(e/a)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){(function(e,a){var r;!function(i){t&&t.nodeType,e&&e.nodeType;var o="object"==typeof a&&a;o.global!==o&&o.window!==o&&o.self;var s,c=2147483647,u=36,l=/^xn--/,d=/[^\x20-\x7E]/,f=/[\x2E\u3002\uFF0E\uFF61]/g,p={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},h=Math.floor,v=String.fromCharCode;function g(e){throw RangeError(p[e])}function y(e,t){for(var n=e.length,a=[];n--;)a[n]=t(e[n]);return a}function m(e,t){var n=e.split("@"),a="";return n.length>1&&(a=n[0]+"@",e=n[1]),a+y((e=e.replace(f,".")).split("."),t).join(".")}function b(e){for(var t,n,a=[],r=0,i=e.length;r<i;)(t=e.charCodeAt(r++))>=55296&&t<=56319&&r<i?56320==(64512&(n=e.charCodeAt(r++)))?a.push(((1023&t)<<10)+(1023&n)+65536):(a.push(t),r--):a.push(t);return a}function _(e){return y(e,(function(e){var t="";return e>65535&&(t+=v((e-=65536)>>>10&1023|55296),e=56320|1023&e),t+=v(e)})).join("")}function O(e,t){return e+22+75*(e<26)-((0!=t)<<5)}function I(e,t,n){var a=0;for(e=n?h(e/700):e>>1,e+=h(e/t);e>455;a+=u)e=h(e/35);return h(a+36*e/(e+38))}function S(e){var t,n,a,r,i,o,s,l,d,f,p,v=[],y=e.length,m=0,b=128,O=72;for((n=e.lastIndexOf("-"))<0&&(n=0),a=0;a<n;++a)e.charCodeAt(a)>=128&&g("not-basic"),v.push(e.charCodeAt(a));for(r=n>0?n+1:0;r<y;){for(i=m,o=1,s=u;r>=y&&g("invalid-input"),((l=(p=e.charCodeAt(r++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:u)>=u||l>h((c-m)/o))&&g("overflow"),m+=l*o,!(l<(d=s<=O?1:s>=O+26?26:s-O));s+=u)o>h(c/(f=u-d))&&g("overflow"),o*=f;O=I(m-i,t=v.length+1,0==i),h(m/t)>c-b&&g("overflow"),b+=h(m/t),m%=t,v.splice(m++,0,b)}return _(v)}function E(e){var t,n,a,r,i,o,s,l,d,f,p,y,m,_,S,E=[];for(y=(e=b(e)).length,t=128,n=0,i=72,o=0;o<y;++o)(p=e[o])<128&&E.push(v(p));for(a=r=E.length,r&&E.push("-");a<y;){for(s=c,o=0;o<y;++o)(p=e[o])>=t&&p<s&&(s=p);for(s-t>h((c-n)/(m=a+1))&&g("overflow"),n+=(s-t)*m,t=s,o=0;o<y;++o)if((p=e[o])<t&&++n>c&&g("overflow"),p==t){for(l=n,d=u;!(l<(f=d<=i?1:d>=i+26?26:d-i));d+=u)S=l-f,_=u-f,E.push(v(O(f+S%_,0))),l=h(S/_);E.push(v(O(l,0))),i=I(n,m,a==r),n=0,++a}++n,++t}return E.join("")}s={version:"1.3.2",ucs2:{decode:b,encode:_},decode:S,encode:E,toASCII:function(e){return m(e,(function(e){return d.test(e)?"xn--"+E(e):e}))},toUnicode:function(e){return m(e,(function(e){return l.test(e)?S(e.slice(4).toLowerCase()):e}))}},void 0===(r=function(){return s}.call(t,n,t,e))||(e.exports=r)}()}).call(this,n(169)(e),n(64))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){e.exports={isString:function(e){return"string"==typeof e},isObject:function(e){return"object"==typeof e&&null!==e},isNull:function(e){return null===e},isNullOrUndefined:function(e){return null==e}}},function(e,t,n){t.decode=t.parse=n(172),t.encode=t.stringify=n(173)},function(e,t,n){function a(e,t){return Object.prototype.hasOwnProperty.call(e,t)}e.exports=function(e,t,n,i){t=t||"&",n=n||"=";var o={};if("string"!=typeof e||0===e.length)return o;var s=/\+/g;e=e.split(t);var c=1e3;i&&"number"==typeof i.maxKeys&&(c=i.maxKeys);var u=e.length;c>0&&u>c&&(u=c);for(var l=0;l<u;++l){var d,f,p,h,v=e[l].replace(s,"%20"),g=v.indexOf(n);g>=0?(d=v.substr(0,g),f=v.substr(g+1)):(d=v,f=""),p=decodeURIComponent(d),h=decodeURIComponent(f),a(o,p)?r(o[p])?o[p].push(h):o[p]=[o[p],h]:o[p]=h}return o};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)}},function(e,t,n){var a=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}};e.exports=function(e,t,n,s){return t=t||"&",n=n||"=",null===e&&(e=void 0),"object"==typeof e?i(o(e),(function(o){var s=encodeURIComponent(a(o))+n;return r(e[o])?i(e[o],(function(e){return s+encodeURIComponent(a(e))})).join(t):s+encodeURIComponent(a(e[o]))})).join(t):s?encodeURIComponent(a(s))+n+encodeURIComponent(a(e)):""};var r=Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)};function i(e,t){if(e.map)return e.map(t);for(var n=[],a=0;a<e.length;a++)n.push(t(e[a],a));return n}var o=Object.keys||function(e){var t=[];for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.push(n);return t}},function(e,t,n){(function(a){function r(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==a&&"env"in a&&(e=a.env.DEBUG),e}(t=e.exports=n(175)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var n=this.useColors;if(e[0]=(n?"%c":"")+this.namespace+(n?" %c":" ")+e[0]+(n?"%c ":" ")+"+"+t.humanize(this.diff),!n)return;var a="color: "+this.color;e.splice(1,0,a,"color: inherit");var r=0,i=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(r++,"%c"===e&&(i=r))})),e.splice(i,0,a)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=r,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(r())}).call(this,n(160))},function(e,t,n){var a;function r(e){function n(){if(n.enabled){var e=n,r=+new Date,i=r-(a||r);e.diff=i,e.prev=a,e.curr=r,a=r;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var c=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,(function(n,a){if("%%"===n)return n;c++;var r=t.formatters[a];if("function"==typeof r){var i=o[c];n=r.call(e,i),o.splice(c,1),c--}return n})),t.formatArgs.call(e,o);var u=n.log||t.log||console.log.bind(console);u.apply(e,o)}}return n.namespace=e,n.enabled=t.enabled(e),n.useColors=t.useColors(),n.color=function(e){var n,a=0;for(n in e)a=(a<<5)-a+e.charCodeAt(n),a|=0;return t.colors[Math.abs(a)%t.colors.length]}(e),"function"==typeof t.init&&t.init(n),n}(t=e.exports=r.debug=r.default=r).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var n=("string"==typeof e?e:"").split(/[\s,]+/),a=n.length,r=0;r<a;r++)n[r]&&("-"===(e=n[r].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var n,a;for(n=0,a=t.skips.length;n<a;n++)if(t.skips[n].test(e))return!1;for(n=0,a=t.names.length;n<a;n++)if(t.names[n].test(e))return!0;return!1},t.humanize=n(176),t.names=[],t.skips=[],t.formatters={}},function(e,t){var n=1e3,a=60*n,r=60*a,i=24*r,o=365.25*i;function s(e,t,n){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+n:Math.ceil(e/t)+" "+n+"s"}e.exports=function(e,t){t=t||{};var c,u=typeof e;if("string"===u&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var s=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return s*o;case"days":case"day":case"d":return s*i;case"hours":case"hour":case"hrs":case"hr":case"h":return s*r;case"minutes":case"minute":case"mins":case"min":case"m":return s*a;case"seconds":case"second":case"secs":case"sec":case"s":return s*n;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return s;default:return}}(e);if("number"===u&&!1===isNaN(e))return t.long?s(c=e,i,"day")||s(c,r,"hour")||s(c,a,"minute")||s(c,n,"second")||c+" ms":function(e){if(e>=i)return Math.round(e/i)+"d";if(e>=r)return Math.round(e/r)+"h";if(e>=a)return Math.round(e/a)+"m";if(e>=n)return Math.round(e/n)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t,n){n.r(t),n.d(t,"emitter2",(function(){return u}));var a=n(19),r=n(56),i=n(46),o=n(29),s=n(12),c=new r.Emitter("touch",!0),u=new r.Emitter("touch",!0),l={};["start","move","end","cancel"].forEach((function(e){if("start"===e){a.default.EventHandler["ontouch"+e]=function(t){i.GlobalEmitter.emit("beforeTouchStart",t),i.GlobalEmitter.emit("setLastTapTime",Date.now()),Object(o.setWxInterfaceIsInvokeInTap)("tap"),c.emit(e,t),u.emit(e,t)}}else if("end"===e){a.default.EventHandler["ontouch"+e]=function(t){i.GlobalEmitter.emit("beforeTouchEnd"),c.emit(e,t),u.emit(e,t),i.GlobalEmitter.emit("afterTouchEnd")}}else a.default.EventHandler["ontouch"+e]=function(t){c.emit(e,t),u.emit(e,t)};l["onTouch"+(e.charAt(0).toUpperCase()+e.slice(1))]=function(t,n){Object(s.isObject)(n)&&(a.default.EventHandler["ontouch"+e+"Dst"]=n),c.on(e,t)},l["offTouch"+(e.charAt(0).toUpperCase()+e.slice(1))]=function(t){c.off(e,t)}})),t.default=l},function(e,t,n){n.r(t),n.d(t,"drawLabel",(function(){return Zt})),n.d(t,"addLabelToShareArgs",(function(){return Jt}));var a=n(30),r=n(13),i=n.n(r),o=n(1),s=n(89),c=n(2),u=n(19),l=u.default.Image;Object.defineProperty,Object.getOwnPropertyDescriptor,Object.prototype.hasOwnProperty,new WeakMap;var d=n(38),f=n(0),p=n(46),h=n(18),v=function(e){return"object"===Object(h.default)(e)&&null!==e},g=function(){var e={};return{dirtyTextureMap:new WeakMap,dirtyRenderbufferMap:new WeakMap,dirtyFramebufferMap:new WeakMap,framebufferTextureMap:new WeakMap,framebufferRenderbufferMap:new WeakMap,textures:[],currentTextureIndex:0,screenFramebuffer:e,currentFramebuffer:e}},y=function(){var e=arguments[arguments.length-1],t=Rt(e),n=Rt(this.canvas).flag,a=n.textures,r=n.currentTextureIndex,i=n.dirtyTextureMap,o=a[r];v(o)&&(t&&t.isSharedCanvas?i.set(o,!0):i.has(o)&&i.delete(o))},m=function(){var e=Rt(this.canvas).flag,t=e.textures,n=e.currentFramebuffer,a=e.dirtyFramebufferMap,r=e.framebufferTextureMap,i=e.dirtyTextureMap,o=e.framebufferRenderbufferMap,s=e.dirtyRenderbufferMap;if(t.some((function(e){return i.has(e)}))){a.set(n,!0);var c=r.get(n);v(c)&&i.set(c,!0);var u=o.get(n);v(u)&&s.set(u,!0)}},b={activeTexture:function(e){var t=e-this.TEXTURE0;Rt(this.canvas).flag.currentTextureIndex=t},bindTexture:function(e,t){var n=Rt(this.canvas).flag;n.textures[n.currentTextureIndex]=t},wxBindCanvasTexture:function(e,t){var n=Rt(this.canvas).flag,a=n.textures,r=n.currentTextureIndex,i=n.dirtyTextureMap;if(v(t)){var o=Rt(t),s={type:"WeixinCanvasTexture"};a[r]=s,o&&o.isSharedCanvas?i.set(s,!0):i.has(s)&&i.delete(s)}else a[r]=null},texImage2D:y,texSubImage2D:y,bindFramebuffer:function(e,t){var n=Rt(this.canvas).flag;n.currentFramebuffer=t||n.screenFramebuffer},framebufferTexture2D:function(e,t,n,a){var r=Rt(this.canvas).flag,i=r.framebufferTextureMap,o=r.currentFramebuffer;i.set(o,a)},framebufferRenderbuffer:function(e,t,n,a){var r=Rt(this.canvas).flag,i=r.dirtyRenderbufferMap,o=r.dirtyFramebufferMap,s=r.framebufferRenderbufferMap,c=r.currentFramebuffer;i.has(a)&&o.set(c,!0),s.set(c,a)},copyTexImage2D:function(){var e=Rt(this.canvas).flag,t=e.dirtyFramebufferMap,n=e.currentFramebuffer,a=e.textures,r=e.currentTextureIndex,i=e.dirtyTextureMap;if(t.has(n)){var o=a[r];v(o)&&i.set(o,!0)}},drawArrays:m,drawElements:m},_=n(32),O=n(59),I=n(15),S=function(e){return!Rt(e).secure},E=function(e,t){var n=Rt(t);if(!n)return!0;var a=n.secure;return!(!Rt(e).secure&&a)},w=function(e){return function(){if(/texImage2D|texSubImage2D/.test(e)){var t=Rt(this.canvas),n=t.flag,a=n.textures,r=n.currentTextureIndex,i=a[r];if(i&&"WeixinCanvasTexture"===i.type)return void console.warn("在调用 wxBindCanvasTexture() 向 "+r+" 号纹理单元提交纹理后，不能再调用 "+e+"() 向该纹理单元提交纹理")}var o=this.canvas,s=/createPattern|drawImage/.test(e)?arguments[0]:arguments[arguments.length-1];if(E(o,s))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，非安全 Canvas 的 WebGL 上下文的 "+e+" 不能传入安全 Canvas")}},C=!1,k="unknown";o.default.onReady((function(){C=Object(_.checkPermissionSync)("screenCanvasReadPixels"),k=Object(I.checkAPIAvailable)("screenCanvasReadPixelsFreely")}));var T,A={toDataURL:function(){return!!S(this)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 不能调用 toDataURL"),"")},getImageData:function(){return!!S(this.canvas)||(console.warn("在 game.json 配置了 OpenDataContext 后，安全 Canvas 的 2d 上下文不能调用 getImageData"),{width:0,height:0,data:new Uint8ClampedArray(0)})},createPattern:w("createPattern"),drawImage:w("drawImage"),texImage2D:w("texImage2D"),texSubImage2D:w("texSubImage2D"),wxBindCanvasTexture:w("wxBindCanvasTexture"),readPixels:function(){if(!Rt(this.canvas).secure)return!0;if(Object(O.reportDeprecatedAPI)("WebGLRenderingContext.readPixels"),C){var e=Rt(this.canvas).flag,t=e.dirtyFramebufferMap,n=e.currentFramebuffer;if(!t.has(n)||(Object(O.reportDeprecatedAPI)("unsafeScreenCanvasReadPixelsUsedBefore"),!1!==k))return!0;console.warn("在 game.json 配置了 OpenDataContext 后，绘制了 sharedCanvas 的画布不能 readPixels")}else Object(O.reportDeprecatedAPI)("screenCanvasReadPixelsNoPermission")}},P=u.default.Canvas,D=u.default.Image,x={"2d":null,webgl:null},R={Image:null,Canvas:null,CanvasRenderingContext2D:null,CanvasPattern:null,CanvasGradient:null,ImageData:null,TextMetrics:null},j=new WeakMap;function M(){var e=new P;return e.width=1,e.height=1,e}function N(e){var t={};return Object.keys(e).forEach((function(n){var a=Object.getOwnPropertyDescriptor(e,n);if("function"!=typeof a.value)a.get||a.set?Object.defineProperty(t,n,{get:function(){if(a.get)return a.get.call(this)},set:function(e){a.set&&a.set.call(this,e)}}):Object.defineProperty(t,n,a);else{var r=e[n];t[n]=function(){if("function"==typeof A[n]){var e=A[n].apply(this,arguments);if(!0!==e)return e}return"function"==typeof b[n]&&b[n].apply(this,arguments),r.apply(this,arguments)}}})),t}var L,B=function(){if(T)return T;var e=M(),t=N(Object.getPrototypeOf(e)),n=t.getContext;return t.getContext=function(e,t){if(Rt(this).isSharedCanvas)return{};var a=n.call(this,e,t);return null===a||(/2d|webgl/.test(e)&&Object.setPrototypeOf(a,function(e){if(x[e])return x[e];var t=M().getContext(e),n=N(Object.getPrototypeOf(t));return x[e]=n,x[e]}(e)),j.set(a,this),Object.defineProperty(a,"canvas",{value:this,configurable:!1,writeable:!1})),a},T=t,t},F=n(93),W=wxGA,V=n(16),U=0,G=1,H=2,Y=3,q={Speed:13544,Error:13582,Slow:13968,Clipboard:14367,NetworkAPI:14480,Display:15496,WebviewRecycle:15352,WebviewRestore:15353,PluginDisplay:15364,functionalPageOperation:15804,RecycledAPI:15649,GameReportKV:15677,RecycleView:15864,GameADFunnelModel:15859,CustomComponent:15948,VideoAction:16137,SameLayerRender:16360,MediaCompStatus:16435,NavigateToMiniProgramAlert:16432,LaunchDetailSpeed:16514,CloudReport:16588,DeprecatedAPI:16624,Share:16717,APIUse:17619,SetDataPerf:17176,UserLog:17809,GameInteractiveData:17836,GameRecorder:17833,UserLogFail:17975,WeAppInvoke:18042,RenderCache:18052,RenderStages:18321,ShareCardClick:18352,PerfReport:18748,GameServerInvite:18768,NpmExtendedLib:18874,FirstInteraction:19136,GameComponent:19283,GameWhatsNew:19335,TradeService:19286,LazyCodeLoading:20030,MidasFriendPayment:20285,Handoff:20888,ShareToWeRun:21272,WeAppOperateWXData:21359,WXGameWASMLaunchClose:21494,WXGameWASMLaunchException:21493,WXGameWASMLaunchTime:21492,ExptHit:21627,WeAppInvoke2:21688,GameLifeMiniGameCardAction:21898,ShareImageMenu:22050,WeAppToChannels:22082,RequestPaymentCheckTicket:22273,WeAppNavBan:22762,GameAdsSkipCard:20267};L={},Object(V.default)(L,U,"thirdScriptError"),Object(V.default)(L,G,"widgetThirdScriptError"),Object(V.default)(L,H,"gameThirdScriptError"),Object(V.default)(L,Y,"gameSubContextThirdScriptError");var z=n(48);function K(e){if(!Array.isArray(e)||e.some((function(e){return"string"!=typeof e||0===e.length})))return"invalid keyList"}var X=n(25),Z=Object(X.default)("getUserCloudStorage","webapi_getselfuserstorage",{},{},(function(e){var t=e.keyList;return{key:void 0===t?[]:t}}),(function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,delete e.rawData,e})),J=Object(X.default)("getFriendCloudStorage","webapi_getfrienduserstorage",{},{},(function(e){var t=e.keyList;return{key:void 0===t?[]:t}}),(function(e){return e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,e})),delete e.user_item,delete e.rawData,e})),Q=n(111).share.ShareInfoStorage,$=wxNativeConsole.createLogger("getGroupCloudStorage"),ee=Object(X.default)("getGroupCloudStorage","webapi_getgroupuserstorage",{},{},(function(e){var t=e.keyList,n=void 0===t?[]:t,a=e.shareTicket,r=Q.get(a),i=r.shareKey,o=r.shareName;return $.info("shareTicket=",a),$.info("shareInfo=",JSON.stringify(r)),{key:n,share_key:i,share_name:o}}),(function(e){return e.user_item=e.user_item?e.user_item:[],e.data=e.user_item.map((function(e){return e.KVDataList=e.kv_list||[],delete e.kv_list,e})),delete e.user_item,delete e.rawData,e})),te=Object(X.default)("getPotentialFriendList","webapi_game_potential_friends",{},{},(function(){}),(function(e){return e.list=e.friend_list,delete e.friend_list,delete e.rawData,e})),ne=Object(X.default)("getGroupInfo","webapi_getshareinfo_byopengid",{},{},(function(e){return{opengid_list:[e.openGId]}}),(function(e){return e.name=e.info_list[0].room_topic,delete e.info_list,delete e.rawData,e}));var ae=n(117),re={};function ie(){return Object.keys(re).map((function(e){return e+"="+re[e]})).join("&")}function oe(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={openId:e.openId,title:e.title||o.default.accountInfo.nickname,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId,success:e.success,fail:e.fail,complete:e.complete};t.query=ie(),Object(ae._doShareAppMessage)(t,"shareAppMessageToSpecificContactDirectly")}var se=n(37),ce=Object(se.constructOperateWXData)(!1,"getUserInfo",!1,!0),ue=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.openIdList,n=void 0===t?[]:t,a=e.lang,r=void 0===a?"en":a,i=e.success,o=e.fail,s=e.complete;ce({apiName:"webapi_getuserinfo_byopenid",reqData:{openIdList:n,lang:r},success:function(e){var t=JSON.parse(e.respData.data).userInfoList||[];"function"==typeof i&&i({errMsg:e.errMsg,data:t})},fail:o,complete:s})},le=Object(X.default)("getUserCloudStorageKeys","webapi_getuserstorageallappkey",{},{},(function(){}),(function(e){return e.keys=e.data_key,delete e.data_key,delete e.rawData,e})),de=n(56),fe=n(39),pe=n(4),he=n(5),ve=n(9),ge=n(14),ye=n(17),me=n(8),be=n(154),_e=n.n(be),Oe=n(33),Ie=n(22),Se=n(42),Ee=n(21),we=n(6);var Ce=Object(Ee.getEventManager)("NavigationBarTitleUpdate"),ke=(Ce.internalOnMethod,n(41)),Te="#000000",Ae="#ffffff";function Pe(e){var t=(o.default.appContactInfo||{}).operationInfo||{};if(t.jsonInfo&&t.jsonInfo.op_info&&1===Number(t.jsonInfo.op_info.gray_flag)&&0===o.default.appType){var n=/^#([0-9|A-F|a-f]{6})$/.exec(e);if(null!=n){var a=parseInt(n[1].slice(0,2),16),r=parseInt(n[1].slice(2,4),16),i=parseInt(n[1].slice(4),16),s=Math.round(.299*a+.587*r+.114*i).toString(16).toUpperCase();Object(f.invokeMethod)("setNavigationBarColor",{frontColor:Ae,backgroundColor:"#"+s+s+s})}}}o.default.onReady((function(){Object(ke.onAppRoute)((function(){if(void 0!==o.default&&o.default.global&&o.default.global.window){var e=o.default.global.window;Te=e.navigationBarBackgroundColor||Te,Ae="black"===e.navigationBarTextStyle?"#000000":"#ffffff"}var t=we.default.lastRoute+".html";if(void 0!==o.default&&o.default.page&&o.default.page[t]&&o.default.page[t].window){var n=o.default.page[t].window;Te=n.navigationBarBackgroundColor||Te,Ae="black"===n.navigationBarTextStyle?"#000000":"#ffffff"}Pe(Te)}))}));n(29);var De=n(10);n(45),n(72),n(26);Object(Ee.getEventManager)("AppPerfRouteNavigation");var xe=n(43);xe.onPageReload,xe.triggerBeforeUnloadPage,xe.triggerBeforeShareAppMessage,n(140),n(58);Object(ke.onAppRoute)((function(e){try{o.default.tabBar.list.some((function(t){return t.pagePath.startsWith(e.path)}))}catch(e){}}));o.default.onReady((function(){o.default.tabBar&&o.default.tabBar.list||[]}));var Re={};Object(f.subscribe)("pageScrollDone",(function(e){if(!(e.callbackId<0||void 0===Re[e.callbackId])){var t=Re[e.callbackId];delete Re[e.callbackId],delete e.callbackId;var n="pageScrollTo";e.errMsg=e.errMsg||"scrollWebviewTo:ok",e.errMsg=e.errMsg.replace("scrollWebviewTo",n);var a=0===e.errMsg.indexOf(n+":ok"),r=0===e.errMsg.indexOf(n+":fail");a?"function"==typeof t.success&&t.success(e):r&&"function"==typeof t.fail&&t.success(e),"function"==typeof t.complete&&t.complete(e)}}));var je={};Object(f.subscribe)("callbackSetPageStyle",(function(e){var t=e.res,n=e.callbackId,a=t.errMsg,r=0===a.indexOf("setPageStyle:ok"),i=0===a.indexOf("setPageStyle:fail"),o=je[n];delete je[n],"object"===Object(h.default)(o)&&(r?"function"==typeof o.success&&o.success(t):i&&"function"==typeof o.fail&&o.fail(t),"function"==typeof o.complete&&o.complete(t))}));Object(f.subscribe)("xWebTextareaFocusChanged",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.focus,n=arguments.length>1?arguments[1]:void 0;t?n:-1}));Object(Ee.getEventManager)("XWebTextareaSupportedEvent").internalOnMethod((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canInsert2XWeb;t}));var Me=n(141);Object(Ee.getEventManager)("XWebTextareaSupportedEvent").internalOnMethod((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.canInsert2XWeb;t}));var Ne={};Object(f.subscribe)("onGetXWebSelectedTextRange",(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.taskId,n=e.focus,a=e.start,r=e.end,i=Ne[t];i&&(n?("function"==typeof i.success&&i.success({errMsg:"getSelectedTextRange:ok",start:a,end:r}),"function"==typeof i.complete&&i.complete({errMsg:"getSelectedTextRange:ok",start:a,end:r})):("function"==typeof i.fail&&i.fail({errMsg:"getSelectedTextRange:fail:no focused input"}),"function"==typeof i.complete&&i.complete({errMsg:"getSelectedTextRange:fail:no focused input"}))),delete Ne[t]}));n(44);function Le(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(me.default)(e);if(t){var r=Object(me.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(ye.default)(this,n)}}var Be="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht1JxkNuzGdYKKtQ5NiadIeFXjxMBvdzv8ib9nThJgX9M7z3Dq59jIUkGnTENr7AibOJMQ/0?wx_fmt=png",Fe="http://mmbiz.qpic.cn/mmbiz_png/icTdbqWNOwNSByZLicUmsht3OjibpgsQSWKlYHJ8u8AiacNQgu4ianBYzC5gEXmxS74iaGkZUzEbFjwp6n7d8rJV7JSA/0?wx_fmt=png",We=0,Ve=0;o.default.onReady((function(){var e=Object(Se.getInitScreenSize)();We=e.screenWidth,Ve=e.screenHeight,Object(Me.onWindowResize)((function(e){We=e.windowWidth,Ve=e.windowHeight}))}));var Ue=function(e){var t=e.cancelText,n=e.confirmText,a=e.icon,r=We>Ve;return{mask:{width:We,height:Ve,zIndex:1000007,opacity:.5,backgroundColor:"#000000"},tail:{bottom:0,height:12,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",left:r?(We-Ve)/2:0,width:r?Ve:We},popup:{bottom:0,zIndex:1000008,position:"absolute",backgroundColor:"#ffffff",borderRadius:12,left:r?(We-Ve)/2:0,width:r?Ve:We},header:{height:64,flexDirection:"row",alignItems:"center",justifyContent:"space-between",width:r?Ve:We},close:{width:14,height:14,marginLeft:20},title:{width:150,height:40,fontSize:15,lineHeight:40,textAlign:"center",color:"#000000"},close2:{width:14,height:14,marginRight:20},main:{flexDirection:"column",alignItems:"center",width:r?Ve:We},icon:{height:64,width:64,marginTop:12,marginBottom:8},content:{height:60,fontSize:17,color:"#000000",textAlign:"center",lineBreak:"break-all",marginTop:a?0:64,marginBottom:a?0:15,width:r?.9*Ve:.9*We},footer:{heihgt:40,marginBottom:32,flexDirection:"row",justifyContent:"center",width:r?Ve:We},cancel:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#07c160",backgroundColor:"rgba(0, 0, 0, 0.05)",width:n?120:184},confirm:{height:40,fontSize:17,borderRadius:4,lineHeight:40,textAlign:"center",marginLeft:8,marginRight:8,color:"#ffffff",backgroundColor:"#04c160",width:t?120:184}}},Ge=function(e){Object(ge.default)(n,e);var t=Le(n);function n(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=a.title,i=a.content,o=a.icon,s=a.confirmText,c=a.cancelText,u=a.confirm,l=a.cancel,d=a.style,f=void 0===d?{}:d;Object(pe.default)(this,n),e=t.call(this);var p=Object(Ie.getPrivateThis)(Object(ve.default)(e)),h='<view id="container">\n      <view id="mask" />\n      <view id="tail" />\n      <view id="popup">\n        <view id="header">\n          <image id="close" src="'+Be+'" />\n          <text id="title" value="'+r+'" />\n          <text id="close2" />\n        </view>\n        <view id="main">\n          '+(o?'<image id="icon" src="'+(!0===o?Fe:o)+'" />':"")+'\n          <text id="content" value="'+i+'" />\n        </view>\n        <view id="footer">\n          '+(c?'<text id="cancel" value="'+c+'" />':"")+"\n          "+(s?'<text id="confirm" value="'+s+'" />':"")+"\n        </view>\n      </view>\n    </view>",v=_e()(h),g=v.root,y=Ue(arguments[0]);return Object.keys(f).forEach((function(e){y[e]&&Object.assign(y[e],f[e])})),Ie.init.call(Object(ve.default)(e),g,y),Oe.webviewLayout.add(p.container),p.close&&p.close.on("click",(function(){"function"==typeof l&&l()})),p.cancel&&p.cancel.on("click",(function(){"function"==typeof l&&l()})),p.confirm&&p.confirm.on("click",(function(){"function"==typeof u&&u()})),e}return Object(he.default)(n,[{key:"destroy",value:function(){var e=Object(Ie.getPrivateThis)(this);Oe.webviewLayout.remove(e.container),Object(Ie.removePrivateThis)(this)}}]),n}(Ie.Component);function He(e){return new Ge(e)}var Ye=n(12);n(36);var qe=0,ze=2,Ke=3;var Xe=n(77);function Ze(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Je(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Je(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function Je(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var Qe=new de.Emitter("InteractiveStorageModified",!0),$e={add:1},et=Object(I.promisify)(ue);var tt=function(e){var t=e.actionId,n=e.actId,a=void 0===n?0:n,r=e.receiverOpenId,i=e.detail,o=e.opNum,s=void 0===o?0:o,c=e.operationType,u=[t,a,0,i,s,void 0===c?0:c,r].join(",");Reporter.reportKeyValue({key:"GameInteractiveData",value:u})},nt=function(e){Reporter.reportIDKey({key:e})},at=Object(X.default)("modifyFriendInteractiveStorage","webapi_modifyfriendinteractivedata",{},{},(function(e){var t=e.key,n=e.operation,a=e.opNum,r=e.toUser;return{key:t,operation:n,debug:e.debug,opNum:a,toUser:r,action:e.action,object:e.object,ratio:e.ratio,quiet:!!e.quiet,op_num:a,to_user:r,random_number:Date.now(),randomNumber:Date.now()}}),(function(e){var t,n,a=e.json_resp,r=e.inner_errcode,i=e.inner_errmsg,o="modifyFriendInteractiveStorage:fail ";e.errMsg,delete e.json_resp,delete e.rawData,delete e.inner_errcode,delete e.inner_errmsg;try{t=JSON.parse(a)}catch(e){t={},e.message}if((n=t.log)&&n.split("\n").map(decodeURIComponent).forEach((function(e){var t=parseInt(e.substr(0,1),10),n="[JSServer]"+e.substr(1);switch(t){case qe:console.log(n);break;case ze:console.warn(n);break;case Ke:console.error(n)}})),!Object(Ye.isUndefined)(r)&&0!==r)return e.errMsg=""+o+i,void(e.errCode=r);try{var s=JSON.parse(t.base_resp);if(0!==s.errcode)return e.errCode=s.errmsg,void(e.errMsg=""+o+s.errmsg);e.errCode=0}catch(t){e.errCode=-1,e.errMsg=""+o+t.message,t.message}})),rt=n(128),it=(u.default.fs,function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(f.beforeInvoke)("readCompressedFile",e,{filePath:"",compressionAlgorithm:""})&&Object(f.invokeMethod)("readCompressedFile",e)}),ot=globalThis,st={};void 0!==u.default.WebAssembly?st=u.default.WebAssembly:void 0!==ot.WebAssembly&&(st=ot.WebAssembly);var ct={Table:st.Table,Memory:st.Memory,Global:st.Global,Instance:st.Instance,instantiate:function(e,t){if("string"!=typeof e)return Promise.reject(new Error("WebAssembly.instantiate: first argument must be a string"));if(/^(wxfile|https?):/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: not support wxfile: or http: path"));if(!/\.wasm(\.br)?$/.test(e))return Promise.reject(new Error("WebAssembly.instantiate: only support file type .wasm or .wasm.br"));if(c.IS_IOS||c.IS_ANDROID){var n=st.instantiate(e,t);return"Promise"===Object(Ye.getDataType)(n)?n:Promise.resolve(n)}var a=rt.readFile;return c.IS_DEVTOOLS&&/\.br$/.test(e)&&(a=it),new Promise((function(n,r){a({compressionAlgorithm:"br",filePath:e,success:function(e){n(st.instantiate(e.data,t))},fail:function(e){var t=e.errMsg;r(new Error(t.replace(/^\w+:fail\s*/,"")))}})}))}};ot.WXWebAssembly=ct,delete ot.WebAssembly;var ut=st,lt=Object(X.default)("getGameLifeProfile","webapi_getgamelifeprofile",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),dt=Object(X.default)("getGreetingControlInfo","webapi_getgreetingcontrolinfo",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),ft=Object(X.default)("interactGameLifeTag","webapi_interactgamelifetag",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),pt=function(e){var t=e.url,n=e.success,a=e.fail,r=e.complete;Object(f.invokeMethod)("private_openUrl",{url:t,isNativeStyle:!0,success:n,fail:a,complete:r})},ht=n(53),vt=!1;o.default.onReady((function(){vt=vt||1037===(o.default.appLaunchInfo||{}).scene})),Object(ht.onAppEnterForeground)((function(e){vt=vt||1037===e.scene}));var gt=n(79),yt=n(139);var mt=Object(X.default)("gameTransfer","webapi_game_transfer",{},{},(function(e){return JSON.parse(JSON.stringify(e))})),bt=(__safeway__.apiSign.makeApiSign,{Component:Ie.Component,getPrivateThis:Ie.getPrivateThis,removePrivateThis:Ie.removePrivateThis,create:Ie.create,init:Ie.init,webviewLayout:Oe.webviewLayout,nativeviewLayout:Oe.nativeviewLayout,xmlParser:_e.a}),_t={Kanata:Kanata,wxGA:W,reportIDKey:function(e){var t=e.id,n=e.key,a=e.value;return Reporter.reportIDKey({id:t,key:n,value:a})},reportKeyValue:function(e){var t=e.key,n=e.value,a=e.immediately;return"number"!=typeof t||Object.values(q).includes(t)?Reporter.reportKeyValue({key:t,value:n,immediately:a}):Reporter.reportKeyValue({key:t,value:n,immediately:a,number:!0})},getXLogManager:function(){return z.nativeConsole},getUserCloudStorage:function(e){var t=K(e.keyList);t?Object(f.beforeInvokeFail)("getUserCloudStorage",e,t):Z(e)},getFriendCloudStorage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=K(e.keyList);t?Object(f.beforeInvokeFail)("getFriendCloudStorage",e,t):J(e)},getGroupCloudStorage:function(e){var t=K(e.keyList);t?Object(f.beforeInvokeFail)("getGroupCloudStorage",e,t):setTimeout((function(){e.shareTicket?Q.get(e.shareTicket)?($.info("use args.shareTicket",e.shareTicket),ee(e)):Object(f.beforeInvokeFail)("getGroupCloudStorage",e,"参数 shareTicket 不正确"):Q.lastShareTicket&&Q.get(Q.lastShareTicket)?($.info("use lastShareTicket",Q.lastShareTicket),ee(Object.assign({shareTicket:Q.lastShareTicket},e))):Object(f.beforeInvokeFail)("getGroupCloudStorage",e,"当前小程序不是从群分享卡片打开")}),1e3/60)},getPotentialFriendList:te,getGroupInfo:function(e){setTimeout((function(){ne(Object.assign({},e,{success:function(t){return Object(f.beforeInvokeCallback)({args:e,res:t,name:"getGroupInfo",success:!!t.name,errMsg:t.name?"":"invalid openGId"})}}))}))},shareMessageToFriend:oe,getUserInfo:ue,getUserCloudStorageKeys:le,modifyFriendInteractiveStorage:function(e){nt("modifyFriendInteractiveStorage");var t=Object.assign({},e,{success:function(t){Object(f.beforeInvokeCallback)({res:t,args:e,name:"modifyFriendInteractiveStorage",success:0===t.errCode,errCode:t.errCode,errMsg:t.errMsg}),t.errCode||Qe.emit("modified",""+e.key)}});t.quiet?function(e){var t=Object(Xe._getLaunchOptionsSync)(),n=Object(ae.getMessageExtraData)();!n&&t&&t.referrerInfo&&(n=t.referrerInfo.messageExtraData),n&&3===n.shareType&&n.userInfo?at(Object.assign(e,{toUser:n.userInfo.openID})):Object(f.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"game is not launch by click share card")}(t):t.toUser?o.default.modifyFriendInteractiveStorageTemplates?function(e){et({openIdList:[e.toUser]}).then((function(t){var n,a,r,i,s=t.data[0].nickName,c=parseInt(e.key,10),u=e.toUser,l=e.opNum,d=$e[e.operation],p=Ze(o.default.modifyFriendInteractiveStorageTemplates);try{for(p.s();!(i=p.n()).done;)if((r=i.value).key===e.key){var h=r.ratio?" x"+l*r.ratio+" ？":"？";n="确认"+r.action+" "+s+" "+r.object+h,a=encodeURIComponent(n);break}}catch(e){p.e(e)}finally{p.f()}if(!n)throw new Error("invalid key");var v={actId:c,receiverOpenId:u,detail:a,opNum:l,operationType:d};tt(Object.assign({actionId:1},v)),nt("modifyFriendInteractiveStorageShowModal");var g=He({content:n,title:""+r.action+r.object,confirmText:"确认"+r.action,confirm:function(){g.destroy(),at(Object.assign({action:r.action,object:r.object,ratio:r.ratio},e,{success:function(t){if(e.success&&e.success(t),!t.errCode)var n="string"==typeof e.title,a=He({title:""+r.action+r.object,icon:!0,content:n?"已"+r.action+"，马上告诉微信好友？":"已"+r.action,cancelText:n?"下次吧":"我知道了",confirmText:!!n&&"告诉他",cancel:function(){a.destroy()},confirm:function(){a.destroy(),oe({openId:u,title:e.title,imageUrl:e.imageUrl,imageUrlId:e.imageUrlId})}})}})),tt(Object.assign({actionId:2},v)),nt("modifyFriendInteractiveStorageConfirm")},cancel:function(){g.destroy(),Object(f.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"cancel"),tt(Object.assign({actionId:3},v)),nt("modifyFriendInteractiveStorageCancel")}})})).catch((function(t){var n=t.errMsg,a=t.message;Object(f.beforeInvokeFail)("modifyFriendInteractiveStorage",e,n||a)}))}(t):o.default.modifyFriendInteractiveStorageConfirmWording?function(e){et({openIdList:[e.toUser]}).then((function(t){var n=t.data[0].nickName,a=o.default.modifyFriendInteractiveStorageConfirmWording.replace("${nickname}",n),r={actId:parseInt(e.key,10),receiverOpenId:e.toUser,detail:encodeURIComponent(a),opNum:e.opNum,operationType:$e[e.operation]};tt(Object.assign({actionId:1},r)),nt("modifyFriendInteractiveStorageShowModal"),Object(fe._showModal)({content:a,confirmText:"确定",cancelText:"取消",success:function(t){t.confirm?(at(e),tt(Object.assign({actionId:2},r)),nt("modifyFriendInteractiveStorageConfirm")):(Object(f.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"cancel"),tt(Object.assign({actionId:3},r)),nt("modifyFriendInteractiveStorageCancel"))}})})).catch((function(t){var n=t.errMsg;Object(f.beforeInvokeFail)("modifyFriendInteractiveStorage",e,n)}))}(t):Object(f.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"invalid modifyFriendInteractiveStorage config in game.json"):Object(f.beforeInvokeFail)("modifyFriendInteractiveStorage",e,"toUser is required without quiet")},WebAssembly:ut,getGameLifeProfile:lt,getGreetingControlInfo:dt,interactGameLifeTag:ft,openGameLifeAccountInfo:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,a=e.complete,r=e.query,i="https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/accountinfo.html";pt({url:Object(De.addQueryStringToUrl)(i,r),success:t,fail:n,complete:a})},openGameLifeMiniGameTransfer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.success,n=e.fail,a=e.complete,r=e.query,i="https://game.weixin.qq.com/cgi-bin/h5/static/gamelife/minigametransfer.html";pt({url:Object(De.addQueryStringToUrl)(i,r),success:t,fail:n,complete:a})},Function:Function.prototype.constructor,createCanvas:function(){return Ht.apply(void 0,arguments)},createScreenCanvas:function(){return Yt.apply(void 0,arguments)},createWebView:function(e){return new Oe.WebView(e)},navigateToMiniProgramDirectly:function(e){return Object(gt._doNavigateToMiniProgram)(e,e)},privateOpenUrl:yt.privateOpenUrl,gameTransfer:mt,coverview:bt,launchApplicationDirectly:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object(_.checkPermissionSync)("plugin_launchApplicationDirectly_operateDirectly")||delete e.operateDirectly,c.IS_IOS?Object(_.checkPermissionSync)("launchApplicationDirectly")?Object(f.invokeMethod)("launchApplication",e,{beforeAll:function(e){e.errMsg=e.errMsg.replace("launchApplication","launchApplicationDirectly")}}):setTimeout((function(){return Object(f.beforeInvokeFail)("launchApplicationDirectly",e,"no permission")})):Object(f.invokeMethod)("launchApplicationDirectly",e,{})},encode:function(e){if(c.IS_DEVTOOLS){var t=null;return Object(f.invokeMethod)("encodeArrayBufferSync",Object.assign(e,{success:function(e){t=e.buffer},fail:function(){}})),t}return u.default.encodeArrayBuffer(e.data,e.format)},decode:function(e){if(c.IS_DEVTOOLS){var t="";return Object(f.invokeMethod)("decodeArrayBufferSync",Object.assign(e,{success:function(e){t=e.result},fail:function(){}})),t}return u.default.decodeArrayBuffer(e.data,e.format)}},Ot={wxGA:846,Kanata:933,reportIDKey:847,reportKeyValue:848,getXLogManager:849,getUserCloudStorage:883,getFriendCloudStorage:884,getGroupCloudStorage:885,getPotentialFriendList:886,getGroupInfo:887,shareMessageToFriend:888,getUserInfo:915,getUserCloudStorageKeys:950,modifyFriendInteractiveStorage:951,WebAssembly:962,Function:963,getGameLifeProfile:964,getGreetingControlInfo:965,interactGameLifeTag:966,openGameLifeAccountInfo:979,openGameLifeMiniGameTransfer:980,gameTransfer:981,createCanvas:987,createScreenCanvas:987,createWebView:991,navigateToMiniProgramDirectly:1002,coverview:1005,launchApplication:1006,privateOpenUrl:1007,launchApplicationDirectly:1008,encode:1022,decode:1023},It=Object.keys(Ot).map((function(e){return Ot[e]})),St={},Et=["getUserCloudStorage","getFriendCloudStorage","getGroupCloudStorage","getPotentialFriendList","getGroupInfo","shareMessageToFriend","getUserCloudStorageKeys","modifyFriendInteractiveStorage"],wt={},Ct=function(e){return function(e){if(wt[e])return wt[e];St[e]={},Object(f.invokeMethod)("getPluginPermissionBytes",{pluginList:[{indexes:It,pluginId:e}],success:function(t){var n=t.pluginPermissionMap;if(n&&n[e])for(var a=0;a<n[e].length;a++){var r=It[a];St[e][r]=1===n[e][a]}}});var t={platform:o.default.platform};for(var n in _t){var a=Ot[n],r=St[e][a];("wx20afc706a711eefc"===e||"wx4d5893418b75cb20"===e||r)&&("createCanvas"===n&&(kt=!0),-1===Et.indexOf(n)?t[n]=_t[n]:Object(_.checkPermissionSync)("engineOpenData")&&(kt=!0,t[n]=_t[n]))}return wt[e]=t,wt[e]}(e)},kt=!1,Tt=function(){return kt},At=u.default.Canvas,Pt=new WeakMap,Dt=0,xt=function(e){return Pt.get(e).canvasId},Rt=function(e){if(null!=e)return Pt.get(e)};function jt(e){Object(F.checkNeedInsertImageViewPatch)()&&Object(f.invokeMethod)("insertImageView",{parentId:0,viewId:e,position:{width:0,height:0,top:0,left:0},clickable:!1,data:"{}",complete:function(e){e.errMsg}})}function Mt(e){Object(F.checkNeedInsertImageViewPatch)()&&Object(f.invokeMethod)("removeImageView",{viewId:e,complete:function(e){e.errMsg}})}var Nt,Lt,Bt=!1,Ft=Object.defineProperty,Wt=Object.getOwnPropertyDescriptor,Vt=Object.prototype.hasOwnProperty,Ut=["getContext","toDataURL"],Gt=["width","height","tagName","nodeName"],Ht=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.secure,n=void 0!==t&&t,a=e.isSharedCanvas,r=void 0!==a&&a,i=new At,s=c.IS_DEVTOOLS?o.default.appConfig.subContext:o.default.subContext,u="string"==typeof s;if(c.IS_DEVTOOLS){var l=i.__proto__.__proto__;i.__proto__=new Proxy(i.__proto__,{setPrototypeOf:function(e,t){return l=t,!0},getPrototypeOf:function(){return l}})}c.IS_DEVTOOLS||Vt.call(i,"width")||(Gt.forEach((function(e){for(var t=i;t;t=t.__proto__)if(Vt.call(t,e)){Ft(i,e,Wt(t,e)),Ft(i,e,{configurable:!1});break}})),Ft(i,"style",{value:{},writable:!0}),Nt||(Nt={},Ut.forEach((function(e){for(var t=i;t;t=t.__proto__)if(Vt.call(t,e)){Ft(Nt,e,Wt(t,e));break}}))),i.__proto__=Nt),u&&(Object.setPrototypeOf(i,B()),"Object"===Object(Ye.getDataType)(i)&&Object.defineProperty(B(),Symbol.toStringTag,{get:function(){return"HTMLCanvasElement"}})),i.__id=i.__id||Dt++;var h=!1;Bt||(Bt=!0,h=!0),Pt.set(i,{canvasId:i.__id,secure:n,isSharedCanvas:r,isScreenCanvas:h,flag:g()}),delete i.__id;var v=c.IS_DEVTOOLS?i:xt(i),y=function(e){if(n){var t=p.FakeTempFilePathMap.set(e.tempFilePath);e.tempFilePath=t}Mt(v)};return i.toTempFilePathSync=function(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=Pt.get(this),r=!!a&&a.isScreenCanvas;if(jt(v),Object(f.invokeMethod)("canvasToTempFilePathSync",Object.assign({},n,{canvasId:v},{isScreenCanvas:r,success:function(t){e=t.tempFilePath},fail:function(e){t=e.errMsg}}),{beforeSuccess:y}),Mt(v),t)throw new Error(t);return e},i.toTempFilePath=Object(d.surroundByPromiseFactory)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Pt.get(i),n=!!t&&t.isScreenCanvas;Object(f.invokeMethod)("canvasToTempFilePath",Object.assign({},e,{canvasId:v,isScreenCanvas:n}),{beforeSuccess:y})})),i};o.default.onReady((function(){if(Object(I.isGame)()){(t=o.default.plugins||o.default.gamePlugins)&&Object.keys(t).forEach((function(e){var n=t[e].provider;Ct(n)}));var e="string"==typeof(c.IS_DEVTOOLS?o.default.appConfig.subContext:o.default.subContext)||Tt();(function(e){if(Object(F.checkNeedPreserveDrawingBufferPatch)()){var t=e.getContext;e.getContext=function(n,a){for(var r=arguments.length,i=new Array(r>2?r-2:0),o=2;o<r;o++)i[o-2]=arguments[o];if("webgl"===n||"2d"===n){var s=Object.assign({},a);return s.preserveDrawingBuffer=!0,t.call.apply(t,[e,n,s].concat(i))}return t.call.apply(t,[e,n,a].concat(i))}}})(Ht({secure:e})),Object.keys(R).forEach((function(e){if(!R[e]){var t=M(),n=t.getContext("2d");if("Canvas"===e)R[e]=Object.getPrototypeOf(t);else if("Image"===e)R[e]=Object.getPrototypeOf(new D);else if("CanvasRenderingContext2D"===e)R[e]=Object.getPrototypeOf(n);else if("CanvasPattern"===e){var a=n.createPattern(t,"repeat");R[e]=Object.getPrototypeOf(a)}else if("CanvasGradient"===e){var r=n.createLinearGradient(0,0,100,100);R[e]=Object.getPrototypeOf(r)}else if("ImageData"===e){var i=n.getImageData(0,0,10,10);R[e]=Object.getPrototypeOf(i)}else if("TextMetrics"===e){var o=n.measureText("123");R[e]=Object.getPrototypeOf(o)}}})),(Lt=Ht({secure:e,isSharedCanvas:!0})).width=o.default.screenWidth,Lt.height=o.default.screenHeight}var t}));var Yt=function(){return new u.default.ScreenCanvas},qt=1,zt=!1;function Kt(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return e.font=t+"px -apple-system",n?e.measureText(n).width:0}o.default.onReady((function(){qt=o.default.pixelRatio,Object(se._operateWXData)({apiName:"webapi_game_issharemarkenabled",reqData:{lib_version:s.SDKVersion},success:function(e){var t=JSON.parse(e.rawData);zt=t.is_enabled}})}));var Xt=function(e){return new Promise((function(t){if(e)if("transparent"===e)t({width:0,height:0});else{var n=new l;n.onload=function(){return t(n)},n.onerror=function(){return t()},n.src=e}else t()}))},Zt=function(){var e=Object(a.default)(i.a.mark((function e(t){var n,a,r,o,s,c,u,l,d,f,p,h,v,g,y,m;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.background,a=t.label,r=t.icon,o=t.tag,s=t.more,c=void 0!==s&&s,u=t.base64,l=void 0!==u&&u,n){e.next=3;break}return e.abrupt("return",n);case 3:return d=Ht({secure:Tt()}),f=d.getContext("2d"),d.width=210*qt,d.height=168*qt,"transparent"===n&&(d.height=40*qt),f.fillStyle="rgba(255, 255, 255, 0)",f.fillRect(0,0,d.width,d.height),e.next=12,Xt(n);case 12:if(p=e.sent){e.next=15;break}return e.abrupt("return",n);case 15:if(p.width/p.height>=1.25?f.drawImage(p,0,0,1.25*p.height,p.height,0,0,d.width,d.height):p.width/p.height<1.25&&f.drawImage(p,0,0,p.width,.8*p.width,0,0,d.width,d.height),h=Kt(f,12*qt,a),!o){e.next=45;break}v=Kt(f,10*qt,o),f.fillStyle="rgba(0, 0, 0, 0.5)",f.beginPath(),f.moveTo(0,8*qt),f.lineTo(h+v+12*qt,8*qt),f.arc(h+v+12*qt,20*qt,12*qt,1.5*Math.PI,2.5*Math.PI),f.lineTo(0,32*qt),f.closePath(),f.fill(),f.fillStyle="#F36D00",f.beginPath(),f.moveTo(4*qt,14*qt),f.arc(6*qt,14*qt,2*qt,Math.PI,1.5*Math.PI),f.lineTo(v+10*qt,12*qt),f.arc(v+10*qt,14*qt,2*qt,1.5*Math.PI,2*Math.PI),f.lineTo(v+12*qt,26*qt),f.arc(v+10*qt,26*qt,2*qt,2*Math.PI,2.5*Math.PI),f.lineTo(6*qt,28*qt),f.arc(6*qt,26*qt,2*qt,.5*Math.PI,Math.PI),f.closePath(),f.fill(),f.fillStyle="#FFFFFF",f.fillText(o,8*qt,23.5*qt),Kt(f,12*qt),f.fillText(a,v+16*qt,24*qt),e.next=79;break;case 45:if(!r){e.next=68;break}return e.next=48,Xt(c&&"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAYAAAAMCAYAAABBV8wuAAAAIGNIUk0AAHomAACAhAAA+gAAAIDoAAB1MAAA6mAAADqYAAAXcJy6UTwAAAAEZ0FNQQAAsY58+1GTAAAAAXNSR0IArs4c6QAAAAZiS0dEAP8A/wD/oL2nkwAAAAlwSFlzAAAOxAAADsQBlSsOGwAAAHtJREFUeNpj/v//v3RDQwNDY2PjLwYkwATEM4F4B1ABL7pEChALoUsyA434AjRqLZCdCcTBQPZqkLGMMBVA1RJAaj8QvwNiD0Zkc5EkHzMxoIL/UMzIhKRaHKr6I8guRiyC7oyMjJ8YsQnC/DEXXRAEWIA4A4g/IQuCAAABEju5SK8v4wAAAABJRU5ErkJggg==");case 48:return g=e.sent,y=g?10*qt:0,f.fillStyle="rgba(0, 0, 0, 0.5)",f.beginPath(),f.moveTo(0,8*qt),f.lineTo(h+y+22*qt,8*qt),f.arc(h+y+22*qt,20*qt,12*qt,1.5*Math.PI,2.5*Math.PI),f.lineTo(0,32*qt),f.closePath(),f.fill(),e.next=60,Xt(r);case 60:(m=e.sent)&&m.width&&m.height&&f.drawImage(m,6*qt,12*qt,16*qt,16*qt),g&&g.width&&g.height&&f.drawImage(g,h+30*qt,14*qt,6*qt,12*qt),f.fillStyle="#FFFFFF",Kt(f,12*qt),f.fillText(a,26*qt,24*qt),e.next=79;break;case 68:f.fillStyle="rgba(0, 0, 0, 0.5)",f.beginPath(),f.moveTo(0,8*qt),f.lineTo(h+2*qt,8*qt),f.arc(h+2*qt,20*qt,12*qt,1.5*Math.PI,2.5*Math.PI),f.lineTo(0,32*qt),f.closePath(),f.fill(),f.fillStyle="#FFFFFF",Kt(f,12*qt),f.fillText(a,6*qt,24*qt);case 79:return e.abrupt("return",l?d.toDataURL():d.toTempFilePathSync());case 80:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Jt=function(e){return new Promise((function(t){zt&&e.imageUrl?Object(se._operateWXData)({apiName:"webapi_game_getsharemark",reqData:{lib_version:s.SDKVersion},success:function(n){var a=n.rawData,r=JSON.parse(a);(r=(r.mark_list||[])[0])||t(e),r&&Zt({background:e.imageUrl,label:r.wording,icon:r.head_img_url,tag:r.mark_word}).then((function(n){e.imageUrl=n,e.extra={shareCardMarker:{label:r.mark_type}},t(e)})).catch((function(){return t(e)}))},fail:function(){return t(e)}}):t(e)}))}},function(e,t,n){n.r(t);var a=n(75),r=n(36),i=n(4),o=n(5),s=n(9),c=n(14),u=n(17),l=n(8),d=n(18),f=n(13),p=n.n(f),h=n(68),v=n.n(h),g=n(33),y=n(65),m=n(42),b=n(89),_=n(22),O=n(127),I=n(2),S=n(24),E=n(1),w=n(156),C=n(70),k=n(108),T=n(126),A=n(62),P=n(27),D={container:{zIndex:1000005,top:0,left:0,overflow:"hidden",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column"},adMaterialBg:{position:"absolute",hidden:!1,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"}},x=Object.assign({},{container:{zIndex:1000005,top:0,left:0,position:"absolute",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",overflow:"hidden",backgroundColor:"#ffffff"},navigator:{hidden:!0,height:72,width:"100%",backgroundColor:"#ffffff"},adMedia:{left:0,width:"100%",flexDirection:"column",overflow:"hidden"},adMaterialBg:{position:"absolute",hidden:!0,top:0,left:0},adMaterial:{position:"absolute",top:0,left:0,width:"100%"},adMaterialContainer:{hidden:!0,position:"absolute",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0,width:"100%"},adMaterialLandscape:{width:311,height:175,marginLeft:32,marginRight:32,borderRadius:8},adCardInfo:{flexDirection:"column",marginTop:32,width:311,height:150},adHeadInfo:{width:311,height:28,flexDirection:"row",alignItems:"center"},adHeadIcon:{width:16,height:16,marginRight:6,borderRadius:8},adversName:{width:88,height:28,lineHeight:28,fontSize:14,lineBreak:"ellipsis",color:"#ffffff",opacity:.6},adTitle:{marginTop:18,height:28,width:216,fontSize:24,color:"#ffffff"},appInfo:{flexDirection:"column",alignItems:"center",width:"100%",height:160,backgroundColor:"#ffffff"},appIcon:{borderRadius:24,marginTop:16,marginBottom:8,width:48,height:48},appName:{width:"100%",height:24,textAlign:"center",lineHeight:24,fontSize:17,color:"#000000"}},{adFeedbackList:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adFeedbackTitle:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#000000"},adFeedbackBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDislikeBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adFeedbackMenu:{hidden:!0,top:74,left:11,width:134,height:98,position:"absolute",borderWidth:1,borderColor:"#E0E0E0",borderRadius:4,backgroundColor:"#ffffff"},adQualityBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDuplicateBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adDismatchBtn:{width:134,height:32,lineHeight:32,textAlign:"center",fontSize:12,color:"#546c99"},adCloseBtnLineDislike:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike1:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike2:{width:134,height:1,backgroundColor:"#E0E0E0"},adCloseBtnLineDislike3:{width:134,height:1,backgroundColor:"#E0E0E0"}},{topBar:{position:"absolute",justifyContent:"flex-start",flexDirection:"row",alignItems:"flex-start",left:0,top:40},adFeedback:{hidden:!1,flex:1,flexDirection:"row",justifyContent:"center",alignItems:"center",height:32,lineHeight:32},adText:{width:28,height:32,lineHeight:32,color:"#ffffff",textAlign:"center",fontSize:14,"ios-portrait":{top:.5},"ios-landscape":{top:.5},"iphone x-portrait":{top:.5},"iphone x-landscape":{top:.5}},rectangle:{width:8.4,height:4.9,marginTop:2,marginLeft:2.5},splitLineLeft:{width:1,height:18.5,marginLeft:8.5,marginRight:8.5,backgroundColor:"rgba(255, 255, 255, 0.25)"},count:{marginLeft:10,paddingLeft:12,paddingRight:12,height:32,borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,justifyContent:"center",backgroundColor:"rgba(0, 0, 0, 0.35)",flex:1,flexDirection:"row",alignItems:"center"},countDown:{width:9,height:32,lineHeight:32,color:"#ffffff",fontSize:14},countDownAppend:{width:15,height:32,lineHeight:32,color:"#ffffff",fontSize:14}},{card:{backgroundColor:"#ffffff",flexDirection:"row",alignItems:"center",justifyContent:"flex-start",height:84,width:"100%"},adIcon:{borderRadius:20,opacity:.95,width:40,height:40,marginRight:8,marginBottom:12,marginLeft:16},adInformation:{marginBottom:12,flex:1,flexDirection:"column",justifyContent:"center",overflow:"hidden"},adName:{height:24,lineHeight:24,fontSize:17,lineBreak:"ellipsis",color:"#000000",marginBottom:2},adWording:{height:20,lineHeight:20,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:14},buttonContainer:{marginBottom:12,flex:1,flexDirection:"row",justifyContent:"flex-end",marginRight:16,marginLeft:12,overflow:"hidden"},button:{height:32,lineHeight:32,width:88,textAlign:"center",lineBreak:"ellipsis",fontSize:16,color:"#ffffff",backgroundColor:"#07c160",borderWidth:1,borderColor:"#07c160",borderRadius:3,marginRight:10,marginLeft:10}},{closeContainer:{flexDirection:"column",justifyContent:"flex-end",alignSelf:"flex-end",marginBottom:16,height:54},close:{height:32,lineHeight:32,width:60,marginLeft:12,marginRight:12,textAlign:"center",lineBreak:"ellipsis",fontSize:14,color:"#ffffff",borderRadius:16,borderColor:"rgba(255, 255, 255, 0.25)",borderWidth:.5,alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.35)"}},{tipsContainer:{marginTop:12,flex:1,height:32,width:"100%",flexDirection:"column",justifyContent:"center",overflow:"hidden"},tipsLineOne:{height:16,textAlign:"center",lineHeight:16,lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11},tipsLineTwo:{height:16,lineHeight:16,textAlign:"center",lineBreak:"ellipsis",color:"#000000",opacity:.3,fontSize:11}},{adCloseTips:{hidden:!0,position:"absolute",overflow:"hidden",flexDirection:"column",justifyContent:"center",alignItems:"center",top:0,left:0},adCloseTipsWrap:{width:124,height:36,flexDirection:"column",justifyContent:"center",alignItems:"center",backgroundColor:"rgba(40, 40, 40, 0.7)",borderRadius:5},adCloseTipsContent:{width:124,height:36,lineHeight:36,fontSize:14,color:"#ffffff",textAlign:"center"}},{mediaBottom:{backgroundColor:"#ffffff",borderRadius:8,height:24,width:"100%",alignSelf:"flex-end"}},{adButtonContainer:{width:375,height:64,overflow:"hidden",flexDirection:"row",justifyContent:"space-between",alignItems:"center",backgroundColor:"rgba(0, 0, 0, 0.15)",borderRadius:2},adButton:{marginLeft:32,flex:1,height:28,lineHeight:28,lineBreak:"ellipsis",fontSize:17,color:"#ffffff",opacity:.9,borderRadius:3},actionIconContainer:{marginRight:32,flexDirection:"row",justifyContent:"center",alignItems:"center",width:12,height:14},actionIconWrap1:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},actionIconWrap2:{flex:1,flexDirection:"column",justifyContent:"center",alignItems:"center",height:14},iconArrow1:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow2:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5},iconArrow3:{top:3,width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-45,borderRadius:.5},iconArrow4:{width:2,height:7,backgroundColor:"#ffffff",opacity:.9,rotate:-135,borderRadius:.5}}),R={card:'\n  <view id="card">\n    <image id="ad-icon" bubble-event="true" src="https://wxa.wxs.qq.com/images/raphael/icon.png"></image>\n    <view id="ad-information" bubble-event="true">\n      <text id="ad-name" bubble-event="true" value="微信广告"></text>\n      <text id="ad-wording" bubble-event="true" value="本次封面广告赞助"></text>\n    </view>\n    <view id="button-container">\n      <text id="button" click-state="true" bubble-event="true" value="查看详情"></text>\n    </view>\n  </view>\n',appInfo:'\n  <view id="app-info">\n    <image id="app-icon"></image>\n    <text id="app-name"></text>\n  </view>\n',feedbackContent:'\n  <view id="ad-feedback-list">\n    <text id="ad-feedback-title" value="由赞助商提供的内容"></text>\n    <view id="ad-close-btn-line-dislike"></view>\n    <text id="ad-dislike-btn" click-state="true" value="不感兴趣"></text>\n    <view id="ad-close-btn-line-dislike1"></view>\n    <text id="ad-feedback-btn" click-state="true" value="投诉"></text>\n  </view>\n',feedbackMenu:'\n  <view id="ad-feedback-menu">\n    <text id="ad-dismatch-btn" click-state="true" value="与我无关"></text>\n    <view id="ad-close-btn-line-dislike2"></view>\n    <text id="ad-duplicate-btn" click-state="true" value="重复收到多次"></text>\n    <view id="ad-close-btn-line-dislike3"></view>\n    <text id="ad-quality-btn" click-state="true" value="内容太差"></text>\n  </view>\n',topBar:'\n  <view id="top-bar">\n    <view id="count">\n      <view id="ad-feedback">\n        <text id="ad-text" value="广告" bubble-event="true"></text>\n        <image id="rectangle" src="http://wxsnsdythumb.wxs.qq.com/109/20204/snsvideodownload?m=2e68819eca56a58c0a6cb6180ccb2540&filekey=3033020101041f301d02016d0402534804102e68819eca56a58c0a6cb6180ccb25400202017d040d00000004627466730000000131&hy=SH&storeid=32303138303830393032313634303030303230386639313336666664393337303561333230613030303030303664&bizid=1023" bubble-event="true"></image>\n        <view id="split-line-left" bubble-event="true"></view>\n      </view>\n      <text id="count-down" value="5"></text>\n      <text id="count-down-append" value="秒"></text>\n    </view>\n  </view>\n',close:'\n  <view id="close-container">\n    <text id="close" click-state="true" bubble-event="true" value="跳过"></text>\n  </view>\n',gameTips:'\n  <view id="tips-container">\n    <text id="tips-line-one" value="抵制不良游戏，拒绝盗版游戏。 注意自我保护，谨慎受骗上当。"></text>\n    <text id="tips-line-two" value="适度游戏益脑，沉迷游戏伤身。 合理安排时间，享受健康生活。"></text>\n  </view>\n',closeTips:'\n  <view id="ad-close-tips">\n    <view id="ad-close-tips-wrap">\n      <text id="ad-close-tips-content" bubble-event="true" value="感谢你的反馈"></text>\n    </view>\n  </view>\n',mediaBottom:'\n  <view id="media-bottom">\n  </view>\n',adHeadInfo:'\n  <view id="ad-head-info" bubble-event="true">\n    <image id="ad-head-icon" bubble-event="true" src=""></image>\n    <text id="advers-name" value="" bubble-event="true"></text>\n  </view>\n',adTitle:'\n  <text id="ad-title" value="" bubble-event="true"></text>\n',adButtonContainer:'\n  <view id="ad-button-container">\n    <text id="ad-button" bubble-event="true" value=""></text>\n    <view id="action-icon-container">\n      <view id="action-icon-wrap-1">\n        <view id="icon-arrow-1"></view>\n        <view id="icon-arrow-2"></view>\n      </view>\n      <view id="action-icon-wrap-2">\n        <view id="icon-arrow-3"></view>\n        <view id="icon-arrow-4"></view>\n      </view>\n    </view>\n  </view>\n'},j=n(11),M=n(74),N=n(40);function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,a=Object(l.default)(e);if(t){var r=Object(l.default)(this).constructor;n=Reflect.construct(a,arguments,r)}else n=a.apply(this,arguments);return Object(u.default)(this,n)}}function B(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return F(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var a=0,r=function(){};return{s:r,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==n.return||n.return()}finally{if(s)throw i}}}}function F(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var W=function(e,t,n,a){return new(n||(n=Promise))((function(r,i){function o(e){try{c(a.next(e))}catch(e){i(e)}}function s(e){try{c(a.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(o,s)}c((a=a.apply(e,t||[])).next())}))},V=function(){return S.logReport.apply(void 0,arguments)},U=v()('\n  <view id="container">\n    <view id="navigator"></view>\n    <view id="ad-media">\n      <image id="ad-material-bg"></image>\n      <image id="ad-material" bubble-event="true"></image>\n      <view id="ad-material-container" bubble-event="true">\n        <image id="ad-material-landscape" bubble-event="true"></image>\n        <view id="ad-card-info" bubble-event="true"></view>\n      </view>\n    </view>\n  </view>\n').root,G=0,H=0,Y=0,q=0,z=0,K=0,X=0,Z=!1,J=!1,Q=!1,$="",ee="",te="",ne="",ae=j.WX_AD_PATH+"/adinfos.txt",re=I.IS_ANDROID?200:400,ie=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=Object(_.getPrivateThis)(this),a=n.adProxy.isTriggerClick(e),r=a?0:1;return t&&oe.call(this,e,r),a},oe=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,a=Object(_.getPrivateThis)(this);if(a.container&&a.container.layoutBox){var r=a.container.layoutBox,i=r.width,o=r.height,s=0;[0,2,3].includes(n)&&(a.clickCount+=1,s=a.clickCount);var c={slotid:j.POS_ID_MAP[a.adType],costtype:(null===(t=a.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,click_time:Date.now(),click_cnt:s,start_posx:parseInt(e.relativeX,10)||0,start_posy:parseInt(e.relativeY,10)||0,end_posx:parseInt(e.relativeEndX,10)||0,end_posy:parseInt(e.relativeEndY,10)||0,ad_width:parseInt(i,10)||0,ad_height:parseInt(o,10)||0,press_interval:e.pressInterval,block_click:n};return a.adProxy.reportTouchClick(c)}},se=function(){var e=Object(_.getPrivateThis)(this),t=!1;return(0===e.startExposureTime||+new Date-e.startExposureTime<1e3)&&(t=!0),t},ce=function(e,t){var n,a=Object(_.getPrivateThis)(this),r=a.container.style,i=r.width,o=r.height,s={click_button:e,cost_type:(null===(n=a.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,slotid:j.POS_ID_MAP[a.adType],is_game:Z?1:0,pageentertime:+new Date(a.adProxy.getProgramStartTime()),ad_width:parseInt(i,10)||0,ad_height:parseInt(o,10)||0,clientexptime:a.startExposureTime,clientclktime:+new Date,pressinterval:t.pressInterval,pos_x:parseInt(t.absoluteX,10)||0,pos_y:parseInt(t.absoluteY,10)||0,screen_width:G,screen_height:H};return a.adProxy.reportAntifraud(s)},ue=function(e){var t=Object(_.getPrivateThis)(this),n=e.then((function(e){return/ok/.test(e.errMsg)?t.adProxy.reportFollow({result:"success"}):/cancel/.test(e.errMsg)?t.adProxy.reportFollow({result:"cancel"}):void 0})).catch((function(){return t.adProxy.reportFollow({result:"fail"})}));V(n,"splashAd","关注")},le=function(e){var t,n=Object(_.getPrivateThis)(this),a=+new Date,r={slotid:j.POS_ID_MAP[n.adType],is_game:Z?1:0,costtype:(null===(t=n.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,close_type:e,exposure_duration:a-n.startExposureTime-n.hideDuration,start_time:n.startExposureTime,close_time:a};return n.adProxy.reportCloseAction(r)},de=function(e){var t,n=Object(_.getPrivateThis)(this),a={slotid:j.POS_ID_MAP[n.adType],is_game:Z?1:0,costtype:(null===(t=n.adProxy.data)||void 0===t?void 0:t.is_cpm)?1:2,button_type:e};return n.adProxy.reportAdEntranceExposure(a)},fe=function(e){var t=e.firstGradeId,n=void 0===t?1:t,a=e.firstGradeDesc,r=void 0===a?"广告角标":a,i=e.secondGradeId,o=void 0===i?0:i,s=e.secondGradeDesc,c=void 0===s?"":s,u=e.feedbackReason,l=void 0===u?0:u,d=Object(_.getPrivateThis)(this);n&&!o&&(d.clickFirstGradeTime=+new Date),d.adProxy.reportAdFeedbackData({adWidth:G,adHeight:H,adPosX:0,adPosY:0,expTime:d.startExposureTime,slotId:j.POS_ID_MAP[d.adType],firstGradeId:n,firstGradeDesc:r,firstGradeTime:n?d.clickFirstGradeTime:0,secondGradeId:o,secondGradeDesc:c,secondGradeTime:o?+new Date:0,feedbackReason:l})},pe=function e(){var t=this,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=Object(_.getPrivateThis)(this);if(!a.isShowed)return Promise.resolve();if(!a.data||!a.container.layoutBox)return Object(S.timeout)(100).then((function(){return e.call(t,n)}));var r=a.container.layoutBox,i=r.left,o=r.top,s=r.width,c=r.height;if(!a.isShowedExposureReported){a.isShowedExposureReported=!0,a.startExposureTime=+new Date,a.adProxy.setTimePoint("p6");var u=E.default.onReady((function(){a.adProxy.reportExposure({left:i,top:o,width:s,height:c,exposureType:"showed",source:a.source});var e="launch"===a.source?j.SPLASHAD_IDKEY.firstShowSuccess:j.SPLASHAD_IDKEY.secondShowSuccess;a.adProxy.reportAdMonitorData(e),a.adProxy.setSplashAdShowStatus()}));V(u,"splashAd","原始")}if(!a.isViewableExposureReported){if(!n)return Object(S.timeout)(1e3).then((function(){return e.call(t,!0)}));a.adProxy.setTimePoint("p7"),a.isViewableExposureReported=!0,a.adProxy.isViewable=!0;var l=a.adProxy.reportExposure({left:i,top:o,width:s,height:c,exposureType:"viewable",source:a.source});V(l,"splashAd","可视")}return Promise.resolve()},he=function(e){var t=Object(_.getPrivateThis)(this);if(t.container&&t.container.layoutBox){var n=t.container.layoutBox,a=n.left,r=n.top,i=n.width,o=n.height,s=t.adProxy.reportClick({clickAbsoluteLeft:e.absoluteX,clickAbsoluteTop:e.absoluteY,clickRelativeLeft:e.absoluteX-a,clickRelativeTop:e.absoluteY-r,pressInterval:e.pressInterval,left:a,top:r,width:i,height:o,source:t.source});return V(s,"splashAd","点击"),s}},ve=function(e,t){var n=this,a=Object(_.getPrivateThis)(this),r=a.data,i=r.appInfo,o=i.apkName,s=i.channelId,c=i.urlScheme,u=r.product_type,l=r.dest_type;if(12===u&&I.IS_ANDROID&&4===a.androidAppState&&c&&c.trim().length>0)he.call(this,e),ce.call(this,t,e),a.adProxy.launchApplication(c).catch((function(){})),a.lastJsapiName="launchApplication",a.isLandingPage=!0;else if(12===u&&I.IS_ANDROID&&a.isYYBInstalled){he.call(this,e),ce.call(this,t,e);var d=a.adProxy.data,f=d.aid,p=d.traceid,h=d.apurl,v=["ANDROIDWX.YYB.WX.ADVERTISE",p,f,o.replace(/\./g,"_"),"0",15,h.indexOf("ad.wx.com")>-1?1:0].join("."),g="tmast://download?oplist=1,2&pname="+o+"&channelid="+s+"&via="+v;a.adProxy.launchApplication(g).catch((function(){ge.call(n)})),a.lastJsapiName="launchApplication",a.isLandingPage=!0}else I.IS_IOS&&46===u&&6===l?Promise.race([he.call(this,e),Object(S.timeout)(500)]).then((function(){ce.call(n,t,e),ge.call(n)})).catch((function(){ce.call(n,t,e),ge.call(n)})):(he.call(this,e),ce.call(this,t,e),ge.call(this))},ge=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(_.getPrivateThis)(this),n=t.adProxy.land(e);return 23===t.data.product_type&&e&&e.isButton&&!t.adProxy.data.biz_info.is_subscribed?(n.then((function(e){var n,a=/ok/.test(e.errMsg);a&&t.adProxy.data.biz_info&&(t.adProxy.data.biz_info.is_subscribed=1),e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","").replace(":fail cancel",""));var r=+new Date;t.lastJsapiStatus=0,t.lastJsapiCostTime=r-t.lastLandingTime,"private_addContact"===t.lastJsapiName&&t.adProxy.reportLandingTime({slotId:j.POS_ID_MAP[t.adType],costType:(null===(n=t.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,openTime:t.lastLandingTime,closeTime:r,stayTime:t.lastJsapiCostTime,jsapiName:t.lastJsapiName,clickTime:t.lastLandingTime,clkCnt:t.clickCount,retCode:t.lastJsapiStatus,costTime:t.lastJsapiCostTime,actTypeInt:a?2:3,actTypeStr:a?"关注":"取消"})})).catch((function(){t.lastJsapiStatus=1})),ue.call(this,n)):n.then((function(e){e.errMsg&&(t.lastJsapiName=e.errMsg.replace(":ok","")),"private_openUrl"===t.lastJsapiName||"navigateToMiniProgram"===t.lastJsapiName||"openADCanvas"===t.lastJsapiName||"launchApplication"===t.lastJsapiName?t.isLandingPage=!0:t.lastJsapiStatus=0,t.lastJsapiCostTime=+new Date-t.lastLandingTime})).catch((function(e){t.lastJsapiStatus=1,t.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.landingPageFail,{source:t.source,msg:e})})),n},ye=function(e){var t,n=Object(_.getPrivateThis)(this),a=B(e);try{for(a.s();!(t=a.n()).done;){var r=t.value;n[r]&&clearTimeout(n[r])}}catch(e){a.e(e)}finally{a.f()}},me=function(){var e,t=Object(_.getPrivateThis)(this);t.eventsMap={},(null===(e=t.appInfo)||void 0===e?void 0:e.style)&&(t.appInfo.style.top=16),t.componentsRenderred=!1,t.firstInserted=!1,t.adFeedbackInserted=!1,t.isDynamic=!1,t.isShowedExposureReported=!1,t.startExposureTime=0,t.isViewableExposureReported=!1,t.isShowed=!1,t.adProxy.isViewable=!1,t.clickCount=0,t.lastLandingTime=0,t.lastJsapiName="",t.lastJsapiStatus=0,t.lastJsapiCostTime=0,t.isLandingPage=!1,t.landingPageCostTime=0,t.hideTime=0,t.hideDuration=0,t.isClosing=!1,t.isShowCloseTip=!1,t.clickFirstGradeTime=0,t.source="",ye.call(this,["countTimer"]),E.default.onReady((function(){var e,n,a;t.adProxy.reportTimePoints({slotid:j.POS_ID_MAP[t.adType],costtype:(null===(e=t.adProxy.data)||void 0===e?void 0:e.is_cpm)?1:2,splash_instance_id:null===(n=t.showInfo)||void 0===n?void 0:n.instanceId,scene:null===(a=t.showInfo)||void 0===a?void 0:a.scene,extInfo:{adInfos:t.adInfos}})}))},be=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;t&&le.call(this,t),Object(P.closeSplashAd)(e)},_e=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=Object(_.getPrivateThis)(this);return t.adProxy.fetch(!1,e).catch((function(){}))},Oe=function(){var e=Object(_.getPrivateThis)(this);if((I.IS_ANDROID||I.IS_IOS)&&!Q)try{e.adFetchResult=_e.call(this),e.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.OTHER_ADS_EMIT_FETCH)}catch(e){}},Ie=function(){var e,t=Object(_.getPrivateThis)(this).data||{},n={};if(null===(e=t.crtInfo)||void 0===e?void 0:e.card_info)n=t.crtInfo.card_info;else if(t.crtInfo&&t.crtInfo.length>0){var a=t.crtInfo?t.crtInfo[0]:{};n=(null==a?void 0:a.card_info)?a.card_info:{}}return n},Se=function e(){var t=this,n=Object(_.getPrivateThis)(this),a=5e3-(+new Date-n.startExposureTime-n.hideDuration);if(a>=0){var r=Math.ceil(a/1e3).toString();n.countDown&&(n.countDown.value=r),n.tplComponent&&n.tplComponent.emitAdCustomEvent(C.CUSTOM_EVENT.CHANGECOUNTDOWN,{value:r}),n.countTimer&&clearTimeout(n.countTimer),n.countTimer=setTimeout((function(){e.call(t)}),1e3)}else"launch"===n.source&&n.isShowedExposureReported&&(n.isDynamic&&n.tplComponent.hide(),be.call(this,{source:n.source,animated:!0},12))},Ee=function(){var e,t=Object(_.getPrivateThis)(this);if("launch"===t.source)t.topBar&&q&&(t.topBar.style.top=q,t.adFeedbackMenu.style.top=q+34,t.adFeedbackList.style.top=q+34),t.closeContainer&&(t.closeContainer.style.marginTop=z-68),t.appInfo&&(t.appInfo.style.height=K,t.appInfo.style.width=G,t.isDarkMode&&(t.appInfo.style.backgroundColor="#191919",t.container.style.backgroundColor="#191919")),t.appIcon&&(t.appIcon.src=t.showInfo.appIcon,t.appIcon.style.marginTop=Z?16:28),t.appName&&(t.appName.value=t.showInfo.appName,t.appName.style.width=G,t.appName.style.color=t.isDarkMode?"#ffffff":"#000000"),t.tipsContainer&&(t.tipsContainer.style.height=32,t.tipsContainer.style.width=G,t.tipsLineOne.style.width=G,t.tipsLineOne.style.color=t.isDarkMode?"#ffffff":"#000000",t.tipsLineTwo.style.color=t.isDarkMode?"#ffffff":"#000000"),t.adCloseTips&&(t.adCloseTips.style.height=H-K,t.adCloseTips.style.width=G);else if("menu"===t.source){if(!t.data)return;var n=t.data,a=Ie.call(this),r=Object(m.getSystemInfoSync)();t.adIcon.src=a.thumb,t.adName.value=a.title,(null===(e=n.button_action)||void 0===e?void 0:e.button_text)&&(t.button.value=n.button_action.button_text),r.screenTop&&r.screenTop>0?Y=r.screenTop:Y&&0!==Y||(Y=88*H/812),t.navigator.style.height=Y,t.navigator.style.backgroundColor=t.isDarkMode?"#191919":"#ffffff",t.card.style.backgroundColor=t.isDarkMode?"#191919":"#ffffff",t.card.style.width=G,t.card.style.height=K-Y,t.adName.style.color=t.isDarkMode?"#ffffff":"#000000",t.adWording.style.color=t.isDarkMode?"#ffffff":"#000000",t.mediaBottom&&(t.mediaBottom.style.marginTop=z-12,t.mediaBottom.style.width=G,t.mediaBottom.style.backgroundColor=t.isDarkMode?"#191919":"#ffffff")}if("landscape"===t.crtOrientation){var i=t.data||{},o=Ie.call(this);if(o&&t.adHeadInfo&&(t.adHeadIcon.src=o.thumb||"",t.adversName.value=o.title||"",t.adHeadInfo.style.width=G/375*311,t.adversName.style.width=G/375*311),i.hint_txt&&t.adTitle&&i.crt_size!==j.CRT_SIZE.CRT_SIZE_BIG_PIC?(t.adTitle.value=i.hint_txt,t.adTitle.style.width=G/375*311):o.description&&t.adTitle?(t.adTitle.value=o.description,t.adTitle.style.width=G/375*311):t.adTitle&&i.product_type&&j.BIG_PIC_TITLE_MAP[i.product_type]&&(t.adTitle.value="今日"+j.BIG_PIC_TITLE_MAP[i.product_type]+"推荐",t.adTitle.style.width=G/375*311),i.button_action&&t.adButtonContainer){t.adButton.value=i.button_action.button_text,t.adButtonContainer.style.width=G,t.closeContainer&&(t.closeContainer.style.marginTop=z-132);var s={text:i.button_action.button_text,fontSize:17},c=Object(N.measureText)(s)||80;t.adButton.style.width=c+8,t.adButton.style.width+12>100&&(t.adButton.style.width=t.adButton.style.width+12)}}},we=function(e){var t=Object(_.getPrivateThis)(this);if(t.dynamicElems||(t.dynamicElems={}),t.dynamicEmitter||Pe.call(this),!t.dynamicElems.root){var n=t.data.adDynamicList,a=ke.call(this,{tpl:n,source:e}),r=a.getRootElement();t.dynamicElems.root=r,t.container.add(t.dynamicElems.root),a.show(),t.tplComponent=a,t.tplComponent.emitComponentEvent(k.ROOT_EVENT.SPLASHADFIRSTRENDER)}},Ce=function(){var e="",t=Object(_.getPrivateThis)(this).adProxy.data,n=Ie.call(this);return t.hint_txt&&t.crt_size!==j.CRT_SIZE.CRT_SIZE_BIG_PIC?e=t.hint_txt:n.description?e=n.description:t.product_type&&j.BIG_PIC_TITLE_MAP[t.product_type]&&(e="今日"+j.BIG_PIC_TITLE_MAP[t.product_type]+"推荐"),e},ke=function(e){var t=e.tpl,n=e.source,a=Object(_.getPrivateThis)(this),r=a.adProxy.data,i=Ce.call(this),o=Ie.call(this);return Object(A.render)(w.CustomRoot,{manager:null,reporter:null,emitter:a.dynamicEmitter,adProxy:a.adProxy,template:t,systemInfo:{screenWidth:G,screenHeight:H},adData:r,adCustomId:"dynamic",isEmpty:!1,scope:{rightButtonTop:q||40,source:n,screenTop:Y||88*H/812,isDarkMode:a.isDarkMode,adTitle:i||"",cardInfo:o,materialFile:$,materialBgFile:te,materialBlurFile:ne,private:a,appIcon:a.showInfo.appIcon,appName:a.showInfo.appName}},!1)},Te=function(e){var t=Object(_.getPrivateThis)(this);ie.call(this,e,!1)&&(se.call(this)||"launch"===t.source&&be.call(this,{source:t.source,animated:!0},11))},Ae=function(e){var t=this,n=Object(_.getPrivateThis)(this);switch(e.action){case C.CUSTOM_EVENT.LANDAD:var a=e.value,r=a.event,i=a.index;if(!ie.call(this,r,13===i))return;13===i&&ve.call(this,r,i),be.call(this,{source:n.source,animated:!1},i),16===i&&(n.isLandingPage=!0,Object(S.timeout)(re).then((function(){return ve.call(t,r,i)})));break;case C.CUSTOM_EVENT.CHECKEXPOSURE:n.dynamicRendered=!0,n.isShowedExposureReported||pe.call(this),n.countTimer||Se.call(this);break;case C.CUSTOM_EVENT.FEEDBACKREPORT:fe.call(this,e.value);break;case C.CUSTOM_EVENT.FEEDBACKBTNTAP:n.data&&n.adProxy.openFeedbackUrl(1014);break;case C.CUSTOM_EVENT.REPORTMMDATA:e.value.id&&e.value.data&&n.adProxy.reportMMData(parseInt(e.value.id,10),e.value.data);break;case C.CUSTOM_EVENT.SPLASHSKIPAD:var o=e.value.event;Te.call(this,o);break;case C.CUSTOM_EVENT.REPORTADMONITORDATA:var s=null==e?void 0:e.value,c=s.id,u=s.key,l=s.extInfo,d=c?{idKeyGroup:c,idKey:u}:u;n.adProxy.reportAdMonitorData(d,l)}},Pe=function(){var e=this,t=Object(_.getPrivateThis)(this);t.dynamicEmitter=new T.EventEmitter,t.dynamicEmitter.on("adCustomEvent",(function(t){Ae.call(e,t)}))},De=function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=Object(_.getPrivateThis)(this);e.forEach((function(e){var n=v()(R[e.name]).root,r=_.create.call(t,n);a[e.parent].add(r)})),a.componentsRenderred=!0,Ee.call(this),n&&xe.call(this)},xe=function(){var e=this,t=Object(_.getPrivateThis)(this);t.adFeedback&&!t.eventsMap.adFeedback&&t.adFeedback.on("click",(function(n){ie.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!t.adFeedbackMenu.style.hidden||!t.adFeedbackList.style.hidden,t.adFeedbackMenu.style.hidden=!0,t.adFeedbackList.style.hidden||fe.call(e,{firstGradeId:1,firstGradeDesc:"广告角标"}))})),t.adFeedbackBtn&&!t.eventsMap.adFeedbackBtn&&t.adFeedbackBtn.on("click",(function(n){ie.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,fe.call(e,{secondGradeId:1,secondGradeDesc:"投诉"}),"launch"===t.source&&be.call(e,{source:t.source,animated:!0},17),t.data&&t.adProxy.openFeedbackUrl(1014))})),t.adDislikeBtn&&!t.eventsMap.adDislikeBtn&&t.adDislikeBtn.on("click",(function(n){ie.call(e,n,!1)&&(t.adFeedbackList.style.hidden=!0,t.adFeedbackMenu.style.hidden=!1,fe.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣"}))})),t.adQualityBtn&&!t.eventsMap.adQualityBtn&&t.adQualityBtn.on("click",(function(n){ie.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,fe.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:4}),"launch"===t.source&&be.call(e,{source:t.source,animated:!0},17))})),t.adDuplicateBtn&&!t.eventsMap.adDuplicateBtn&&t.adDuplicateBtn.on("click",(function(n){ie.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,fe.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:5}),"launch"===t.source&&be.call(e,{source:t.source,animated:!0},17))})),t.adDismatchBtn&&!t.eventsMap.adDismatchBtn&&t.adDismatchBtn.on("click",(function(n){ie.call(e,n,!1)&&(t.adFeedbackMenu.style.hidden=!0,fe.call(e,{secondGradeId:2,secondGradeDesc:"不感兴趣",feedbackReason:1}),"launch"===t.source&&be.call(e,{source:t.source,animated:!0},17))})),t.closeContainer&&!t.eventsMap.closeContainer&&t.closeContainer.on("click",(function(n){ie.call(e,n,!1)&&(se.call(e)||"launch"===t.source&&be.call(e,{source:t.source,animated:!0},11))})),t.adMedia&&!t.eventsMap.adMedia&&t.adMedia.on("click",(function(t){Re.call(e,t,"adMedia")})),t.adButtonContainer&&!t.eventsMap.adButtonContainer&&t.adButtonContainer.on("click",(function(t){Re.call(e,t,"button")})),t.buttonContainer&&!t.eventsMap.buttonContainer&&t.buttonContainer.on("click",(function(n){if(ie.call(e,n,!1))return t.data?(be.call(e,{source:t.source,animated:!1},16),t.isLandingPage=!0,Object(S.timeout)(re).then((function(){return ve.call(e,n,16)}))):void 0}));for(var n=0,a=["adFeedback","adFeedbackBtn","adDislikeBtn","adQualityBtn","adDuplicateBtn","adDismatchBtn","closeContainer","adMedia","buttonContainer","adButtonContainer"];n<a.length;n++){var r=a[n];t[r]&&!t.eventsMap[r]&&(t.eventsMap[r]=!0)}},Re=function(e){var t,n,a=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=Object(_.getPrivateThis)(this),o=(null===(n=null===(t=null==i?void 0:i.data)||void 0===t?void 0:t.condition)||void 0===n?void 0:n.widget_gray_splash_click_area_switch)||0;if((!o||"button"===r)&&ie.call(this,e,!1))return i.data&&"launch"===i.source?!Z||I.IS_ANDROID?(ve.call(this,e,13),Object(S.timeout)(200).then((function(){return be.call(a,{source:i.source,animated:!1},13)}))):(be.call(this,{source:i.source,animated:!1},13),ve.call(this,e,13)):void 0},je=function(){var e=Object(_.getPrivateThis)(this);if(e.data){var t=Ie.call(this);t&&"launch"===e.source&&Object(P.showSplashAdMenu)({showMenu:!0,title:t.title,icon:t.thumb,success:function(){e.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.showSplashAdMenuSuccess)},fail:function(t){e.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.showSplashAdMenuFail,{msg:t})}})}},Me=function(){var e,t=Object(_.getPrivateThis)(this);try{var n=(null===(e=t.data)||void 0===e?void 0:e.aid)||"";t.adProxy.data&&t.adInfos&&t.adInfos.waidMap&&(t.adProxy.data.waid=t.adInfos.waidMap[n])}catch(e){}},Ne=function(){var e=Object(_.getPrivateThis)(this);if(!e.data||""===e.data||"object"!==Object(d.default)(e.data)){var t=P.fs.readFileSync(ee,"utf-8");try{var n=JSON.parse(t);e.data=n,e.adProxy.data=n}catch(t){E.default.onReady((function(){e.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.readFileDataFail,{source:e.source,msg:t})}))}}},Le=function(){var e=Object(_.getPrivateThis)(this);if("launch"===e.source){De.call(this,[{parent:"adMedia",name:"topBar"}],!0),e.adFeedbackInserted=!0}},Be=function(){var e=Object(_.getPrivateThis)(this);if("launch"===e.source){var t=[{parent:"container",name:"appInfo"},{parent:"adMedia",name:"feedbackContent"},{parent:"adMedia",name:"feedbackMenu"},{parent:"adMedia",name:"close"},{parent:"container",name:"closeTips"}];"landscape"===e.crtOrientation&&(t=t.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"},{parent:"adMedia",name:"adButtonContainer"}])),(I.IS_ANDROID||q>0)&&(t.push({parent:"adMedia",name:"topBar"}),e.adFeedbackInserted=!0),e.showInfo.isGame&&t.push({parent:"appInfo",name:"gameTips"}),De.call(this,t,!0),Object(P.splashAdAllViewLayoutStateChange)({state:0}),g.nativeviewLayout.layout().then((function(){Object(P.splashAdAllViewLayoutStateChange)({state:1}),g.nativeviewLayout.auto=!0})).catch((function(t){E.default.onReady((function(){e.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.secondInsertFail,{source:e.source,msg:t})}))}))}},Fe=function(){var e=Object(_.getPrivateThis)(this);K=Math.max(160,160*H/812),z=H-K,e.adMedia.style.width=G,e.adMedia.style.height=z;var t=9*H/16;e.adMaterial.style.width=t,e.adMaterial.style.height=H,e.adMaterial.style.left=t>G?(G-t)/2:0,"portrait"===e.crtOrientation?e.adMaterial.src=$:"landscape"===e.crtOrientation&&(e.adMaterialBg.style.hidden=!1,e.adMaterialContainer.style.hidden=!1,e.adMaterial.style.width=G,e.adMaterial.style.height=z,e.adMaterial.style.left=0,e.adMaterialContainer.style.width=G,e.adMaterialContainer.style.height=z,e.adMaterial.src=te,e.adMaterialBg.style.width=.45*H*16/9,e.adMaterialBg.style.height=.45*H,e.adMaterialBg.style.left=-(.45*H*16/9-G)/2,e.adMaterialLandscape.style.width=G/375*311,e.adMaterialLandscape.style.height=G/375*175,e.adMaterialBg.src=$,e.adMaterialLandscape.src=$,e.adCardInfo.style.width=G/375*311,e.adCardInfo.style.marginLeft=8),e.adMaterial.scale=H/1920},We=function(e){var t,n=this,a=Object(_.getPrivateThis)(this);if(a.showInfo=e,a.source=e.source,a.isDarkMode=e.isDarkMode||!1,e.isGame&&(Z=e.isGame),G=e.screenWidth,H=e.screenHeight,null===(t=null==a?void 0:a.data)||void 0===t?void 0:t.adDynamicList){var r=v()('\n  <view id="container">\n  </view>\n').root;O.adInit.call(this,r,D),a.isDynamic=!0,we.call(this,e.source)}else O.adInit.call(this,U,x),Fe.call(this);if(a.container.style.width=G,a.container.style.height=H,a.container.style.backgroundColor=a.isDarkMode?"#191919":"#ffffff",g.nativeviewLayout.add(a.container),!a.isDynamic)try{P.fs.access({path:ne,success:function(){a.adMaterialBg.src=ne}})}catch(e){}var i=[];"menu"!==a.source||a.isDynamic||(Ne.call(this),i=[{parent:"container",name:"card"},{parent:"adMedia",name:"mediaBottom"}],"landscape"===a.crtOrientation&&(i=i.concat([{parent:"adCardInfo",name:"adHeadInfo"},{parent:"adCardInfo",name:"adTitle"}])),a.navigator.style.hidden=!1,De.call(this,i,!0)),Object(P.splashAdFirstStepViewLayoutStateChange)({state:0}),g.nativeviewLayout.layout().then((function(){if(a.firstInserted=!0,a.isShowed=!0,Object(P.splashAdFirstStepViewLayoutStateChange)({state:1}),"launch"!==a.source||a.isDynamic)g.nativeviewLayout.auto=!0,a.container.requestLayout();else try{Be.call(n)}catch(e){E.default.onReady((function(){a.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.secondRenderFail,{source:a.source,msg:e})}))}})).catch((function(e){E.default.onReady((function(){a.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.firstInsertFail,{source:a.source,msg:e})}))}))},Ve=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2?arguments[2]:void 0,a=arguments.length>3?arguments[3]:void 0,r=Object(_.getPrivateThis)(this),i=j.SPLASHAD_ERROR_CODE[a],o=j.SPLASHAD_IDKEY[a];return E.default.onReady((function(){var n;r.adProxy.reportAdMonitorData(o,t),r.adProxy.reportTimePoints({slotid:j.POS_ID_MAP[r.adType],costtype:(null===(n=r.adProxy.data)||void 0===n?void 0:n.is_cpm)?1:2,splash_instance_id:e.instanceId,errCode:i,scene:e.scene,extInfo:t})})),Object(P.showSplashAd)({adCallTime:Date.now(),errCode:i,show:!1,eventReceivedTime:n.startInit,cgiFetchStart:n.startFetchTime||0,cgiFetchCallBack:n.fetchCallbackTime||0})},Ue=function(e){Object(c.default)(n,e);var t=L(n);function n(){var e;Object(i.default)(this,n),e=t.call(this);var r=Object(_.getPrivateThis)(Object(s.default)(e));return r.canShowed=!1,r.today=Object(N.getTodayFormat)(),r.countTimer=null,r.componentsRenderred=!1,r.isShowed=!1,r.firstInserted=!1,r.adFeedbackInserted=!1,r.isDynamic=!1,r.isShowedExposureReported=!1,r.startExposureTime=0,r.isViewableExposureReported=!1,r.clickCount=0,r.lastLandingTime=0,r.lastJsapiName="",r.lastJsapiStatus=0,r.lastJsapiCostTime=0,r.isLandingPage=!1,r.landingPageCostTime=0,r.hideTime=0,r.hideDuration=0,r.isClosing=!1,r.isShowCloseTip=!1,r.clickFirstGradeTime=0,r.eventsMap={},r.source="",r.crtOrientation="portrait",r.adType="splashAd",r.adProxy=new y.AdProxy({adUnitId:"",adType:r.adType}),r.dynamicElems={},r.dynamicEmitter=null,r.tplComponent=null,Object(a.onSplashAdButtonClicked)((function(t){"close"===t.buttonType&&"launch"===t.source?(le.call(Object(s.default)(e),10),ye.call(Object(s.default)(e),["countTimer"])):"close"===t.buttonType&&"menu"===t.source?le.call(Object(s.default)(e),14):"back"!==t.buttonType||"menu"!==t.source||r.isLandingPage?"menu"===t.buttonType&&de.call(Object(s.default)(e),1):le.call(Object(s.default)(e),15)})),Object(a.onSplashAdWillLayout)((function(t){if(t.menuViewFrame&&("launch"===t.source?(q=t.menuViewFrame.y||0,r.dynamicEmitter&&r.isDynamic&&r.tplComponent&&q&&r.tplComponent.emitComponentEvent(k.ROOT_EVENT.SPLASHADMENUVIEW,{countdownTop:q})):"menu"===t.source&&(Y=t.menuViewFrame.height||0,r.dynamicEmitter&&r.isDynamic&&r.tplComponent&&Y&&r.tplComponent.emitComponentEvent(k.ROOT_EVENT.SPLASHADMENUVIEW,{navHeight:Y,menuHeight:172-Y})),I.IS_IOS&&r.firstInserted&&!r.adFeedbackInserted))try{Le.call(Object(s.default)(e))}catch(e){E.default.onReady((function(){r.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.iosThirdInsertFail,{source:r.source,msg:e})}))}})),Object(a.onSplashAdShow)((function(){r.adProxy.setTimePoint("p5"),"launch"!==r.source||r.isDynamic||(Ne.call(Object(s.default)(e)),Ee.call(Object(s.default)(e))),je.call(Object(s.default)(e)),Me.call(Object(s.default)(e)),r.hideTime>0&&(r.hideDuration=+new Date-r.hideTime),pe.call(Object(s.default)(e)),"launch"===r.source&&r.isShowedExposureReported&&Se.call(Object(s.default)(e)),r.isLandingPage&&(r.isLandingPage=!1)})),Object(a.onSplashAdHide)((function(){r.hideTime=+new Date,ye.call(Object(s.default)(e),["countTimer"])})),Object(a.onSplashAdClose)((function(){J||(J=!0),I.IS_IOS&&r.startExposureTime>0&&+new Date-r.startExposureTime>1e3&&pe.call(Object(s.default)(e),!0),r.container&&(r.isDynamic&&(r.tplComponent&&Object(A.unmount)(r.tplComponent),r.dynamicElems={},r.dynamicEmitter=null,r.tplComponent=null),g.nativeviewLayout.remove(r.container)),me.call(Object(s.default)(e))})),e}return Object(o.default)(n,[{key:"otherAdsEmitFetch",value:function(){Oe.call(this)}},{key:"show",value:function(e){var t,n=this;Q=!0;var a=Object(_.getPrivateThis)(this);a.showInfo=e,a.adProxy.scene=e.scene,a.adProxy.setTimePoint("p14");var r=a.adProxy.getTimePoint("p14");if(E.default.onReady((function(){setTimeout((function(){var t="launch"===e.source?j.SPLASHAD_IDKEY.launchAcceptShouldShow:j.SPLASHAD_IDKEY.menuAcceptShouldShow;a.adProxy.reportAdMonitorData(t)}),1500)})),"launch"===e.source){E.default.onReady((function(){setTimeout((function(){a.adFetchResult=_e.call(n)}),1500)}));var i={};try{var o=P.fs.readFileSync(ae,"utf-8");i.adInfos=o||{},a.adInfos=JSON.parse(o)}catch(e){a.adInfos={},i.errMsg=a.adProxy.processStackMsg(e),i.fileName=ae}if(0===Object.keys(a.adInfos).length)return X=j.SPLASHAD_ERROR_CODE.NO_ADINFOS,Ve.call(this,e,i,{startInit:r},"NO_ADINFOS");this.showAdByCheckAdsOnline(e,r);var s=a.adInfos.ads||[];a.adDatas={};var c,u=B(s);try{for(u.s();!(c=u.n()).done;){var l=c.value;try{var d=j.WX_AD_PATH+"/"+l.aid+".txt",f=P.fs.readFileSync(d,"utf-8"),p=JSON.parse(f);a.adDatas[l.aid]=p}catch(e){}}}catch(e){u.e(e)}finally{u.f()}try{var h=(null===(t=a.adInfos)||void 0===t?void 0:t.deviceInfo)||{};a.adProxy.setDeviceInfo(h)}catch(e){}}else"menu"===e.source&&this.showDetail(e)}},{key:"showAdByRealtimeFetch",value:function(e){var t=this,n=Object(_.getPrivateThis)(this),a={gameAppId:e.appId,deviceOrientation:e.screenHeight>e.screenWidth?"portrait":"landscape",screenWidth:e.screenWidth,screenHeight:e.screenHeight,systemVersion:e.osVersion,wechatVersion:e.weixinVersion,SDKVersion:b.SDKVersion,envVersion:e.osVersion,model:e.model,platform:e.osType,isWaGame:e.isGame,isIOS:I.IS_IOS,isAndroid:I.IS_ANDROID,adNetworkType:e.networkType};return _e.call(this,a).then((function(a){n.data=a,n.adProxy.data=a,t.showDetail(e,{aid:a.aid},!0)}))}},{key:"showAdByCheckAdsOnline",value:function(e,t){var n=this,a=Object(_.getPrivateThis)(this),r=a.adInfos.requestInQueue&&"true"===a.adInfos.requestInQueue,i=JSON.stringify({weapp_enter_scene:e.scene||0}),o={slot_id:j.POS_ID_MAP[a.adType],publisher_appid:e.appId,network_type:j.NET_TYPE_MAP[e.networkType]||0,app_service_type:e.isGame?2:1,sdk_version:b.SDKVersion,weixin_version:e.weixinVersion,os_version:e.osVersion,os_type:e.osType,model:e.model,ads:a.adInfos.ads||[],ext_check_ads_weapp:i};a.adProxy.setTimePoint("p15"),E.default.onReady((function(){setTimeout((function(){a.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.START_CHECK_AD_STATUS)}),1500)})),Object(M.checkAdStatus)(o,r).then((function(t){E.default.onReady((function(){setTimeout((function(){a.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.CHECK_AD_STATUS_SUCCESS)}),1500)})),a.adProxy.setTimePoint("p16");var r=JSON.parse(t.rawData);n.showDetail(e,r)})).catch((function(r){return a.adProxy.setTimePoint("p16"),Ve.call(n,e,{msg:r},{startInit:t},"CHECK_AD_STATUS_ERROR")}))}},{key:"showDetail",value:function(e){var t,n,a,i,o,s,c,u,l,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{aid:0},f=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return W(this,void 0,void 0,p.a.mark((function h(){var v,y,m,b,O,I,S,w,C,k,T,A,D=this;return p.a.wrap((function(p){for(;;)switch(p.prev=p.next){case 0:if(g.nativeviewLayout.style.width=e.screenWidth,g.nativeviewLayout.style.height=e.screenHeight,g.nativeviewLayout.auto=!1,v=Object(_.getPrivateThis)(this),y={startInit:v.adProxy.getTimePoint("p14"),startFetchTime:v.adProxy.getTimePoint("p15"),fetchCallbackTime:v.adProxy.getTimePoint("p16")},m=[],b=d.aid,"launch"!==e.source||!f){p.next=19;break}O=(null===(n=null===(t=null==v?void 0:v.data)||void 0===t?void 0:t.rerankingExtInfo)||void 0===n?void 0:n.material_hash)||"",$=j.WX_AD_PATH+"/"+b+"_"+O+".png",te=j.WX_AD_PATH+"/"+b+"_"+O+"_pure_color.png",ne=j.WX_AD_PATH+"/"+b+"_"+O+"_blur.png",m.push($),v.crtOrientation="portrait",I=(null===(a=null==v?void 0:v.data)||void 0===a?void 0:a.crtInfo[0])||{},Object.keys(I).length>0&&(S=I.width,w=I.height,v.crtOrientation=S>w?"landscape":"portrait"),"landscape"===v.crtOrientation&&m.push(te),p.next=37;break;case 19:if("launch"!==e.source||f){p.next=36;break}if(b&&"0"!==b){p.next=22;break}return p.abrupt("return",Ve.call(this,e,{adInfos:v.adInfos,checkAdStatus:d},y,"NO_AID"));case 22:if(b&&(null===(i=null==v?void 0:v.adDatas)||void 0===i?void 0:i[b])&&(v.data=v.adDatas[b],v.adProxy.data=v.adDatas[b]),v.crtOrientation=b?null===(s=null===(o=null==v?void 0:v.adInfos)||void 0===o?void 0:o.crtSizeMap)||void 0===s?void 0:s[b]:"",v.crtOrientation){p.next=26;break}return p.abrupt("return",Ve.call(this,e,{adInfos:v.adInfos,checkAdStatus:d},y,"CRT_ORIENTATION_NOT_SURE"));case 26:C=b?null===(c=null==v?void 0:v.adInfos)||void 0===c?void 0:c.materialHashMap[b]:"",ee=j.WX_AD_PATH+"/"+b+".txt",$=j.WX_AD_PATH+"/"+b+"_"+C+".png",te=j.WX_AD_PATH+"/"+b+"_"+C+"_pure_color.png",ne=j.WX_AD_PATH+"/"+b+"_"+C+"_blur.png",m.push(ee),m.push($),"landscape"===v.crtOrientation&&m.push(te),p.next=37;break;case 36:"menu"===e.source&&(k={},(null===(u=v.data)||void 0===u?void 0:u.crtInfo)&&v.data.crtInfo.length>0?(T=Object(r.default)(v.data.crtInfo,1),k=T[0]):(null===(l=v.data)||void 0===l?void 0:l.crtInfo)&&(k=v.data.crtInfo),Object.keys(k).length>0&&!v.crtOrientation&&(v.crtOrientation=v.data.crtInfo.width>v.data.crtInfo.height?"landscape":"portrait"),de.call(this,2));case 37:p.prev=37,"launch"===e.source&&m.forEach((function(e){P.fs.accessSync(e)})),p.next=51;break;case 41:if(p.prev=41,p.t0=p.catch(37),X=j.SPLASHAD_ERROR_CODE.MATERIAL_NOT_READY,A=v.adProxy.processStackMsg(p.t0),!v.data){p.next=50;break}return p.next=48,v.adProxy.handleBulkSaveMaterials(v.data);case 48:p.next=51;break;case 50:return p.abrupt("return",Ve.call(this,e,{adInfos:v.adInfos,checkAdStatus:d,msg:A},y,"MATERIAL_NOT_READY"));case 51:v.adProxy.setTimePoint("p17"),"launch"===e.source&&Object(P.showSplashAd)({showMenu:!0,show:!0,errCode:X,adCallTime:v.adProxy.getTimePoint("p17"),eventReceivedTime:y.startInit,cgiFetchStart:y.startFetchTime,cgiFetchCallBack:y.fetchCallbackTime,success:function(){v.adProxy.setTimePoint("p18"),E.default.onReady((function(){v.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.launchShowSplashAdSuccess)}))},fail:function(e){v.adProxy.setTimePoint("p18"),E.default.onReady((function(){v.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.showSplashAdFail,{adInfos:v.adInfos,checkAdStatus:d,msg:e})})),me.call(D),v.container&&g.nativeviewLayout.remove(v.container)}});try{v.adProxy.setTimePoint("p4"),We.call(this,e)}catch(t){be.call(this,{source:e.source,animated:!1},19),me.call(this),E.default.onReady((function(){v.adProxy.reportAdMonitorData(j.SPLASHAD_IDKEY.firstRenderFail,{adInfos:v.adInfos,source:e.source,msg:t})}))}case 54:case"end":return p.stop()}}),h,this,[[37,41]])})))}}]),n}(_.Component);try{var Ge=new Ue;Object(a.onShouldShowSplashAd)((function(e){Ge.show(e)}))}catch(e){}}]);;})(this);