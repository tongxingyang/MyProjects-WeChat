var e, r, t = {};

t.inflateRaw = function(e, r) {
    return t.F.inflate(e, r);
}, t.readUintBE = function(e) {
    return (e[0] << 24 | e[1] << 16 | e[2] << 8 | e[3]) >>> 0;
}, t.inflate = function(e, r) {
    var a = new Uint8Array(e.slice(0, 6));
    if (120 == a[0] && 156 == a[1]) {
        var n = t.readUintBE([ a[2], a[3], a[4], a[5] ]);
        return r = new Uint8Array(n), e instanceof ArrayBuffer ? t.inflateRaw(new Uint8Array(e, 6, e.byteLength - 6), r) : t.inflateRaw(new Uint8Array(e.buffer, e.byteOffset + 6, e.length - 6), r);
    }
    return e;
}, t.F = {}, t.F.inflate = function(e, r) {
    var a = Uint8Array;
    if (3 == e[0] && 0 == e[1]) return r || new a(0);
    var n = t.F, o = n._bitsF, f = n._bitsE, i = n._decodeTiny, c = n.makeCodes, l = n.codes2map, d = n._get17, s = n.U, u = null == r;
    u && (r = new a(e.length >>> 2 << 3));
    for (var p, v, h = 0, y = 0, w = 0, m = 0, F = 0, g = 0, b = 0, _ = 0, A = 0; 0 == h; ) if (h = o(e, A, 1), 
    y = o(e, A + 1, 2), A += 3, 0 != y) {
        if (u && (r = t.F._check(r, _ + (1 << 17))), 1 == y && (p = s.flmap, v = s.fdmap, 
        g = 511, b = 31), 2 == y) {
            w = f(e, A, 5) + 257, m = f(e, A + 5, 5) + 1, F = f(e, A + 10, 4) + 4;
            A += 14;
            for (var L = 0; L < 38; L += 2) s.itree[L] = 0, s.itree[L + 1] = 0;
            var C = 1;
            for (L = 0; L < F; L++) {
                var U = f(e, A + 3 * L, 3);
                s.itree[1 + (s.ordr[L] << 1)] = U, U > C && (C = U);
            }
            A += 3 * F, c(s.itree, C), l(s.itree, C, s.imap), p = s.lmap, v = s.dmap, A = i(s.imap, (1 << C) - 1, w + m, e, A, s.ttree);
            var B = n._copyOut(s.ttree, 0, w, s.ltree);
            g = (1 << B) - 1;
            var k = n._copyOut(s.ttree, w, m, s.dtree);
            b = (1 << k) - 1, c(s.ltree, B), l(s.ltree, B, p), c(s.dtree, k), l(s.dtree, k, v);
        }
        for (;;) {
            var O = p[d(e, A) & g];
            A += 15 & O;
            var x = O >>> 4;
            if (x >>> 8 == 0) r[_++] = x; else {
                if (256 == x) break;
                var S = _ + x - 254;
                if (x > 264) {
                    var E = s.ldef[x - 257];
                    S = _ + (E >>> 3) + f(e, A, 7 & E), A += 7 & E;
                }
                var R = v[d(e, A) & b];
                A += 15 & R;
                var I = R >>> 4, T = s.ddef[I], H = (T >>> 4) + o(e, A, 15 & T);
                for (A += 15 & T, u && (r = t.F._check(r, _ + (1 << 17))); _ < S; ) r[_] = r[_++ - H], 
                r[_] = r[_++ - H], r[_] = r[_++ - H], r[_] = r[_++ - H];
                _ = S;
            }
        }
    } else {
        0 != (7 & A) && (A += 8 - (7 & A));
        var M = 4 + (A >>> 3), D = e[M - 4] | e[M - 3] << 8;
        u && (r = t.F._check(r, _ + D)), r.set(new a(e.buffer, e.byteOffset + M, D), _), 
        A = M + D << 3, _ += D;
    }
    return r.length == _ ? r : r.slice(0, _);
}, t.F._check = function(e, r) {
    var t = e.length;
    if (r <= t) return e;
    var a = new Uint8Array(Math.max(t << 1, r));
    return a.set(e, 0), a;
}, t.F._decodeTiny = function(e, r, a, n, o, f) {
    for (var i = t.F._bitsE, c = t.F._get17, l = 0; l < a; ) {
        var d = e[c(n, o) & r];
        o += 15 & d;
        var s = d >>> 4;
        if (s <= 15) f[l] = s, l++; else {
            var u = 0, p = 0;
            16 == s ? (p = 3 + i(n, o, 2), o += 2, u = f[l - 1]) : 17 == s ? (p = 3 + i(n, o, 3), 
            o += 3) : 18 == s && (p = 11 + i(n, o, 7), o += 7);
            for (var v = l + p; l < v; ) f[l] = u, l++;
        }
    }
    return o;
}, t.F._copyOut = function(e, r, t, a) {
    for (var n = 0, o = 0, f = a.length >>> 1; o < t; ) {
        var i = e[o + r];
        a[o << 1] = 0, a[1 + (o << 1)] = i, i > n && (n = i), o++;
    }
    for (;o < f; ) a[o << 1] = 0, a[1 + (o << 1)] = 0, o++;
    return n;
}, t.F.makeCodes = function(e, r) {
    for (var a, n, o, f, i = t.F.U, c = e.length, l = i.bl_count, d = 0; d <= r; d++) l[d] = 0;
    for (d = 1; d < c; d += 2) l[e[d]]++;
    var s = i.next_code;
    for (a = 0, l[0] = 0, n = 1; n <= r; n++) a = a + l[n - 1] << 1, s[n] = a;
    for (o = 0; o < c; o += 2) 0 != (f = e[o + 1]) && (e[o] = s[f], s[f]++);
}, t.F.codes2map = function(e, r, a) {
    for (var n = e.length, o = t.F.U.rev15, f = 0; f < n; f += 2) if (0 != e[f + 1]) for (var i = f >> 1, c = e[f + 1], l = i << 4 | c, d = r - c, s = e[f] << d, u = s + (1 << d); s != u; ) {
        a[o[s] >>> 15 - r] = l, s++;
    }
}, t.F.revCodes = function(e, r) {
    for (var a = t.F.U.rev15, n = 15 - r, o = e.length, f = 0; f < o; f += 2) {
        var i = e[f] << r - e[f + 1];
        e[f] = a[i] >>> n;
    }
}, t.F._putsE = function(e, r, t) {
    t <<= 7 & r;
    var a = r >>> 3;
    e[a] |= t, e[a + 1] |= t >>> 8;
}, t.F._putsF = function(e, r, t) {
    t <<= 7 & r;
    var a = r >>> 3;
    e[a] |= t, e[a + 1] |= t >>> 8, e[a + 2] |= t >>> 16;
}, t.F._bitsE = function(e, r, t) {
    return (e[r >>> 3] | e[1 + (r >>> 3)] << 8) >>> (7 & r) & (1 << t) - 1;
}, t.F._bitsF = function(e, r, t) {
    return (e[r >>> 3] | e[1 + (r >>> 3)] << 8 | e[2 + (r >>> 3)] << 16) >>> (7 & r) & (1 << t) - 1;
}, t.F._get17 = function(e, r) {
    return (e[r >>> 3] | e[1 + (r >>> 3)] << 8 | e[2 + (r >>> 3)] << 16) >>> (7 & r);
}, t.F._get25 = function(e, r) {
    return (e[r >>> 3] | e[1 + (r >>> 3)] << 8 | e[2 + (r >>> 3)] << 16 | e[3 + (r >>> 3)] << 24) >>> (7 & r);
}, t.F.U = (e = Uint16Array, r = Uint32Array, {
    next_code: new e(16),
    bl_count: new e(16),
    ordr: [ 16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15 ],
    of0: [ 3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31, 35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 999, 999, 999 ],
    exb: [ 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 0, 0, 0 ],
    ldef: new e(32),
    df0: [ 1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193, 257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145, 8193, 12289, 16385, 24577, 65535, 65535 ],
    dxb: [ 0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, 0, 0 ],
    ddef: new r(32),
    flmap: new e(512),
    fltree: [],
    fdmap: new e(32),
    fdtree: [],
    lmap: new e(32768),
    ltree: [],
    ttree: [],
    dmap: new e(32768),
    dtree: [],
    imap: new e(512),
    itree: [],
    rev15: new e(32768),
    lhst: new r(286),
    dhst: new r(30),
    ihst: new r(19),
    lits: new r(15e3),
    strt: new e(65536),
    prev: new e(32768)
}), function() {
    for (var e = t.F.U, r = 0; r < 32768; r++) {
        var a = r;
        a = (4278255360 & (a = (4042322160 & (a = (3435973836 & (a = (2863311530 & a) >>> 1 | (1431655765 & a) << 1)) >>> 2 | (858993459 & a) << 2)) >>> 4 | (252645135 & a) << 4)) >>> 8 | (16711935 & a) << 8, 
        e.rev15[r] = (a >>> 16 | a << 16) >>> 17;
    }
    function n(e, r, t) {
        for (;0 != r--; ) e.push(0, t);
    }
    for (r = 0; r < 32; r++) e.ldef[r] = e.of0[r] << 3 | e.exb[r], e.ddef[r] = e.df0[r] << 4 | e.dxb[r];
    n(e.fltree, 144, 8), n(e.fltree, 112, 9), n(e.fltree, 24, 7), n(e.fltree, 8, 8), 
    t.F.makeCodes(e.fltree, 9), t.F.codes2map(e.fltree, 9, e.flmap), t.F.revCodes(e.fltree, 9), 
    n(e.fdtree, 32, 5), t.F.makeCodes(e.fdtree, 5), t.F.codes2map(e.fdtree, 5, e.fdmap), 
    t.F.revCodes(e.fdtree, 5), n(e.itree, 19, 0), n(e.ltree, 286, 0), n(e.dtree, 30, 0), 
    n(e.ttree, 320, 0);
}();

var a = Laya.Loader;

a.prototype.parsePLFBData = function(e) {
    var r, a, n = new Laya.Byte(t.inflate(e));
    for (a = n.getInt32(), r = 0; r < a; r++) this.parseOnePLFBFile(n);
};

var n = a.prototype.onLoaded;

a.prototype.onLoaded = function() {
    var e = arguments.length > 0 && void 0 !== arguments[0] ? arguments[0] : null, r = this._type;
    r == a.JSON && e instanceof ArrayBuffer ? (e = JSON.parse(this.Utf8ArrayToStr(new Uint8Array(e))), 
    this.complete(e)) : n.call(this, e);
};

var o = Laya.Loader.prototype._loadHtmlImage;

Laya.Loader.prototype._loadHtmlImage = function(e, r, t, n, f) {
    if (a.preLoadedMap[e]) if (window.Blob && window.FileReader) this.createHtmlImageAsync(a.preLoadedMap[e], e, r, t, n, f); else {
        var i = this.arrayBufferToBase64(e, a.preLoadedMap[e]);
        o.call(this, i, r, t, n, f);
    } else o.call(this, e, r, t, n, f);
}, a.prototype.createHtmlImageAsync = function(e, r, t, a, n, o) {
    var f;
    function i() {
        var e = f;
        e.onload = null, e.onerror = null, delete Laya.Loader._imgCache[r];
    }
    (f = new Laya.Browser.window.Image()).crossOrigin = "", f.onload = function() {
        i(), a.call(t, f);
    }, f.onerror = function() {
        i(), o.call(n);
    };
    var c = new Blob([ e ]), l = new FileReader();
    l.onload = function(e) {
        f.src = e.target.result, Laya.Loader._imgCache = f;
    }, l.readAsDataURL(c);
}, a.prototype.arrayBufferToBase64 = function(e, r) {
    var t = "data:image/jpeg;base64,";
    "png" == Laya.Utils.getFileExtension(e) && (t = "data:image/png;base64,");
    for (var a = "", n = new Uint8Array(r), o = n.byteLength, f = 0; f < o; f++) a += String.fromCharCode(n[f]);
    return t + (window.btoa ? window.btoa(a) : this.btoa(a));
}, a.prototype.btoa = function(e) {
    for (var r, t, a, n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/", o = 0, f = e.length, i = ""; o < f; ) {
        if (r = 255 & e.charCodeAt(o++), o == f) {
            i += n.charAt(r >> 2), i += n.charAt((3 & r) << 4), i += "==";
            break;
        }
        if (t = e.charCodeAt(o++), o == f) {
            i += n.charAt(r >> 2), i += n.charAt((3 & r) << 4 | (240 & t) >> 4), i += n.charAt((15 & t) << 2), 
            i += "=";
            break;
        }
        a = e.charCodeAt(o++), i += n.charAt(r >> 2), i += n.charAt((3 & r) << 4 | (240 & t) >> 4), 
        i += n.charAt((15 & t) << 2 | (192 & a) >> 6), i += n.charAt(63 & a);
    }
    return i;
}, a.prototype.Utf8ArrayToStr = function(e) {
    var r, t, a, n, o, f;
    for (r = "", a = e.length, t = 0; t < a; ) switch ((n = e[t++]) >> 4) {
      case 0:
      case 1:
      case 2:
      case 3:
      case 4:
      case 5:
      case 6:
      case 7:
        r += String.fromCharCode(n);
        break;

      case 12:
      case 13:
        o = e[t++], r += String.fromCharCode((31 & n) << 6 | 63 & o);
        break;

      case 14:
        o = e[t++], f = e[t++], r += String.fromCharCode((15 & n) << 12 | (63 & o) << 6 | (63 & f) << 0);
    }
    return r;
};

var f = Laya.Camera.prototype._parse;

Laya.Camera.prototype._parse = function(e, r) {
    e.enableHDR = !1, f.call(this, e, r);
};